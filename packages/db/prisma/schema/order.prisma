model Order {
  id            String      @id

  status        OrderStatus

  customerName  String      @map("customername")
  customerPhone String      @map("customerphone")

  address       String?

  notes         String?

  orderItems       OrderItem[]
  whatsappMessages WhatsAppMessage[]

  updatedAt     DateTime    @updatedAt
  createdAt     DateTime    @default(now())

  storeId       BigInt      @map("storeid")
  store            Store             @relation(fields: [storeId], references: [id], onDelete: Cascade)

  customerId    String?     @map("customerid")
  customer         Customer?         @relation(fields: [customerId], references: [id], onDelete: SetNull)


  @@map("orders")
}

model OrderItem {
  id        BigInt   @id @default(autoincrement())
  orderId   String   @map("orderid")
  productId String   @map("productid")
  quantity  Int
  price     Decimal  @db.Decimal(10, 2)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  order   Order   @relation(fields: [orderId], references: [id], onDelete: Cascade)
  product Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@map("orderitem")
}
