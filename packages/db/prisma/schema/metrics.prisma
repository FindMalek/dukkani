/**
 * Represents daily sales metrics for a store.
 * Tracks aggregated sales data per day, including total revenue and order count.
 * Used for analytics, reporting, and business intelligence.
 * **Key Fields:**
 * - `id`: Unique identifier (CUID)
 * - `storeId`: Reference to the Store these metrics belong to
 * - `date`: The date these metrics represent (stored as Date, no time component)
 * - `totalSales`: Total sales amount for the day (stored as Decimal for accuracy)
 * - `orderCount`: Number of orders placed on this day
 * - `createdAt`: Timestamp when the metric record was created
 * - `updatedAt`: Timestamp when the metric record was last updated
 * **Relationships:**
 * - Belongs to one Store
 * **Business Logic:**
 * - One metric record per store per day (enforced by unique constraint)
 * - Metrics are typically aggregated from orders at end of day
 * - Used for generating reports, charts, and business insights
 * - When a store is deleted, all its metrics are cascade deleted
 * - Date field allows querying metrics by time range
 */
model SalesMetric {
  id String @id @default(cuid())

  date       DateTime @db.Date
  orderCount Int      @map("order_count")
  totalSales Decimal  @map("total_sales") @db.Decimal(10, 2)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  storeId String @map("store_id")
  store   Store  @relation(fields: [storeId], references: [id], onDelete: Cascade)

  @@unique([storeId, date])
  @@map("sales_metrics")
}