/**
 * Represents a customer registered in a store.
 * Customers can place multiple orders and are identified by their phone number within a store.
 * The same phone number can be a customer in multiple stores (different store contexts).
 * **Key Fields:**
 * - `id`: Unique identifier (CUID)
 * - `name`: Customer's name
 * - `phone`: Customer's phone number (used for identification)
 * - `storeId`: Reference to the Store this customer belongs to
 * - `createdAt`: Timestamp when the customer was created
 * - `updatedAt`: Timestamp when the customer was last updated
 * **Relationships:**
 * - Belongs to one Store
 * - Has many Orders
 * **Business Logic:**
 * - Phone number must be unique per store (enforced by unique constraint on [phone, storeId])
 * - Same phone number can exist in different stores
 * - When a store is deleted, all its customers are cascade deleted
 * - Customers can place orders, and orders can optionally link to a customer record
 * - Guest orders (without customer record) are also supported
 */
model Customer {
  id String @id @default(cuid())

  name  String
  phone String

  orders Order[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  storeId String @map("store_id")
  store   Store  @relation(fields: [storeId], references: [id], onDelete: Cascade)

  @@unique([phone, storeId])
  @@map("customers")
}