module.exports=[61724,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-route-turbo.runtime.prod.js"))},20495,(e,t,r)=>{t.exports=e.r(61724)},67168,e=>{"use strict";var t,r=((t={}).PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE",t.IMAGE="IMAGE",t);e.s(["RouteKind",()=>r])},66038,e=>{"use strict";var t,r,n,i,a,o,s,l,u,c,d,p,f=((t=f||{}).handleRequest="BaseServer.handleRequest",t.run="BaseServer.run",t.pipe="BaseServer.pipe",t.getStaticHTML="BaseServer.getStaticHTML",t.render="BaseServer.render",t.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",t.renderToResponse="BaseServer.renderToResponse",t.renderToHTML="BaseServer.renderToHTML",t.renderError="BaseServer.renderError",t.renderErrorToResponse="BaseServer.renderErrorToResponse",t.renderErrorToHTML="BaseServer.renderErrorToHTML",t.render404="BaseServer.render404",t),m=((r=m||{}).loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",r.loadComponents="LoadComponents.loadComponents",r),h=((n=h||{}).getRequestHandler="NextServer.getRequestHandler",n.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",n.getServer="NextServer.getServer",n.getServerRequestHandler="NextServer.getServerRequestHandler",n.createServer="createServer.createServer",n),g=((i=g||{}).compression="NextNodeServer.compression",i.getBuildId="NextNodeServer.getBuildId",i.createComponentTree="NextNodeServer.createComponentTree",i.clientComponentLoading="NextNodeServer.clientComponentLoading",i.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",i.generateStaticRoutes="NextNodeServer.generateStaticRoutes",i.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",i.generatePublicRoutes="NextNodeServer.generatePublicRoutes",i.generateImageRoutes="NextNodeServer.generateImageRoutes.route",i.sendRenderResult="NextNodeServer.sendRenderResult",i.proxyRequest="NextNodeServer.proxyRequest",i.runApi="NextNodeServer.runApi",i.render="NextNodeServer.render",i.renderHTML="NextNodeServer.renderHTML",i.imageOptimizer="NextNodeServer.imageOptimizer",i.getPagePath="NextNodeServer.getPagePath",i.getRoutesManifest="NextNodeServer.getRoutesManifest",i.findPageComponents="NextNodeServer.findPageComponents",i.getFontManifest="NextNodeServer.getFontManifest",i.getServerComponentManifest="NextNodeServer.getServerComponentManifest",i.getRequestHandler="NextNodeServer.getRequestHandler",i.renderToHTML="NextNodeServer.renderToHTML",i.renderError="NextNodeServer.renderError",i.renderErrorToHTML="NextNodeServer.renderErrorToHTML",i.render404="NextNodeServer.render404",i.startResponse="NextNodeServer.startResponse",i.route="route",i.onProxyReq="onProxyReq",i.apiResolver="apiResolver",i.internalFetch="internalFetch",i),y=((a=y||{}).startServer="startServer.startServer",a),v=((o=v||{}).getServerSideProps="Render.getServerSideProps",o.getStaticProps="Render.getStaticProps",o.renderToString="Render.renderToString",o.renderDocument="Render.renderDocument",o.createBodyResult="Render.createBodyResult",o),b=((s=b||{}).renderToString="AppRender.renderToString",s.renderToReadableStream="AppRender.renderToReadableStream",s.getBodyResult="AppRender.getBodyResult",s.fetch="AppRender.fetch",s),w=((l=w||{}).executeRoute="Router.executeRoute",l),_=((u=_||{}).runHandler="Node.runHandler",u),x=((c=x||{}).runHandler="AppRouteRouteHandlers.runHandler",c),E=((d=E||{}).generateMetadata="ResolveMetadata.generateMetadata",d.generateViewport="ResolveMetadata.generateViewport",d),I=((p=I||{}).execute="Middleware.execute",p);e.s(["AppRenderSpan",()=>b,"BaseServerSpan",()=>f,"LogSpanAllowList",0,["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"],"NextNodeServerSpan",()=>g,"NextVanillaSpanAllowlist",0,["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],"NodeSpan",()=>_])},86131,(e,t,r)=>{(()=>{"use strict";let r,n,i,a,o;var s,l,u,c,d,p,f,m,h,g,y,v,b,w,_,x,E={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(223),i=r(172),a=r(930),o="context",s=new n.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(o,e,a.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(o)||s}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(o,a.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(56),i=r(912),a=r(957),o=r(172);class s{constructor(){function e(e){return function(...t){let r=(0,o.getGlobal)("diag");if(r)return r[e](...t)}}const t=this;t.setLogger=(e,r={logLevel:a.DiagLogLevel.INFO})=>{var n,s,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=e.stack)?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let u=(0,o.getGlobal)("diag"),c=(0,i.createLogLevelDiagLogger)(null!=(s=r.logLevel)?s:a.DiagLogLevel.INFO,e);if(u&&!r.suppressOverrideMessage){let e=null!=(l=Error().stack)?l:"<failed to generate stacktrace>";u.warn(`Current logger will be overwritten from ${e}`),c.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,o.registerGlobal)("diag",c,t,!0)},t.disable=()=>{(0,o.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new s),this._instance}}t.DiagAPI=s},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(660),i=r(172),a=r(930),o="metrics";class s{constructor(){}static getInstance(){return this._instance||(this._instance=new s),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(o,e,a.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(o)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(o,a.DiagAPI.instance())}}t.MetricsAPI=s},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(172),i=r(874),a=r(194),o=r(277),s=r(369),l=r(930),u="propagation",c=new i.NoopTextMapPropagator;class d{constructor(){this.createBaggage=s.createBaggage,this.getBaggage=o.getBaggage,this.getActiveBaggage=o.getActiveBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(u,e,l.DiagAPI.instance())}inject(e,t,r=a.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=a.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(u,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(u)||c}}t.PropagationAPI=d},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(172),i=r(846),a=r(139),o=r(607),s=r(930),l="trace";class u{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=a.wrapSpanContext,this.isSpanContextValid=a.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getActiveSpan=o.getActiveSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}static getInstance(){return this._instance||(this._instance=new u),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(l,this._proxyTracerProvider,s.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(l,s.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=u},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(491),i=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function a(e){return e.getValue(i)||void 0}t.getBaggage=a,t.getActiveBaggage=function(){return a(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(i,t)},t.deleteBaggage=function(e){return e.deleteValue(i)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(930),i=r(993),a=r(830),o=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(o.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:a.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(780);t.NoopContextManager=class{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(172);function i(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return i("debug",this._namespace,e)}error(...e){return i("error",this._namespace,e)}info(...e){return i("info",this._namespace,e)}warn(...e){return i("warn",this._namespace,e)}verbose(...e){return i("verbose",this._namespace,e)}}},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];t.DiagConsoleLogger=class{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,(r=t.DiagLogLevel||(t.DiagLogLevel={}))[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(200),i=r(521),a=r(130),o=i.VERSION.split(".")[0],s=Symbol.for(`opentelemetry.js.api.${o}`),l=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var a;let o=l[s]=null!=(a=l[s])?a:{version:i.VERSION};if(!n&&o[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(o.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${o.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return o[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null==(t=l[s])?void 0:t.version;if(n&&(0,a.isCompatible)(n))return null==(r=l[s])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=l[s];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(521),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function a(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=a.prerelease)return function(t){return t===e};function o(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return o(e);let s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease||a.major!==s.major)return o(e);if(0===a.major)return a.minor===s.minor&&a.patch<=s.patch?(t.add(e),!0):o(e);return a.minor<=s.minor?(t.add(e),!0):o(e)}}t._makeCompatibilityCheck=a,t.isCompatible=a(n.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,(r=t.ValueType||(t.ValueType={}))[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class a extends n{add(e,t){}}t.NoopUpDownCounterMetric=a;class o extends n{record(e,t){}}t.NoopHistogramMetric=o;class s{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=s;class l extends s{}t.NoopObservableCounterMetric=l;class u extends s{}t.NoopObservableGaugeMetric=u;class c extends s{}t.NoopObservableUpDownCounterMetric=c,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new o,t.NOOP_UP_DOWN_COUNTER_METRIC=new a,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new u,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new c,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(102);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},200:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46),t)},651:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:e.g},46:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0,t.NoopTextMapPropagator=class{inject(e,t){}extract(e,t){return e}fields(){return[]}}},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(476);t.NonRecordingSpan=class{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(491),i=r(607),a=r(403),o=r(139),s=n.ContextAPI.getInstance();t.NoopTracer=class{startSpan(e,t,r=s.active()){var n;if(null==t?void 0:t.root)return new a.NonRecordingSpan;let l=r&&(0,i.getSpanContext)(r);return"object"==typeof(n=l)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&(0,o.isSpanContextValid)(l)?new a.NonRecordingSpan(l):new a.NonRecordingSpan}startActiveSpan(e,t,r,n){let a,o,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(a=t,l=r):(a=t,o=r,l=n);let u=null!=o?o:s.active(),c=this.startSpan(e,a,u),d=(0,i.setSpan)(u,c);return s.with(d,l,void 0,c)}}},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(614);t.NoopTracerProvider=class{getTracer(e,t,r){return new n.NoopTracer}}},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=new(r(614)).NoopTracer;t.ProxyTracer=class{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(125),i=new(r(124)).NoopTracerProvider;t.ProxyTracerProvider=class{getTracer(e,t,r){var i;return null!=(i=this.getDelegateTracer(e,t,r))?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)}}},996:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,(r=t.SamplingDecision||(t.SamplingDecision={}))[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(780),i=r(403),a=r(491),o=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function s(e){return e.getValue(o)||void 0}function l(e,t){return e.setValue(o,t)}t.getSpan=s,t.getActiveSpan=function(){return s(a.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(o)},t.setSpanContext=function(e,t){return l(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=s(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(564);class i{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf("=");if(-1!==i){let a=r.slice(0,i),o=r.slice(i+1,t.length);(0,n.validateKey)(a)&&(0,n.validateValue)(o)&&e.set(a,o)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new i;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=i},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,a=RegExp(`^(?:${n}|${i})$`),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/;t.validateKey=function(e){return a.test(e)},t.validateValue=function(e){return o.test(e)&&!s.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(325);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,(r=t.SpanKind||(t.SpanKind={}))[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(476),i=r(403),a=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function s(e){return a.test(e)&&e!==n.INVALID_TRACEID}function l(e){return o.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=s,t.isValidSpanId=l,t.isSpanContextValid=function(e){return s(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},847:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"},475:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,(r=t.TraceFlags||(t.TraceFlags={}))[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},I={};function S(e){var t=I[e];if(void 0!==t)return t.exports;var r=I[e]={exports:{}},n=!0;try{E[e].call(r.exports,r,r.exports,S),n=!1}finally{n&&delete I[e]}return r.exports}S.ab="/ROOT/node_modules/.pnpm/next@16.0.0_babel-plugin-react-compiler@1.0.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/compiled/@opentelemetry/api/";var $={};Object.defineProperty($,"__esModule",{value:!0}),$.trace=$.propagation=$.metrics=$.diag=$.context=$.INVALID_SPAN_CONTEXT=$.INVALID_TRACEID=$.INVALID_SPANID=$.isValidSpanId=$.isValidTraceId=$.isSpanContextValid=$.createTraceState=$.TraceFlags=$.SpanStatusCode=$.SpanKind=$.SamplingDecision=$.ProxyTracerProvider=$.ProxyTracer=$.defaultTextMapSetter=$.defaultTextMapGetter=$.ValueType=$.createNoopMeter=$.DiagLogLevel=$.DiagConsoleLogger=$.ROOT_CONTEXT=$.createContextKey=$.baggageEntryMetadataFromString=void 0,s=S(369),Object.defineProperty($,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return s.baggageEntryMetadataFromString}}),l=S(780),Object.defineProperty($,"createContextKey",{enumerable:!0,get:function(){return l.createContextKey}}),Object.defineProperty($,"ROOT_CONTEXT",{enumerable:!0,get:function(){return l.ROOT_CONTEXT}}),u=S(972),Object.defineProperty($,"DiagConsoleLogger",{enumerable:!0,get:function(){return u.DiagConsoleLogger}}),c=S(957),Object.defineProperty($,"DiagLogLevel",{enumerable:!0,get:function(){return c.DiagLogLevel}}),d=S(102),Object.defineProperty($,"createNoopMeter",{enumerable:!0,get:function(){return d.createNoopMeter}}),p=S(901),Object.defineProperty($,"ValueType",{enumerable:!0,get:function(){return p.ValueType}}),f=S(194),Object.defineProperty($,"defaultTextMapGetter",{enumerable:!0,get:function(){return f.defaultTextMapGetter}}),Object.defineProperty($,"defaultTextMapSetter",{enumerable:!0,get:function(){return f.defaultTextMapSetter}}),m=S(125),Object.defineProperty($,"ProxyTracer",{enumerable:!0,get:function(){return m.ProxyTracer}}),h=S(846),Object.defineProperty($,"ProxyTracerProvider",{enumerable:!0,get:function(){return h.ProxyTracerProvider}}),g=S(996),Object.defineProperty($,"SamplingDecision",{enumerable:!0,get:function(){return g.SamplingDecision}}),y=S(357),Object.defineProperty($,"SpanKind",{enumerable:!0,get:function(){return y.SpanKind}}),v=S(847),Object.defineProperty($,"SpanStatusCode",{enumerable:!0,get:function(){return v.SpanStatusCode}}),b=S(475),Object.defineProperty($,"TraceFlags",{enumerable:!0,get:function(){return b.TraceFlags}}),w=S(98),Object.defineProperty($,"createTraceState",{enumerable:!0,get:function(){return w.createTraceState}}),_=S(139),Object.defineProperty($,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty($,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty($,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}}),x=S(476),Object.defineProperty($,"INVALID_SPANID",{enumerable:!0,get:function(){return x.INVALID_SPANID}}),Object.defineProperty($,"INVALID_TRACEID",{enumerable:!0,get:function(){return x.INVALID_TRACEID}}),Object.defineProperty($,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return x.INVALID_SPAN_CONTEXT}}),r=S(67),Object.defineProperty($,"context",{enumerable:!0,get:function(){return r.context}}),n=S(506),Object.defineProperty($,"diag",{enumerable:!0,get:function(){return n.diag}}),i=S(886),Object.defineProperty($,"metrics",{enumerable:!0,get:function(){return i.metrics}}),a=S(939),Object.defineProperty($,"propagation",{enumerable:!0,get:function(){return a.propagation}}),o=S(845),Object.defineProperty($,"trace",{enumerable:!0,get:function(){return o.trace}}),$.default={context:r.context,diag:n.diag,metrics:i.metrics,propagation:a.propagation,trace:o.trace},t.exports=$})()},41632,e=>{"use strict";let t,r;var n=e.i(66038);try{t=e.r(70406)}catch(r){t=e.r(86131)}let{context:i,propagation:a,trace:o,SpanStatusCode:s,SpanKind:l,ROOT_CONTEXT:u}=t;class c extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}let d=(e,t)=>{"object"==typeof t&&null!==t&&t instanceof c&&t.bubble?e.setAttribute("next.bubble",!0):(t&&(e.recordException(t),e.setAttribute("error.type",t.name)),e.setStatus({code:s.ERROR,message:null==t?void 0:t.message})),e.end()},p=new Map,f=t.createContextKey("next.rootSpanId"),m=0,h={set(e,t,r){e.push({key:t,value:r})}},g=(r=new class e{getTracerInstance(){return o.getTracer("next.js","0.0.1")}getContext(){return i}getTracePropagationData(){let e=i.active(),t=[];return a.inject(e,t,h),t}getActiveScopeSpan(){return o.getSpan(null==i?void 0:i.active())}withPropagatedContext(e,t,r){let n=i.active();if(o.getSpanContext(n))return t();let s=a.extract(n,e,r);return i.with(s,t)}trace(...e){var t;let[r,a,s]=e,{fn:l,options:c}="function"==typeof a?{fn:a,options:{}}:{fn:s,options:{...a}},h=c.spanName??r;if(!n.NextVanillaSpanAllowlist.includes(r)&&"1"!==process.env.NEXT_OTEL_VERBOSE||c.hideSpan)return l();let g=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan()),y=!1;g?(null==(t=o.getSpanContext(g))?void 0:t.isRemote)&&(y=!0):(g=(null==i?void 0:i.active())??u,y=!0);let v=m++;return c.attributes={"next.span_name":h,"next.span_type":r,...c.attributes},i.with(g.setValue(f,v),()=>this.getTracerInstance().startActiveSpan(h,c,e=>{let t="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,i=()=>{p.delete(v),t&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&n.LogSpanAllowList.includes(r||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(r.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:t,end:performance.now()})};y&&p.set(v,new Map(Object.entries(c.attributes??{})));try{if(l.length>1)return l(e,t=>d(e,t));let t=l(e);if(null!==t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then)return t.then(t=>(e.end(),t)).catch(t=>{throw d(e,t),t}).finally(i);return e.end(),i(),t}catch(t){throw d(e,t),i(),t}}))}wrap(...e){let t=this,[r,a,o]=3===e.length?e:[e[0],{},e[1]];return n.NextVanillaSpanAllowlist.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=a;"function"==typeof e&&"function"==typeof o&&(e=e.apply(this,arguments));let n=arguments.length-1,s=arguments[n];if("function"!=typeof s)return t.trace(r,e,()=>o.apply(this,arguments));{let a=t.getContext().bind(i.active(),s);return t.trace(r,e,(e,t)=>(arguments[n]=function(e){return null==t||t(e),a.apply(this,arguments)},o.apply(this,arguments)))}}:o}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?o.setSpan(i.active(),e):void 0}getRootSpanAttributes(){let e=i.active().getValue(f);return p.get(e)}setRootSpanAttribute(e,t){let r=i.active().getValue(f),n=p.get(r);n&&!n.has(e)&&n.set(e,t)}},()=>r);e.s(["SpanKind",()=>l,"getTracer",()=>g],41632)},98837,e=>{"use strict";let t={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};t.reactServerComponents,t.actionBrowser,t.reactServerComponents,t.actionBrowser,t.instrument,t.middleware,t.apiNode,t.apiEdge,t.serverSideRendering,t.appPagesBrowser,t.reactServerComponents,t.actionBrowser,t.serverSideRendering,t.appPagesBrowser,t.shared,t.instrument,t.middleware,t.reactServerComponents,t.serverSideRendering,t.appPagesBrowser,t.actionBrowser,e.s(["CACHE_ONE_YEAR",0,31536e3,"HTML_CONTENT_TYPE_HEADER",0,"text/html; charset=utf-8","INFINITE_CACHE",0,0xfffffffe,"NEXT_CACHE_TAGS_HEADER",0,"x-next-cache-tags","NEXT_CACHE_TAG_MAX_ITEMS",0,128,"NEXT_CACHE_TAG_MAX_LENGTH",0,256,"NEXT_INTERCEPTION_MARKER_PREFIX",0,"nxtI","NEXT_QUERY_PARAM_PREFIX",0,"nxtP","PRERENDER_REVALIDATE_HEADER",0,"x-prerender-revalidate","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER",0,"x-prerender-revalidate-if-generated"])},68578,e=>{"use strict";class t extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}e.s(["InvariantError",()=>t])},94798,e=>{"use strict";var t,r,n=((t={}).APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE",t.PAGES="PAGES",t.FETCH="FETCH",t.REDIRECT="REDIRECT",t.IMAGE="IMAGE",t),i=((r={}).APP_PAGE="APP_PAGE",r.APP_ROUTE="APP_ROUTE",r.PAGES="PAGES",r.FETCH="FETCH",r.IMAGE="IMAGE",r);e.s(["CachedRouteKind",()=>n,"IncrementalCacheKind",()=>i])},84259,e=>{"use strict";let t=Symbol.for("NextInternalRequestMeta");function r(e,r){let n=e[t]||{};return"string"==typeof r?n[r]:n}function n(e,n,i){let a=r(e);return a[n]=i,e[t]=a,a}e.s(["NEXT_REQUEST_META",0,t,"addRequestMeta",()=>n,"getRequestMeta",()=>r])},73157,e=>{"use strict";function t(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function r(e){var t,r,n,i,a,o=[],s=0;function l(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,a=!1;l();)if(","===(r=e.charAt(s))){for(n=s,s+=1,l(),i=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(a=!0,s=i,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!a||s>=e.length)&&o.push(e.substring(t,e.length))}return o}function n(e){let t={},n=[];if(e)for(let[i,a]of e.entries())"set-cookie"===i.toLowerCase()?(n.push(...r(a)),t[i]=1===n.length?n[0]:n):t[i]=a;return t}function i(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}e.i(98837),e.s(["fromNodeOutgoingHttpHeaders",()=>t,"splitCookiesString",()=>r,"toNodeOutgoingHttpHeaders",()=>n,"validateURL",()=>i])},92741,89951,69552,e=>{"use strict";function t(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function r(e,r){if("string"!=typeof e)return!1;let{pathname:n}=t(e);return n===r||n.startsWith(r+"/")}function n(e,t){if(!r(e,t))return e;let n=e.slice(t.length);return n.startsWith("/")?n:`/${n}`}e.s(["parsePath",()=>t],92741),e.s(["pathHasPrefix",()=>r],89951),e.s(["removePathPrefix",()=>n],69552)},75616,28114,e=>{"use strict";var t=e.i(84259),r=e.i(73157);function n(e){return e.replace(/\/$/,"")||"/"}var i=e.i(92741);function a(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:a}=(0,i.parsePath)(e);return`${t}${r}${n}${a}`}function o(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:a}=(0,i.parsePath)(e);return`${r}${t}${n}${a}`}var s=e.i(89951);let l=new WeakMap;function u(e,t){let r;if(!t)return{pathname:e};let n=l.get(t);n||(n=t.map(e=>e.toLowerCase()),l.set(t,n));let i=e.split("/",2);if(!i[1])return{pathname:e};let a=i[1].toLowerCase(),o=n.indexOf(a);return o<0?{pathname:e}:(r=t[o],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}var c=e.i(69552);let d=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function p(e,t){return new URL(String(e).replace(d,"localhost"),t&&String(t).replace(d,"localhost"))}let f=Symbol("NextURLInternal");class m{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[f]={url:p(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,n,i;let a=function(e,t){let{basePath:r,i18n:n,trailingSlash:i}=t.nextConfig??{},a={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):i};r&&(0,s.pathHasPrefix)(a.pathname,r)&&(a.pathname=(0,c.removePathPrefix)(a.pathname,r),a.basePath=r);let o=a.pathname;if(a.pathname.startsWith("/_next/data/")&&a.pathname.endsWith(".json")){let e=a.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");a.buildId=e[0],o="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(a.pathname=o)}if(n){let e=t.i18nProvider?t.i18nProvider.analyze(a.pathname):u(a.pathname,n.locales);a.locale=e.detectedLocale,a.pathname=e.pathname??a.pathname,!e.detectedLocale&&a.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(o):u(o,n.locales)).detectedLocale&&(a.locale=e.detectedLocale)}return a}(this[f].url.pathname,{nextConfig:this[f].options.nextConfig,parseData:!0,i18nProvider:this[f].options.i18nProvider}),o=function(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[f].url,this[f].options.headers);this[f].domainLocale=this[f].options.i18nProvider?this[f].options.i18nProvider.detectDomainLocale(o):function(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}(null==(t=this[f].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,o);let l=(null==(r=this[f].domainLocale)?void 0:r.defaultLocale)||(null==(i=this[f].options.nextConfig)||null==(n=i.i18n)?void 0:n.defaultLocale);this[f].url.pathname=a.pathname,this[f].defaultLocale=l,this[f].basePath=a.basePath??"",this[f].buildId=a.buildId,this[f].locale=a.locale??l,this[f].trailingSlash=a.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let i=e.toLowerCase();return!n&&((0,s.pathHasPrefix)(i,"/api")||(0,s.pathHasPrefix)(i,`/${t.toLowerCase()}`))?e:a(e,`/${t}`)}((e={basePath:this[f].basePath,buildId:this[f].buildId,defaultLocale:this[f].options.forceLocale?void 0:this[f].defaultLocale,locale:this[f].locale,pathname:this[f].url.pathname,trailingSlash:this[f].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=n(t)),e.buildId&&(t=o(a(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=a(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:o(t,"/"):n(t)}formatSearch(){return this[f].url.search}get buildId(){return this[f].buildId}set buildId(e){this[f].buildId=e}get locale(){return this[f].locale??""}set locale(e){var t,r;if(!this[f].locale||!(null==(r=this[f].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[f].locale=e}get defaultLocale(){return this[f].defaultLocale}get domainLocale(){return this[f].domainLocale}get searchParams(){return this[f].url.searchParams}get host(){return this[f].url.host}set host(e){this[f].url.host=e}get hostname(){return this[f].url.hostname}set hostname(e){this[f].url.hostname=e}get port(){return this[f].url.port}set port(e){this[f].url.port=e}get protocol(){return this[f].url.protocol}set protocol(e){this[f].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[f].url=p(e),this.analyze()}get origin(){return this[f].url.origin}get pathname(){return this[f].url.pathname}set pathname(e){this[f].url.pathname=e}get hash(){return this[f].url.hash}set hash(e){this[f].url.hash=e}get search(){return this[f].url.search}set search(e){this[f].url.search=e}get password(){return this[f].url.password}set password(e){this[f].url.password=e}get username(){return this[f].url.username}set username(e){this[f].url.username=e}get basePath(){return this[f].basePath}set basePath(e){this[f].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new m(String(this),this[f].options)}}class h extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class g extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}var y=e.i(9447);let v=Symbol("internal request");class b extends Request{constructor(e,t={}){const n="string"!=typeof e&&"url"in e?e.url:String(e);(0,r.validateURL)(n),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(n,t);const i=new m(n,{headers:(0,r.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig});this[v]={cookies:new y.RequestCookies(this.headers),nextUrl:i,url:i.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[v].cookies}get nextUrl(){return this[v].nextUrl}get page(){throw new h}get ua(){throw new g}get url(){return this[v].url}}let w=e=>!0;e.s(["isNodeNextRequest",0,w,"isNodeNextResponse",0,e=>!0,"isWebNextRequest",0,e=>!1],28114);let _="ResponseAborted";class x extends Error{constructor(...e){super(...e),this.name=_}}function E(e){let t=new AbortController;return e.once("close",()=>{e.writableFinished||t.abort(new x)}),t}function I(e){let{errored:t,destroyed:r}=e;if(t||r)return AbortSignal.abort(t??new x);let{signal:n}=E(e);return n}class S{static fromBaseNextRequest(e,t){if(w(e))return S.fromNodeNextRequest(e,t);throw Object.defineProperty(Error("Invariant: Unsupported NextRequest type"),"__NEXT_ERROR_CODE",{value:"E345",enumerable:!1,configurable:!0})}static fromNodeNextRequest(e,n){let i,a=null;if("GET"!==e.method&&"HEAD"!==e.method&&e.body&&(a=e.body),e.url.startsWith("http"))i=new URL(e.url);else{let r=(0,t.getRequestMeta)(e,"initURL");i=r&&r.startsWith("http")?new URL(e.url,r):new URL(e.url,"http://n")}return new b(i,{method:e.method,headers:(0,r.fromNodeOutgoingHttpHeaders)(e.headers),duplex:"half",signal:n,...n.aborted?{}:{body:a}})}static fromWebNextRequest(e){let t=null;return"GET"!==e.method&&"HEAD"!==e.method&&(t=e.body),new b(e.url,{method:e.method,headers:(0,r.fromNodeOutgoingHttpHeaders)(e.headers),duplex:"half",signal:e.request.signal,...e.request.signal.aborted?{}:{body:t}})}}e.s(["NextRequestAdapter",()=>S,"ResponseAbortedName",0,_,"createAbortController",()=>E,"signalFromNodeResponse",()=>I],75616)},54439,9510,e=>{"use strict";class t{constructor(){let e,t;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}e.s(["DetachedPromise",()=>t],54439);var r=e.i(75616),n=e.i(41632),i=e.i(66038);let a=0,o=0,s=0;function l(e){return(null==e?void 0:e.name)==="AbortError"||(null==e?void 0:e.name)===r.ResponseAbortedName}async function u(e,u,c){try{let{errored:l,destroyed:d}=u;if(l||d)return;let p=(0,r.createAbortController)(u),f=function(e,r){let l=!1,u=new t;function c(){u.resolve()}e.on("drain",c),e.once("close",()=>{e.off("drain",c),u.resolve()});let d=new t;return e.once("finish",()=>{d.resolve()}),new WritableStream({write:async r=>{if(!l){if(l=!0,"performance"in globalThis&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX){let e=function(e={}){let t=0===a?void 0:{clientComponentLoadStart:a,clientComponentLoadTimes:o,clientComponentLoadCount:s};return e.reset&&(a=0,o=0,s=0),t}();e&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-client-component-loading`,{start:e.clientComponentLoadStart,end:e.clientComponentLoadStart+e.clientComponentLoadTimes})}e.flushHeaders(),(0,n.getTracer)().trace(i.NextNodeServerSpan.startResponse,{spanName:"start response"},()=>void 0)}try{let n=e.write(r);"flush"in e&&"function"==typeof e.flush&&e.flush(),n||(await u.promise,u=new t)}catch(t){throw e.end(),Object.defineProperty(Error("failed to write chunk to response",{cause:t}),"__NEXT_ERROR_CODE",{value:"E321",enumerable:!1,configurable:!0})}},abort:t=>{e.writableFinished||e.destroy(t)},close:async()=>{if(r&&await r,!e.writableFinished)return e.end(),d.promise}})}(u,c);await e.pipeTo(f,{signal:p.signal})}catch(e){if(l(e))return;throw Object.defineProperty(Error("failed to pipe response",{cause:e}),"__NEXT_ERROR_CODE",{value:"E180",enumerable:!1,configurable:!0})}}e.s(["isAbortError",()=>l,"pipeToNodeResponse",()=>u],9510)},6543,29663,e=>{"use strict";let t=e=>{setImmediate(e)};function r(){return new Promise(e=>t(e))}function n(){}e.s(["atLeastOneTask",()=>r,"scheduleImmediate",0,t,"scheduleOnNextTick",0,e=>{Promise.resolve().then(()=>{process.nextTick(e)})}],6543),e.i(54439),e.i(94798),e.i(41632),e.i(66038),new Uint8Array([60,104,116,109,108]),new Uint8Array([60,98,111,100,121]),new Uint8Array([60,47,104,101,97,100,62]),new Uint8Array([60,47,98,111,100,121,62]),new Uint8Array([60,47,104,116,109,108,62]),new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62]),new Uint8Array([60,109,101,116,97,32,110,97,109,101,61,34,194,171,110,120,116,45,105,99,111,110,194,187,34]);let i=new TextEncoder;function a(e){return new ReadableStream({start(t){t.enqueue(i.encode(e)),t.close()}})}function o(e){return new ReadableStream({start(t){t.enqueue(e),t.close()}})}async function s(e,t){let r=new TextDecoder("utf-8",{fatal:!0}),n="";for await(let i of e){if(null==t?void 0:t.aborted)return n;n+=r.decode(i,{stream:!0})}return n+r.decode()}var l=e.i(9510),u=e.i(68578);class c{static #e=this.EMPTY=new c(null,{metadata:{},contentType:null});static fromStatic(e,t){return new c(e,{metadata:{},contentType:t})}constructor(e,{contentType:t,waitUntil:r,metadata:n}){this.response=e,this.contentType=t,this.metadata=n,this.waitUntil=r}assignMetadata(e){Object.assign(this.metadata,e)}get isNull(){return null===this.response}get isDynamic(){return"string"!=typeof this.response}toUnchunkedString(e=!1){if(null===this.response)return"";if("string"!=typeof this.response){if(!e)throw Object.defineProperty(new u.InvariantError("dynamic responses cannot be unchunked. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E732",enumerable:!1,configurable:!0});return s(this.readable)}return this.response}get readable(){return null===this.response?new ReadableStream({start(e){e.close()}}):"string"==typeof this.response?a(this.response):Buffer.isBuffer(this.response)?o(this.response):Array.isArray(this.response)?function(...e){if(0===e.length)return new ReadableStream({start(e){e.close()}});if(1===e.length)return e[0];let{readable:t,writable:r}=new TransformStream,i=e[0].pipeTo(r,{preventClose:!0}),a=1;for(;a<e.length-1;a++){let t=e[a];i=i.then(()=>t.pipeTo(r,{preventClose:!0}))}let o=e[a];return(i=i.then(()=>o.pipeTo(r))).catch(n),t}(...this.response):this.response}coerce(){return null===this.response?[]:"string"==typeof this.response?[a(this.response)]:Array.isArray(this.response)?this.response:Buffer.isBuffer(this.response)?[o(this.response)]:[this.response]}unshift(e){this.response=this.coerce(),this.response.unshift(e)}push(e){this.response=this.coerce(),this.response.push(e)}async pipeTo(e){try{await this.readable.pipeTo(e,{preventClose:!0}),this.waitUntil&&await this.waitUntil,await e.close()}catch(t){if((0,l.isAbortError)(t))return void await e.abort(t);throw t}}async pipeToNodeResponse(e){await (0,l.pipeToNodeResponse)(this.readable,e,this.waitUntil)}}e.i(67168),e.i(98837),e.s([],29663)},29905,e=>{"use strict";let t;var r,n=e.i(66038),i=e.i(41632),a=e.i(98837),o=e.i(30506);class s extends Error{constructor(e){super(`Dynamic server usage: ${e}`),this.description=e,this.digest="DYNAMIC_SERVER_USAGE"}}class l extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}var u=e.i(32319);e.i(56704);class c extends Error{constructor(e,t){super(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${e}".`),this.route=e,this.expression=t,this.digest="HANGING_PROMISE_REJECTION"}}let d=new WeakMap;function p(e,t,r){if(e.aborted)return Promise.reject(new c(t,r));{let n=new Promise((n,i)=>{let a=i.bind(null,new c(t,r)),o=d.get(e);if(o)o.push(a);else{let t=[a];d.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return n.catch(f),n}}function f(){}e.i(6543);var m=e.i(68578);let h="function"==typeof o.default.unstable_postpone;function g(e,t,r){if(t)switch(t.type){case"cache":case"unstable-cache":case"private-cache":return}if(!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new l(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t)switch(t.type){case"prerender-ppr":var n,i,a;return n=e.route,i=r,a=t.dynamicTracking,void(function(){if(!h)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})}(),a&&a.dynamicAccesses.push({stack:a.isDebugDynamicAccesses?Error().stack:void 0,expression:i}),o.default.unstable_postpone(y(n,i)));case"prerender-legacy":t.revalidate=0;let u=Object.defineProperty(new s(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=u.stack,u}}}function y(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}if(!1===((r=y("%%%","^^^")).includes("needs to bail out of prerendering at this point because it used")&&r.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at __next_root_layout_boundary__ \\([^\\n]*\\)`),RegExp(`\\n\\s+at __next_metadata_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_viewport_boundary__[\\n\\s]`),RegExp(`\\n\\s+at __next_outlet_boundary__[\\n\\s]`);let v=()=>{};function b(e){if(!e.body)return[e,e];let[r,n]=e.body.tee(),i=new Response(r,{status:e.status,statusText:e.statusText,headers:e.headers});Object.defineProperty(i,"url",{value:e.url,configurable:!0,enumerable:!0,writable:!1}),t&&i.body&&t.register(i,new WeakRef(i.body));let a=new Response(n,{status:e.status,statusText:e.statusText,headers:e.headers});return Object.defineProperty(a,"url",{value:e.url,configurable:!0,enumerable:!0,writable:!1}),[i,a]}globalThis.FinalizationRegistry&&(t=new FinalizationRegistry(e=>{let t=e.deref();t&&!t.locked&&t.cancel("Response object has been garbage collected").then(v)}));let w=new Set(["traceparent","tracestate"]);e.i(29663);var _=e.i(94798);let x=Symbol.for("next-patch");function E(e,t){e.shouldTrackFetchMetrics&&(e.fetchMetrics??=[],e.fetchMetrics.push({...t,end:performance.timeOrigin+performance.now(),idx:e.nextFetchId||0}))}async function I(e,t,r,n,i,a){let o=await e.arrayBuffer(),s={headers:Object.fromEntries(e.headers.entries()),body:Buffer.from(o).toString("base64"),status:e.status,url:e.url};return r&&await n.set(t,{kind:_.CachedRouteKind.FETCH,data:s,revalidate:i},r),await a(),new Response(o,{headers:e.headers,status:e.status,statusText:e.statusText})}async function S(e,t,r,n,i,a,o,s,l){let[u,c]=b(t),d=u.arrayBuffer().then(async e=>{let t=Buffer.from(e),s={headers:Object.fromEntries(u.headers.entries()),body:t.toString("base64"),status:u.status,url:u.url};null==a||a.set(r,s),n&&await i.set(r,{kind:_.CachedRouteKind.FETCH,data:s,revalidate:o},n)}).catch(e=>console.warn("Failed to set fetch cache",s,e)).finally(l),p=`cache-set-${r}`;return e.pendingRevalidates??={},p in e.pendingRevalidates&&await e.pendingRevalidates[p],e.pendingRevalidates[p]=d.finally(()=>{var t;(null==(t=e.pendingRevalidates)?void 0:t[p])&&delete e.pendingRevalidates[p]}),c}function $(e){var t;let r;if(!0===globalThis[x])return;let s=(t=globalThis.fetch,r=o.cache(e=>[]),function(e,n){let i,a;if(n&&n.signal)return t(e,n);if("string"!=typeof e||n){let r,o="string"==typeof e||e instanceof URL?new Request(e,n):e;if("GET"!==o.method&&"HEAD"!==o.method||o.keepalive)return t(e,n);r=Array.from(o.headers.entries()).filter(([e])=>!w.has(e.toLowerCase())),a=JSON.stringify([o.method,r,o.mode,o.redirect,o.credentials,o.referrer,o.referrerPolicy,o.integrity]),i=o.url}else a='["GET",[],null,"follow",null,null,null,null]',i=e;let o=r(i);for(let e=0,t=o.length;e<t;e+=1){let[t,r]=o[e];if(t===a)return r.then(()=>{let t=o[e][2];if(!t)throw Object.defineProperty(new m.InvariantError("No cached response"),"__NEXT_ERROR_CODE",{value:"E579",enumerable:!1,configurable:!0});let[r,n]=b(t);return o[e][2]=n,r})}let s=t(e,n),l=[a,s,null];return o.push(l),s.then(e=>{let[t,r]=b(e);return l[2]=r,t})});globalThis.fetch=function(e,{workAsyncStorage:t,workUnitAsyncStorage:r}){let o=async function(o,s){var l,c;let d;try{(d=new URL(o instanceof Request?o.url:o)).username="",d.password=""}catch{d=void 0}let f=(null==d?void 0:d.href)??"",m=(null==s||null==(l=s.method)?void 0:l.toUpperCase())||"GET",h=(null==s||null==(c=s.next)?void 0:c.internal)===!0,y="1"===process.env.NEXT_OTEL_FETCH_DISABLED,v=h?void 0:performance.timeOrigin+performance.now(),w=t.getStore(),x=r.getStore(),$=x?(0,u.getCacheSignal)(x):null;$&&$.beginRead();let A=(0,i.getTracer)().trace(h?n.NextNodeServerSpan.internalFetch:n.AppRenderSpan.fetch,{hideSpan:y,kind:i.SpanKind.CLIENT,spanName:["fetch",m,f].filter(Boolean).join(" "),attributes:{"http.url":f,"http.method":m,"net.peer.name":null==d?void 0:d.hostname,"net.peer.port":(null==d?void 0:d.port)||void 0}},async()=>{var t;let r,n,i,l,u,c;if(h||!w||w.isDraftMode)return e(o,s);let d=o&&"object"==typeof o&&"string"==typeof o.method,m=e=>(null==s?void 0:s[e])||(d?o[e]:null),y=e=>{var t,r,n;return void 0!==(null==s||null==(t=s.next)?void 0:t[e])?null==s||null==(r=s.next)?void 0:r[e]:d?null==(n=o.next)?void 0:n[e]:void 0},A=y("revalidate"),T=A,O=function(e,t){let r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];if("string"!=typeof o?n.push({tag:o,reason:"invalid type, must be a string"}):o.length>a.NEXT_CACHE_TAG_MAX_LENGTH?n.push({tag:o,reason:`exceeded max length of ${a.NEXT_CACHE_TAG_MAX_LENGTH}`}):r.push(o),r.length>a.NEXT_CACHE_TAG_MAX_ITEMS){console.warn(`Warning: exceeded max tag count for ${t}, dropped tags:`,e.slice(i).join(", "));break}}if(n.length>0)for(let{tag:e,reason:r}of(console.warn(`Warning: invalid tags passed to ${t}: `),n))console.log(`tag: "${e}" ${r}`);return r}(y("tags")||[],`fetch ${o.toString()}`);if(x)switch(x.type){case"prerender":case"prerender-runtime":case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":r=x}if(r&&Array.isArray(O)){let e=r.tags??(r.tags=[]);for(let t of O)e.includes(t)||e.push(t)}let R=null==x?void 0:x.implicitTags,N=w.fetchCache;x&&"unstable-cache"===x.type&&(N="force-no-store");let P=!!w.isUnstableNoStore,U=m("cache"),D="";"string"==typeof U&&void 0!==T&&("force-cache"===U&&0===T||"no-store"===U&&(T>0||!1===T))&&(n=`Specified "cache: ${U}" and "revalidate: ${T}", only one should be specified.`,U=void 0,T=void 0);let C="no-cache"===U||"no-store"===U||"force-no-store"===N||"only-no-store"===N,j=!N&&!U&&!T&&w.forceDynamic;"force-cache"===U&&void 0===T?T=!1:(C||j)&&(T=0),("no-cache"===U||"no-store"===U)&&(D=`cache: ${U}`),c=function(e,t){try{let r;if(!1===e)r=a.INFINITE_CACHE;else if("number"==typeof e&&!isNaN(e)&&e>-1)r=e;else if(void 0!==e)throw Object.defineProperty(Error(`Invalid revalidate value "${e}" on "${t}", must be a non-negative number or false`),"__NEXT_ERROR_CODE",{value:"E179",enumerable:!1,configurable:!0});return r}catch(e){if(e instanceof Error&&e.message.includes("Invalid revalidate"))throw e;return}}(T,w.route);let z=m("headers"),L="function"==typeof(null==z?void 0:z.get)?z:new Headers(z||{}),Z=L.get("authorization")||L.get("cookie"),M=!["get","head"].includes((null==(t=m("method"))?void 0:t.toLowerCase())||"get"),q=void 0==N&&(void 0==U||"default"===U)&&void 0==T,V=!!((Z||M)&&(null==r?void 0:r.revalidate)===0),B=!1;if(!V&&q&&(w.isBuildTimePrerendering?B=!0:V=!0),q&&void 0!==x)switch(x.type){case"prerender":case"prerender-runtime":case"prerender-client":return $&&($.endRead(),$=null),p(x.renderSignal,w.route,"fetch()")}switch(N){case"force-no-store":D="fetchCache = force-no-store";break;case"only-no-store":if("force-cache"===U||void 0!==c&&c>0)throw Object.defineProperty(Error(`cache: 'force-cache' used on fetch for ${f} with 'export const fetchCache = 'only-no-store'`),"__NEXT_ERROR_CODE",{value:"E448",enumerable:!1,configurable:!0});D="fetchCache = only-no-store";break;case"only-cache":if("no-store"===U)throw Object.defineProperty(Error(`cache: 'no-store' used on fetch for ${f} with 'export const fetchCache = 'only-cache'`),"__NEXT_ERROR_CODE",{value:"E521",enumerable:!1,configurable:!0});break;case"force-cache":(void 0===T||0===T)&&(D="fetchCache = force-cache",c=a.INFINITE_CACHE)}if(void 0===c?"default-cache"!==N||P?"default-no-store"===N?(c=0,D="fetchCache = default-no-store"):P?(c=0,D="noStore call"):V?(c=0,D="auto no cache"):(D="auto cache",c=r?r.revalidate:a.INFINITE_CACHE):(c=a.INFINITE_CACHE,D="fetchCache = default-cache"):D||(D=`revalidate: ${c}`),!(w.forceStatic&&0===c)&&!V&&r&&c<r.revalidate){if(0===c){if(x)switch(x.type){case"prerender":case"prerender-client":case"prerender-runtime":return $&&($.endRead(),$=null),p(x.renderSignal,w.route,"fetch()")}g(w,x,`revalidate: 0 fetch ${o} ${w.route}`)}r&&A===c&&(r.revalidate=c)}let F="number"==typeof c&&c>0,{incrementalCache:W}=w,H=!1;if(x)switch(x.type){case"request":case"cache":case"private-cache":H=x.isHmrRefresh??!1,l=x.serverComponentsHmrCache}if(W&&(F||l))try{i=await W.generateCacheKey(f,d?o:s)}catch(e){console.error("Failed to generate cache key for",o)}let K=w.nextFetchId??1;w.nextFetchId=K+1;let G=()=>{},J=async(t,r)=>{let u=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...t?[]:["signal"]];if(d){let e=o,t={body:e._ogBody||e.body};for(let r of u)t[r]=e[r];o=new Request(e.url,t)}else if(s){let{_ogBody:e,body:r,signal:n,...i}=s;s={...i,body:e||r,signal:t?void 0:n}}let p={...s,next:{...null==s?void 0:s.next,fetchType:"origin",fetchIdx:K}};return e(o,p).then(async e=>{if(!t&&v&&E(w,{start:v,url:f,cacheReason:r||D,cacheStatus:0===c||r?"skip":"miss",cacheWarning:n,status:e.status,method:p.method||"GET"}),200===e.status&&W&&i&&(F||l)){let t=c>=a.INFINITE_CACHE?a.CACHE_ONE_YEAR:c,r=F?{fetchCache:!0,fetchUrl:f,fetchIdx:K,tags:O,isImplicitBuildTimeCache:B}:void 0;switch(null==x?void 0:x.type){case"prerender":case"prerender-client":case"prerender-runtime":return I(e,i,r,W,t,G);case"request":case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":case"unstable-cache":case void 0:return S(w,e,i,r,W,l,t,o,G)}}return await G(),e}).catch(e=>{throw G(),e})},Q=!1,X=!1;if(i&&W){let e;if(H&&l&&(e=l.get(i),X=!0),F&&!e){G=await W.lock(i);let t=w.isOnDemandRevalidate?null:await W.get(i,{kind:_.IncrementalCacheKind.FETCH,revalidate:c,fetchUrl:f,fetchIdx:K,tags:O,softTags:null==R?void 0:R.tags});if(q&&x)switch(x.type){case"prerender":case"prerender-client":case"prerender-runtime":await (k||(k=new Promise(e=>{setTimeout(()=>{k=null,e()},0)})),k)}if(t?await G():u="cache-control: no-cache (hard refresh)",(null==t?void 0:t.value)&&t.value.kind===_.CachedRouteKind.FETCH)if(w.isStaticGeneration&&t.isStale)Q=!0;else{if(t.isStale&&(w.pendingRevalidates??={},!w.pendingRevalidates[i])){let e=J(!0).then(async e=>({body:await e.arrayBuffer(),headers:e.headers,status:e.status,statusText:e.statusText})).finally(()=>{w.pendingRevalidates??={},delete w.pendingRevalidates[i||""]});e.catch(console.error),w.pendingRevalidates[i]=e}e=t.value.data}}if(e){v&&E(w,{start:v,url:f,cacheReason:D,cacheStatus:X?"hmr":"hit",cacheWarning:n,status:e.status||200,method:(null==s?void 0:s.method)||"GET"});let t=new Response(Buffer.from(e.body,"base64"),{headers:e.headers,status:e.status});return Object.defineProperty(t,"url",{value:e.url}),t}}if(w.isStaticGeneration&&s&&"object"==typeof s){let{cache:e}=s;if("no-store"===e){if(x)switch(x.type){case"prerender":case"prerender-client":case"prerender-runtime":return $&&($.endRead(),$=null),p(x.renderSignal,w.route,"fetch()")}g(w,x,`no-store fetch ${o} ${w.route}`)}let t="next"in s,{next:n={}}=s;if("number"==typeof n.revalidate&&r&&n.revalidate<r.revalidate){if(0===n.revalidate){if(x)switch(x.type){case"prerender":case"prerender-client":case"prerender-runtime":return p(x.renderSignal,w.route,"fetch()")}g(w,x,`revalidate: 0 fetch ${o} ${w.route}`)}w.forceStatic&&0===n.revalidate||(r.revalidate=n.revalidate)}t&&delete s.next}if(!i||!Q)return J(!1,u);{let e=i;w.pendingRevalidates??={};let t=w.pendingRevalidates[e];if(t){let e=await t;return new Response(e.body,{headers:e.headers,status:e.status,statusText:e.statusText})}let r=J(!0,u).then(b);return(t=r.then(async e=>{let t=e[0];return{body:await t.arrayBuffer(),headers:t.headers,status:t.status,statusText:t.statusText}}).finally(()=>{var t;(null==(t=w.pendingRevalidates)?void 0:t[e])&&delete w.pendingRevalidates[e]})).catch(()=>{}),w.pendingRevalidates[e]=t,r.then(e=>e[1])}});if($)try{return await A}finally{$&&$.endRead()}return A};return o.__nextPatched=!0,o.__nextGetStaticStore=()=>t,o._nextOriginalFetch=e,globalThis[x]=!0,Object.defineProperty(o,"name",{value:"fetch",writable:!1}),o}(s,e)}let k=null;e.s(["patchFetch",()=>$],29905)},65633,e=>{"use strict";function t(e){var t;return(t=e.split("/").reduce((e,t,r,n)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:`${e}/${t}`:e,"")).startsWith("/")?t:`/${t}`}e.s(["normalizeAppPath",()=>t],65633)},20758,e=>{"use strict";e.i(68578);var t=e.i(65633);e.i(56704);let r=Symbol.for("next.server.action-manifests");function n({page:e,clientReferenceManifest:n,serverActionsManifest:i,serverModuleMap:a}){var o;let s=null==(o=globalThis[r])?void 0:o.clientReferenceManifestsPerPage;globalThis[r]={clientReferenceManifestsPerPage:{...s,[(0,t.normalizeAppPath)(e)]:n},serverActionsManifest:i,serverModuleMap:a}}e.s(["setReferenceManifestsSingleton",()=>n])},58615,e=>{"use strict";e.i(65633);var t=e.i(89951);e.i(69552);var r=e.i(56704);function n({serverActionsManifest:e}){return new Proxy({},{get:(n,i)=>{var a,o,s;let l,u=null==(o=e.node)||null==(a=o[i])?void 0:a.workers;if(!u)return;let c=r.workAsyncStorage.getStore();if(!(l=c?u[s=c.page,(0,t.pathHasPrefix)(s,"app")?s:"app"+s]:Object.values(u).at(0)))return;let{moduleId:d,async:p}=l;return{id:d,name:i,chunks:[],async:p}}})}e.s(["createServerModuleMap",()=>n])},68243,(e,t,r)=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/.pnpm/next@16.0.0_babel-plugin-react-compiler@1.0.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/compiled/cookie/");var e,r,n,i,a={};a.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var i={},a=t.split(n),o=(r||{}).decode||e,s=0;s<a.length;s++){var l=a[s],u=l.indexOf("=");if(!(u<0)){var c=l.substr(0,u).trim(),d=l.substr(++u,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==i[c]&&(i[c]=function(e,t){try{return t(e)}catch(t){return e}}(d,o))}}return i},a.serialize=function(e,t,n){var a=n||{},o=a.encode||r;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var s=o(t);if(s&&!i.test(s))throw TypeError("argument val is invalid");var l=e+"="+s;if(null!=a.maxAge){var u=a.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(a.domain){if(!i.test(a.domain))throw TypeError("option domain is invalid");l+="; Domain="+a.domain}if(a.path){if(!i.test(a.path))throw TypeError("option path is invalid");l+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+a.expires.toUTCString()}if(a.httpOnly&&(l+="; HttpOnly"),a.secure&&(l+="; Secure"),a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l},e=decodeURIComponent,r=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,t.exports=a})()},76917,e=>{"use strict";class t{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}class r extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new r}}class n extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(r,n,i){if("symbol"==typeof n)return t.get(r,n,i);let a=n.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==o)return t.get(r,o,i)},set(r,n,i,a){if("symbol"==typeof n)return t.set(r,n,i,a);let o=n.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===o);return t.set(r,s??n,i,a)},has(r,n){if("symbol"==typeof n)return t.has(r,n);let i=n.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==a&&t.has(r,a)},deleteProperty(r,n){if("symbol"==typeof n)return t.deleteProperty(r,n);let i=n.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===a||t.deleteProperty(r,a)}})}static seal(e){return new Proxy(e,{get(e,n,i){switch(n){case"append":case"delete":case"set":return r.callable;default:return t.get(e,n,i)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new n(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}e.i(98837),e.i(41632),e.i(66038),Symbol("__next_preview_data");let i=Symbol("__prerender_bypass");var a,o,s=e.i(84259),l=((a={})[a.SeeOther=303]="SeeOther",a[a.TemporaryRedirect=307]="TemporaryRedirect",a[a.PermanentRedirect=308]="PermanentRedirect",a);class u{constructor(e,t,r){this.method=e,this.url=t,this.body=r}get cookies(){var t;return this._cookies?this._cookies:this._cookies=(t=this.headers,function(){let{cookie:r}=t;if(!r)return{};let{parse:n}=e.r(68243);return n(Array.isArray(r)?r.join("; "):r)})()}}class c{constructor(e){this.destination=e}redirect(e,t){return this.setHeader("Location",e),this.statusCode=t,t===l.PermanentRedirect&&this.setHeader("Refresh",`0;url=${e}`),this}}class d extends u{static #e=o=s.NEXT_REQUEST_META;constructor(e){var t;super(e.method.toUpperCase(),e.url,e),this._req=e,this.headers=this._req.headers,this.fetchMetrics=null==(t=this._req)?void 0:t.fetchMetrics,this[o]=this._req[s.NEXT_REQUEST_META]||{},this.streaming=!1}get originalRequest(){return this._req[s.NEXT_REQUEST_META]=this[s.NEXT_REQUEST_META],this._req.url=this.url,this._req.cookies=this.cookies,this._req}set originalRequest(e){this._req=e}stream(){if(this.streaming)throw Object.defineProperty(Error("Invariant: NodeNextRequest.stream() can only be called once"),"__NEXT_ERROR_CODE",{value:"E467",enumerable:!1,configurable:!0});return this.streaming=!0,new ReadableStream({start:e=>{this._req.on("data",t=>{e.enqueue(new Uint8Array(t))}),this._req.on("end",()=>{e.close()}),this._req.on("error",t=>{e.error(t)})}})}}class p extends c{get originalResponse(){return i in this&&(this._res[i]=this[i]),this._res}constructor(e){super(e),this._res=e,this.textBody=void 0}get sent(){return this._res.finished||this._res.headersSent}get statusCode(){return this._res.statusCode}set statusCode(e){this._res.statusCode=e}get statusMessage(){return this._res.statusMessage}set statusMessage(e){this._res.statusMessage=e}setHeader(e,t){return this._res.setHeader(e,t),this}removeHeader(e){return this._res.removeHeader(e),this}getHeaderValues(e){let t=this._res.getHeader(e);if(void 0!==t)return(Array.isArray(t)?t:[t]).map(e=>e.toString())}hasHeader(e){return this._res.hasHeader(e)}getHeader(e){let t=this.getHeaderValues(e);return Array.isArray(t)?t.join(","):void 0}getHeaders(){return this._res.getHeaders()}appendHeader(e,t){let r=this.getHeaderValues(e)??[];return r.includes(t)||this._res.setHeader(e,[...r,t]),this}body(e){return this.textBody=e,this}send(){this._res.end(this.textBody)}onClose(e){this.originalResponse.on("close",e)}}e.s(["NodeNextRequest",()=>d,"NodeNextResponse",()=>p],76917)},95581,e=>{"use strict";function t(e){return e.isOnDemandRevalidate?"on-demand":e.isStaticGeneration?"stale":void 0}e.s(["getRevalidateReason",()=>t])},67906,e=>{"use strict";var t=e.i(28114),r=e.i(9510),n=e.i(73157);async function i(e,i,a,o){if((0,t.isNodeNextResponse)(i)){var s;i.statusCode=a.status,i.statusMessage=a.statusText;let t=["set-cookie","www-authenticate","proxy-authenticate","vary"];null==(s=a.headers)||s.forEach((e,r)=>{if("x-middleware-set-cookie"!==r.toLowerCase())if("set-cookie"===r.toLowerCase())for(let t of(0,n.splitCookiesString)(e))i.appendHeader(r,t);else{let n=void 0!==i.getHeader(r);(t.includes(r.toLowerCase())||!n)&&i.appendHeader(r,e)}});let{originalResponse:l}=i;a.body&&"HEAD"!==e.method?await (0,r.pipeToNodeResponse)(a.body,l,o):l.end()}}e.s(["sendResponse",()=>i])},81032,e=>{"use strict";var t=e.i(98837);function r({revalidate:e,expire:r}){let n="number"==typeof e&&void 0!==r&&e<r?`, stale-while-revalidate=${r-e}`:"";return 0===e?"private, no-cache, no-store, max-age=0, must-revalidate":"number"==typeof e?`s-maxage=${e}${n}`:`s-maxage=${t.CACHE_ONE_YEAR}${n}`}e.s(["getCacheControlHeader",()=>r])},59639,(e,t,r)=>{t.exports=e.x("node:process",()=>require("node:process"))},50227,(e,t,r)=>{t.exports=e.x("node:path",()=>require("node:path"))},57764,(e,t,r)=>{t.exports=e.x("node:url",()=>require("node:url"))},4733,e=>e.a(async(t,r)=>{try{let t=await e.y("@prisma/client/runtime/library");e.n(t),r()}catch(e){r(e)}},!0),75269,e=>e.a(async(t,r)=>{try{var n=e.i(4733),i=t([n]);[n]=i.then?(await i)():i;let o={generator:{name:"client",provider:{fromEnvVar:null,value:"prisma-client"},output:{value:"/Users/malek.gara/Projects/dukkani/packages/db/prisma/generated",fromEnvVar:null},config:{moduleFormat:"esm",engineType:"library"},binaryTargets:[{fromEnvVar:null,value:"darwin-arm64",native:!0}],previewFeatures:[],sourceFilePath:"/Users/malek.gara/Projects/dukkani/packages/db/prisma/schema/schema.prisma",isCustomOutput:!0},relativePath:"../schema",clientVersion:"6.19.0",engineVersion:"2ba551f319ab1df4bc874a89965d8b3641056773",datasourceNames:["db"],activeProvider:"postgresql",postinstall:!1,inlineDatasources:{db:{url:{fromEnvVar:"DATABASE_URL",value:null}}},inlineSchema:'model User {\n  id            String    @id @map("_id")\n  name          String\n  email         String\n  emailVerified Boolean\n  image         String?\n  createdAt     DateTime\n  updatedAt     DateTime\n  sessions      Session[]\n  accounts      Account[]\n\n  @@unique([email])\n  @@map("user")\n}\n\nmodel Session {\n  id        String   @id @map("_id")\n  expiresAt DateTime\n  token     String\n  createdAt DateTime\n  updatedAt DateTime\n  ipAddress String?\n  userAgent String?\n  userId    String\n  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  @@unique([token])\n  @@map("session")\n}\n\nmodel Account {\n  id                    String    @id @map("_id")\n  accountId             String\n  providerId            String\n  userId                String\n  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)\n  accessToken           String?\n  refreshToken          String?\n  idToken               String?\n  accessTokenExpiresAt  DateTime?\n  refreshTokenExpiresAt DateTime?\n  scope                 String?\n  password              String?\n  createdAt             DateTime\n  updatedAt             DateTime\n\n  @@map("account")\n}\n\nmodel Verification {\n  id         String    @id @map("_id")\n  identifier String\n  value      String\n  expiresAt  DateTime\n  createdAt  DateTime?\n  updatedAt  DateTime?\n\n  @@map("verification")\n}\n\ngenerator client {\n  provider     = "prisma-client"\n  output       = "../generated"\n  moduleFormat = "esm"\n}\n\ndatasource db {\n  provider = "postgresql"\n  url      = env("DATABASE_URL")\n}\n\nmodel Todo {\n  id        Int     @id @default(autoincrement())\n  text      String\n  completed Boolean @default(false)\n\n  @@map("todo")\n}\n',inlineSchemaHash:"70f60687a6cbabf51fb0e1902c7bae4addf1f1be442954cf6c10f8f8c876c95f",copyEngine:!0,runtimeDataModel:{models:{},enums:{},types:{}},dirname:""};function a(e){return o.dirname=e,n.getPrismaClient(o)}o.runtimeDataModel=JSON.parse('{"models":{"User":{"dbName":"user","schema":null,"fields":[{"name":"id","dbName":"_id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"email","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"emailVerified","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Boolean","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"image","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sessions","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Session","nativeType":null,"relationName":"SessionToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"accounts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Account","nativeType":null,"relationName":"AccountToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["email"]],"uniqueIndexes":[{"name":null,"fields":["email"]}],"isGenerated":false},"Session":{"dbName":"session","schema":null,"fields":[{"name":"id","dbName":"_id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"token","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"ipAddress","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"userAgent","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"SessionToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[["token"]],"uniqueIndexes":[{"name":null,"fields":["token"]}],"isGenerated":false},"Account":{"dbName":"account","schema":null,"fields":[{"name":"id","dbName":"_id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"accountId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"providerId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"AccountToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"accessToken","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"refreshToken","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"idToken","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"accessTokenExpiresAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"refreshTokenExpiresAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"scope","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"password","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Verification":{"dbName":"verification","schema":null,"fields":[{"name":"id","dbName":"_id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"identifier","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"value","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"expiresAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"createdAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Todo":{"dbName":"todo","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":{"name":"autoincrement","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"text","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"completed","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Boolean","nativeType":null,"default":false,"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false}},"enums":{},"types":{}}'),o.engineWasm=void 0,o.compilerWasm=void 0,e.s(["getPrismaClientClass",()=>a]),r()}catch(e){r(e)}},!1),7190,e=>e.a(async(t,r)=>{try{var n=e.i(4733),i=t([n]);[n]=i.then?(await i)():i;let a=n.PrismaClientKnownRequestError,o=n.PrismaClientUnknownRequestError,s=n.PrismaClientRustPanicError,l=n.PrismaClientInitializationError,u=n.PrismaClientValidationError,c=n.sqltag,d=n.empty,p=n.join,f=n.raw,m=n.Sql,h=n.Decimal,g=n.Extensions.getExtensionContext,y={DbNull:n.objectEnumValues.classes.DbNull,JsonNull:n.objectEnumValues.classes.JsonNull,AnyNull:n.objectEnumValues.classes.AnyNull},v=n.objectEnumValues.instances.DbNull,b=n.objectEnumValues.instances.JsonNull,w=n.objectEnumValues.instances.AnyNull,_=n.makeStrictEnum({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"}),x=n.Extensions.defineExtension;e.s(["AccountScalarFieldEnum",0,{id:"id",accountId:"accountId",providerId:"providerId",userId:"userId",accessToken:"accessToken",refreshToken:"refreshToken",idToken:"idToken",accessTokenExpiresAt:"accessTokenExpiresAt",refreshTokenExpiresAt:"refreshTokenExpiresAt",scope:"scope",password:"password",createdAt:"createdAt",updatedAt:"updatedAt"},"AnyNull",0,w,"DbNull",0,v,"Decimal",0,h,"JsonNull",0,b,"ModelName",0,{User:"User",Session:"Session",Account:"Account",Verification:"Verification",Todo:"Todo"},"NullTypes",0,y,"NullsOrder",0,{first:"first",last:"last"},"PrismaClientInitializationError",0,l,"PrismaClientKnownRequestError",0,a,"PrismaClientRustPanicError",0,s,"PrismaClientUnknownRequestError",0,o,"PrismaClientValidationError",0,u,"QueryMode",0,{default:"default",insensitive:"insensitive"},"SessionScalarFieldEnum",0,{id:"id",expiresAt:"expiresAt",token:"token",createdAt:"createdAt",updatedAt:"updatedAt",ipAddress:"ipAddress",userAgent:"userAgent",userId:"userId"},"SortOrder",0,{asc:"asc",desc:"desc"},"Sql",0,m,"TodoScalarFieldEnum",0,{id:"id",text:"text",completed:"completed"},"TransactionIsolationLevel",0,_,"UserScalarFieldEnum",0,{id:"id",name:"name",email:"email",emailVerified:"emailVerified",image:"image",createdAt:"createdAt",updatedAt:"updatedAt"},"VerificationScalarFieldEnum",0,{id:"id",identifier:"identifier",value:"value",expiresAt:"expiresAt",createdAt:"createdAt",updatedAt:"updatedAt"},"defineExtension",0,x,"empty",0,d,"getExtensionContext",0,g,"join",0,p,"prismaVersion",0,{client:"6.19.0",engine:"2ba551f319ab1df4bc874a89965d8b3641056773"},"raw",0,f,"sql",0,c]),r()}catch(e){r(e)}},!1),10395,e=>{"use strict";e.s([])},5010,e=>e.a(async(t,r)=>{try{var n=e.i(59639),i=e.i(50227),a=e.i(57764),o=e.i(75269),s=e.i(7190);e.i(10395);var l=t([o,s]);[o,s]=l.then?(await l)():l,globalThis.__dirname=i.dirname((0,a.fileURLToPath)({get url(){return`file://${e.P("packages/db/prisma/generated/client.ts")}`}}.url));let u=o.getPrismaClientClass("/ROOT/packages/db/prisma/generated");i.join("/ROOT/packages/db/prisma/generated","libquery_engine-darwin-arm64.dylib.node"),i.join(n.cwd(),"prisma/generated/libquery_engine-darwin-arm64.dylib.node"),e.s(["PrismaClient",0,u]),r()}catch(e){r(e)}},!1),15405,e=>e.a(async(t,r)=>{try{var n=e.i(5010),i=t([n]);[n]=i.then?(await i)():i;let a=new n.PrismaClient;e.s(["default",0,a]),r()}catch(e){r(e)}},!1),4500,48874,57460,4329,85893,78621,65106,17904,7092,47329,94854,11402,84266,73162,74327,30699,81670,25048,1684,52357,39576,74138,27866,35519,8690,82230,79908,5632,79406,78006,89770,91359,29786,3962,20292,42039,99566,32130,53218,16782,97282,42471,78793,91824,2379,63669,4403,61599,57658,7625,71714,17791,2921,94121,77169,74582,65904,16593,18699,75072,5386,13210,e=>{"use strict";let t=Object.freeze({status:"aborted"});function r(e,t,r){function n(r,n){var i;for(let a in Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(i=r._zod).traits??(i.traits=new Set),r._zod.traits.add(e),t(r,n),o.prototype)a in r||Object.defineProperty(r,a,{value:o.prototype[a].bind(r)});r._zod.constr=o,r._zod.def=n}let i=r?.Parent??Object;class a extends i{}function o(e){var t;let i=r?.Parent?new a:this;for(let r of(n(i,e),(t=i._zod).deferred??(t.deferred=[]),i._zod.deferred))r();return i}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}let n=Symbol("zod_brand");class i extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class a extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}let o={};function s(e){return e&&Object.assign(o,e),o}function l(e){return e}function u(e){return e}function c(e){}function d(e){throw Error()}function p(e){}function f(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function m(e,t="|"){return e.map(e=>q(e)).join(t)}function h(e,t){return"bigint"==typeof t?t.toString():t}function g(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function y(e){return null==e}function v(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function b(e,t){let r=(e.toString().split(".")[1]||"").length,n=t.toString(),i=(n.split(".")[1]||"").length;if(0===i&&/\d?e-\d?/.test(n)){let e=n.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let a=r>i?r:i;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}e.s(["$ZodAsyncError",()=>i,"$ZodEncodeError",()=>a,"$brand",0,n,"$constructor",()=>r,"NEVER",0,t,"config",()=>s,"globalConfig",0,o],48874);let w=Symbol("evaluating");function _(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==w)return void 0===n&&(n=w,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function x(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function E(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function I(...e){let t={};for(let r of e)Object.assign(t,Object.getOwnPropertyDescriptors(r));return Object.defineProperties({},t)}function S(e){return I(e._zod.def)}function $(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function k(e){let t=Object.keys(e);return Promise.all(t.map(t=>e[t])).then(e=>{let r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r})}function A(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}function T(e){return JSON.stringify(e)}let O="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function R(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let N=g(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function P(e){if(!1===R(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!1!==R(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function U(e){return P(e)?{...e}:Array.isArray(e)?[...e]:e}function D(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}let C=new Set(["string","number","symbol"]),j=new Set(["string","number","bigint","boolean","symbol","undefined"]);function z(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function L(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function Z(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}function M(e){let t;return new Proxy({},{get:(r,n,i)=>(t??(t=e()),Reflect.get(t,n,i)),set:(r,n,i,a)=>(t??(t=e()),Reflect.set(t,n,i,a)),has:(r,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(r,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(r,n,i)=>(t??(t=e()),Reflect.defineProperty(t,n,i))})}function q(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function V(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}let B={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},F={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function W(e,t){let r=e._zod.def,n=I(e._zod.def,{get shape(){let e={};for(let n in t){if(!(n in r.shape))throw Error(`Unrecognized key: "${n}"`);t[n]&&(e[n]=r.shape[n])}return E(this,"shape",e),e},checks:[]});return L(e,n)}function H(e,t){let r=e._zod.def,n=I(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return E(this,"shape",n),n},checks:[]});return L(e,n)}function K(e,t){if(!P(t))throw Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let n=I(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return E(this,"shape",r),r},checks:[]});return L(e,n)}function G(e,t){if(!P(t))throw Error("Invalid input to safeExtend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return E(this,"shape",r),r},checks:e._zod.def.checks};return L(e,r)}function J(e,t){let r=I(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return E(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return L(e,r)}function Q(e,t,r){let n=I(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)i[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return E(this,"shape",i),i},checks:[]});return L(t,n)}function X(e,t,r){let n=I(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)i[t]=new e({type:"nonoptional",innerType:n[t]});return E(this,"shape",i),i},checks:[]});return L(t,n)}function Y(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function ee(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function et(e){return"string"==typeof e?e:e?.message}function er(e,t,r){let n={...e,path:e.path??[]};return e.message||(n.message=et(e.inst?._zod.def?.error?.(e))??et(t?.error?.(e))??et(r.customError?.(e))??et(r.localeError?.(e))??"Invalid input"),delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function en(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function ei(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function ea(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}function eo(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function es(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function el(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function eu(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return es(t+r)}function ec(e){return el(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ed(e){let t=e.replace(/^0x/,"");if(t.length%2!=0)throw Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)r[e/2]=Number.parseInt(t.slice(e,e+2),16);return r}function ep(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class ef{constructor(...e){}}e.s(["BIGINT_FORMAT_RANGES",0,F,"Class",()=>ef,"NUMBER_FORMAT_RANGES",0,B,"aborted",()=>Y,"allowsEval",0,N,"assert",()=>p,"assertEqual",()=>l,"assertIs",()=>c,"assertNever",()=>d,"assertNotEqual",()=>u,"assignProp",()=>E,"base64ToUint8Array",()=>es,"base64urlToUint8Array",()=>eu,"cached",()=>g,"captureStackTrace",0,O,"cleanEnum",()=>eo,"cleanRegex",()=>v,"clone",()=>L,"cloneDef",()=>S,"createTransparentProxy",()=>M,"defineLazy",()=>_,"esc",()=>T,"escapeRegex",()=>z,"extend",()=>K,"finalizeIssue",()=>er,"floatSafeRemainder",()=>b,"getElementAtPath",()=>$,"getEnumValues",()=>f,"getLengthableOrigin",()=>ei,"getParsedType",0,e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return"promise";if("undefined"!=typeof Map&&e instanceof Map)return"map";if("undefined"!=typeof Set&&e instanceof Set)return"set";if("undefined"!=typeof Date&&e instanceof Date)return"date";if("undefined"!=typeof File&&e instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${t}`)}},"getSizableOrigin",()=>en,"hexToUint8Array",()=>ed,"isObject",()=>R,"isPlainObject",()=>P,"issue",()=>ea,"joinValues",()=>m,"jsonStringifyReplacer",()=>h,"merge",()=>J,"mergeDefs",()=>I,"normalizeParams",()=>Z,"nullish",()=>y,"numKeys",()=>D,"objectClone",()=>x,"omit",()=>H,"optionalKeys",()=>V,"partial",()=>Q,"pick",()=>W,"prefixIssues",()=>ee,"primitiveTypes",0,j,"promiseAllObject",()=>k,"propertyKeyTypes",0,C,"randomString",()=>A,"required",()=>X,"safeExtend",()=>G,"shallowClone",()=>U,"stringifyPrimitive",()=>q,"uint8ArrayToBase64",()=>el,"uint8ArrayToBase64url",()=>ec,"uint8ArrayToHex",()=>ep,"unwrapMessage",()=>et],57460);let em=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,h,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},eh=r("$ZodError",em),eg=r("$ZodError",em,{Parent:Error});function ey(e,t=e=>e.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function ev(e,t=e=>e.message){let r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code&&i.errors.length)i.errors.map(e=>n({issues:e}));else if("invalid_key"===i.code)n({issues:i.issues});else if("invalid_element"===i.code)n({issues:i.issues});else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r}function eb(e,t=e=>e.message){let r={errors:[]},n=(e,i=[])=>{var a,o;for(let s of e.issues)if("invalid_union"===s.code&&s.errors.length)s.errors.map(e=>n({issues:e},s.path));else if("invalid_key"===s.code)n({issues:s.issues},s.path);else if("invalid_element"===s.code)n({issues:s.issues},s.path);else{let e=[...i,...s.path];if(0===e.length){r.errors.push(t(s));continue}let n=r,l=0;for(;l<e.length;){let r=e[l],i=l===e.length-1;"string"==typeof r?(n.properties??(n.properties={}),(a=n.properties)[r]??(a[r]={errors:[]}),n=n.properties[r]):(n.items??(n.items=[]),(o=n.items)[r]??(o[r]={errors:[]}),n=n.items[r]),i&&n.errors.push(t(s)),l++}}};return n(e),r}function ew(e){let t=[];for(let r of e.map(e=>"object"==typeof e?e.key:e))"number"==typeof r?t.push(`[${r}]`):"symbol"==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function e_(e){let t=[];for(let r of[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length))t.push(` ${r.message}`),r.path?.length&&t.push(`   at ${ew(r.path)}`);return t.join("\n")}e.s(["$ZodError",0,eh,"$ZodRealError",0,eg,"flattenError",()=>ey,"formatError",()=>ev,"prettifyError",()=>e_,"toDotPath",()=>ew,"treeifyError",()=>eb],4329);let ex=e=>(t,r,n,a)=>{let o=n?Object.assign(n,{async:!1}):{async:!1},l=t._zod.run({value:r,issues:[]},o);if(l instanceof Promise)throw new i;if(l.issues.length){let t=new(a?.Err??e)(l.issues.map(e=>er(e,o,s())));throw O(t,a?.callee),t}return l.value},eE=ex(eg),eI=e=>async(t,r,n,i)=>{let a=n?Object.assign(n,{async:!0}):{async:!0},o=t._zod.run({value:r,issues:[]},a);if(o instanceof Promise&&(o=await o),o.issues.length){let t=new(i?.Err??e)(o.issues.map(e=>er(e,a,s())));throw O(t,i?.callee),t}return o.value},eS=eI(eg),e$=e=>(t,r,n)=>{let a=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},a);if(o instanceof Promise)throw new i;return o.issues.length?{success:!1,error:new(e??eh)(o.issues.map(e=>er(e,a,s())))}:{success:!0,data:o.value}},ek=e$(eg),eA=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>er(e,i,s())))}:{success:!0,data:a.value}},eT=eA(eg),eO=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ex(e)(t,r,i)},eR=eO(eg),eN=e=>(t,r,n)=>ex(e)(t,r,n),eP=eN(eg),eU=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return eI(e)(t,r,i)},eD=eU(eg),eC=e=>async(t,r,n)=>eI(e)(t,r,n),ej=eC(eg),ez=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return e$(e)(t,r,i)},eL=ez(eg),eZ=e=>(t,r,n)=>e$(e)(t,r,n),eM=eZ(eg),eq=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return eA(e)(t,r,i)},eV=eq(eg),eB=e=>async(t,r,n)=>eA(e)(t,r,n),eF=eB(eg);e.s(["_decode",0,eN,"_decodeAsync",0,eC,"_encode",0,eO,"_encodeAsync",0,eU,"_parse",0,ex,"_parseAsync",0,eI,"_safeDecode",0,eZ,"_safeDecodeAsync",0,eB,"_safeEncode",0,ez,"_safeEncodeAsync",0,eq,"_safeParse",0,e$,"_safeParseAsync",0,eA,"decode",0,eP,"decodeAsync",0,ej,"encode",0,eR,"encodeAsync",0,eD,"parse",0,eE,"parseAsync",0,eS,"safeDecode",0,eM,"safeDecodeAsync",0,eF,"safeEncode",0,eL,"safeEncodeAsync",0,eV,"safeParse",0,ek,"safeParseAsync",0,eT],85893);let eW=/^[cC][^\s-]{8,}$/,eH=/^[0-9a-z]+$/,eK=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,eG=/^[0-9a-vA-V]{20}$/,eJ=/^[A-Za-z0-9]{27}$/,eQ=/^[a-zA-Z0-9_-]{21}$/,eX=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,eY=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,e0=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,e1=e0(4),e4=e0(6),e6=e0(7),e2=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,e3=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u;function e9(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let e8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,e5=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,e7=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,te=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tt=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,tr=/^[A-Za-z0-9_-]*$/,tn=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,ti=/^\+(?:[0-9]){6,14}[0-9]$/,ta="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",to=RegExp(`^${ta}$`);function ts(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function tl(e){return RegExp(`^${ts(e)}$`)}function tu(e){let t=ts({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${t}(?:${r.join("|")})`;return RegExp(`^${ta}T(?:${n})$`)}let tc=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},td=/^-?\d+n?$/,tp=/^-?\d+$/,tf=/^-?\d+(?:\.\d+)?/,tm=/^(?:true|false)$/i,th=/^null$/i,tg=/^undefined$/i,ty=/^[^A-Z]*$/,tv=/^[^a-z]*$/;function tb(e,t){return RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function tw(e){return RegExp(`^[A-Za-z0-9_-]{${e}}$`)}let t_=tb(22,"=="),tx=tw(22),tE=tb(27,"="),tI=tw(27),tS=tb(43,"="),t$=tw(43),tk=tb(64,""),tA=tw(64),tT=tb(86,"=="),tO=tw(86);e.s(["base64",0,tt,"base64url",0,tr,"bigint",0,td,"boolean",0,tm,"browserEmail",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"cidrv4",0,e7,"cidrv6",0,te,"cuid",0,eW,"cuid2",0,eH,"date",0,to,"datetime",()=>tu,"domain",0,/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,"duration",0,eX,"e164",0,ti,"email",0,e2,"emoji",()=>e9,"extendedDuration",0,/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,"guid",0,eY,"hex",0,/^[0-9a-fA-F]*$/,"hostname",0,tn,"html5Email",0,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"idnEmail",0,e3,"integer",0,tp,"ipv4",0,e8,"ipv6",0,e5,"ksuid",0,eJ,"lowercase",0,ty,"md5_base64",0,t_,"md5_base64url",0,tx,"md5_hex",0,/^[0-9a-fA-F]{32}$/,"nanoid",0,eQ,"null",()=>th,"number",0,tf,"rfc5322Email",0,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"sha1_base64",0,tE,"sha1_base64url",0,tI,"sha1_hex",0,/^[0-9a-fA-F]{40}$/,"sha256_base64",0,tS,"sha256_base64url",0,t$,"sha256_hex",0,/^[0-9a-fA-F]{64}$/,"sha384_base64",0,tk,"sha384_base64url",0,tA,"sha384_hex",0,/^[0-9a-fA-F]{96}$/,"sha512_base64",0,tT,"sha512_base64url",0,tO,"sha512_hex",0,/^[0-9a-fA-F]{128}$/,"string",0,tc,"time",()=>tl,"ulid",0,eK,"undefined",()=>tg,"unicodeEmail",0,e3,"uppercase",0,tv,"uuid",0,e0,"uuid4",0,e1,"uuid6",0,e4,"uuid7",0,e6,"xid",0,eG],78621);let tR=r("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),tN={number:"number",bigint:"bigint",object:"date"},tP=r("$ZodCheckLessThan",(e,t)=>{tR.init(e,t);let r=tN[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??1/0;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),tU=r("$ZodCheckGreaterThan",(e,t)=>{tR.init(e,t);let r=tN[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??-1/0;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),tD=r("$ZodCheckMultipleOf",(e,t)=>{tR.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===b(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),tC=r("$ZodCheckNumberFormat",(e,t)=>{tR.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[i,a]=B[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=i,n.maximum=a,r&&(n.pattern=tp)}),e._zod.check=o=>{let s=o.value;if(r){if(!Number.isInteger(s))return void o.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:s,inst:e});if(!Number.isSafeInteger(s))return void(s>0?o.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):o.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}))}s<i&&o.issues.push({origin:"number",input:s,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>a&&o.issues.push({origin:"number",input:s,code:"too_big",maximum:a,inst:e})}}),tj=r("$ZodCheckBigIntFormat",(e,t)=>{tR.init(e,t);let[r,n]=F[t.format];e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,i.minimum=r,i.maximum=n}),e._zod.check=i=>{let a=i.value;a<r&&i.issues.push({origin:"bigint",input:a,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),a>n&&i.issues.push({origin:"bigint",input:a,code:"too_big",maximum:n,inst:e})}}),tz=r("$ZodCheckMaxSize",(e,t)=>{var r;tR.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!y(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;n.size<=t.maximum||r.issues.push({origin:en(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),tL=r("$ZodCheckMinSize",(e,t)=>{var r;tR.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!y(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;n.size>=t.minimum||r.issues.push({origin:en(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),tZ=r("$ZodCheckSizeEquals",(e,t)=>{var r;tR.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!y(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{let n=r.value,i=n.size;if(i===t.size)return;let a=i>t.size;r.issues.push({origin:en(n),...a?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),tM=r("$ZodCheckMaxLength",(e,t)=>{var r;tR.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!y(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let i=ei(n);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),tq=r("$ZodCheckMinLength",(e,t)=>{var r;tR.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!y(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let i=ei(n);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),tV=r("$ZodCheckLengthEquals",(e,t)=>{var r;tR.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!y(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,i=n.length;if(i===t.length)return;let a=ei(n),o=i>t.length;r.issues.push({origin:a,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),tB=r("$ZodCheckStringFormat",(e,t)=>{var r,n;tR.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),tF=r("$ZodCheckRegex",(e,t)=>{tB.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),tW=r("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=ty),tB.init(e,t)}),tH=r("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=tv),tB.init(e,t)}),tK=r("$ZodCheckIncludes",(e,t)=>{tR.init(e,t);let r=z(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),tG=r("$ZodCheckStartsWith",(e,t)=>{tR.init(e,t);let r=RegExp(`^${z(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),tJ=r("$ZodCheckEndsWith",(e,t)=>{tR.init(e,t);let r=RegExp(`.*${z(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function tQ(e,t,r){e.issues.length&&t.issues.push(...ee(r,e.issues))}let tX=r("$ZodCheckProperty",(e,t)=>{tR.init(e,t),e._zod.check=e=>{let r=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(r=>tQ(r,e,t.property));tQ(r,e,t.property)}}),tY=r("$ZodCheckMimeType",(e,t)=>{tR.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}}),t0=r("$ZodCheckOverwrite",(e,t)=>{tR.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});e.s(["$ZodCheck",0,tR,"$ZodCheckBigIntFormat",0,tj,"$ZodCheckEndsWith",0,tJ,"$ZodCheckGreaterThan",0,tU,"$ZodCheckIncludes",0,tK,"$ZodCheckLengthEquals",0,tV,"$ZodCheckLessThan",0,tP,"$ZodCheckLowerCase",0,tW,"$ZodCheckMaxLength",0,tM,"$ZodCheckMaxSize",0,tz,"$ZodCheckMimeType",0,tY,"$ZodCheckMinLength",0,tq,"$ZodCheckMinSize",0,tL,"$ZodCheckMultipleOf",0,tD,"$ZodCheckNumberFormat",0,tC,"$ZodCheckOverwrite",0,t0,"$ZodCheckProperty",0,tX,"$ZodCheckRegex",0,tF,"$ZodCheckSizeEquals",0,tZ,"$ZodCheckStartsWith",0,tG,"$ZodCheckStringFormat",0,tB,"$ZodCheckUpperCase",0,tH],65106);class t1{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}e.s(["Doc",()=>t1],17904);let t4={major:4,minor:1,patch:12};e.s(["version",0,t4],7092);let t6=r("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=t4;let n=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&n.unshift(e),n))for(let r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,a=Y(e);for(let o of t){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(a)continue;let t=e.issues.length,s=o._zod.check(e);if(s instanceof Promise&&r?.async===!1)throw new i;if(n||s instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await s,e.issues.length!==t&&(a||(a=Y(e,t)))});else{if(e.issues.length===t)continue;a||(a=Y(e,t))}}return n?n.then(()=>e):e},r=(r,a,o)=>{if(Y(r))return r.aborted=!0,r;let s=t(a,n,o);if(s instanceof Promise){if(!1===o.async)throw new i;return s.then(t=>e._zod.parse(t,o))}return e._zod.parse(s,o)};e._zod.run=(a,o)=>{if(o.skipChecks)return e._zod.parse(a,o);if("backward"===o.direction){let t=e._zod.parse({value:a.value,issues:[]},{...o,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,a,o)):r(t,a,o)}let s=e._zod.parse(a,o);if(s instanceof Promise){if(!1===o.async)throw new i;return s.then(e=>t(e,n,o))}return t(s,n,o)}}e["~standard"]={validate:t=>{try{let r=ek(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return eT(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),t2=r("$ZodString",(e,t)=>{t6.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??tc(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),t3=r("$ZodStringFormat",(e,t)=>{tB.init(e,t),t2.init(e,t)}),t9=r("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=eY),t3.init(e,t)}),t8=r("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=e0(e))}else t.pattern??(t.pattern=e0());t3.init(e,t)}),t5=r("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=e2),t3.init(e,t)}),t7=r("$ZodURL",(e,t)=>{t3.init(e,t),e._zod.check=r=>{try{let n=r.value.trim(),i=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:tn.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=i.href:r.value=n;return}catch(n){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),re=r("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=e9()),t3.init(e,t)}),rt=r("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=eQ),t3.init(e,t)}),rr=r("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=eW),t3.init(e,t)}),rn=r("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=eH),t3.init(e,t)}),ri=r("$ZodULID",(e,t)=>{t.pattern??(t.pattern=eK),t3.init(e,t)}),ra=r("$ZodXID",(e,t)=>{t.pattern??(t.pattern=eG),t3.init(e,t)}),ro=r("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=eJ),t3.init(e,t)}),rs=r("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=tu(t)),t3.init(e,t)}),rl=r("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=to),t3.init(e,t)}),ru=r("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=tl(t)),t3.init(e,t)}),rc=r("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=eX),t3.init(e,t)}),rd=r("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=e8),t3.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),rp=r("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=e5),t3.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),rf=r("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=e7),t3.init(e,t)}),rm=r("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=te),t3.init(e,t),e._zod.check=r=>{let n=r.value.split("/");try{if(2!==n.length)throw Error();let[e,t]=n;if(!t)throw Error();let r=Number(t);if(`${r}`!==t||r<0||r>128)throw Error();new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function rh(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let rg=r("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=tt),t3.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{rh(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function ry(e){if(!tr.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return rh(t.padEnd(4*Math.ceil(t.length/4),"="))}let rv=r("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=tr),t3.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{ry(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),rb=r("$ZodE164",(e,t)=>{t.pattern??(t.pattern=ti),t3.init(e,t)});function rw(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));if("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))return!1;return!0}catch{return!1}}let r_=r("$ZodJWT",(e,t)=>{t3.init(e,t),e._zod.check=r=>{rw(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),rx=r("$ZodCustomStringFormat",(e,t)=>{t3.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),rE=r("$ZodNumber",(e,t)=>{t6.init(e,t),e._zod.pattern=e._zod.bag.pattern??tf,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let i=r.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return r;let a="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...a?{received:a}:{}}),r}}),rI=r("$ZodNumber",(e,t)=>{tC.init(e,t),rE.init(e,t)}),rS=r("$ZodBoolean",(e,t)=>{t6.init(e,t),e._zod.pattern=tm,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let i=r.value;return"boolean"==typeof i||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),r$=r("$ZodBigInt",(e,t)=>{t6.init(e,t),e._zod.pattern=td,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(e){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),rk=r("$ZodBigInt",(e,t)=>{tj.init(e,t),r$.init(e,t)}),rA=r("$ZodSymbol",(e,t)=>{t6.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return"symbol"==typeof n||t.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),t}}),rT=r("$ZodUndefined",(e,t)=>{t6.init(e,t),e._zod.pattern=tg,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),t}}),rO=r("$ZodNull",(e,t)=>{t6.init(e,t),e._zod.pattern=th,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}}),rR=r("$ZodAny",(e,t)=>{t6.init(e,t),e._zod.parse=e=>e}),rN=r("$ZodUnknown",(e,t)=>{t6.init(e,t),e._zod.parse=e=>e}),rP=r("$ZodNever",(e,t)=>{t6.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),rU=r("$ZodVoid",(e,t)=>{t6.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return void 0===n||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}}),rD=r("$ZodDate",(e,t)=>{t6.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(e){}let i=r.value,a=i instanceof Date;return a&&!Number.isNaN(i.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:i,...a?{received:"Invalid Date"}:{},inst:e}),r}});function rC(e,t,r){e.issues.length&&t.issues.push(...ee(r,e.issues)),t.value[r]=e.value}let rj=r("$ZodArray",(e,t)=>{t6.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let o=i[e],s=t.element._zod.run({value:o,issues:[]},n);s instanceof Promise?a.push(s.then(t=>rC(t,r,e))):rC(s,r,e)}return a.length?Promise.all(a).then(()=>r):r}});function rz(e,t,r,n){e.issues.length&&t.issues.push(...ee(r,e.issues)),void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function rL(e){let t=Object.keys(e.shape);for(let r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=V(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function rZ(e,t,r,n,i,a){let o=[],s=i.keySet,l=i.catchall._zod,u=l.def.type;for(let i of Object.keys(t)){if(s.has(i))continue;if("never"===u){o.push(i);continue}let a=l.run({value:t[i],issues:[]},n);a instanceof Promise?e.push(a.then(e=>rz(e,r,i,t))):rz(a,r,i,t)}return(o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:t,inst:a}),e.length)?Promise.all(e).then(()=>r):r}let rM=r("$ZodObject",(e,t)=>{let r;t6.init(e,t);let n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}let i=g(()=>rL(t));_(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values)for(let e of(r[t]??(r[t]=new Set),n.values))r[t].add(e)}return r});let a=t.catchall;e._zod.parse=(t,n)=>{r??(r=i.value);let o=t.value;if(!R(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};let s=[],l=r.shape;for(let e of r.keys){let r=l[e]._zod.run({value:o[e],issues:[]},n);r instanceof Promise?s.push(r.then(r=>rz(r,t,e,o))):rz(r,t,e,o)}return a?rZ(s,o,t,n,i.value,e):s.length?Promise.all(s).then(()=>t):t}}),rq=r("$ZodObjectJIT",(e,t)=>{let r,n;rM.init(e,t);let i=e._zod.parse,a=g(()=>rL(t)),s=!o.jitless,l=s&&N.value,u=t.catchall;e._zod.parse=(o,c)=>{n??(n=a.value);let d=o.value;return R(d)?s&&l&&c?.async===!1&&!0!==c.jitless?(r||(r=(e=>{let t=new t1(["shape","payload","ctx"]),r=a.value,n=e=>{let t=T(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let i=Object.create(null),o=0;for(let e of r.keys)i[e]=`key_${o++}`;for(let e of(t.write("const newResult = {};"),r.keys)){let r=i[e],a=T(e);t.write(`const ${r} = ${n(e)};`),t.write(`
        if (${r}.issues.length) {
          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${a}, ...iss.path] : [${a}]
          })));
        }
        
        
        if (${r}.value === undefined) {
          if (${a} in input) {
            newResult[${a}] = undefined;
          }
        } else {
          newResult[${a}] = ${r}.value;
        }
        
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let s=t.compile();return(t,r)=>s(e,t,r)})(t.shape)),o=r(o,c),u)?rZ([],d,o,c,n,e):o:i(o,c):(o.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),o)}});function rV(e,t,r,n){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;let i=e.filter(e=>!Y(e));return 1===i.length?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>er(e,n,s())))}),t)}let rB=r("$ZodUnion",(e,t)=>{t6.init(e,t),_(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),_(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),_(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),_(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>v(e.source)).join("|")})$`)}});let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(r)return n(i,a);let o=!1,s=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);if(t instanceof Promise)s.push(t),o=!0;else{if(0===t.issues.length)return t;s.push(t)}}return o?Promise.all(s).then(t=>rV(t,i,e,a)):rV(s,i,e,a)}}),rF=r("$ZodDiscriminatedUnion",(e,t)=>{rB.init(e,t);let r=e._zod.parse;_(e._zod,"propValues",()=>{let e={};for(let r of t.options){let n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(n))for(let n of(e[t]||(e[t]=new Set),r))e[t].add(n)}return e});let n=g(()=>{let e=t.options,r=new Map;for(let n of e){let e=n._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(i,a)=>{let o=i.value;if(!R(o))return i.issues.push({code:"invalid_type",expected:"object",input:o,inst:e}),i;let s=n.value.get(o?.[t.discriminator]);return s?s._zod.run(i,a):t.unionFallback?r(i,a):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),i)}}),rW=r("$ZodIntersection",(e,t)=>{t6.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,i=t.left._zod.run({value:n,issues:[]},r),a=t.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([t,r])=>rH(e,t,r)):rH(e,i,a)}});function rH(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Y(e))return e;let n=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(P(t)&&P(r)){let n=Object.keys(r),i=Object.keys(t).filter(e=>-1!==n.indexOf(e)),a={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};a[n]=i.data}return{valid:!0,data:a}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let i=0;i<t.length;i++){let a=e(t[i],r[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!n.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}let rK=r("$ZodTuple",(e,t)=>{t6.init(e,t);let r=t.items,n=r.length-[...r].reverse().findIndex(e=>"optional"!==e._zod.optin);e._zod.parse=(i,a)=>{let o=i.value;if(!Array.isArray(o))return i.issues.push({input:o,inst:e,expected:"tuple",code:"invalid_type"}),i;i.value=[];let s=[];if(!t.rest){let t=o.length>r.length,a=o.length<n-1;if(t||a)return i.issues.push({...t?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:o,inst:e,origin:"array"}),i}let l=-1;for(let e of r){if(++l>=o.length&&l>=n)continue;let t=e._zod.run({value:o[l],issues:[]},a);t instanceof Promise?s.push(t.then(e=>rG(e,i,l))):rG(t,i,l)}if(t.rest)for(let e of o.slice(r.length)){l++;let r=t.rest._zod.run({value:e,issues:[]},a);r instanceof Promise?s.push(r.then(e=>rG(e,i,l))):rG(r,i,l)}return s.length?Promise.all(s).then(()=>i):i}});function rG(e,t,r){e.issues.length&&t.issues.push(...ee(r,e.issues)),t.value[r]=e.value}let rJ=r("$ZodRecord",(e,t)=>{t6.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!P(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let a=[];if(t.keyType._zod.values){let o,s=t.keyType._zod.values;for(let e of(r.value={},s))if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let o=t.valueType._zod.run({value:i[e],issues:[]},n);o instanceof Promise?a.push(o.then(t=>{t.issues.length&&r.issues.push(...ee(e,t.issues)),r.value[e]=t.value})):(o.issues.length&&r.issues.push(...ee(e,o.issues)),r.value[e]=o.value)}for(let e in i)s.has(e)||(o=o??[]).push(e);o&&o.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:o})}else for(let o of(r.value={},Reflect.ownKeys(i))){if("__proto__"===o)continue;let l=t.keyType._zod.run({value:o,issues:[]},n);if(l instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(l.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(e=>er(e,n,s())),input:o,path:[o],inst:e}),r.value[l.value]=l.value;continue}let u=t.valueType._zod.run({value:i[o],issues:[]},n);u instanceof Promise?a.push(u.then(e=>{e.issues.length&&r.issues.push(...ee(o,e.issues)),r.value[l.value]=e.value})):(u.issues.length&&r.issues.push(...ee(o,u.issues)),r.value[l.value]=u.value)}return a.length?Promise.all(a).then(()=>r):r}}),rQ=r("$ZodMap",(e,t)=>{t6.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),r;let a=[];for(let[o,s]of(r.value=new Map,i)){let l=t.keyType._zod.run({value:o,issues:[]},n),u=t.valueType._zod.run({value:s,issues:[]},n);l instanceof Promise||u instanceof Promise?a.push(Promise.all([l,u]).then(([t,a])=>{rX(t,a,r,o,i,e,n)})):rX(l,u,r,o,i,e,n)}return a.length?Promise.all(a).then(()=>r):r}});function rX(e,t,r,n,i,a,o){e.issues.length&&(C.has(typeof n)?r.issues.push(...ee(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:i,inst:a,issues:e.issues.map(e=>er(e,o,s()))})),t.issues.length&&(C.has(typeof n)?r.issues.push(...ee(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:i,inst:a,key:n,issues:t.issues.map(e=>er(e,o,s()))})),r.value.set(e.value,t.value)}let rY=r("$ZodSet",(e,t)=>{t6.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Set))return r.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),r;let a=[];for(let e of(r.value=new Set,i)){let i=t.valueType._zod.run({value:e,issues:[]},n);i instanceof Promise?a.push(i.then(e=>r0(e,r))):r0(i,r)}return a.length?Promise.all(a).then(()=>r):r}});function r0(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}let r1=r("$ZodEnum",(e,t)=>{t6.init(e,t);let r=f(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=RegExp(`^(${r.filter(e=>C.has(typeof e)).map(e=>"string"==typeof e?z(e):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{let a=t.value;return n.has(a)||t.issues.push({code:"invalid_value",values:r,input:a,inst:e}),t}}),r4=r("$ZodLiteral",(e,t)=>{if(t6.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?z(e):e?z(e.toString()):String(e)).join("|")})$`),e._zod.parse=(r,n)=>{let i=r.value;return e._zod.values.has(i)||r.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),r}}),r6=r("$ZodFile",(e,t)=>{t6.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}}),r2=r("$ZodTransform",(e,t)=>{t6.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new a(e.constructor.name);let o=t.transform(r.value,r);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(e=>(r.value=e,r));if(o instanceof Promise)throw new i;return r.value=o,r}});function r3(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let r9=r("$ZodOptional",(e,t)=>{t6.init(e,t),e._zod.optin="optional",e._zod.optout="optional",_(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),_(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${v(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>r3(t,e.value)):r3(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),r8=r("$ZodNullable",(e,t)=>{t6.init(e,t),_(e._zod,"optin",()=>t.innerType._zod.optin),_(e._zod,"optout",()=>t.innerType._zod.optout),_(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${v(e.source)}|null)$`):void 0}),_(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),r5=r("$ZodDefault",(e,t)=>{t6.init(e,t),e._zod.optin="optional",_(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>r7(e,t)):r7(n,t)}});function r7(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let ne=r("$ZodPrefault",(e,t)=>{t6.init(e,t),e._zod.optin="optional",_(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),nt=r("$ZodNonOptional",(e,t)=>{t6.init(e,t),_(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(t=>nr(t,e)):nr(i,e)}});function nr(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let nn=r("$ZodSuccess",(e,t)=>{t6.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new a("ZodSuccess");let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}}),ni=r("$ZodCatch",(e,t)=>{t6.init(e,t),_(e._zod,"optin",()=>t.innerType._zod.optin),_(e._zod,"optout",()=>t.innerType._zod.optout),_(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>er(e,r,s()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>er(e,r,s()))},input:e.value}),e.issues=[]),e)}}),na=r("$ZodNaN",(e,t)=>{t6.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),no=r("$ZodPipe",(e,t)=>{t6.init(e,t),_(e._zod,"values",()=>t.in._zod.values),_(e._zod,"optin",()=>t.in._zod.optin),_(e._zod,"optout",()=>t.out._zod.optout),_(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>ns(e,t.in,r)):ns(n,t.in,r)}let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>ns(e,t.out,r)):ns(n,t.out,r)}});function ns(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}let nl=r("$ZodCodec",(e,t)=>{t6.init(e,t),_(e._zod,"values",()=>t.in._zod.values),_(e._zod,"optin",()=>t.in._zod.optin),_(e._zod,"optout",()=>t.out._zod.optout),_(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>nu(e,t,r)):nu(n,t,r)}{let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>nu(e,t,r)):nu(n,t,r)}}});function nu(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){let n=t.transform(e.value,e);return n instanceof Promise?n.then(n=>nc(e,n,t.out,r)):nc(e,n,t.out,r)}{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(n=>nc(e,n,t.in,r)):nc(e,n,t.in,r)}}function nc(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}let nd=r("$ZodReadonly",(e,t)=>{t6.init(e,t),_(e._zod,"propValues",()=>t.innerType._zod.propValues),_(e._zod,"values",()=>t.innerType._zod.values),_(e._zod,"optin",()=>t.innerType._zod.optin),_(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(np):np(n)}});function np(e){return e.value=Object.freeze(e.value),e}let nf=r("$ZodTemplateLiteral",(e,t)=>{t6.init(e,t);let r=[];for(let e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw Error(`Invalid template literal part: ${e._zod.traits}`);let n=+!!t.startsWith("^"),i=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(n,i))}else if(null===e||j.has(typeof e))r.push(z(`${e}`));else throw Error(`Invalid template literal part: ${e}`);e._zod.pattern=RegExp(`^${r.join("")}$`),e._zod.parse=(r,n)=>("string"!=typeof r.value?r.issues.push({input:r.value,inst:e,expected:"template_literal",code:"invalid_type"}):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source})),r)}),nm=r("$ZodFunction",(e,t)=>(t6.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw Error("implement() must be called with a function");return function(...r){let n=Reflect.apply(t,this,e._def.input?eE(e._def.input,r):r);return e._def.output?eE(e._def.output,n):n}},e.implementAsync=t=>{if("function"!=typeof t)throw Error("implementAsync() must be called with a function");return async function(...r){let n=e._def.input?await eS(e._def.input,r):r,i=await Reflect.apply(t,this,n);return e._def.output?await eS(e._def.output,i):i}},e._zod.parse=(t,r)=>("function"!=typeof t.value?t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}):e._def.output&&"promise"===e._def.output._zod.def.type?t.value=e.implementAsync(t.value):t.value=e.implement(t.value),t),e.input=(...t)=>{let r=e.constructor;return new r(Array.isArray(t[0])?{type:"function",input:new rK({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}:{type:"function",input:t[0],output:e._def.output})},e.output=t=>new e.constructor({type:"function",input:e._def.input,output:t}),e)),nh=r("$ZodPromise",(e,t)=>{t6.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))}),ng=r("$ZodLazy",(e,t)=>{t6.init(e,t),_(e._zod,"innerType",()=>t.getter()),_(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),_(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),_(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),_(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),ny=r("$ZodCustom",(e,t)=>{tR.init(e,t),t6.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(t=>nv(t,r,n,e));nv(i,r,n,e)}});function nv(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(ea(e))}}function nb(e,t,r,n){let i=Math.abs(e),a=i%10,o=i%100;return o>=11&&o<=19?n:1===a?t:a>=2&&a<=4?r:n}function nw(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return`  ${r.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  ${q(r.values[0])}`;return`  ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`  ${r.origin??""} ${t} ${r.maximum.toString()} ${n.unit??""}`;return`  ${r.origin??""} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`  ${r.origin} ${t} ${r.minimum.toString()} ${n.unit}`;return`  ${r.origin} ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`  "${r.prefix}"`;if("ends_with"===r.format)return`  "${r.suffix}"`;if("includes"===r.format)return`  "${r.includes}"`;if("regex"===r.format)return`  ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return`  ${r.divisor}`;case"unrecognized_keys":return` ${m(r.keys,", ")}`;case"invalid_key":return` ${r.origin}`;case"invalid_union":default:return``;case"invalid_element":return` ${r.origin}`}})}}e.s(["$ZodAny",0,rR,"$ZodArray",0,rj,"$ZodBase64",0,rg,"$ZodBase64URL",0,rv,"$ZodBigInt",0,r$,"$ZodBigIntFormat",0,rk,"$ZodBoolean",0,rS,"$ZodCIDRv4",0,rf,"$ZodCIDRv6",0,rm,"$ZodCUID",0,rr,"$ZodCUID2",0,rn,"$ZodCatch",0,ni,"$ZodCodec",0,nl,"$ZodCustom",0,ny,"$ZodCustomStringFormat",0,rx,"$ZodDate",0,rD,"$ZodDefault",0,r5,"$ZodDiscriminatedUnion",0,rF,"$ZodE164",0,rb,"$ZodEmail",0,t5,"$ZodEmoji",0,re,"$ZodEnum",0,r1,"$ZodFile",0,r6,"$ZodFunction",0,nm,"$ZodGUID",0,t9,"$ZodIPv4",0,rd,"$ZodIPv6",0,rp,"$ZodISODate",0,rl,"$ZodISODateTime",0,rs,"$ZodISODuration",0,rc,"$ZodISOTime",0,ru,"$ZodIntersection",0,rW,"$ZodJWT",0,r_,"$ZodKSUID",0,ro,"$ZodLazy",0,ng,"$ZodLiteral",0,r4,"$ZodMap",0,rQ,"$ZodNaN",0,na,"$ZodNanoID",0,rt,"$ZodNever",0,rP,"$ZodNonOptional",0,nt,"$ZodNull",0,rO,"$ZodNullable",0,r8,"$ZodNumber",0,rE,"$ZodNumberFormat",0,rI,"$ZodObject",0,rM,"$ZodObjectJIT",0,rq,"$ZodOptional",0,r9,"$ZodPipe",0,no,"$ZodPrefault",0,ne,"$ZodPromise",0,nh,"$ZodReadonly",0,nd,"$ZodRecord",0,rJ,"$ZodSet",0,rY,"$ZodString",0,t2,"$ZodStringFormat",0,t3,"$ZodSuccess",0,nn,"$ZodSymbol",0,rA,"$ZodTemplateLiteral",0,nf,"$ZodTransform",0,r2,"$ZodTuple",0,rK,"$ZodType",0,t6,"$ZodULID",0,ri,"$ZodURL",0,t7,"$ZodUUID",0,t8,"$ZodUndefined",0,rT,"$ZodUnion",0,rB,"$ZodUnknown",0,rN,"$ZodVoid",0,rU,"$ZodXID",0,ra,"isValidBase64",()=>rh,"isValidBase64URL",()=>ry,"isValidJWT",()=>rw],47329),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return`  :   ${r.expected}    ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  :   ${q(r.values[0])}`;return`  :     : ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`   :    ${r.origin??""} ${t} ${r.maximum.toString()} ${n.unit??""}`;return`  :    ${r.origin??""} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`  :   ${r.origin}   ${t} ${r.minimum.toString()} ${n.unit}`;return`  :   ${r.origin}   ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`  :     "${r.prefix}"`;if("ends_with"===r.format)return`  :     "${r.suffix}"`;if("includes"===r.format)return`  :    "${r.includes}"`;if("regex"===r.format)return`  :     ${r.pattern}`;return`${t[r.format]??r.format}  `;case"not_multiple_of":return`  :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${m(r.keys," ")}`;case"invalid_key":return`    ${r.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`    ${r.origin}`}})}}],94854),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Yanl dyr: g\xf6zlniln ${r.expected}, daxil olan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Yanl dyr: g\xf6zlniln ${q(r.values[0])}`;return`Yanl se\xe7im: aadaklardan biri olmaldr: ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${r.origin??"dyr"} ${t}${r.maximum.toString()} ${n.unit??"element"}`;return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${r.origin??"dyr"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`\xc7ox ki\xe7ik: g\xf6zlniln ${r.origin} ${t}${r.minimum.toString()} ${n.unit}`;return`\xc7ox ki\xe7ik: g\xf6zlniln ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Yanl mtn: "${r.prefix}" il balamaldr`;if("ends_with"===r.format)return`Yanl mtn: "${r.suffix}" il bitmlidir`;if("includes"===r.format)return`Yanl mtn: "${r.includes}" daxil olmaldr`;if("regex"===r.format)return`Yanl mtn: ${r.pattern} ablonuna uyun olmaldr`;return`Yanl ${t[r.format]??r.format}`;case"not_multiple_of":return`Yanl dd: ${r.divisor} il b\xf6l\xfcn biln olmaldr`;case"unrecognized_keys":return`Tannmayan a\xe7ar${r.keys.length>1?"lar":""}: ${m(r.keys,", ")}`;case"invalid_key":return`${r.origin} daxilind yanl a\xe7ar`;case"invalid_union":return"Yanl dyr";case"invalid_element":return`${r.origin} daxilind yanl dyr`;default:return`Yanl dyr`}})}}],11402),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}},t={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${q(r.values[0])}`;return` :    ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n){let e=nb(Number(r.maximum),n.unit.one,n.unit.few,n.unit.many);return` : ,  ${r.origin??""}  ${n.verb} ${t}${r.maximum.toString()} ${e}`}return` : ,  ${r.origin??""}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n){let e=nb(Number(r.minimum),n.unit.one,n.unit.few,n.unit.many);return` : ,  ${r.origin}  ${n.verb} ${t}${r.minimum.toString()} ${e}`}return` : ,  ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :    "${r.prefix}"`;if("ends_with"===r.format)return` :    "${r.suffix}"`;if("includes"===r.format)return` :   "${r.includes}"`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${m(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return` `}})}}],84266),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${q(r.values[0])}`;return` :    ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` :   ${r.origin??""}   ${t}${r.maximum.toString()} ${n.unit??""}`;return` :   ${r.origin??""}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` :   ${r.origin}   ${t}${r.minimum.toString()} ${n.unit}`;return` :   ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":{if("starts_with"===r.format)return` :     "${r.prefix}"`;if("ends_with"===r.format)return` :     "${r.suffix}"`;if("includes"===r.format)return` :    "${r.includes}"`;if("regex"===r.format)return` :     ${r.pattern}`;let e="";return"emoji"===r.format&&(e=""),"datetime"===r.format&&(e=""),"date"===r.format&&(e=""),"time"===r.format&&(e=""),"duration"===r.format&&(e=""),`${e} ${t[r.format]??r.format}`}case"not_multiple_of":return` :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${m(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return` `}})}}],73162),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"carcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}},t={regex:"entrada",email:"adrea electrnica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adrea IPv4",ipv6:"adrea IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},r=>{switch(r.code){case"invalid_type":return`Tipus inv\xe0lid: s'esperava ${r.expected}, s'ha rebut ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Valor inv\xe0lid: s'esperava ${q(r.values[0])}`;return`Opci\xf3 inv\xe0lida: s'esperava una de ${m(r.values," o ")}`;case"too_big":{let t=r.inclusive?"com a mxim":"menys de",n=e[r.origin]??null;if(n)return`Massa gran: s'esperava que ${r.origin??"el valor"} contingu\xe9s ${t} ${r.maximum.toString()} ${n.unit??"elements"}`;return`Massa gran: s'esperava que ${r.origin??"el valor"} fos ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"com a mnim":"ms de",n=e[r.origin]??null;if(n)return`Massa petit: s'esperava que ${r.origin} contingu\xe9s ${t} ${r.minimum.toString()} ${n.unit}`;return`Massa petit: s'esperava que ${r.origin} fos ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Format inv\xe0lid: ha de comen\xe7ar amb "${r.prefix}"`;if("ends_with"===r.format)return`Format inv\xe0lid: ha d'acabar amb "${r.suffix}"`;if("includes"===r.format)return`Format inv\xe0lid: ha d'incloure "${r.includes}"`;if("regex"===r.format)return`Format inv\xe0lid: ha de coincidir amb el patr\xf3 ${r.pattern}`;return`Format inv\xe0lid per a ${t[r.format]??r.format}`;case"not_multiple_of":return`N\xfamero inv\xe0lid: ha de ser m\xfaltiple de ${r.divisor}`;case"unrecognized_keys":return`Clau${r.keys.length>1?"s":""} no reconeguda${r.keys.length>1?"s":""}: ${m(r.keys,", ")}`;case"invalid_key":return`Clau inv\xe0lida a ${r.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Element inv\xe0lid a ${r.origin}`;default:return`Entrada inv\xe0lida`}})}}],74327),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"znak",verb:"mt"},file:{unit:"bajt",verb:"mt"},array:{unit:"prvk",verb:"mt"},set:{unit:"prvk",verb:"mt"}},t={regex:"regulrn vraz",email:"e-mailov adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve formtu ISO",date:"datum ve formtu ISO",time:"as ve formtu ISO",duration:"doba trvn ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zakdovan ve formtu base64",base64url:"etzec zakdovan ve formtu base64url",json_string:"etzec ve formtu JSON",e164:"slo E.164",jwt:"JWT",template_literal:"vstup"},r=>{switch(r.code){case"invalid_type":return`Neplatn\xfd vstup: oek\xe1v\xe1no ${r.expected}, obdreno ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"slo";case"string":return"etzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":if(Array.isArray(e))return"pole";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Neplatn\xfd vstup: oek\xe1v\xe1no ${q(r.values[0])}`;return`Neplatn\xe1 monost: oek\xe1v\xe1na jedna z hodnot ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Hodnota je p\xedli velk\xe1: ${r.origin??"hodnota"} mus\xed m\xedt ${t}${r.maximum.toString()} ${n.unit??"prvk"}`;return`Hodnota je p\xedli velk\xe1: ${r.origin??"hodnota"} mus\xed b\xfdt ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Hodnota je p\xedli mal\xe1: ${r.origin??"hodnota"} mus\xed m\xedt ${t}${r.minimum.toString()} ${n.unit??"prvk"}`;return`Hodnota je p\xedli mal\xe1: ${r.origin??"hodnota"} mus\xed b\xfdt ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Neplatn\xfd etzec: mus\xed za\xednat na "${r.prefix}"`;if("ends_with"===r.format)return`Neplatn\xfd etzec: mus\xed konit na "${r.suffix}"`;if("includes"===r.format)return`Neplatn\xfd etzec: mus\xed obsahovat "${r.includes}"`;if("regex"===r.format)return`Neplatn\xfd etzec: mus\xed odpov\xeddat vzoru ${r.pattern}`;return`Neplatn\xfd form\xe1t ${t[r.format]??r.format}`;case"not_multiple_of":return`Neplatn\xe9 \xedslo: mus\xed b\xfdt n\xe1sobkem ${r.divisor}`;case"unrecognized_keys":return`Nezn\xe1m\xe9 kl\xede: ${m(r.keys,", ")}`;case"invalid_key":return`Neplatn\xfd kl\xed v ${r.origin}`;case"invalid_union":return"Neplatn vstup";case"invalid_element":return`Neplatn\xe1 hodnota v ${r.origin}`;default:return`Neplatn\xfd vstup`}})}}],30699),e.s(["default",0,function(){let e,t,r;return{localeError:(e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"st",file:"fil"},r={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslt",date:"ISO-dato",time:"ISO-klokkeslt",duration:"ISO-varighed",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},n=>{var i,a,o,s;switch(n.code){case"invalid_type":return`Ugyldigt input: forventede ${t[i=n.expected]??i}, fik ${t[a=(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tal";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name;return"objekt"}return t})(n.input)]??a}`;case"invalid_value":if(1===n.values.length)return`Ugyldig v\xe6rdi: forventede ${q(n.values[0])}`;return`Ugyldigt valg: forventede en af f\xf8lgende ${m(n.values,"|")}`;case"too_big":{let r=n.inclusive?"<=":"<",i=e[n.origin]??null,a=t[o=n.origin]??o;if(i)return`For stor: forventede ${a??"value"} ${i.verb} ${r} ${n.maximum.toString()} ${i.unit??"elementer"}`;return`For stor: forventede ${a??"value"} havde ${r} ${n.maximum.toString()}`}case"too_small":{let r=n.inclusive?">=":">",i=e[n.origin]??null,a=t[s=n.origin]??s;if(i)return`For lille: forventede ${a} ${i.verb} ${r} ${n.minimum.toString()} ${i.unit}`;return`For lille: forventede ${a} havde ${r} ${n.minimum.toString()}`}case"invalid_format":if("starts_with"===n.format)return`Ugyldig streng: skal starte med "${n.prefix}"`;if("ends_with"===n.format)return`Ugyldig streng: skal ende med "${n.suffix}"`;if("includes"===n.format)return`Ugyldig streng: skal indeholde "${n.includes}"`;if("regex"===n.format)return`Ugyldig streng: skal matche m\xf8nsteret ${n.pattern}`;return`Ugyldig ${r[n.format]??n.format}`;case"not_multiple_of":return`Ugyldigt tal: skal v\xe6re deleligt med ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukendte ngler":"Ukendt ngle"}: ${m(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8gle i ${n.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xe6rdi i ${n.origin}`;default:return"Ugyldigt input"}})}}],81670),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}},t={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},r=>{switch(r.code){case"invalid_type":return`Ung\xfcltige Eingabe: erwartet ${r.expected}, erhalten ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Zahl";case"object":if(Array.isArray(e))return"Array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ung\xfcltige Eingabe: erwartet ${q(r.values[0])}`;return`Ung\xfcltige Option: erwartet eine von ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Zu gro\xdf: erwartet, dass ${r.origin??"Wert"} ${t}${r.maximum.toString()} ${n.unit??"Elemente"} hat`;return`Zu gro\xdf: erwartet, dass ${r.origin??"Wert"} ${t}${r.maximum.toString()} ist`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Zu klein: erwartet, dass ${r.origin} ${t}${r.minimum.toString()} ${n.unit} hat`;return`Zu klein: erwartet, dass ${r.origin} ${t}${r.minimum.toString()} ist`}case"invalid_format":if("starts_with"===r.format)return`Ung\xfcltiger String: muss mit "${r.prefix}" beginnen`;if("ends_with"===r.format)return`Ung\xfcltiger String: muss mit "${r.suffix}" enden`;if("includes"===r.format)return`Ung\xfcltiger String: muss "${r.includes}" enthalten`;if("regex"===r.format)return`Ung\xfcltiger String: muss dem Muster ${r.pattern} entsprechen`;return`Ung\xfcltig: ${t[r.format]??r.format}`;case"not_multiple_of":return`Ung\xfcltige Zahl: muss ein Vielfaches von ${r.divisor} sein`;case"unrecognized_keys":return`${r.keys.length>1?"Unbekannte Schlssel":"Unbekannter Schlssel"}: ${m(r.keys,", ")}`;case"invalid_key":return`Ung\xfcltiger Schl\xfcssel in ${r.origin}`;case"invalid_union":return"Ungltige Eingabe";case"invalid_element":return`Ung\xfcltiger Wert in ${r.origin}`;default:return`Ung\xfcltige Eingabe`}})}}],25048),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Invalid input: expected ${q(r.values[0])}`;return`Invalid option: expected one of ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Too big: expected ${r.origin??"value"} to have ${t}${r.maximum.toString()} ${n.unit??"elements"}`;return`Too big: expected ${r.origin??"value"} to be ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Too small: expected ${r.origin} to have ${t}${r.minimum.toString()} ${n.unit}`;return`Too small: expected ${r.origin} to be ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Invalid string: must start with "${r.prefix}"`;if("ends_with"===r.format)return`Invalid string: must end with "${r.suffix}"`;if("includes"===r.format)return`Invalid string: must include "${r.includes}"`;if("regex"===r.format)return`Invalid string: must match pattern ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${m(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`}})}}],1684),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}},t={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},r=>{switch(r.code){case"invalid_type":return`Nevalida enigo: atendiis ${r.expected}, riceviis ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":if(Array.isArray(e))return"tabelo";if(null===e)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Nevalida enigo: atendiis ${q(r.values[0])}`;return`Nevalida opcio: atendiis unu el ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Tro granda: atendiis ke ${r.origin??"valoro"} havu ${t}${r.maximum.toString()} ${n.unit??"elementojn"}`;return`Tro granda: atendiis ke ${r.origin??"valoro"} havu ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Tro malgranda: atendiis ke ${r.origin} havu ${t}${r.minimum.toString()} ${n.unit}`;return`Tro malgranda: atendiis ke ${r.origin} estu ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Nevalida karaktraro: devas komencii per "${r.prefix}"`;if("ends_with"===r.format)return`Nevalida karaktraro: devas finii per "${r.suffix}"`;if("includes"===r.format)return`Nevalida karaktraro: devas inkluzivi "${r.includes}"`;if("regex"===r.format)return`Nevalida karaktraro: devas kongrui kun la modelo ${r.pattern}`;return`Nevalida ${t[r.format]??r.format}`;case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${r.divisor}`;case"unrecognized_keys":return`Nekonata${r.keys.length>1?"j":""} losilo${r.keys.length>1?"j":""}: ${m(r.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${r.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${r.origin}`}})}}],52357),e.s(["default",0,function(){return{localeError:(()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"nmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nmero grande",symbol:"smbolo",undefined:"indefinido",null:"nulo",function:"funcin",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeracin",union:"unin",literal:"literal",promise:"promesa",void:"vaco",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(e){return t[e]??e}let n={regex:"entrada",email:"direccin de correo electrnico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duracin ISO",ipv4:"direccin IPv4",ipv6:"direccin IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return t=>{switch(t.code){case"invalid_type":return`Entrada inv\xe1lida: se esperaba ${r(t.expected)}, recibido ${r((e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype)return e.constructor.name;return"object"}return t})(t.input))}`;case"invalid_value":if(1===t.values.length)return`Entrada inv\xe1lida: se esperaba ${q(t.values[0])}`;return`Opci\xf3n inv\xe1lida: se esperaba una de ${m(t.values,"|")}`;case"too_big":{let n=t.inclusive?"<=":"<",i=e[t.origin]??null,a=r(t.origin);if(i)return`Demasiado grande: se esperaba que ${a??"valor"} tuviera ${n}${t.maximum.toString()} ${i.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${a??"valor"} fuera ${n}${t.maximum.toString()}`}case"too_small":{let n=t.inclusive?">=":">",i=e[t.origin]??null,a=r(t.origin);if(i)return`Demasiado peque\xf1o: se esperaba que ${a} tuviera ${n}${t.minimum.toString()} ${i.unit}`;return`Demasiado peque\xf1o: se esperaba que ${a} fuera ${n}${t.minimum.toString()}`}case"invalid_format":if("starts_with"===t.format)return`Cadena inv\xe1lida: debe comenzar con "${t.prefix}"`;if("ends_with"===t.format)return`Cadena inv\xe1lida: debe terminar en "${t.suffix}"`;if("includes"===t.format)return`Cadena inv\xe1lida: debe incluir "${t.includes}"`;if("regex"===t.format)return`Cadena inv\xe1lida: debe coincidir con el patr\xf3n ${t.pattern}`;return`Inv\xe1lido ${n[t.format]??t.format}`;case"not_multiple_of":return`N\xfamero inv\xe1lido: debe ser m\xfaltiplo de ${t.divisor}`;case"unrecognized_keys":return`Llave${t.keys.length>1?"s":""} desconocida${t.keys.length>1?"s":""}: ${m(t.keys,", ")}`;case"invalid_key":return`Llave inv\xe1lida en ${r(t.origin)}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido en ${r(t.origin)}`;default:return`Entrada inv\xe1lida`}}})()}}],39576),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}  `;case"invalid_value":if(1===r.values.length)return` :  ${q(r.values[0])} `;return` :    ${m(r.values,"|")} `;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` : ${r.origin??""}  ${t}${r.maximum.toString()} ${n.unit??""} `;return` : ${r.origin??""}  ${t}${r.maximum.toString()} `}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` : ${r.origin}  ${t}${r.minimum.toString()} ${n.unit} `;return` : ${r.origin}  ${t}${r.minimum.toString()} `}case"invalid_format":if("starts_with"===r.format)return` :   "${r.prefix}"  `;if("ends_with"===r.format)return` :   "${r.suffix}"  `;if("includes"===r.format)return` :   "${r.includes}" `;if("regex"===r.format)return` :    ${r.pattern}   `;return`${t[r.format]??r.format} `;case"not_multiple_of":return` :   ${r.divisor} `;case"unrecognized_keys":return`${r.keys.length>1?"":""} : ${m(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":default:return` `;case"invalid_element":return`   ${r.origin}`}})}}],74138),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"merkki",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pivmrn"}},t={regex:"snnllinen lauseke",email:"shkpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pivmr",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},r=>{switch(r.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${r.expected}, oli ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Virheellinen sy\xf6te: t\xe4ytyy olla ${q(r.values[0])}`;return`Virheellinen valinta: t\xe4ytyy olla yksi seuraavista: ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Liian suuri: ${n.subject} t\xe4ytyy olla ${t}${r.maximum.toString()} ${n.unit}`.trim();return`Liian suuri: arvon t\xe4ytyy olla ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Liian pieni: ${n.subject} t\xe4ytyy olla ${t}${r.minimum.toString()} ${n.unit}`.trim();return`Liian pieni: arvon t\xe4ytyy olla ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy alkaa "${r.prefix}"`;if("ends_with"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy loppua "${r.suffix}"`;if("includes"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy sis\xe4lt\xe4\xe4 "${r.includes}"`;if("regex"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy vastata s\xe4\xe4nn\xf6llist\xe4 lauseketta ${r.pattern}`;return`Virheellinen ${t[r.format]??r.format}`;case"not_multiple_of":return`Virheellinen luku: t\xe4ytyy olla luvun ${r.divisor} monikerta`;case"unrecognized_keys":return`${r.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${m(r.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return`Virheellinen sy\xf6te`}})}}],27866),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},t={regex:"entre",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},r=>{switch(r.code){case"invalid_type":return`Entr\xe9e invalide : ${r.expected} attendu, ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombre";case"object":if(Array.isArray(e))return"tableau";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} re\xe7u`;case"invalid_value":if(1===r.values.length)return`Entr\xe9e invalide : ${q(r.values[0])} attendu`;return`Option invalide : une valeur parmi ${m(r.values,"|")} attendue`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Trop grand : ${r.origin??"valeur"} doit ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"lment(s)"}`;return`Trop grand : ${r.origin??"valeur"} doit \xeatre ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Trop petit : ${r.origin} doit ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Trop petit : ${r.origin} doit \xeatre ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Cha\xeene invalide : doit commencer par "${r.prefix}"`;if("ends_with"===r.format)return`Cha\xeene invalide : doit se terminer par "${r.suffix}"`;if("includes"===r.format)return`Cha\xeene invalide : doit inclure "${r.includes}"`;if("regex"===r.format)return`Cha\xeene invalide : doit correspondre au mod\xe8le ${r.pattern}`;return`${t[r.format]??r.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xe9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${m(r.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${r.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return`Entr\xe9e invalide`}})}}],35519),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},t={regex:"entre",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"},r=>{switch(r.code){case"invalid_type":return`Entr\xe9e invalide : attendu ${r.expected}, re\xe7u ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Entr\xe9e invalide : attendu ${q(r.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"":"<",n=e[r.origin]??null;if(n)return`Trop grand : attendu que ${r.origin??"la valeur"} ait ${t}${r.maximum.toString()} ${n.unit}`;return`Trop grand : attendu que ${r.origin??"la valeur"} soit ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"":">",n=e[r.origin]??null;if(n)return`Trop petit : attendu que ${r.origin} ait ${t}${r.minimum.toString()} ${n.unit}`;return`Trop petit : attendu que ${r.origin} soit ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Cha\xeene invalide : doit commencer par "${r.prefix}"`;if("ends_with"===r.format)return`Cha\xeene invalide : doit se terminer par "${r.suffix}"`;if("includes"===r.format)return`Cha\xeene invalide : doit inclure "${r.includes}"`;if("regex"===r.format)return`Cha\xeene invalide : doit correspondre au motif ${r.pattern}`;return`${t[r.format]??r.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xe9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${m(r.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${r.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return`Entr\xe9e invalide`}})}}],8690),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:" ",url:" ",emoji:"'",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"  64",base64url:"  64  ",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return`  :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  :  ${q(r.values[0])}`;return`  :     ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` : ${r.origin??"value"}   ${t}${r.maximum.toString()} ${n.unit??"elements"}`;return` : ${r.origin??"value"}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` : ${r.origin}   ${t}${r.minimum.toString()} ${n.unit}`;return` : ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`  :   "${r.prefix}"`;if("ends_with"===r.format)return`  :    "${r.suffix}"`;if("includes"===r.format)return`  :   "${r.includes}"`;if("regex"===r.format)return`  :    ${r.pattern}`;return`${t[r.format]??r.format}  `;case"not_multiple_of":return`  :     ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""}  ${r.keys.length>1?"":""}: ${m(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return`  `}})}}],82230),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}},t={regex:"bemenet",email:"email cm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idblyeg",date:"ISO dtum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 cm",ipv6:"IPv6 cm",cidrv4:"IPv4 tartomny",cidrv6:"IPv6 tartomny",base64:"base64-kdolt string",base64url:"base64url-kdolt string",json_string:"JSON string",e164:"E.164 szm",jwt:"JWT",template_literal:"bemenet"},r=>{switch(r.code){case"invalid_type":return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${r.expected}, a kapott \xe9rt\xe9k ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"szm";case"object":if(Array.isArray(e))return"tmb";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${q(r.values[0])}`;return`\xc9rv\xe9nytelen opci\xf3: valamelyik \xe9rt\xe9k v\xe1rt ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`T\xfal nagy: ${r.origin??"rtk"} m\xe9rete t\xfal nagy ${t}${r.maximum.toString()} ${n.unit??"elem"}`;return`T\xfal nagy: a bemeneti \xe9rt\xe9k ${r.origin??"rtk"} t\xfal nagy: ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${r.origin} m\xe9rete t\xfal kicsi ${t}${r.minimum.toString()} ${n.unit}`;return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${r.origin} t\xfal kicsi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`\xc9rv\xe9nytelen string: "${r.prefix}" \xe9rt\xe9kkel kell kezddnie`;if("ends_with"===r.format)return`\xc9rv\xe9nytelen string: "${r.suffix}" \xe9rt\xe9kkel kell v\xe9gzdnie`;if("includes"===r.format)return`\xc9rv\xe9nytelen string: "${r.includes}" \xe9rt\xe9ket kell tartalmaznia`;if("regex"===r.format)return`\xc9rv\xe9nytelen string: ${r.pattern} mint\xe1nak kell megfelelnie`;return`\xc9rv\xe9nytelen ${t[r.format]??r.format}`;case"not_multiple_of":return`\xc9rv\xe9nytelen sz\xe1m: ${r.divisor} t\xf6bbsz\xf6r\xf6s\xe9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${r.keys.length>1?"s":""}: ${m(r.keys,", ")}`;case"invalid_key":return`\xc9rv\xe9nytelen kulcs ${r.origin}`;case"invalid_union":return"rvnytelen bemenet";case"invalid_element":return`\xc9rv\xe9nytelen \xe9rt\xe9k: ${r.origin}`;default:return`\xc9rv\xe9nytelen bemenet`}})}}],79908),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}},t={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Input tidak valid: diharapkan ${r.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input tidak valid: diharapkan ${q(r.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Terlalu besar: diharapkan ${r.origin??"value"} memiliki ${t}${r.maximum.toString()} ${n.unit??"elemen"}`;return`Terlalu besar: diharapkan ${r.origin??"value"} menjadi ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Terlalu kecil: diharapkan ${r.origin} memiliki ${t}${r.minimum.toString()} ${n.unit}`;return`Terlalu kecil: diharapkan ${r.origin} menjadi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`String tidak valid: harus dimulai dengan "${r.prefix}"`;if("ends_with"===r.format)return`String tidak valid: harus berakhir dengan "${r.suffix}"`;if("includes"===r.format)return`String tidak valid: harus menyertakan "${r.includes}"`;if("regex"===r.format)return`String tidak valid: harus sesuai pola ${r.pattern}`;return`${t[r.format]??r.format} tidak valid`;case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${r.keys.length>1?"s":""}: ${m(r.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${r.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${r.origin}`}})}}],5632),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"stafi",verb:"a hafa"},file:{unit:"bti",verb:"a hafa"},array:{unit:"hluti",verb:"a hafa"},set:{unit:"hluti",verb:"a hafa"}},t={regex:"gildi",email:"netfang",url:"vefsl",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tmi",date:"ISO dagsetning",time:"ISO tmi",duration:"ISO tmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tlugildi",jwt:"JWT",template_literal:"gildi"},r=>{switch(r.code){case"invalid_type":return`Rangt gildi: \xde\xfa sl\xf3st inn ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmer";case"object":if(Array.isArray(e))return"fylki";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} \xfear sem \xe1 a\xf0 vera ${r.expected}`;case"invalid_value":if(1===r.values.length)return`Rangt gildi: gert r\xe1\xf0 fyrir ${q(r.values[0])}`;return`\xd3gilt val: m\xe1 vera eitt af eftirfarandi ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin??"gildi"} hafi ${t}${r.maximum.toString()} ${n.unit??"hluti"}`;return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin??"gildi"} s\xe9 ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin} hafi ${t}${r.minimum.toString()} ${n.unit}`;return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin} s\xe9 ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 byrja \xe1 "${r.prefix}"`;if("ends_with"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 enda \xe1 "${r.suffix}"`;if("includes"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 innihalda "${r.includes}"`;if("regex"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 fylgja mynstri ${r.pattern}`;return`Rangt ${t[r.format]??r.format}`;case"not_multiple_of":return`R\xf6ng tala: ver\xf0ur a\xf0 vera margfeldi af ${r.divisor}`;case"unrecognized_keys":return`\xd3\xfeekkt ${r.keys.length>1?"ir lyklar":"ur lykill"}: ${m(r.keys,", ")}`;case"invalid_key":return`Rangur lykill \xed ${r.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xed ${r.origin}`}})}}],79406),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}},t={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Input non valido: atteso ${r.expected}, ricevuto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numero";case"object":if(Array.isArray(e))return"vettore";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input non valido: atteso ${q(r.values[0])}`;return`Opzione non valida: atteso uno tra ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Troppo grande: ${r.origin??"valore"} deve avere ${t}${r.maximum.toString()} ${n.unit??"elementi"}`;return`Troppo grande: ${r.origin??"valore"} deve essere ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Troppo piccolo: ${r.origin} deve avere ${t}${r.minimum.toString()} ${n.unit}`;return`Troppo piccolo: ${r.origin} deve essere ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Stringa non valida: deve iniziare con "${r.prefix}"`;if("ends_with"===r.format)return`Stringa non valida: deve terminare con "${r.suffix}"`;if("includes"===r.format)return`Stringa non valida: deve includere "${r.includes}"`;if("regex"===r.format)return`Stringa non valida: deve corrispondere al pattern ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${r.divisor}`;case"unrecognized_keys":return`Chiav${r.keys.length>1?"i":"e"} non riconosciut${r.keys.length>1?"e":"a"}: ${m(r.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${r.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${r.origin}`}})}}],78006),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return`: ${r.expected}${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`: ${q(r.values[0])}`;return`: ${m(r.values,"")}`;case"too_big":{let t=r.inclusive?"":"",n=e[r.origin]??null;if(n)return`: ${r.origin??""}${r.maximum.toString()}${n.unit??""}${t}`;return`: ${r.origin??""}${r.maximum.toString()}${t}`}case"too_small":{let t=r.inclusive?"":"",n=e[r.origin]??null;if(n)return`: ${r.origin}${r.minimum.toString()}${n.unit}${t}`;return`: ${r.origin}${r.minimum.toString()}${t}`}case"invalid_format":if("starts_with"===r.format)return`: "${r.prefix}"`;if("ends_with"===r.format)return`: "${r.suffix}"`;if("includes"===r.format)return`: "${r.includes}"`;if("regex"===r.format)return`: ${r.pattern}`;return`${t[r.format]??r.format}`;case"not_multiple_of":return`: ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""}: ${m(r.keys,"")}`;case"invalid_key":return`${r.origin}`;case"invalid_union":return"";case"invalid_element":return`${r.origin}`;default:return``}})}}],89770),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return({string:"",boolean:"",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:""})[t]??t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${q(r.values[0])}`;return` :  - ${m(r.values,"|")}-`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` :  ${r.origin??""} ${n.verb} ${t}${r.maximum.toString()} ${n.unit}`;return` :  ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` :  ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return` :  ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :   "${r.prefix}"-`;if("ends_with"===r.format)return` :   "${r.suffix}"-`;if("includes"===r.format)return` :   "${r.includes}"-`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :   ${r.divisor}- `;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${m(r.keys,", ")}`;case"invalid_key":return`  ${r.origin}-`;case"invalid_union":return" ";case"invalid_element":return`  ${r.origin}-`;default:return` `}})}}],91359),e.s(["default",0,nw],29786),e.s(["default",0,function(){return nw()}],3962),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :   ${r.expected},   ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${q(r.values[0])}  `;return` : ${m(r.values," ")}   `;case"too_big":{let t=r.inclusive?"":"",n=""===t?" ":" ",i=e[r.origin]??null,a=i?.unit??"";if(i)return`${r.origin??""}  : ${r.maximum.toString()}${a} ${t}${n}`;return`${r.origin??""}  : ${r.maximum.toString()} ${t}${n}`}case"too_small":{let t=r.inclusive?"":"",n=""===t?" ":" ",i=e[r.origin]??null,a=i?.unit??"";if(i)return`${r.origin??""}  : ${r.minimum.toString()}${a} ${t}${n}`;return`${r.origin??""}  : ${r.minimum.toString()} ${t}${n}`}case"invalid_format":if("starts_with"===r.format)return` : "${r.prefix}"()  `;if("ends_with"===r.format)return` : "${r.suffix}"()  `;if("includes"===r.format)return` : "${r.includes}"()  `;if("regex"===r.format)return` :  ${r.pattern}   `;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` : ${r.divisor}  `;case"unrecognized_keys":return`   : ${m(r.keys,", ")}`;case"invalid_key":return` : ${r.origin}`;case"invalid_union":default:return` `;case"invalid_element":return` : ${r.origin}`}})}}],20292);let n_=(e,t)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skaiius";case"bigint":return"sveikasis skaiius";case"string":return"eilut";case"boolean":return"login reikm";case"undefined":case"void":return"neapibrta reikm";case"function":return"funkcija";case"symbol":return"simbolis";case"object":if(void 0===t)return"neinomas objektas";if(null===t)return"nulin reikm";if(Array.isArray(t))return"masyvas";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name;return"objektas";case"null":return"nulin reikm"}return e},nx=e=>e.charAt(0).toUpperCase()+e.slice(1);function nE(e){let t=Math.abs(e),r=t%10,n=t%100;return n>=11&&n<=19||0===r?"many":1===r?"one":"few"}function nI(e,t,r,n){let i=Math.abs(e),a=i%10,o=i%100;return o>=11&&o<=19?n:1===a?t:a>=2&&a<=4?r:n}function nS(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "},r=>{switch(r.code){case"invalid_type":return`  :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  :  ${q(r.values[0])}`;return` :    ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` : ,  ${r.origin??""} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??""}`;return` : ,  ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` : ,  ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return` : ,  ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :    "${r.prefix}"`;if("ends_with"===r.format)return` :    "${r.suffix}"`;if("includes"===r.format)return` :   "${r.includes}"`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${m(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return`  `}})}}e.s(["default",0,function(){return{localeError:(()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function t(t,r,n,i){let a=e[t]??null;return null===a?a:{unit:a.unit[r],verb:a.verb[i][n?"inclusive":"notInclusive"]}}let r={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"};return e=>{switch(e.code){case"invalid_type":var n;return`Gautas tipas ${n_(typeof(n=e.input),n)}, o tiktasi - ${n_(e.expected)}`;case"invalid_value":if(1===e.values.length)return`Privalo bti ${q(e.values[0])}`;return`Privalo bti vienas i ${m(e.values,"|")} pasirinkim`;case"too_big":{let r=n_(e.origin),n=t(e.origin,nE(Number(e.maximum)),e.inclusive??!1,"smaller");if(n?.verb)return`${nx(r??e.origin??"reikm")} ${n.verb} ${e.maximum.toString()} ${n.unit??"element"}`;let i=e.inclusive?"ne didesnis kaip":"maesnis kaip";return`${nx(r??e.origin??"reikm")} turi bti ${i} ${e.maximum.toString()} ${n?.unit}`}case"too_small":{let r=n_(e.origin),n=t(e.origin,nE(Number(e.minimum)),e.inclusive??!1,"bigger");if(n?.verb)return`${nx(r??e.origin??"reikm")} ${n.verb} ${e.minimum.toString()} ${n.unit??"element"}`;let i=e.inclusive?"ne maesnis kaip":"didesnis kaip";return`${nx(r??e.origin??"reikm")} turi bti ${i} ${e.minimum.toString()} ${n?.unit}`}case"invalid_format":if("starts_with"===e.format)return`Eilut privalo prasidti "${e.prefix}"`;if("ends_with"===e.format)return`Eilut privalo pasibaigti "${e.suffix}"`;if("includes"===e.format)return`Eilut privalo traukti "${e.includes}"`;if("regex"===e.format)return`Eilut privalo atitikti ${e.pattern}`;return`Neteisingas ${r[e.format]??e.format}`;case"not_multiple_of":return`Skaiius privalo bti ${e.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${e.keys.length>1?"i":"as"} rakt${e.keys.length>1?"ai":"as"}: ${m(e.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga vestis";case"invalid_element":{let t=n_(e.origin);return`${nx(t??e.origin??"reikm")} turi klaiding vest`}}}})()}}],42039),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :   ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Invalid input: expected ${q(r.values[0])}`;return` :    ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` :   ${r.origin??""}   ${t}${r.maximum.toString()} ${n.unit??""}`;return` :   ${r.origin??""}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` :   ${r.origin}   ${t}${r.minimum.toString()} ${n.unit}`;return` :   ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :     "${r.prefix}"`;if("ends_with"===r.format)return` :     "${r.suffix}"`;if("includes"===r.format)return` :    "${r.includes}"`;if("regex"===r.format)return` :      ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return` :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?" ":" "}: ${m(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return` `}})}}],99566),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}},t={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Input tidak sah: dijangka ${r.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombor";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input tidak sah: dijangka ${q(r.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Terlalu besar: dijangka ${r.origin??"nilai"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"elemen"}`;return`Terlalu besar: dijangka ${r.origin??"nilai"} adalah ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Terlalu kecil: dijangka ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Terlalu kecil: dijangka ${r.origin} adalah ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`String tidak sah: mesti bermula dengan "${r.prefix}"`;if("ends_with"===r.format)return`String tidak sah: mesti berakhir dengan "${r.suffix}"`;if("includes"===r.format)return`String tidak sah: mesti mengandungi "${r.includes}"`;if("regex"===r.format)return`String tidak sah: mesti sepadan dengan corak ${r.pattern}`;return`${t[r.format]??r.format} tidak sah`;case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${m(r.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${r.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${r.origin}`}})}}],32130),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}},t={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},r=>{switch(r.code){case"invalid_type":return`Ongeldige invoer: verwacht ${r.expected}, ontving ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"getal";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ongeldige invoer: verwacht ${q(r.values[0])}`;return`Ongeldige optie: verwacht \xe9\xe9n van ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Te lang: verwacht dat ${r.origin??"waarde"} ${t}${r.maximum.toString()} ${n.unit??"elementen"} bevat`;return`Te lang: verwacht dat ${r.origin??"waarde"} ${t}${r.maximum.toString()} is`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Te kort: verwacht dat ${r.origin} ${t}${r.minimum.toString()} ${n.unit} bevat`;return`Te kort: verwacht dat ${r.origin} ${t}${r.minimum.toString()} is`}case"invalid_format":if("starts_with"===r.format)return`Ongeldige tekst: moet met "${r.prefix}" beginnen`;if("ends_with"===r.format)return`Ongeldige tekst: moet op "${r.suffix}" eindigen`;if("includes"===r.format)return`Ongeldige tekst: moet "${r.includes}" bevatten`;if("regex"===r.format)return`Ongeldige tekst: moet overeenkomen met patroon ${r.pattern}`;return`Ongeldig: ${t[r.format]??r.format}`;case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${r.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${r.keys.length>1?"s":""}: ${m(r.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${r.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${r.origin}`}})}}],53218),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"tegn",verb:" ha"},file:{unit:"bytes",verb:" ha"},array:{unit:"elementer",verb:" inneholde"},set:{unit:"elementer",verb:" inneholde"}},t={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return`Ugyldig input: forventet ${r.expected}, fikk ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tall";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ugyldig verdi: forventet ${q(r.values[0])}`;return`Ugyldig valg: forventet en av ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`For stor(t): forventet ${r.origin??"value"} til \xe5 ha ${t}${r.maximum.toString()} ${n.unit??"elementer"}`;return`For stor(t): forventet ${r.origin??"value"} til \xe5 ha ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`For lite(n): forventet ${r.origin} til \xe5 ha ${t}${r.minimum.toString()} ${n.unit}`;return`For lite(n): forventet ${r.origin} til \xe5 ha ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ugyldig streng: m\xe5 starte med "${r.prefix}"`;if("ends_with"===r.format)return`Ugyldig streng: m\xe5 ende med "${r.suffix}"`;if("includes"===r.format)return`Ugyldig streng: m\xe5 inneholde "${r.includes}"`;if("regex"===r.format)return`Ugyldig streng: m\xe5 matche m\xf8nsteret ${r.pattern}`;return`Ugyldig ${t[r.format]??r.format}`;case"not_multiple_of":return`Ugyldig tall: m\xe5 v\xe6re et multiplum av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Ukjente nkler":"Ukjent nkkel"}: ${m(r.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8kkel i ${r.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${r.origin}`}})}}],16782),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}},t={regex:"giren",email:"epostagh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengm",date:"ISO tarihi",time:"ISO zaman",duration:"ISO mddeti",ipv4:"IPv4 nin",ipv6:"IPv6 nin",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"},r=>{switch(r.code){case"invalid_type":return`F\xe2sit giren: umulan ${r.expected}, alnan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numara";case"object":if(Array.isArray(e))return"saf";if(null===e)return"gayb";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`F\xe2sit giren: umulan ${q(r.values[0])}`;return`F\xe2sit tercih: m\xfbteberler ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Fazla b\xfcy\xfck: ${r.origin??"value"}, ${t}${r.maximum.toString()} ${n.unit??"elements"} sahip olmalyd.`;return`Fazla b\xfcy\xfck: ${r.origin??"value"}, ${t}${r.maximum.toString()} olmalyd.`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Fazla k\xfc\xe7\xfck: ${r.origin}, ${t}${r.minimum.toString()} ${n.unit} sahip olmalyd.`;return`Fazla k\xfc\xe7\xfck: ${r.origin}, ${t}${r.minimum.toString()} olmalyd.`}case"invalid_format":if("starts_with"===r.format)return`F\xe2sit metin: "${r.prefix}" ile balamal.`;if("ends_with"===r.format)return`F\xe2sit metin: "${r.suffix}" ile bitmeli.`;if("includes"===r.format)return`F\xe2sit metin: "${r.includes}" ihtiv\xe2 etmeli.`;if("regex"===r.format)return`F\xe2sit metin: ${r.pattern} nakna uymal.`;return`F\xe2sit ${t[r.format]??r.format}`;case"not_multiple_of":return`F\xe2sit say: ${r.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${r.keys.length>1?"s":""}: ${m(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xe7in tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${r.origin} i\xe7in tannmayan kymet var.`;default:return`Kymet tannamad.`}})}}],97282),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected} ,  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}  `;case"invalid_value":if(1===r.values.length)return` :  ${q(r.values[0])} `;return` :    ${m(r.values,"|")}  `;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` : ${r.origin??""}  ${t}${r.maximum.toString()} ${n.unit??""} `;return` : ${r.origin??""}  ${t}${r.maximum.toString()} `}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` : ${r.origin}  ${t}${r.minimum.toString()} ${n.unit} `;return` : ${r.origin}  ${t}${r.minimum.toString()} `}case"invalid_format":if("starts_with"===r.format)return` :   "${r.prefix}"   `;if("ends_with"===r.format)return` :   "${r.suffix}"    `;if("includes"===r.format)return` :  "${r.includes}" `;if("regex"===r.format)return` :   ${r.pattern}   `;return`${t[r.format]??r.format}  `;case"not_multiple_of":return` :   ${r.divisor}  `;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${m(r.keys,", ")}`;case"invalid_key":return`   ${r.origin} `;case"invalid_union":default:return` `;case"invalid_element":return`   ${r.origin} `}})}}],42471),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"znakw",verb:"mie"},file:{unit:"bajtw",verb:"mie"},array:{unit:"elementw",verb:"mie"},set:{unit:"elementw",verb:"mie"}},t={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znakw zakodowany w formacie base64",base64url:"cig znakw zakodowany w formacie base64url",json_string:"cig znakw w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"},r=>{switch(r.code){case"invalid_type":return`Nieprawidowe dane wejciowe: oczekiwano ${r.expected}, otrzymano ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"liczba";case"object":if(Array.isArray(e))return"tablica";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Nieprawidowe dane wejciowe: oczekiwano ${q(r.values[0])}`;return`Nieprawidowa opcja: oczekiwano jednej z wartoci ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Za dua warto: oczekiwano, e ${r.origin??"warto"} bdzie mie ${t}${r.maximum.toString()} ${n.unit??"elementw"}`;return`Zbyt du(y/a/e): oczekiwano, e ${r.origin??"warto"} bdzie wynosi ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Za maa warto: oczekiwano, e ${r.origin??"warto"} bdzie mie ${t}${r.minimum.toString()} ${n.unit??"elementw"}`;return`Zbyt ma(y/a/e): oczekiwano, e ${r.origin??"warto"} bdzie wynosi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Nieprawidowy cig znak\xf3w: musi zaczyna si od "${r.prefix}"`;if("ends_with"===r.format)return`Nieprawidowy cig znak\xf3w: musi koczy si na "${r.suffix}"`;if("includes"===r.format)return`Nieprawidowy cig znak\xf3w: musi zawiera "${r.includes}"`;if("regex"===r.format)return`Nieprawidowy cig znak\xf3w: musi odpowiada wzorcowi ${r.pattern}`;return`Nieprawidow(y/a/e) ${t[r.format]??r.format}`;case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${r.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${r.keys.length>1?"s":""}: ${m(r.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${r.origin}`;case"invalid_union":return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${r.origin}`;default:return`Nieprawidowe dane wejciowe`}})}}],78793),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}},t={regex:"padro",email:"endereo de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"durao ISO",ipv4:"endereo IPv4",ipv6:"endereo IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"},r=>{switch(r.code){case"invalid_type":return`Tipo inv\xe1lido: esperado ${r.expected}, recebido ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmero";case"object":if(Array.isArray(e))return"array";if(null===e)return"nulo";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Entrada inv\xe1lida: esperado ${q(r.values[0])}`;return`Op\xe7\xe3o inv\xe1lida: esperada uma das ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Muito grande: esperado que ${r.origin??"valor"} tivesse ${t}${r.maximum.toString()} ${n.unit??"elementos"}`;return`Muito grande: esperado que ${r.origin??"valor"} fosse ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Muito pequeno: esperado que ${r.origin} tivesse ${t}${r.minimum.toString()} ${n.unit}`;return`Muito pequeno: esperado que ${r.origin} fosse ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Texto inv\xe1lido: deve come\xe7ar com "${r.prefix}"`;if("ends_with"===r.format)return`Texto inv\xe1lido: deve terminar com "${r.suffix}"`;if("includes"===r.format)return`Texto inv\xe1lido: deve incluir "${r.includes}"`;if("regex"===r.format)return`Texto inv\xe1lido: deve corresponder ao padr\xe3o ${r.pattern}`;return`${t[r.format]??r.format} inv\xe1lido`;case"not_multiple_of":return`N\xfamero inv\xe1lido: deve ser m\xfaltiplo de ${r.divisor}`;case"unrecognized_keys":return`Chave${r.keys.length>1?"s":""} desconhecida${r.keys.length>1?"s":""}: ${m(r.keys,", ")}`;case"invalid_key":return`Chave inv\xe1lida em ${r.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido em ${r.origin}`;default:return`Campo inv\xe1lido`}})}}],91824),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}},t={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${q(r.values[0])}`;return` :    ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n){let e=nI(Number(r.maximum),n.unit.one,n.unit.few,n.unit.many);return`  : ,  ${r.origin??""}   ${t}${r.maximum.toString()} ${e}`}return`  : ,  ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n){let e=nI(Number(r.minimum),n.unit.one,n.unit.few,n.unit.many);return`  : ,  ${r.origin}   ${t}${r.minimum.toString()} ${e}`}return`  : ,  ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :    "${r.prefix}"`;if("ends_with"===r.format)return` :    "${r.suffix}"`;if("includes"===r.format)return` :   "${r.includes}"`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${m(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return`  `}})}}],2379),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}},t={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"},r=>{switch(r.code){case"invalid_type":return`Neveljaven vnos: priakovano ${r.expected}, prejeto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tevilo";case"object":if(Array.isArray(e))return"tabela";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Neveljaven vnos: priakovano ${q(r.values[0])}`;return`Neveljavna monost: priakovano eno izmed ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Preveliko: priakovano, da bo ${r.origin??"vrednost"} imelo ${t}${r.maximum.toString()} ${n.unit??"elementov"}`;return`Preveliko: priakovano, da bo ${r.origin??"vrednost"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Premajhno: priakovano, da bo ${r.origin} imelo ${t}${r.minimum.toString()} ${n.unit}`;return`Premajhno: priakovano, da bo ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Neveljaven niz: mora se zaeti z "${r.prefix}"`;if("ends_with"===r.format)return`Neveljaven niz: mora se konati z "${r.suffix}"`;if("includes"===r.format)return`Neveljaven niz: mora vsebovati "${r.includes}"`;if("regex"===r.format)return`Neveljaven niz: mora ustrezati vzorcu ${r.pattern}`;return`Neveljaven ${t[r.format]??r.format}`;case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${r.divisor}`;case"unrecognized_keys":return`Neprepoznan${r.keys.length>1?"i kljui":" klju"}: ${m(r.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${r.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${r.origin}`}})}}],63669),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehlla"},set:{unit:"objekt",verb:"att innehlla"}},t={regex:"reguljrt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strng",base64url:"base64url-kodad strng",json_string:"JSON-strng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},r=>{switch(r.code){case"invalid_type":return`Ogiltig inmatning: f\xf6rv\xe4ntat ${r.expected}, fick ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"antal";case"object":if(Array.isArray(e))return"lista";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ogiltig inmatning: f\xf6rv\xe4ntat ${q(r.values[0])}`;return`Ogiltigt val: f\xf6rv\xe4ntade en av ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`F\xf6r stor(t): f\xf6rv\xe4ntade ${r.origin??"vrdet"} att ha ${t}${r.maximum.toString()} ${n.unit??"element"}`;return`F\xf6r stor(t): f\xf6rv\xe4ntat ${r.origin??"vrdet"} att ha ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`F\xf6r lite(t): f\xf6rv\xe4ntade ${r.origin??"vrdet"} att ha ${t}${r.minimum.toString()} ${n.unit}`;return`F\xf6r lite(t): f\xf6rv\xe4ntade ${r.origin??"vrdet"} att ha ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ogiltig str\xe4ng: m\xe5ste b\xf6rja med "${r.prefix}"`;if("ends_with"===r.format)return`Ogiltig str\xe4ng: m\xe5ste sluta med "${r.suffix}"`;if("includes"===r.format)return`Ogiltig str\xe4ng: m\xe5ste inneh\xe5lla "${r.includes}"`;if("regex"===r.format)return`Ogiltig str\xe4ng: m\xe5ste matcha m\xf6nstret "${r.pattern}"`;return`Ogiltig(t) ${t[r.format]??r.format}`;case"not_multiple_of":return`Ogiltigt tal: m\xe5ste vara en multipel av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Oknda nycklar":"Oknd nyckel"}: ${m(r.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${r.origin??"vrdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xe4rde i ${r.origin??"vrdet"}`}})}}],4403),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"},r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" ":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${q(r.values[0])}`;return` :  ${m(r.values,"|")}  `;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` :  ${r.origin??""} ${t}${r.maximum.toString()} ${n.unit??""}   `;return` :  ${r.origin??""} ${t}${r.maximum.toString()}   `}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` :  ${r.origin} ${t}${r.minimum.toString()} ${n.unit}   `;return` :  ${r.origin} ${t}${r.minimum.toString()}   `}case"invalid_format":if("starts_with"===r.format)return` : "${r.prefix}"   `;if("ends_with"===r.format)return` : "${r.suffix}"   `;if("includes"===r.format)return` : "${r.includes}"   `;if("regex"===r.format)return` : ${r.pattern}   `;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` : ${r.divisor}    `;case"unrecognized_keys":return`  ${r.keys.length>1?"":""}: ${m(r.keys,", ")}`;case"invalid_key":return`${r.origin}   `;case"invalid_union":return" ";case"invalid_element":return`${r.origin}   `;default:return` `}})}}],61599),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return`:  ${r.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`:  ${q(r.values[0])}`;return`:  ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"":"",n=e[r.origin]??null;if(n)return`: ${r.origin??""} ${t} ${r.maximum.toString()} ${n.unit??""}`;return`: ${r.origin??""} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"":"",n=e[r.origin]??null;if(n)return`: ${r.origin} ${t} ${r.minimum.toString()} ${n.unit}`;return`: ${r.origin} ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`:  "${r.prefix}"`;if("ends_with"===r.format)return`:  "${r.suffix}"`;if("includes"===r.format)return`:  "${r.includes}" `;if("regex"===r.format)return`:  ${r.pattern}`;return`: ${t[r.format]??r.format}`;case"not_multiple_of":return`:  ${r.divisor} `;case"unrecognized_keys":return`: ${m(r.keys,", ")}`;case"invalid_key":return` ${r.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${r.origin}`;default:return``}})}}],57658),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"e",verb:"olmal"},set:{unit:"e",verb:"olmal"}},t={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"},r=>{switch(r.code){case"invalid_type":return`Ge\xe7ersiz deer: beklenen ${r.expected}, alnan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ge\xe7ersiz deer: beklenen ${q(r.values[0])}`;return`Ge\xe7ersiz se\xe7enek: aadakilerden biri olmal: ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`\xc7ok b\xfcy\xfck: beklenen ${r.origin??"deer"} ${t}${r.maximum.toString()} ${n.unit??"e"}`;return`\xc7ok b\xfcy\xfck: beklenen ${r.origin??"deer"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`\xc7ok k\xfc\xe7\xfck: beklenen ${r.origin} ${t}${r.minimum.toString()} ${n.unit}`;return`\xc7ok k\xfc\xe7\xfck: beklenen ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ge\xe7ersiz metin: "${r.prefix}" ile balamal`;if("ends_with"===r.format)return`Ge\xe7ersiz metin: "${r.suffix}" ile bitmeli`;if("includes"===r.format)return`Ge\xe7ersiz metin: "${r.includes}" i\xe7ermeli`;if("regex"===r.format)return`Ge\xe7ersiz metin: ${r.pattern} desenine uymal`;return`Ge\xe7ersiz ${t[r.format]??r.format}`;case"not_multiple_of":return`Ge\xe7ersiz say: ${r.divisor} ile tam b\xf6l\xfcnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${r.keys.length>1?"lar":""}: ${m(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xe7inde ge\xe7ersiz anahtar`;case"invalid_union":return"Geersiz deer";case"invalid_element":return`${r.origin} i\xe7inde ge\xe7ersiz deer`;default:return`Ge\xe7ersiz deer`}})}}],7625),e.s(["default",0,nS],71714),e.s(["default",0,function(){return nS()}],17791),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "},r=>{switch(r.code){case"invalid_type":return`  : ${r.expected}   ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}  `;case"invalid_value":if(1===r.values.length)return`  : ${q(r.values[0])}  `;return` : ${m(r.values,"|")}     `;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` : ${r.origin??""}  ${t}${r.maximum.toString()} ${n.unit??""}   `;return` : ${r.origin??""}  ${t}${r.maximum.toString()}   `}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` : ${r.origin}  ${t}${r.minimum.toString()} ${n.unit}   `;return` : ${r.origin}  ${t}${r.minimum.toString()}   `}case"invalid_format":if("starts_with"===r.format)return` : "${r.prefix}"    `;if("ends_with"===r.format)return` : "${r.suffix}"    `;if("includes"===r.format)return` : "${r.includes}"   `;if("regex"===r.format)return` :  ${r.pattern}    `;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` : ${r.divisor}    `;case"unrecognized_keys":return`   ${r.keys.length>1?"":""}: ${m(r.keys," ")}`;case"invalid_key":return`${r.origin}   `;case"invalid_union":return"  ";case"invalid_element":return`${r.origin}   `;default:return`  `}})}}],2921),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"k t",verb:"c"},file:{unit:"byte",verb:"c"},array:{unit:"phn t",verb:"c"},set:{unit:"phn t",verb:"c"}},t={regex:"u vo",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngy gi ISO",date:"ngy ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m ha base64",base64url:"chui m ha base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u vo"},r=>{switch(r.code){case"invalid_type":return`u v\xe0o kh\xf4ng hp l: mong i ${r.expected}, nhn c ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"s";case"object":if(Array.isArray(e))return"mng";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`u v\xe0o kh\xf4ng hp l: mong i ${q(r.values[0])}`;return`T\xf9y chn kh\xf4ng hp l: mong i mt trong c\xe1c gi\xe1 tr ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`Qu\xe1 ln: mong i ${r.origin??"gi tr"} ${n.verb} ${t}${r.maximum.toString()} ${n.unit??"phn t"}`;return`Qu\xe1 ln: mong i ${r.origin??"gi tr"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`Qu\xe1 nh: mong i ${r.origin} ${n.verb} ${t}${r.minimum.toString()} ${n.unit}`;return`Qu\xe1 nh: mong i ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Chui kh\xf4ng hp l: phi bt u bng "${r.prefix}"`;if("ends_with"===r.format)return`Chui kh\xf4ng hp l: phi kt th\xfac bng "${r.suffix}"`;if("includes"===r.format)return`Chui kh\xf4ng hp l: phi bao gm "${r.includes}"`;if("regex"===r.format)return`Chui kh\xf4ng hp l: phi khp vi mu ${r.pattern}`;return`${t[r.format]??r.format} kh\xf4ng hp l`;case"not_multiple_of":return`S kh\xf4ng hp l: phi l\xe0 bi s ca ${r.divisor}`;case"unrecognized_keys":return`Kh\xf3a kh\xf4ng c nhn dng: ${m(r.keys,", ")}`;case"invalid_key":return`Kh\xf3a kh\xf4ng hp l trong ${r.origin}`;case"invalid_union":return"u vo khng hp l";case"invalid_element":return`Gi\xe1 tr kh\xf4ng hp l trong ${r.origin}`;default:return`u v\xe0o kh\xf4ng hp l`}})}}],94121),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` ${r.expected} ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"(NaN)":"";case"object":if(Array.isArray(e))return"";if(null===e)return"(null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` ${q(r.values[0])}`;return` ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` ${r.origin??""} ${t}${r.maximum.toString()} ${n.unit??""}`;return` ${r.origin??""} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` ${r.origin} ${t}${r.minimum.toString()} ${n.unit}`;return` ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` "${r.prefix}" `;if("ends_with"===r.format)return` "${r.suffix}" `;if("includes"===r.format)return` "${r.includes}"`;if("regex"===r.format)return` ${r.pattern}`;return`${t[r.format]??r.format}`;case"not_multiple_of":return` ${r.divisor} `;case"unrecognized_keys":return`(key): ${m(r.keys,", ")}`;case"invalid_key":return`${r.origin} (key)`;case"invalid_union":return"";case"invalid_element":return`${r.origin} (value)`;default:return``}})}}],77169),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},r=>{switch(r.code){case"invalid_type":return` ${r.expected} ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` ${q(r.values[0])}`;return` ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return` ${r.origin??""}  ${t}${r.maximum.toString()} ${n.unit??""}`;return` ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return` ${r.origin}  ${t}${r.minimum.toString()} ${n.unit}`;return` ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` "${r.prefix}" `;if("ends_with"===r.format)return` "${r.suffix}" `;if("includes"===r.format)return` "${r.includes}"`;if("regex"===r.format)return` ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` ${r.divisor} `;case"unrecognized_keys":return`${r.keys.length>1?"":""}${m(r.keys,"")}`;case"invalid_key":return`${r.origin} `;case"invalid_union":return"";case"invalid_element":return`${r.origin} `;default:return``}})}}],74582),e.s(["default",0,function(){let e,t;return{localeError:(e={string:{unit:"mi",verb:"n"},file:{unit:"bytes",verb:"n"},array:{unit:"nkan",verb:"n"},set:{unit:"nkan",verb:"n"}},t={regex:"r bwl",email:"drs ml",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"kk ISO",date:"j ISO",time:"kk ISO",duration:"kk t p ISO",ipv4:"drs IPv4",ipv6:"drs IPv6",cidrv4:"gbgb IPv4",cidrv6:"gbgb IPv6",base64:"r t a k n base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb E.164",jwt:"JWT",template_literal:"r bwl"},r=>{switch(r.code){case"invalid_type":return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${r.expected}, \xe0m a r\xed ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmb";case"object":if(Array.isArray(e))return"akop";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${q(r.values[0])}`;return`\xc0\xe0y\xe0n a\xece: yan kan l\xe1ra ${m(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",n=e[r.origin]??null;if(n)return`T\xf3 p j\xf9: a n\xed l\xe1ti j p\xe9 ${r.origin??"iye"} ${n.verb} ${t}${r.maximum} ${n.unit}`;return`T\xf3 p j\xf9: a n\xed l\xe1ti j ${t}${r.maximum}`}case"too_small":{let t=r.inclusive?">=":">",n=e[r.origin]??null;if(n)return`K\xe9r\xe9 ju: a n\xed l\xe1ti j p\xe9 ${r.origin} ${n.verb} ${t}${r.minimum} ${n.unit}`;return`K\xe9r\xe9 ju: a n\xed l\xe1ti j ${t}${r.minimum}`}case"invalid_format":if("starts_with"===r.format)return`r a\xece: gbd br pl\xfa "${r.prefix}"`;if("ends_with"===r.format)return`r a\xece: gbd par\xed pl\xfa "${r.suffix}"`;if("includes"===r.format)return`r a\xece: gbd n\xed "${r.includes}"`;if("regex"===r.format)return`r a\xece: gbd b\xe1 \xe0pr mu ${r.pattern}`;return`A\xece: ${t[r.format]??r.format}`;case"not_multiple_of":return`Nmb\xe0 a\xece: gbd j \xe8y\xe0 p\xedp\xedn ti ${r.divisor}`;case"unrecognized_keys":return`Bt\xecn\xec \xe0\xecm: ${m(r.keys,", ")}`;case"invalid_key":return`Bt\xecn\xec a\xece n\xedn\xfa ${r.origin}`;case"invalid_union":default:return"bwl ae";case"invalid_element":return`Iye a\xece n\xedn\xfa ${r.origin}`}})}}],65904),e.s([],16593);let n$=Symbol("ZodOutput"),nk=Symbol("ZodInput");class nA{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};delete r.id;let n={...r,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function nT(){return new nA}let nO=nT();function nR(e,t){return new e({type:"string",...Z(t)})}function nN(e,t){return new e({type:"string",coerce:!0,...Z(t)})}function nP(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Z(t)})}function nU(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Z(t)})}function nD(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Z(t)})}function nC(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Z(t)})}function nj(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Z(t)})}function nz(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Z(t)})}function nL(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Z(t)})}function nZ(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Z(t)})}function nM(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Z(t)})}function nq(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Z(t)})}function nV(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Z(t)})}function nB(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Z(t)})}function nF(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Z(t)})}function nW(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Z(t)})}function nH(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Z(t)})}function nK(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Z(t)})}function nG(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Z(t)})}function nJ(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Z(t)})}function nQ(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Z(t)})}function nX(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Z(t)})}function nY(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Z(t)})}function n0(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Z(t)})}function n1(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Z(t)})}function n4(e,t){return new e({type:"string",format:"date",check:"string_format",...Z(t)})}function n6(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Z(t)})}function n2(e,t){return new e({type:"string",format:"duration",check:"string_format",...Z(t)})}function n3(e,t){return new e({type:"number",checks:[],...Z(t)})}function n9(e,t){return new e({type:"number",coerce:!0,checks:[],...Z(t)})}function n8(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Z(t)})}function n5(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...Z(t)})}function n7(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...Z(t)})}function ie(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...Z(t)})}function it(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...Z(t)})}function ir(e,t){return new e({type:"boolean",...Z(t)})}function ii(e,t){return new e({type:"boolean",coerce:!0,...Z(t)})}function ia(e,t){return new e({type:"bigint",...Z(t)})}function io(e,t){return new e({type:"bigint",coerce:!0,...Z(t)})}function is(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...Z(t)})}function il(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...Z(t)})}function iu(e,t){return new e({type:"symbol",...Z(t)})}function ic(e,t){return new e({type:"undefined",...Z(t)})}function id(e,t){return new e({type:"null",...Z(t)})}function ip(e){return new e({type:"any"})}function im(e){return new e({type:"unknown"})}function ih(e,t){return new e({type:"never",...Z(t)})}function ig(e,t){return new e({type:"void",...Z(t)})}function iy(e,t){return new e({type:"date",...Z(t)})}function iv(e,t){return new e({type:"date",coerce:!0,...Z(t)})}function ib(e,t){return new e({type:"nan",...Z(t)})}function iw(e,t){return new tP({check:"less_than",...Z(t),value:e,inclusive:!1})}function i_(e,t){return new tP({check:"less_than",...Z(t),value:e,inclusive:!0})}function ix(e,t){return new tU({check:"greater_than",...Z(t),value:e,inclusive:!1})}function iE(e,t){return new tU({check:"greater_than",...Z(t),value:e,inclusive:!0})}function iI(e){return ix(0,e)}function iS(e){return iw(0,e)}function i$(e){return i_(0,e)}function ik(e){return iE(0,e)}function iA(e,t){return new tD({check:"multiple_of",...Z(t),value:e})}function iT(e,t){return new tz({check:"max_size",...Z(t),maximum:e})}function iO(e,t){return new tL({check:"min_size",...Z(t),minimum:e})}function iR(e,t){return new tZ({check:"size_equals",...Z(t),size:e})}function iN(e,t){return new tM({check:"max_length",...Z(t),maximum:e})}function iP(e,t){return new tq({check:"min_length",...Z(t),minimum:e})}function iU(e,t){return new tV({check:"length_equals",...Z(t),length:e})}function iD(e,t){return new tF({check:"string_format",format:"regex",...Z(t),pattern:e})}function iC(e){return new tW({check:"string_format",format:"lowercase",...Z(e)})}function ij(e){return new tH({check:"string_format",format:"uppercase",...Z(e)})}function iz(e,t){return new tK({check:"string_format",format:"includes",...Z(t),includes:e})}function iL(e,t){return new tG({check:"string_format",format:"starts_with",...Z(t),prefix:e})}function iZ(e,t){return new tJ({check:"string_format",format:"ends_with",...Z(t),suffix:e})}function iM(e,t,r){return new tX({check:"property",property:e,schema:t,...Z(r)})}function iq(e,t){return new tY({check:"mime_type",mime:e,...Z(t)})}function iV(e){return new t0({check:"overwrite",tx:e})}function iB(e){return iV(t=>t.normalize(e))}function iF(){return iV(e=>e.trim())}function iW(){return iV(e=>e.toLowerCase())}function iH(){return iV(e=>e.toUpperCase())}function iK(e,t,r){return new e({type:"array",element:t,...Z(r)})}function iG(e,t,r){return new e({type:"union",options:t,...Z(r)})}function iJ(e,t,r,n){return new e({type:"union",options:r,discriminator:t,...Z(n)})}function iQ(e,t,r){return new e({type:"intersection",left:t,right:r})}function iX(e,t,r,n){let i=r instanceof t6,a=i?n:r;return new e({type:"tuple",items:t,rest:i?r:null,...Z(a)})}function iY(e,t,r,n){return new e({type:"record",keyType:t,valueType:r,...Z(n)})}function i0(e,t,r,n){return new e({type:"map",keyType:t,valueType:r,...Z(n)})}function i1(e,t,r){return new e({type:"set",valueType:t,...Z(r)})}function i4(e,t,r){return new e({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t,...Z(r)})}function i6(e,t,r){return new e({type:"enum",entries:t,...Z(r)})}function i2(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...Z(r)})}function i3(e,t){return new e({type:"file",...Z(t)})}function i9(e,t){return new e({type:"transform",transform:t})}function i8(e,t){return new e({type:"optional",innerType:t})}function i5(e,t){return new e({type:"nullable",innerType:t})}function i7(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof r?r():U(r)}})}function ae(e,t,r){return new e({type:"nonoptional",innerType:t,...Z(r)})}function at(e,t){return new e({type:"success",innerType:t})}function ar(e,t,r){return new e({type:"catch",innerType:t,catchValue:"function"==typeof r?r:()=>r})}function an(e,t,r){return new e({type:"pipe",in:t,out:r})}function ai(e,t){return new e({type:"readonly",innerType:t})}function aa(e,t,r){return new e({type:"template_literal",parts:t,...Z(r)})}function ao(e,t){return new e({type:"lazy",getter:t})}function as(e,t){return new e({type:"promise",innerType:t})}function al(e,t,r){let n=Z(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function au(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Z(r)})}function ac(e){let t=ad(r=>(r.addIssue=e=>{"string"==typeof e?r.issues.push(ea(e,r.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=r.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),r.issues.push(ea(e)))},e(r.value,r)));return t}function ad(e,t){let r=new tR({check:"custom",...Z(t)});return r._zod.check=e,r}function ap(e,t){let r=Z(t),n=r.truthy??["true","1","yes","on","y","enabled"],i=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(n=n.map(e=>"string"==typeof e?e.toLowerCase():e),i=i.map(e=>"string"==typeof e?e.toLowerCase():e));let a=new Set(n),o=new Set(i),s=e.Codec??nl,l=e.Boolean??rS,u=new s({type:"pipe",in:new(e.String??t2)({type:"string",error:r.error}),out:new l({type:"boolean",error:r.error}),transform:(e,t)=>{let n=e;return"sensitive"!==r.case&&(n=n.toLowerCase()),!!a.has(n)||!o.has(n)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...a,...o],input:t.value,inst:u,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?n[0]||"true":i[0]||"false",error:r.error});return u}function af(e,t,r,n={}){let i=Z(n),a={...Z(n),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...i};return r instanceof RegExp&&(a.pattern=r),new e(a)}e.s(["$ZodRegistry",()=>nA,"$input",0,nk,"$output",0,n$,"globalRegistry",0,nO,"registry",()=>nT],18699),e.s(["TimePrecision",0,{Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6},"_any",()=>ip,"_array",()=>iK,"_base64",()=>nQ,"_base64url",()=>nX,"_bigint",()=>ia,"_boolean",()=>ir,"_catch",()=>ar,"_check",()=>ad,"_cidrv4",()=>nG,"_cidrv6",()=>nJ,"_coercedBigint",()=>io,"_coercedBoolean",()=>ii,"_coercedDate",()=>iv,"_coercedNumber",()=>n9,"_coercedString",()=>nN,"_cuid",()=>nq,"_cuid2",()=>nV,"_custom",()=>al,"_date",()=>iy,"_default",()=>i7,"_discriminatedUnion",()=>iJ,"_e164",()=>nY,"_email",()=>nP,"_emoji",()=>nZ,"_endsWith",()=>iZ,"_enum",()=>i4,"_file",()=>i3,"_float32",()=>n5,"_float64",()=>n7,"_gt",()=>ix,"_gte",()=>iE,"_guid",()=>nU,"_includes",()=>iz,"_int",()=>n8,"_int32",()=>ie,"_int64",()=>is,"_intersection",()=>iQ,"_ipv4",()=>nH,"_ipv6",()=>nK,"_isoDate",()=>n4,"_isoDateTime",()=>n1,"_isoDuration",()=>n2,"_isoTime",()=>n6,"_jwt",()=>n0,"_ksuid",()=>nW,"_lazy",()=>ao,"_length",()=>iU,"_literal",()=>i2,"_lowercase",()=>iC,"_lt",()=>iw,"_lte",()=>i_,"_map",()=>i0,"_max",()=>i_,"_maxLength",()=>iN,"_maxSize",()=>iT,"_mime",()=>iq,"_min",()=>iE,"_minLength",()=>iP,"_minSize",()=>iO,"_multipleOf",()=>iA,"_nan",()=>ib,"_nanoid",()=>nM,"_nativeEnum",()=>i6,"_negative",()=>iS,"_never",()=>ih,"_nonnegative",()=>ik,"_nonoptional",()=>ae,"_nonpositive",()=>i$,"_normalize",()=>iB,"_null",()=>id,"_nullable",()=>i5,"_number",()=>n3,"_optional",()=>i8,"_overwrite",()=>iV,"_pipe",()=>an,"_positive",()=>iI,"_promise",()=>as,"_property",()=>iM,"_readonly",()=>ai,"_record",()=>iY,"_refine",()=>au,"_regex",()=>iD,"_set",()=>i1,"_size",()=>iR,"_startsWith",()=>iL,"_string",()=>nR,"_stringFormat",()=>af,"_stringbool",()=>ap,"_success",()=>at,"_superRefine",()=>ac,"_symbol",()=>iu,"_templateLiteral",()=>aa,"_toLowerCase",()=>iW,"_toUpperCase",()=>iH,"_transform",()=>i9,"_trim",()=>iF,"_tuple",()=>iX,"_uint32",()=>it,"_uint64",()=>il,"_ulid",()=>nB,"_undefined",()=>ic,"_union",()=>iG,"_unknown",()=>im,"_uppercase",()=>ij,"_url",()=>nL,"_uuid",()=>nD,"_uuidv4",()=>nC,"_uuidv6",()=>nj,"_uuidv7",()=>nz,"_void",()=>ig,"_xid",()=>nF],75072);class am{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??nO,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var r;let n=e._zod.def,i=this.seen.get(e);if(i)return i.count++,t.schemaPath.includes(e)&&(i.cycle=t.path),i.schema;let a={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,a);let o=e._zod.toJSONSchema?.();if(o)a.schema=o;else{let r={...t,schemaPath:[...t.schemaPath,e],path:t.path},i=e._zod.parent;if(i)a.ref=i,this.process(i,r),this.seen.get(i).isParent=!0;else{let t=a.schema;switch(n.type){case"string":{t.type="string";let{minimum:r,maximum:n,format:i,patterns:o,contentEncoding:s}=e._zod.bag;if("number"==typeof r&&(t.minLength=r),"number"==typeof n&&(t.maxLength=n),i&&(t.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[i]??i,""===t.format&&delete t.format),s&&(t.contentEncoding=s),o&&o.size>0){let e=[...o];1===e.length?t.pattern=e[0].source:e.length>1&&(a.schema.allOf=[...e.map(e=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{let{minimum:r,maximum:n,format:i,multipleOf:a,exclusiveMaximum:o,exclusiveMinimum:s}=e._zod.bag;"string"==typeof i&&i.includes("int")?t.type="integer":t.type="number","number"==typeof s&&("draft-4"===this.target||"openapi-3.0"===this.target?(t.minimum=s,t.exclusiveMinimum=!0):t.exclusiveMinimum=s),"number"==typeof r&&(t.minimum=r,"number"==typeof s&&"draft-4"!==this.target&&(s>=r?delete t.minimum:delete t.exclusiveMinimum)),"number"==typeof o&&("draft-4"===this.target||"openapi-3.0"===this.target?(t.maximum=o,t.exclusiveMaximum=!0):t.exclusiveMaximum=o),"number"==typeof n&&(t.maximum=n,"number"==typeof o&&"draft-4"!==this.target&&(o<=n?delete t.maximum:delete t.exclusiveMaximum)),"number"==typeof a&&(t.multipleOf=a);break}case"boolean":case"success":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(t.type="string",t.nullable=!0,t.enum=[null]):t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:i,maximum:a}=e._zod.bag;"number"==typeof i&&(t.minItems=i),"number"==typeof a&&(t.maxItems=a),t.type="array",t.items=this.process(n.element,{...r,path:[...r.path,"items"]});break}case"object":{t.type="object",t.properties={};let e=n.shape;for(let n in e)t.properties[n]=this.process(e[n],{...r,path:[...r.path,"properties",n]});let i=new Set([...new Set(Object.keys(e))].filter(e=>{let t=n.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));i.size>0&&(t.required=Array.from(i)),n.catchall?._zod.def.type==="never"?t.additionalProperties=!1:n.catchall?n.catchall&&(t.additionalProperties=this.process(n.catchall,{...r,path:[...r.path,"additionalProperties"]})):"output"===this.io&&(t.additionalProperties=!1);break}case"union":t.anyOf=n.options.map((e,t)=>this.process(e,{...r,path:[...r.path,"anyOf",t]}));break;case"intersection":{let e=this.process(n.left,{...r,path:[...r.path,"allOf",0]}),i=this.process(n.right,{...r,path:[...r.path,"allOf",1]}),a=e=>"allOf"in e&&1===Object.keys(e).length;t.allOf=[...a(e)?e.allOf:[e],...a(i)?i.allOf:[i]];break}case"tuple":{t.type="array";let i="draft-2020-12"===this.target?"prefixItems":"items",a="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",o=n.items.map((e,t)=>this.process(e,{...r,path:[...r.path,i,t]})),s=n.rest?this.process(n.rest,{...r,path:[...r.path,a,..."openapi-3.0"===this.target?[n.items.length]:[]]}):null;"draft-2020-12"===this.target?(t.prefixItems=o,s&&(t.items=s)):"openapi-3.0"===this.target?(t.items={anyOf:o},s&&t.items.anyOf.push(s),t.minItems=o.length,s||(t.maxItems=o.length)):(t.items=o,s&&(t.additionalItems=s));let{minimum:l,maximum:u}=e._zod.bag;"number"==typeof l&&(t.minItems=l),"number"==typeof u&&(t.maxItems=u);break}case"record":t.type="object",("draft-7"===this.target||"draft-2020-12"===this.target)&&(t.propertyNames=this.process(n.keyType,{...r,path:[...r.path,"propertyNames"]})),t.additionalProperties=this.process(n.valueType,{...r,path:[...r.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let e=f(n.entries);e.every(e=>"number"==typeof e)&&(t.type="number"),e.every(e=>"string"==typeof e)&&(t.type="string"),t.enum=e;break}case"literal":{let e=[];for(let t of n.values)if(void 0===t){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof t)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else e.push(Number(t));else e.push(t);if(0===e.length);else if(1===e.length){let r=e[0];t.type=null===r?"null":typeof r,"draft-4"===this.target||"openapi-3.0"===this.target?t.enum=[r]:t.const=r}else e.every(e=>"number"==typeof e)&&(t.type="number"),e.every(e=>"string"==typeof e)&&(t.type="string"),e.every(e=>"boolean"==typeof e)&&(t.type="string"),e.every(e=>null===e)&&(t.type="null"),t.enum=e;break}case"file":{let r={type:"string",format:"binary",contentEncoding:"binary"},{minimum:n,maximum:i,mime:a}=e._zod.bag;void 0!==n&&(r.minLength=n),void 0!==i&&(r.maxLength=i),a?1===a.length?(r.contentMediaType=a[0],Object.assign(t,r)):t.anyOf=a.map(e=>({...r,contentMediaType:e})):Object.assign(t,r);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{let e=this.process(n.innerType,r);"openapi-3.0"===this.target?(a.ref=n.innerType,t.nullable=!0):t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(n.innerType,r),a.ref=n.innerType;break;case"default":this.process(n.innerType,r),a.ref=n.innerType,t.default=JSON.parse(JSON.stringify(n.defaultValue));break;case"prefault":this.process(n.innerType,r),a.ref=n.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break;case"catch":{let e;this.process(n.innerType,r),a.ref=n.innerType;try{e=n.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let r=e._zod.pattern;if(!r)throw Error("Pattern not found in template literal");t.type="string",t.pattern=r.source;break}case"pipe":{let e="input"===this.io?"transform"===n.in._zod.def.type?n.out:n.in:n.out;this.process(e,r),a.ref=e;break}case"readonly":this.process(n.innerType,r),a.ref=n.innerType,t.readOnly=!0;break;case"lazy":{let t=e._zod.innerType;this.process(t,r),a.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")}}}let s=this.metadataRegistry.get(e);return s&&Object.assign(a.schema,s),"input"===this.io&&function e(t,r){let n=r??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);let i=t._zod.def;switch(i.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":case"function":return!1;case"array":return e(i.element,n);case"object":for(let t in i.shape)if(e(i.shape[t],n))return!0;return!1;case"union":for(let t of i.options)if(e(t,n))return!0;return!1;case"intersection":return e(i.left,n)||e(i.right,n);case"tuple":for(let t of i.items)if(e(t,n))return!0;if(i.rest&&e(i.rest,n))return!0;return!1;case"record":case"map":return e(i.keyType,n)||e(i.valueType,n);case"set":return e(i.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return e(i.innerType,n);case"lazy":return e(i.getter(),n);case"transform":return!0;case"pipe":return e(i.in,n)||e(i.out,n)}throw Error(`Unknown schema type: ${i.type}`)}(e)&&(delete a.schema.examples,delete a.schema.default),"input"===this.io&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(e).schema}emit(e,t){let r={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},n=this.seen.get(e);if(!n)throw Error("Unprocessed schema. This is a bug in Zod.");let i=e=>{let t="draft-2020-12"===this.target?"$defs":"definitions";if(r.external){let n=r.external.registry.get(e[0])?.id,i=r.external.uri??(e=>e);if(n)return{ref:i(n)};let a=e[1].defId??e[1].schema.id??`schema${this.counter++}`;return e[1].defId=a,{defId:a,ref:`${i("__shared")}#/${t}/${a}`}}if(e[1]===n)return{ref:"#"};let i=`#/${t}/`,a=e[1].schema.id??`__schema${this.counter++}`;return{defId:a,ref:i+a}},a=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:r,defId:n}=i(e);t.def={...t.schema},n&&(t.defId=n);let a=t.schema;for(let e in a)delete a[e];a.$ref=r};if("throw"===r.cycles)for(let e of this.seen.entries()){let t=e[1];if(t.cycle)throw Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let t of this.seen.entries()){let n=t[1];if(e===t[0]){a(t);continue}if(r.external){let n=r.external.registry.get(t[0])?.id;if(e!==t[0]&&n){a(t);continue}}if(this.metadataRegistry.get(t[0])?.id||n.cycle||n.count>1&&"ref"===r.reused){a(t);continue}}let o=(e,t)=>{let r=this.seen.get(e),n=r.def??r.schema,i={...n};if(null===r.ref)return;let a=r.ref;if(r.ref=null,a){o(a,t);let e=this.seen.get(a).schema;e.$ref&&("draft-7"===t.target||"draft-4"===t.target||"openapi-3.0"===t.target)?(n.allOf=n.allOf??[],n.allOf.push(e)):(Object.assign(n,e),Object.assign(n,i))}r.isParent||this.override({zodSchema:e,jsonSchema:n,path:r.path??[]})};for(let e of[...this.seen.entries()].reverse())o(e[0],{target:this.target});let s={};if("draft-2020-12"===this.target?s.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?s.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?s.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),r.external?.uri){let t=r.external.registry.get(e)?.id;if(!t)throw Error("Schema is missing an `id` property");s.$id=r.external.uri(t)}Object.assign(s,n.def);let l=r.external?.defs??{};for(let e of this.seen.entries()){let t=e[1];t.def&&t.defId&&(l[t.defId]=t.def)}r.external||Object.keys(l).length>0&&("draft-2020-12"===this.target?s.$defs=l:s.definitions=l);try{return JSON.parse(JSON.stringify(s))}catch(e){throw Error("Error converting schema to JSON.")}}}function ah(e,t){if(e instanceof nA){let r=new am(t),n={};for(let t of e._idmap.entries()){let[e,n]=t;r.process(n)}let i={},a={registry:e,uri:t?.uri,defs:n};for(let n of e._idmap.entries()){let[e,o]=n;i[e]=r.emit(o,{...t,external:a})}return Object.keys(n).length>0&&(i.__shared={["draft-2020-12"===r.target?"$defs":"definitions"]:n}),{schemas:i}}let r=new am(t);return r.process(e),r.emit(e,t)}e.s(["JSONSchemaGenerator",()=>am,"toJSONSchema",()=>ah],5386),e.s([],13210),e.s([],4500)},78424,66904,69288,e=>{"use strict";e.i(4500),e.s(["ZodAny",()=>e1,"ZodArray",()=>tt,"ZodBase64",()=>e_,"ZodBase64URL",()=>eE,"ZodBigInt",()=>eB,"ZodBigIntFormat",()=>eW,"ZodBoolean",()=>eq,"ZodCIDRv4",()=>ey,"ZodCIDRv6",()=>eb,"ZodCUID",()=>en,"ZodCUID2",()=>ea,"ZodCatch",()=>tF,"ZodCodec",()=>tQ,"ZodCustom",()=>t7,"ZodCustomStringFormat",()=>eT,"ZodDate",()=>e7,"ZodDefault",()=>tj,"ZodDiscriminatedUnion",()=>tc,"ZodE164",()=>eS,"ZodEmail",()=>M,"ZodEmoji",()=>Y,"ZodEnum",()=>tE,"ZodFile",()=>tA,"ZodFunction",()=>t8,"ZodGUID",()=>V,"ZodIPv4",()=>ef,"ZodIPv6",()=>eh,"ZodIntersection",()=>tp,"ZodJWT",()=>ek,"ZodKSUID",()=>ed,"ZodLazy",()=>t6,"ZodLiteral",()=>t$,"ZodMap",()=>tb,"ZodNaN",()=>tH,"ZodNanoID",()=>et,"ZodNever",()=>e3,"ZodNonOptional",()=>tM,"ZodNull",()=>eY,"ZodNullable",()=>tU,"ZodNumber",()=>eU,"ZodNumberFormat",()=>eC,"ZodObject",()=>ti,"ZodOptional",()=>tN,"ZodPipe",()=>tG,"ZodPrefault",()=>tL,"ZodPromise",()=>t3,"ZodReadonly",()=>tY,"ZodRecord",()=>tg,"ZodSet",()=>t_,"ZodString",()=>z,"ZodStringFormat",()=>Z,"ZodSuccess",()=>tV,"ZodSymbol",()=>eG,"ZodTemplateLiteral",()=>t1,"ZodTransform",()=>tO,"ZodTuple",()=>tm,"ZodType",()=>C,"ZodULID",()=>es,"ZodURL",()=>J,"ZodUUID",()=>F,"ZodUndefined",()=>eQ,"ZodUnion",()=>tl,"ZodUnknown",()=>e6,"ZodVoid",()=>e8,"ZodXID",()=>eu,"_ZodString",()=>j,"_default",()=>tz,"_function",()=>t5,"any",()=>e4,"array",()=>tr,"base64",()=>ex,"base64url",()=>eI,"bigint",()=>eF,"boolean",()=>eV,"catch",()=>tW,"check",()=>re,"cidrv4",()=>ev,"cidrv6",()=>ew,"codec",()=>tX,"cuid",()=>ei,"cuid2",()=>eo,"custom",()=>rt,"date",()=>te,"discriminatedUnion",()=>td,"e164",()=>e$,"email",()=>q,"emoji",()=>ee,"enum",()=>tI,"file",()=>tT,"float32",()=>ez,"float64",()=>eL,"function",()=>t5,"guid",()=>B,"hash",()=>eP,"hex",()=>eN,"hostname",()=>eR,"httpUrl",()=>X,"instanceof",()=>ri,"int",()=>ej,"int32",()=>eZ,"int64",()=>eH,"intersection",()=>tf,"ipv4",()=>em,"ipv6",()=>eg,"json",()=>ro,"jwt",()=>eA,"keyof",()=>tn,"ksuid",()=>ep,"lazy",()=>t2,"literal",()=>tk,"looseObject",()=>ts,"map",()=>tw,"nan",()=>tK,"nanoid",()=>er,"nativeEnum",()=>tS,"never",()=>e9,"nonoptional",()=>tq,"null",()=>e0,"nullable",()=>tD,"nullish",()=>tC,"number",()=>eD,"object",()=>ta,"optional",()=>tP,"partialRecord",()=>tv,"pipe",()=>tJ,"prefault",()=>tZ,"preprocess",()=>rs,"promise",()=>t9,"readonly",()=>t0,"record",()=>ty,"refine",()=>rr,"set",()=>tx,"strictObject",()=>to,"string",()=>L,"stringFormat",()=>eO,"stringbool",()=>ra,"success",()=>tB,"superRefine",()=>rn,"symbol",()=>eJ,"templateLiteral",()=>t4,"transform",()=>tR,"tuple",()=>th,"uint32",()=>eM,"uint64",()=>eK,"ulid",()=>el,"undefined",()=>eX,"union",()=>tu,"unknown",()=>e2,"url",()=>Q,"uuid",()=>W,"uuidv4",()=>H,"uuidv6",()=>K,"uuidv7",()=>G,"void",()=>e5,"xid",()=>ec],66904);var t,r=e.i(48874),n=e.i(47329),i=e.i(57460);e.s(["$ZodAny",()=>n.$ZodAny,"$ZodArray",()=>n.$ZodArray,"$ZodBase64",()=>n.$ZodBase64,"$ZodBase64URL",()=>n.$ZodBase64URL,"$ZodBigInt",()=>n.$ZodBigInt,"$ZodBigIntFormat",()=>n.$ZodBigIntFormat,"$ZodBoolean",()=>n.$ZodBoolean,"$ZodCIDRv4",()=>n.$ZodCIDRv4,"$ZodCIDRv6",()=>n.$ZodCIDRv6,"$ZodCUID",()=>n.$ZodCUID,"$ZodCUID2",()=>n.$ZodCUID2,"$ZodCatch",()=>n.$ZodCatch,"$ZodCodec",()=>n.$ZodCodec,"$ZodCustom",()=>n.$ZodCustom,"$ZodCustomStringFormat",()=>n.$ZodCustomStringFormat,"$ZodDate",()=>n.$ZodDate,"$ZodDefault",()=>n.$ZodDefault,"$ZodDiscriminatedUnion",()=>n.$ZodDiscriminatedUnion,"$ZodE164",()=>n.$ZodE164,"$ZodEmail",()=>n.$ZodEmail,"$ZodEmoji",()=>n.$ZodEmoji,"$ZodEnum",()=>n.$ZodEnum,"$ZodFile",()=>n.$ZodFile,"$ZodFunction",()=>n.$ZodFunction,"$ZodGUID",()=>n.$ZodGUID,"$ZodIPv4",()=>n.$ZodIPv4,"$ZodIPv6",()=>n.$ZodIPv6,"$ZodISODate",()=>n.$ZodISODate,"$ZodISODateTime",()=>n.$ZodISODateTime,"$ZodISODuration",()=>n.$ZodISODuration,"$ZodISOTime",()=>n.$ZodISOTime,"$ZodIntersection",()=>n.$ZodIntersection,"$ZodJWT",()=>n.$ZodJWT,"$ZodKSUID",()=>n.$ZodKSUID,"$ZodLazy",()=>n.$ZodLazy,"$ZodLiteral",()=>n.$ZodLiteral,"$ZodMap",()=>n.$ZodMap,"$ZodNaN",()=>n.$ZodNaN,"$ZodNanoID",()=>n.$ZodNanoID,"$ZodNever",()=>n.$ZodNever,"$ZodNonOptional",()=>n.$ZodNonOptional,"$ZodNull",()=>n.$ZodNull,"$ZodNullable",()=>n.$ZodNullable,"$ZodNumber",()=>n.$ZodNumber,"$ZodNumberFormat",()=>n.$ZodNumberFormat,"$ZodObject",()=>n.$ZodObject,"$ZodObjectJIT",()=>n.$ZodObjectJIT,"$ZodOptional",()=>n.$ZodOptional,"$ZodPipe",()=>n.$ZodPipe,"$ZodPrefault",()=>n.$ZodPrefault,"$ZodPromise",()=>n.$ZodPromise,"$ZodReadonly",()=>n.$ZodReadonly,"$ZodRecord",()=>n.$ZodRecord,"$ZodSet",()=>n.$ZodSet,"$ZodString",()=>n.$ZodString,"$ZodStringFormat",()=>n.$ZodStringFormat,"$ZodSuccess",()=>n.$ZodSuccess,"$ZodSymbol",()=>n.$ZodSymbol,"$ZodTemplateLiteral",()=>n.$ZodTemplateLiteral,"$ZodTransform",()=>n.$ZodTransform,"$ZodTuple",()=>n.$ZodTuple,"$ZodType",()=>n.$ZodType,"$ZodULID",()=>n.$ZodULID,"$ZodURL",()=>n.$ZodURL,"$ZodUUID",()=>n.$ZodUUID,"$ZodUndefined",()=>n.$ZodUndefined,"$ZodUnion",()=>n.$ZodUnion,"$ZodUnknown",()=>n.$ZodUnknown,"$ZodVoid",()=>n.$ZodVoid,"$ZodXID",()=>n.$ZodXID,"clone",()=>i.clone,"isValidBase64",()=>n.isValidBase64,"isValidBase64URL",()=>n.isValidBase64URL,"isValidJWT",()=>n.isValidJWT],80562);var n=n,a=e.i(18699),o=e.i(75072),s=e.i(78621),s=s,l=e.i(65106),u=i;e.s([],39494);e.s(["ZodISODate",()=>p,"ZodISODateTime",()=>c,"ZodISODuration",()=>g,"ZodISOTime",()=>m,"date",()=>f,"datetime",()=>d,"duration",()=>y,"time",()=>h],14334);var n=n;let c=r.$constructor("ZodISODateTime",(e,t)=>{n.$ZodISODateTime.init(e,t),Z.init(e,t)});function d(e){return o._isoDateTime(c,e)}let p=r.$constructor("ZodISODate",(e,t)=>{n.$ZodISODate.init(e,t),Z.init(e,t)});function f(e){return o._isoDate(p,e)}let m=r.$constructor("ZodISOTime",(e,t)=>{n.$ZodISOTime.init(e,t),Z.init(e,t)});function h(e){return o._isoTime(m,e)}let g=r.$constructor("ZodISODuration",(e,t)=>{n.$ZodISODuration.init(e,t),Z.init(e,t)});function y(e){return o._isoDuration(g,e)}var v=e.i(85893),b=e.i(4329),w=i;let _=(e,t)=>{b.$ZodError.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>b.formatError(e,t)},flatten:{value:t=>b.flattenError(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,w.jsonStringifyReplacer,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,w.jsonStringifyReplacer,2)}},isEmpty:{get:()=>0===e.issues.length}})},x=r.$constructor("ZodError",_),E=r.$constructor("ZodError",_,{Parent:Error});e.s(["ZodError",0,x,"ZodRealError",0,E],17446);let I=v._parse(E),S=v._parseAsync(E),$=v._safeParse(E),k=v._safeParseAsync(E),A=v._encode(E),T=v._decode(E),O=v._encodeAsync(E),R=v._decodeAsync(E),N=v._safeEncode(E),P=v._safeDecode(E),U=v._safeEncodeAsync(E),D=v._safeDecodeAsync(E);e.s(["decode",0,T,"decodeAsync",0,R,"encode",0,A,"encodeAsync",0,O,"parse",0,I,"parseAsync",0,S,"safeDecode",0,P,"safeDecodeAsync",0,D,"safeEncode",0,N,"safeEncodeAsync",0,U,"safeParse",0,$,"safeParseAsync",0,k],21638);let C=r.$constructor("ZodType",(e,t)=>(n.$ZodType.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(u.mergeDefs(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,r)=>i.clone(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>I(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>$(e,t,r),e.parseAsync=async(t,r)=>S(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>k(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>A(e,t,r),e.decode=(t,r)=>T(e,t,r),e.encodeAsync=async(t,r)=>O(e,t,r),e.decodeAsync=async(t,r)=>R(e,t,r),e.safeEncode=(t,r)=>N(e,t,r),e.safeDecode=(t,r)=>P(e,t,r),e.safeEncodeAsync=async(t,r)=>U(e,t,r),e.safeDecodeAsync=async(t,r)=>D(e,t,r),e.refine=(t,r)=>e.check(rr(t,r)),e.superRefine=t=>e.check(rn(t)),e.overwrite=t=>e.check(o._overwrite(t)),e.optional=()=>tP(e),e.nullable=()=>tD(e),e.nullish=()=>tP(tD(e)),e.nonoptional=t=>tq(e,t),e.array=()=>tr(e),e.or=t=>tu([e,t]),e.and=t=>tf(e,t),e.transform=t=>tJ(e,tR(t)),e.default=t=>tz(e,t),e.prefault=t=>tZ(e,t),e.catch=t=>tW(e,t),e.pipe=t=>tJ(e,t),e.readonly=()=>t0(e),e.describe=t=>{let r=e.clone();return a.globalRegistry.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>a.globalRegistry.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return a.globalRegistry.get(e);let r=e.clone();return a.globalRegistry.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),j=r.$constructor("_ZodString",(e,t)=>{n.$ZodString.init(e,t),C.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(o._regex(...t)),e.includes=(...t)=>e.check(o._includes(...t)),e.startsWith=(...t)=>e.check(o._startsWith(...t)),e.endsWith=(...t)=>e.check(o._endsWith(...t)),e.min=(...t)=>e.check(o._minLength(...t)),e.max=(...t)=>e.check(o._maxLength(...t)),e.length=(...t)=>e.check(o._length(...t)),e.nonempty=(...t)=>e.check(o._minLength(1,...t)),e.lowercase=t=>e.check(o._lowercase(t)),e.uppercase=t=>e.check(o._uppercase(t)),e.trim=()=>e.check(o._trim()),e.normalize=(...t)=>e.check(o._normalize(...t)),e.toLowerCase=()=>e.check(o._toLowerCase()),e.toUpperCase=()=>e.check(o._toUpperCase())}),z=r.$constructor("ZodString",(e,t)=>{n.$ZodString.init(e,t),j.init(e,t),e.email=t=>e.check(o._email(M,t)),e.url=t=>e.check(o._url(J,t)),e.jwt=t=>e.check(o._jwt(ek,t)),e.emoji=t=>e.check(o._emoji(Y,t)),e.guid=t=>e.check(o._guid(V,t)),e.uuid=t=>e.check(o._uuid(F,t)),e.uuidv4=t=>e.check(o._uuidv4(F,t)),e.uuidv6=t=>e.check(o._uuidv6(F,t)),e.uuidv7=t=>e.check(o._uuidv7(F,t)),e.nanoid=t=>e.check(o._nanoid(et,t)),e.guid=t=>e.check(o._guid(V,t)),e.cuid=t=>e.check(o._cuid(en,t)),e.cuid2=t=>e.check(o._cuid2(ea,t)),e.ulid=t=>e.check(o._ulid(es,t)),e.base64=t=>e.check(o._base64(e_,t)),e.base64url=t=>e.check(o._base64url(eE,t)),e.xid=t=>e.check(o._xid(eu,t)),e.ksuid=t=>e.check(o._ksuid(ed,t)),e.ipv4=t=>e.check(o._ipv4(ef,t)),e.ipv6=t=>e.check(o._ipv6(eh,t)),e.cidrv4=t=>e.check(o._cidrv4(ey,t)),e.cidrv6=t=>e.check(o._cidrv6(eb,t)),e.e164=t=>e.check(o._e164(eS,t)),e.datetime=t=>e.check(d(t)),e.date=t=>e.check(f(t)),e.time=t=>e.check(h(t)),e.duration=t=>e.check(y(t))});function L(e){return o._string(z,e)}let Z=r.$constructor("ZodStringFormat",(e,t)=>{n.$ZodStringFormat.init(e,t),j.init(e,t)}),M=r.$constructor("ZodEmail",(e,t)=>{n.$ZodEmail.init(e,t),Z.init(e,t)});function q(e){return o._email(M,e)}let V=r.$constructor("ZodGUID",(e,t)=>{n.$ZodGUID.init(e,t),Z.init(e,t)});function B(e){return o._guid(V,e)}let F=r.$constructor("ZodUUID",(e,t)=>{n.$ZodUUID.init(e,t),Z.init(e,t)});function W(e){return o._uuid(F,e)}function H(e){return o._uuidv4(F,e)}function K(e){return o._uuidv6(F,e)}function G(e){return o._uuidv7(F,e)}let J=r.$constructor("ZodURL",(e,t)=>{n.$ZodURL.init(e,t),Z.init(e,t)});function Q(e){return o._url(J,e)}function X(e){return o._url(J,{protocol:/^https?$/,hostname:s.domain,...u.normalizeParams(e)})}let Y=r.$constructor("ZodEmoji",(e,t)=>{n.$ZodEmoji.init(e,t),Z.init(e,t)});function ee(e){return o._emoji(Y,e)}let et=r.$constructor("ZodNanoID",(e,t)=>{n.$ZodNanoID.init(e,t),Z.init(e,t)});function er(e){return o._nanoid(et,e)}let en=r.$constructor("ZodCUID",(e,t)=>{n.$ZodCUID.init(e,t),Z.init(e,t)});function ei(e){return o._cuid(en,e)}let ea=r.$constructor("ZodCUID2",(e,t)=>{n.$ZodCUID2.init(e,t),Z.init(e,t)});function eo(e){return o._cuid2(ea,e)}let es=r.$constructor("ZodULID",(e,t)=>{n.$ZodULID.init(e,t),Z.init(e,t)});function el(e){return o._ulid(es,e)}let eu=r.$constructor("ZodXID",(e,t)=>{n.$ZodXID.init(e,t),Z.init(e,t)});function ec(e){return o._xid(eu,e)}let ed=r.$constructor("ZodKSUID",(e,t)=>{n.$ZodKSUID.init(e,t),Z.init(e,t)});function ep(e){return o._ksuid(ed,e)}let ef=r.$constructor("ZodIPv4",(e,t)=>{n.$ZodIPv4.init(e,t),Z.init(e,t)});function em(e){return o._ipv4(ef,e)}let eh=r.$constructor("ZodIPv6",(e,t)=>{n.$ZodIPv6.init(e,t),Z.init(e,t)});function eg(e){return o._ipv6(eh,e)}let ey=r.$constructor("ZodCIDRv4",(e,t)=>{n.$ZodCIDRv4.init(e,t),Z.init(e,t)});function ev(e){return o._cidrv4(ey,e)}let eb=r.$constructor("ZodCIDRv6",(e,t)=>{n.$ZodCIDRv6.init(e,t),Z.init(e,t)});function ew(e){return o._cidrv6(eb,e)}let e_=r.$constructor("ZodBase64",(e,t)=>{n.$ZodBase64.init(e,t),Z.init(e,t)});function ex(e){return o._base64(e_,e)}let eE=r.$constructor("ZodBase64URL",(e,t)=>{n.$ZodBase64URL.init(e,t),Z.init(e,t)});function eI(e){return o._base64url(eE,e)}let eS=r.$constructor("ZodE164",(e,t)=>{n.$ZodE164.init(e,t),Z.init(e,t)});function e$(e){return o._e164(eS,e)}let ek=r.$constructor("ZodJWT",(e,t)=>{n.$ZodJWT.init(e,t),Z.init(e,t)});function eA(e){return o._jwt(ek,e)}let eT=r.$constructor("ZodCustomStringFormat",(e,t)=>{n.$ZodCustomStringFormat.init(e,t),Z.init(e,t)});function eO(e,t,r={}){return o._stringFormat(eT,e,t,r)}function eR(e){return o._stringFormat(eT,"hostname",s.hostname,e)}function eN(e){return o._stringFormat(eT,"hex",s.hex,e)}function eP(e,t){let r=t?.enc??"hex",n=`${e}_${r}`,i=s[n];if(!i)throw Error(`Unrecognized hash format: ${n}`);return o._stringFormat(eT,n,i,t)}let eU=r.$constructor("ZodNumber",(e,t)=>{n.$ZodNumber.init(e,t),C.init(e,t),e.gt=(t,r)=>e.check(o._gt(t,r)),e.gte=(t,r)=>e.check(o._gte(t,r)),e.min=(t,r)=>e.check(o._gte(t,r)),e.lt=(t,r)=>e.check(o._lt(t,r)),e.lte=(t,r)=>e.check(o._lte(t,r)),e.max=(t,r)=>e.check(o._lte(t,r)),e.int=t=>e.check(ej(t)),e.safe=t=>e.check(ej(t)),e.positive=t=>e.check(o._gt(0,t)),e.nonnegative=t=>e.check(o._gte(0,t)),e.negative=t=>e.check(o._lt(0,t)),e.nonpositive=t=>e.check(o._lte(0,t)),e.multipleOf=(t,r)=>e.check(o._multipleOf(t,r)),e.step=(t,r)=>e.check(o._multipleOf(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??-1/0,r.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(r.maximum??1/0,r.exclusiveMaximum??1/0)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function eD(e){return o._number(eU,e)}let eC=r.$constructor("ZodNumberFormat",(e,t)=>{n.$ZodNumberFormat.init(e,t),eU.init(e,t)});function ej(e){return o._int(eC,e)}function ez(e){return o._float32(eC,e)}function eL(e){return o._float64(eC,e)}function eZ(e){return o._int32(eC,e)}function eM(e){return o._uint32(eC,e)}let eq=r.$constructor("ZodBoolean",(e,t)=>{n.$ZodBoolean.init(e,t),C.init(e,t)});function eV(e){return o._boolean(eq,e)}let eB=r.$constructor("ZodBigInt",(e,t)=>{n.$ZodBigInt.init(e,t),C.init(e,t),e.gte=(t,r)=>e.check(o._gte(t,r)),e.min=(t,r)=>e.check(o._gte(t,r)),e.gt=(t,r)=>e.check(o._gt(t,r)),e.gte=(t,r)=>e.check(o._gte(t,r)),e.min=(t,r)=>e.check(o._gte(t,r)),e.lt=(t,r)=>e.check(o._lt(t,r)),e.lte=(t,r)=>e.check(o._lte(t,r)),e.max=(t,r)=>e.check(o._lte(t,r)),e.positive=t=>e.check(o._gt(BigInt(0),t)),e.negative=t=>e.check(o._lt(BigInt(0),t)),e.nonpositive=t=>e.check(o._lte(BigInt(0),t)),e.nonnegative=t=>e.check(o._gte(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(o._multipleOf(t,r));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function eF(e){return o._bigint(eB,e)}let eW=r.$constructor("ZodBigIntFormat",(e,t)=>{n.$ZodBigIntFormat.init(e,t),eB.init(e,t)});function eH(e){return o._int64(eW,e)}function eK(e){return o._uint64(eW,e)}let eG=r.$constructor("ZodSymbol",(e,t)=>{n.$ZodSymbol.init(e,t),C.init(e,t)});function eJ(e){return o._symbol(eG,e)}let eQ=r.$constructor("ZodUndefined",(e,t)=>{n.$ZodUndefined.init(e,t),C.init(e,t)});function eX(e){return o._undefined(eQ,e)}let eY=r.$constructor("ZodNull",(e,t)=>{n.$ZodNull.init(e,t),C.init(e,t)});function e0(e){return o._null(eY,e)}let e1=r.$constructor("ZodAny",(e,t)=>{n.$ZodAny.init(e,t),C.init(e,t)});function e4(){return o._any(e1)}let e6=r.$constructor("ZodUnknown",(e,t)=>{n.$ZodUnknown.init(e,t),C.init(e,t)});function e2(){return o._unknown(e6)}let e3=r.$constructor("ZodNever",(e,t)=>{n.$ZodNever.init(e,t),C.init(e,t)});function e9(e){return o._never(e3,e)}let e8=r.$constructor("ZodVoid",(e,t)=>{n.$ZodVoid.init(e,t),C.init(e,t)});function e5(e){return o._void(e8,e)}let e7=r.$constructor("ZodDate",(e,t)=>{n.$ZodDate.init(e,t),C.init(e,t),e.min=(t,r)=>e.check(o._gte(t,r)),e.max=(t,r)=>e.check(o._lte(t,r));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function te(e){return o._date(e7,e)}let tt=r.$constructor("ZodArray",(e,t)=>{n.$ZodArray.init(e,t),C.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(o._minLength(t,r)),e.nonempty=t=>e.check(o._minLength(1,t)),e.max=(t,r)=>e.check(o._maxLength(t,r)),e.length=(t,r)=>e.check(o._length(t,r)),e.unwrap=()=>e.element});function tr(e,t){return o._array(tt,e,t)}function tn(e){return tI(Object.keys(e._zod.def.shape))}let ti=r.$constructor("ZodObject",(e,t)=>{n.$ZodObjectJIT.init(e,t),C.init(e,t),u.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>tI(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:e2()}),e.loose=()=>e.clone({...e._zod.def,catchall:e2()}),e.strict=()=>e.clone({...e._zod.def,catchall:e9()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>u.extend(e,t),e.safeExtend=t=>u.safeExtend(e,t),e.merge=t=>u.merge(e,t),e.pick=t=>u.pick(e,t),e.omit=t=>u.omit(e,t),e.partial=(...t)=>u.partial(tN,e,t[0]),e.required=(...t)=>u.required(tM,e,t[0])});function ta(e,t){return new ti({type:"object",shape:e??{},...u.normalizeParams(t)})}function to(e,t){return new ti({type:"object",shape:e,catchall:e9(),...u.normalizeParams(t)})}function ts(e,t){return new ti({type:"object",shape:e,catchall:e2(),...u.normalizeParams(t)})}let tl=r.$constructor("ZodUnion",(e,t)=>{n.$ZodUnion.init(e,t),C.init(e,t),e.options=t.options});function tu(e,t){return new tl({type:"union",options:e,...u.normalizeParams(t)})}let tc=r.$constructor("ZodDiscriminatedUnion",(e,t)=>{tl.init(e,t),n.$ZodDiscriminatedUnion.init(e,t)});function td(e,t,r){return new tc({type:"union",options:t,discriminator:e,...u.normalizeParams(r)})}let tp=r.$constructor("ZodIntersection",(e,t)=>{n.$ZodIntersection.init(e,t),C.init(e,t)});function tf(e,t){return new tp({type:"intersection",left:e,right:t})}let tm=r.$constructor("ZodTuple",(e,t)=>{n.$ZodTuple.init(e,t),C.init(e,t),e.rest=t=>e.clone({...e._zod.def,rest:t})});function th(e,t,r){let i=t instanceof n.$ZodType,a=i?r:t;return new tm({type:"tuple",items:e,rest:i?t:null,...u.normalizeParams(a)})}let tg=r.$constructor("ZodRecord",(e,t)=>{n.$ZodRecord.init(e,t),C.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function ty(e,t,r){return new tg({type:"record",keyType:e,valueType:t,...u.normalizeParams(r)})}function tv(e,t,r){let n=i.clone(e);return n._zod.values=void 0,new tg({type:"record",keyType:n,valueType:t,...u.normalizeParams(r)})}let tb=r.$constructor("ZodMap",(e,t)=>{n.$ZodMap.init(e,t),C.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function tw(e,t,r){return new tb({type:"map",keyType:e,valueType:t,...u.normalizeParams(r)})}let t_=r.$constructor("ZodSet",(e,t)=>{n.$ZodSet.init(e,t),C.init(e,t),e.min=(...t)=>e.check(o._minSize(...t)),e.nonempty=t=>e.check(o._minSize(1,t)),e.max=(...t)=>e.check(o._maxSize(...t)),e.size=(...t)=>e.check(o._size(...t))});function tx(e,t){return new t_({type:"set",valueType:e,...u.normalizeParams(t)})}let tE=r.$constructor("ZodEnum",(e,t)=>{n.$ZodEnum.init(e,t),C.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let i={};for(let n of e)if(r.has(n))i[n]=t.entries[n];else throw Error(`Key ${n} not found in enum`);return new tE({...t,checks:[],...u.normalizeParams(n),entries:i})},e.exclude=(e,n)=>{let i={...t.entries};for(let t of e)if(r.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new tE({...t,checks:[],...u.normalizeParams(n),entries:i})}});function tI(e,t){return new tE({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...u.normalizeParams(t)})}function tS(e,t){return new tE({type:"enum",entries:e,...u.normalizeParams(t)})}let t$=r.$constructor("ZodLiteral",(e,t)=>{n.$ZodLiteral.init(e,t),C.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function tk(e,t){return new t$({type:"literal",values:Array.isArray(e)?e:[e],...u.normalizeParams(t)})}let tA=r.$constructor("ZodFile",(e,t)=>{n.$ZodFile.init(e,t),C.init(e,t),e.min=(t,r)=>e.check(o._minSize(t,r)),e.max=(t,r)=>e.check(o._maxSize(t,r)),e.mime=(t,r)=>e.check(o._mime(Array.isArray(t)?t:[t],r))});function tT(e){return o._file(tA,e)}let tO=r.$constructor("ZodTransform",(e,t)=>{n.$ZodTransform.init(e,t),C.init(e,t),e._zod.parse=(n,i)=>{if("backward"===i.direction)throw new r.$ZodEncodeError(e.constructor.name);n.addIssue=r=>{"string"==typeof r?n.issues.push(u.issue(r,n.value,t)):(r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=e),n.issues.push(u.issue(r)))};let a=t.transform(n.value,n);return a instanceof Promise?a.then(e=>(n.value=e,n)):(n.value=a,n)}});function tR(e){return new tO({type:"transform",transform:e})}let tN=r.$constructor("ZodOptional",(e,t)=>{n.$ZodOptional.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tP(e){return new tN({type:"optional",innerType:e})}let tU=r.$constructor("ZodNullable",(e,t)=>{n.$ZodNullable.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tD(e){return new tU({type:"nullable",innerType:e})}function tC(e){return tP(tD(e))}let tj=r.$constructor("ZodDefault",(e,t)=>{n.$ZodDefault.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function tz(e,t){return new tj({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():u.shallowClone(t)}})}let tL=r.$constructor("ZodPrefault",(e,t)=>{n.$ZodPrefault.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tZ(e,t){return new tL({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():u.shallowClone(t)}})}let tM=r.$constructor("ZodNonOptional",(e,t)=>{n.$ZodNonOptional.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tq(e,t){return new tM({type:"nonoptional",innerType:e,...u.normalizeParams(t)})}let tV=r.$constructor("ZodSuccess",(e,t)=>{n.$ZodSuccess.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tB(e){return new tV({type:"success",innerType:e})}let tF=r.$constructor("ZodCatch",(e,t)=>{n.$ZodCatch.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function tW(e,t){return new tF({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}let tH=r.$constructor("ZodNaN",(e,t)=>{n.$ZodNaN.init(e,t),C.init(e,t)});function tK(e){return o._nan(tH,e)}let tG=r.$constructor("ZodPipe",(e,t)=>{n.$ZodPipe.init(e,t),C.init(e,t),e.in=t.in,e.out=t.out});function tJ(e,t){return new tG({type:"pipe",in:e,out:t})}let tQ=r.$constructor("ZodCodec",(e,t)=>{tG.init(e,t),n.$ZodCodec.init(e,t)});function tX(e,t,r){return new tQ({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}let tY=r.$constructor("ZodReadonly",(e,t)=>{n.$ZodReadonly.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.innerType});function t0(e){return new tY({type:"readonly",innerType:e})}let t1=r.$constructor("ZodTemplateLiteral",(e,t)=>{n.$ZodTemplateLiteral.init(e,t),C.init(e,t)});function t4(e,t){return new t1({type:"template_literal",parts:e,...u.normalizeParams(t)})}let t6=r.$constructor("ZodLazy",(e,t)=>{n.$ZodLazy.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.getter()});function t2(e){return new t6({type:"lazy",getter:e})}let t3=r.$constructor("ZodPromise",(e,t)=>{n.$ZodPromise.init(e,t),C.init(e,t),e.unwrap=()=>e._zod.def.innerType});function t9(e){return new t3({type:"promise",innerType:e})}let t8=r.$constructor("ZodFunction",(e,t)=>{n.$ZodFunction.init(e,t),C.init(e,t)});function t5(e){return new t8({type:"function",input:Array.isArray(e?.input)?th(e?.input):e?.input??tr(e2()),output:e?.output??e2()})}let t7=r.$constructor("ZodCustom",(e,t)=>{n.$ZodCustom.init(e,t),C.init(e,t)});function re(e){let t=new l.$ZodCheck({check:"custom"});return t._zod.check=e,t}function rt(e,t){return o._custom(t7,e??(()=>!0),t)}function rr(e,t={}){return o._refine(t7,e,t)}function rn(e){return o._superRefine(e)}function ri(e,t={error:`Input not instance of ${e.name}`}){let r=new t7({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...u.normalizeParams(t)});return r._zod.bag.Class=e,r}let ra=(...e)=>o._stringbool({Codec:tQ,Boolean:eq,String:z},...e);function ro(e){let t=t2(()=>tu([L(e),eD(),eV(),e0(),tr(t),ty(L(),t)]));return t}function rs(e,t){return tJ(tR(e),t)}let rl={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function ru(e){r.config({customError:e})}function rc(){return r.config().customError}t||(t={}),e.s(["ZodFirstPartyTypeKind",()=>t,"ZodIssueCode",0,rl,"getErrorMap",()=>rc,"setErrorMap",()=>ru],43158);var rd=e.i(1684);function rp(e){return o._coercedString(z,e)}function rf(e){return o._coercedNumber(eU,e)}function rm(e){return o._coercedBoolean(eq,e)}function rh(e){return o._coercedBigint(eB,e)}function rg(e){return o._coercedDate(e7,e)}e.i(16593),e.s(["bigint",()=>rh,"boolean",()=>rm,"date",()=>rg,"number",()=>rf,"string",()=>rp],14948),(0,r.config)((0,rd.default)()),e.s([],78424),e.i(78424),e.i(80562);var ry=e.i(7092),rv=e.i(57460),rb=s,rw=e.i(94854),r_=e.i(11402),rx=e.i(84266),rE=e.i(73162),rI=e.i(74327),rS=e.i(30699),r$=e.i(81670),rk=e.i(25048),rA=e.i(52357),rT=e.i(39576),rO=e.i(74138),rR=e.i(27866),rN=e.i(35519),rP=e.i(8690),rU=e.i(82230),rD=e.i(79908),rC=e.i(5632),rj=e.i(79406),rz=e.i(78006),rL=e.i(89770),rZ=e.i(91359),rM=e.i(3962),rq=e.i(29786),rV=e.i(20292),rB=e.i(42039),rF=e.i(99566),rW=e.i(32130),rH=e.i(53218),rK=e.i(16782),rG=e.i(97282),rJ=e.i(42471),rQ=e.i(78793),rX=e.i(91824),rY=e.i(2379),r0=e.i(63669),r1=e.i(4403),r4=e.i(61599),r6=e.i(57658),r2=e.i(7625),r3=e.i(17791),r9=e.i(71714),r8=e.i(2921),r5=e.i(94121),r7=e.i(77169),ne=e.i(74582),nt=e.i(65904);e.s(["ar",()=>rw.default,"az",()=>r_.default,"be",()=>rx.default,"bg",()=>rE.default,"ca",()=>rI.default,"cs",()=>rS.default,"da",()=>r$.default,"de",()=>rk.default,"en",()=>rd.default,"eo",()=>rA.default,"es",()=>rT.default,"fa",()=>rO.default,"fi",()=>rR.default,"fr",()=>rN.default,"frCA",()=>rP.default,"he",()=>rU.default,"hu",()=>rD.default,"id",()=>rC.default,"is",()=>rj.default,"it",()=>rz.default,"ja",()=>rL.default,"ka",()=>rZ.default,"kh",()=>rM.default,"km",()=>rq.default,"ko",()=>rV.default,"lt",()=>rB.default,"mk",()=>rF.default,"ms",()=>rW.default,"nl",()=>rH.default,"no",()=>rK.default,"ota",()=>rG.default,"pl",()=>rQ.default,"ps",()=>rJ.default,"pt",()=>rX.default,"ru",()=>rY.default,"sl",()=>r0.default,"sv",()=>r1.default,"ta",()=>r4.default,"th",()=>r6.default,"tr",()=>r2.default,"ua",()=>r3.default,"uk",()=>r9.default,"ur",()=>r8.default,"vi",()=>r5.default,"yo",()=>nt.default,"zhCN",()=>r7.default,"zhTW",()=>ne.default],17749);var nr=e.i(17749),nn=e.i(17904),ni=e.i(5386),na=e.i(13210);e.s(["$ZodAny",()=>n.$ZodAny,"$ZodArray",()=>n.$ZodArray,"$ZodAsyncError",()=>r.$ZodAsyncError,"$ZodBase64",()=>n.$ZodBase64,"$ZodBase64URL",()=>n.$ZodBase64URL,"$ZodBigInt",()=>n.$ZodBigInt,"$ZodBigIntFormat",()=>n.$ZodBigIntFormat,"$ZodBoolean",()=>n.$ZodBoolean,"$ZodCIDRv4",()=>n.$ZodCIDRv4,"$ZodCIDRv6",()=>n.$ZodCIDRv6,"$ZodCUID",()=>n.$ZodCUID,"$ZodCUID2",()=>n.$ZodCUID2,"$ZodCatch",()=>n.$ZodCatch,"$ZodCheck",()=>l.$ZodCheck,"$ZodCheckBigIntFormat",()=>l.$ZodCheckBigIntFormat,"$ZodCheckEndsWith",()=>l.$ZodCheckEndsWith,"$ZodCheckGreaterThan",()=>l.$ZodCheckGreaterThan,"$ZodCheckIncludes",()=>l.$ZodCheckIncludes,"$ZodCheckLengthEquals",()=>l.$ZodCheckLengthEquals,"$ZodCheckLessThan",()=>l.$ZodCheckLessThan,"$ZodCheckLowerCase",()=>l.$ZodCheckLowerCase,"$ZodCheckMaxLength",()=>l.$ZodCheckMaxLength,"$ZodCheckMaxSize",()=>l.$ZodCheckMaxSize,"$ZodCheckMimeType",()=>l.$ZodCheckMimeType,"$ZodCheckMinLength",()=>l.$ZodCheckMinLength,"$ZodCheckMinSize",()=>l.$ZodCheckMinSize,"$ZodCheckMultipleOf",()=>l.$ZodCheckMultipleOf,"$ZodCheckNumberFormat",()=>l.$ZodCheckNumberFormat,"$ZodCheckOverwrite",()=>l.$ZodCheckOverwrite,"$ZodCheckProperty",()=>l.$ZodCheckProperty,"$ZodCheckRegex",()=>l.$ZodCheckRegex,"$ZodCheckSizeEquals",()=>l.$ZodCheckSizeEquals,"$ZodCheckStartsWith",()=>l.$ZodCheckStartsWith,"$ZodCheckStringFormat",()=>l.$ZodCheckStringFormat,"$ZodCheckUpperCase",()=>l.$ZodCheckUpperCase,"$ZodCodec",()=>n.$ZodCodec,"$ZodCustom",()=>n.$ZodCustom,"$ZodCustomStringFormat",()=>n.$ZodCustomStringFormat,"$ZodDate",()=>n.$ZodDate,"$ZodDefault",()=>n.$ZodDefault,"$ZodDiscriminatedUnion",()=>n.$ZodDiscriminatedUnion,"$ZodE164",()=>n.$ZodE164,"$ZodEmail",()=>n.$ZodEmail,"$ZodEmoji",()=>n.$ZodEmoji,"$ZodEncodeError",()=>r.$ZodEncodeError,"$ZodEnum",()=>n.$ZodEnum,"$ZodError",()=>b.$ZodError,"$ZodFile",()=>n.$ZodFile,"$ZodFunction",()=>n.$ZodFunction,"$ZodGUID",()=>n.$ZodGUID,"$ZodIPv4",()=>n.$ZodIPv4,"$ZodIPv6",()=>n.$ZodIPv6,"$ZodISODate",()=>n.$ZodISODate,"$ZodISODateTime",()=>n.$ZodISODateTime,"$ZodISODuration",()=>n.$ZodISODuration,"$ZodISOTime",()=>n.$ZodISOTime,"$ZodIntersection",()=>n.$ZodIntersection,"$ZodJWT",()=>n.$ZodJWT,"$ZodKSUID",()=>n.$ZodKSUID,"$ZodLazy",()=>n.$ZodLazy,"$ZodLiteral",()=>n.$ZodLiteral,"$ZodMap",()=>n.$ZodMap,"$ZodNaN",()=>n.$ZodNaN,"$ZodNanoID",()=>n.$ZodNanoID,"$ZodNever",()=>n.$ZodNever,"$ZodNonOptional",()=>n.$ZodNonOptional,"$ZodNull",()=>n.$ZodNull,"$ZodNullable",()=>n.$ZodNullable,"$ZodNumber",()=>n.$ZodNumber,"$ZodNumberFormat",()=>n.$ZodNumberFormat,"$ZodObject",()=>n.$ZodObject,"$ZodObjectJIT",()=>n.$ZodObjectJIT,"$ZodOptional",()=>n.$ZodOptional,"$ZodPipe",()=>n.$ZodPipe,"$ZodPrefault",()=>n.$ZodPrefault,"$ZodPromise",()=>n.$ZodPromise,"$ZodReadonly",()=>n.$ZodReadonly,"$ZodRealError",()=>b.$ZodRealError,"$ZodRecord",()=>n.$ZodRecord,"$ZodRegistry",()=>a.$ZodRegistry,"$ZodSet",()=>n.$ZodSet,"$ZodString",()=>n.$ZodString,"$ZodStringFormat",()=>n.$ZodStringFormat,"$ZodSuccess",()=>n.$ZodSuccess,"$ZodSymbol",()=>n.$ZodSymbol,"$ZodTemplateLiteral",()=>n.$ZodTemplateLiteral,"$ZodTransform",()=>n.$ZodTransform,"$ZodTuple",()=>n.$ZodTuple,"$ZodType",()=>n.$ZodType,"$ZodULID",()=>n.$ZodULID,"$ZodURL",()=>n.$ZodURL,"$ZodUUID",()=>n.$ZodUUID,"$ZodUndefined",()=>n.$ZodUndefined,"$ZodUnion",()=>n.$ZodUnion,"$ZodUnknown",()=>n.$ZodUnknown,"$ZodVoid",()=>n.$ZodVoid,"$ZodXID",()=>n.$ZodXID,"$brand",()=>r.$brand,"$constructor",()=>r.$constructor,"$input",()=>a.$input,"$output",()=>a.$output,"Doc",()=>nn.Doc,"JSONSchema",0,na,"JSONSchemaGenerator",()=>ni.JSONSchemaGenerator,"NEVER",()=>r.NEVER,"TimePrecision",()=>o.TimePrecision,"_any",()=>o._any,"_array",()=>o._array,"_base64",()=>o._base64,"_base64url",()=>o._base64url,"_bigint",()=>o._bigint,"_boolean",()=>o._boolean,"_catch",()=>o._catch,"_check",()=>o._check,"_cidrv4",()=>o._cidrv4,"_cidrv6",()=>o._cidrv6,"_coercedBigint",()=>o._coercedBigint,"_coercedBoolean",()=>o._coercedBoolean,"_coercedDate",()=>o._coercedDate,"_coercedNumber",()=>o._coercedNumber,"_coercedString",()=>o._coercedString,"_cuid",()=>o._cuid,"_cuid2",()=>o._cuid2,"_custom",()=>o._custom,"_date",()=>o._date,"_decode",()=>v._decode,"_decodeAsync",()=>v._decodeAsync,"_default",()=>o._default,"_discriminatedUnion",()=>o._discriminatedUnion,"_e164",()=>o._e164,"_email",()=>o._email,"_emoji",()=>o._emoji,"_encode",()=>v._encode,"_encodeAsync",()=>v._encodeAsync,"_endsWith",()=>o._endsWith,"_enum",()=>o._enum,"_file",()=>o._file,"_float32",()=>o._float32,"_float64",()=>o._float64,"_gt",()=>o._gt,"_gte",()=>o._gte,"_guid",()=>o._guid,"_includes",()=>o._includes,"_int",()=>o._int,"_int32",()=>o._int32,"_int64",()=>o._int64,"_intersection",()=>o._intersection,"_ipv4",()=>o._ipv4,"_ipv6",()=>o._ipv6,"_isoDate",()=>o._isoDate,"_isoDateTime",()=>o._isoDateTime,"_isoDuration",()=>o._isoDuration,"_isoTime",()=>o._isoTime,"_jwt",()=>o._jwt,"_ksuid",()=>o._ksuid,"_lazy",()=>o._lazy,"_length",()=>o._length,"_literal",()=>o._literal,"_lowercase",()=>o._lowercase,"_lt",()=>o._lt,"_lte",()=>o._lte,"_map",()=>o._map,"_max",()=>o._max,"_maxLength",()=>o._maxLength,"_maxSize",()=>o._maxSize,"_mime",()=>o._mime,"_min",()=>o._min,"_minLength",()=>o._minLength,"_minSize",()=>o._minSize,"_multipleOf",()=>o._multipleOf,"_nan",()=>o._nan,"_nanoid",()=>o._nanoid,"_nativeEnum",()=>o._nativeEnum,"_negative",()=>o._negative,"_never",()=>o._never,"_nonnegative",()=>o._nonnegative,"_nonoptional",()=>o._nonoptional,"_nonpositive",()=>o._nonpositive,"_normalize",()=>o._normalize,"_null",()=>o._null,"_nullable",()=>o._nullable,"_number",()=>o._number,"_optional",()=>o._optional,"_overwrite",()=>o._overwrite,"_parse",()=>v._parse,"_parseAsync",()=>v._parseAsync,"_pipe",()=>o._pipe,"_positive",()=>o._positive,"_promise",()=>o._promise,"_property",()=>o._property,"_readonly",()=>o._readonly,"_record",()=>o._record,"_refine",()=>o._refine,"_regex",()=>o._regex,"_safeDecode",()=>v._safeDecode,"_safeDecodeAsync",()=>v._safeDecodeAsync,"_safeEncode",()=>v._safeEncode,"_safeEncodeAsync",()=>v._safeEncodeAsync,"_safeParse",()=>v._safeParse,"_safeParseAsync",()=>v._safeParseAsync,"_set",()=>o._set,"_size",()=>o._size,"_startsWith",()=>o._startsWith,"_string",()=>o._string,"_stringFormat",()=>o._stringFormat,"_stringbool",()=>o._stringbool,"_success",()=>o._success,"_superRefine",()=>o._superRefine,"_symbol",()=>o._symbol,"_templateLiteral",()=>o._templateLiteral,"_toLowerCase",()=>o._toLowerCase,"_toUpperCase",()=>o._toUpperCase,"_transform",()=>o._transform,"_trim",()=>o._trim,"_tuple",()=>o._tuple,"_uint32",()=>o._uint32,"_uint64",()=>o._uint64,"_ulid",()=>o._ulid,"_undefined",()=>o._undefined,"_union",()=>o._union,"_unknown",()=>o._unknown,"_uppercase",()=>o._uppercase,"_url",()=>o._url,"_uuid",()=>o._uuid,"_uuidv4",()=>o._uuidv4,"_uuidv6",()=>o._uuidv6,"_uuidv7",()=>o._uuidv7,"_void",()=>o._void,"_xid",()=>o._xid,"clone",()=>i.clone,"config",()=>r.config,"decode",()=>v.decode,"decodeAsync",()=>v.decodeAsync,"encode",()=>v.encode,"encodeAsync",()=>v.encodeAsync,"flattenError",()=>b.flattenError,"formatError",()=>b.formatError,"globalConfig",()=>r.globalConfig,"globalRegistry",()=>a.globalRegistry,"isValidBase64",()=>n.isValidBase64,"isValidBase64URL",()=>n.isValidBase64URL,"isValidJWT",()=>n.isValidJWT,"locales",0,nr,"parse",()=>v.parse,"parseAsync",()=>v.parseAsync,"prettifyError",()=>b.prettifyError,"regexes",0,rb,"registry",()=>a.registry,"safeDecode",()=>v.safeDecode,"safeDecodeAsync",()=>v.safeDecodeAsync,"safeEncode",()=>v.safeEncode,"safeEncodeAsync",()=>v.safeEncodeAsync,"safeParse",()=>v.safeParse,"safeParseAsync",()=>v.safeParseAsync,"toDotPath",()=>b.toDotPath,"toJSONSchema",()=>ni.toJSONSchema,"treeifyError",()=>b.treeifyError,"util",0,rv,"version",()=>ry.version],54868);var no=e.i(54868);e.i(66904),e.i(39494),e.s(["endsWith",()=>o._endsWith,"gt",()=>o._gt,"gte",()=>o._gte,"includes",()=>o._includes,"length",()=>o._length,"lowercase",()=>o._lowercase,"lt",()=>o._lt,"lte",()=>o._lte,"maxLength",()=>o._maxLength,"maxSize",()=>o._maxSize,"mime",()=>o._mime,"minLength",()=>o._minLength,"minSize",()=>o._minSize,"multipleOf",()=>o._multipleOf,"negative",()=>o._negative,"nonnegative",()=>o._nonnegative,"nonpositive",()=>o._nonpositive,"normalize",()=>o._normalize,"overwrite",()=>o._overwrite,"positive",()=>o._positive,"property",()=>o._property,"regex",()=>o._regex,"size",()=>o._size,"startsWith",()=>o._startsWith,"toLowerCase",()=>o._toLowerCase,"toUpperCase",()=>o._toUpperCase,"trim",()=>o._trim,"uppercase",()=>o._uppercase],26090),e.i(26090),e.i(17446),e.i(21638),e.i(43158),e.s(["$brand",()=>r.$brand,"ZodFirstPartyTypeKind",()=>t,"ZodIssueCode",0,rl,"config",()=>r.config,"getErrorMap",()=>rc,"setErrorMap",()=>ru],6536),e.i(6536);var i=i,s=s,ns=e.i(75072),u=i,nl=e.i(14334),nu=e.i(14948);e.s(["$brand",()=>r.$brand,"$input",()=>a.$input,"$output",()=>a.$output,"NEVER",()=>r.NEVER,"TimePrecision",()=>ns.TimePrecision,"ZodAny",0,e1,"ZodArray",0,tt,"ZodBase64",0,e_,"ZodBase64URL",0,eE,"ZodBigInt",0,eB,"ZodBigIntFormat",0,eW,"ZodBoolean",0,eq,"ZodCIDRv4",0,ey,"ZodCIDRv6",0,eb,"ZodCUID",0,en,"ZodCUID2",0,ea,"ZodCatch",0,tF,"ZodCodec",0,tQ,"ZodCustom",0,t7,"ZodCustomStringFormat",0,eT,"ZodDate",0,e7,"ZodDefault",0,tj,"ZodDiscriminatedUnion",0,tc,"ZodE164",0,eS,"ZodEmail",0,M,"ZodEmoji",0,Y,"ZodEnum",0,tE,"ZodError",0,x,"ZodFile",0,tA,"ZodFirstPartyTypeKind",()=>t,"ZodFunction",0,t8,"ZodGUID",0,V,"ZodIPv4",0,ef,"ZodIPv6",0,eh,"ZodISODate",0,p,"ZodISODateTime",0,c,"ZodISODuration",0,g,"ZodISOTime",0,m,"ZodIntersection",0,tp,"ZodIssueCode",0,rl,"ZodJWT",0,ek,"ZodKSUID",0,ed,"ZodLazy",0,t6,"ZodLiteral",0,t$,"ZodMap",0,tb,"ZodNaN",0,tH,"ZodNanoID",0,et,"ZodNever",0,e3,"ZodNonOptional",0,tM,"ZodNull",0,eY,"ZodNullable",0,tU,"ZodNumber",0,eU,"ZodNumberFormat",0,eC,"ZodObject",0,ti,"ZodOptional",0,tN,"ZodPipe",0,tG,"ZodPrefault",0,tL,"ZodPromise",0,t3,"ZodReadonly",0,tY,"ZodRealError",0,E,"ZodRecord",0,tg,"ZodSet",0,t_,"ZodString",0,z,"ZodStringFormat",0,Z,"ZodSuccess",0,tV,"ZodSymbol",0,eG,"ZodTemplateLiteral",0,t1,"ZodTransform",0,tO,"ZodTuple",0,tm,"ZodType",0,C,"ZodULID",0,es,"ZodURL",0,J,"ZodUUID",0,F,"ZodUndefined",0,eQ,"ZodUnion",0,tl,"ZodUnknown",0,e6,"ZodVoid",0,e8,"ZodXID",0,eu,"_ZodString",0,j,"_default",()=>tz,"_function",()=>t5,"any",()=>e4,"array",()=>tr,"base64",()=>ex,"base64url",()=>eI,"bigint",()=>eF,"boolean",()=>eV,"catch",()=>tW,"check",()=>re,"cidrv4",()=>ev,"cidrv6",()=>ew,"clone",()=>i.clone,"codec",()=>tX,"coerce",0,nu,"config",()=>r.config,"core",0,no,"cuid",()=>ei,"cuid2",()=>eo,"custom",()=>rt,"date",()=>te,"decode",0,T,"decodeAsync",0,R,"discriminatedUnion",()=>td,"e164",()=>e$,"email",()=>q,"emoji",()=>ee,"encode",0,A,"encodeAsync",0,O,"endsWith",()=>o._endsWith,"enum",()=>tI,"file",()=>tT,"flattenError",()=>b.flattenError,"float32",()=>ez,"float64",()=>eL,"formatError",()=>b.formatError,"function",()=>t5,"getErrorMap",()=>rc,"globalRegistry",()=>a.globalRegistry,"gt",()=>o._gt,"gte",()=>o._gte,"guid",()=>B,"hash",()=>eP,"hex",()=>eN,"hostname",()=>eR,"httpUrl",()=>X,"includes",()=>o._includes,"instanceof",()=>ri,"int",()=>ej,"int32",()=>eZ,"int64",()=>eH,"intersection",()=>tf,"ipv4",()=>em,"ipv6",()=>eg,"iso",0,nl,"json",()=>ro,"jwt",()=>eA,"keyof",()=>tn,"ksuid",()=>ep,"lazy",()=>t2,"length",()=>o._length,"literal",()=>tk,"locales",0,nr,"looseObject",()=>ts,"lowercase",()=>o._lowercase,"lt",()=>o._lt,"lte",()=>o._lte,"map",()=>tw,"maxLength",()=>o._maxLength,"maxSize",()=>o._maxSize,"mime",()=>o._mime,"minLength",()=>o._minLength,"minSize",()=>o._minSize,"multipleOf",()=>o._multipleOf,"nan",()=>tK,"nanoid",()=>er,"nativeEnum",()=>tS,"negative",()=>o._negative,"never",()=>e9,"nonnegative",()=>o._nonnegative,"nonoptional",()=>tq,"nonpositive",()=>o._nonpositive,"normalize",()=>o._normalize,"null",()=>e0,"nullable",()=>tD,"nullish",()=>tC,"number",()=>eD,"object",()=>ta,"optional",()=>tP,"overwrite",()=>o._overwrite,"parse",0,I,"parseAsync",0,S,"partialRecord",()=>tv,"pipe",()=>tJ,"positive",()=>o._positive,"prefault",()=>tZ,"preprocess",()=>rs,"prettifyError",()=>b.prettifyError,"promise",()=>t9,"property",()=>o._property,"readonly",()=>t0,"record",()=>ty,"refine",()=>rr,"regex",()=>o._regex,"regexes",()=>s,"registry",()=>a.registry,"safeDecode",0,P,"safeDecodeAsync",0,D,"safeEncode",0,N,"safeEncodeAsync",0,U,"safeParse",0,$,"safeParseAsync",0,k,"set",()=>tx,"setErrorMap",()=>ru,"size",()=>o._size,"startsWith",()=>o._startsWith,"strictObject",()=>to,"string",()=>L,"stringFormat",()=>eO,"stringbool",0,ra,"success",()=>tB,"superRefine",()=>rn,"symbol",()=>eJ,"templateLiteral",()=>t4,"toJSONSchema",()=>ni.toJSONSchema,"toLowerCase",()=>o._toLowerCase,"toUpperCase",()=>o._toUpperCase,"transform",()=>tR,"treeifyError",()=>b.treeifyError,"trim",()=>o._trim,"tuple",()=>th,"uint32",()=>eM,"uint64",()=>eK,"ulid",()=>el,"undefined",()=>eX,"union",()=>tu,"unknown",()=>e2,"uppercase",()=>o._uppercase,"url",()=>Q,"util",()=>u,"uuid",()=>W,"uuidv4",()=>H,"uuidv6",()=>K,"uuidv7",()=>G,"void",()=>e5,"xid",()=>ec],69288)},89271,e=>{"use strict";e.i(78424);var t=e.i(69288);e.s(["default",0,t])},1127,49974,27341,13012,10831,91804,42293,e=>{"use strict";let t,r=Object.create(null),n=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?r:globalThis),i=new Proxy(r,{get:(e,t)=>n()[t]??r[t],has:(e,t)=>t in n()||t in r,set:(e,t,r)=>(n(!0)[t]=r,!0),deleteProperty(e,t){if(!t)return!1;let r=n(!0);return delete r[t],!0},ownKeys:()=>Object.keys(n(!0))}),a="undefined"!=typeof process&&process.env&&"production"||"",o="production"===a,s=()=>"dev"===a||"development"===a,l=()=>{var e;return"test"===a||!!(e=i.TEST)&&"false"!==e};function u(e,t){return"undefined"!=typeof process&&process.env?process.env[e]??t:"undefined"!=typeof Deno?Deno.env.get(e)??t:"undefined"!=typeof Bun?Bun.env[e]??t:t}function c(e,t=!0){let r=u(e);return r?"0"!==r&&"false"!==r.toLowerCase()&&""!==r:t}let d=Object.freeze({get BETTER_AUTH_SECRET(){return u("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return u("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return u("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return u("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return u("NODE_ENV","development")},get PACKAGE_VERSION(){return u("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return u("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}}),p={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},f=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),m=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];function h(){if(void 0!==u("FORCE_COLOR"))switch(u("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==u("NODE_DISABLE_COLORS")&&""!==u("NODE_DISABLE_COLORS")||void 0!==u("NO_COLOR")&&""!==u("NO_COLOR")||"dumb"===u("TERM"))return 1;if(u("TMUX"))return 24;if("TF_BUILD"in i&&"AGENT_NAME"in i)return 4;if("CI"in i){for(let{0:e,1:t}of f)if(e in i)return t;return"codeship"===u("CI_NAME")?8:1}if("TEAMCITY_VERSION"in i)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(u("TEAMCITY_VERSION"))?4:1;switch(u("TERM_PROGRAM")){case"iTerm.app":if(!u("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(u("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===u("COLORTERM")||"24bit"===u("COLORTERM"))return 24;if(u("TERM")){if(null!==/truecolor/.exec(u("TERM")))return 24;if(null!==/^xterm-256/.exec(u("TERM")))return 8;let e=u("TERM").toLowerCase();if(p[e])return p[e];if(m.some(t=>null!==t.exec(e)))return 4}return u("COLORTERM")?4:1}let g={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",undim:"\x1b[22m",underscore:"\x1b[4m",blink:"\x1b[5m",reverse:"\x1b[7m",hidden:"\x1b[8m",fg:{black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"},bg:{black:"\x1b[40m",red:"\x1b[41m",green:"\x1b[42m",yellow:"\x1b[43m",blue:"\x1b[44m",magenta:"\x1b[45m",cyan:"\x1b[46m",white:"\x1b[47m"}},y=["info","success","warn","error","debug"];function v(e,t){return y.indexOf(t)<=y.indexOf(e)}let b={info:g.fg.blue,success:g.fg.green,warn:g.fg.yellow,error:g.fg.red,debug:g.fg.magenta},w=e=>{let t=e?.disabled!==!0,r=e?.level??"error",n=e?.disableColors!==void 0?!e.disableColors:1!==h();return{...Object.fromEntries(y.map(i=>[i,(...[a,...o])=>((i,a,o=[])=>{let s;if(!t||!v(r,i))return;let l=(s=new Date().toISOString(),n?`${g.dim}${s}${g.reset} ${b[i]}${i.toUpperCase()}${g.reset} ${g.bright}[Better Auth]:${g.reset} ${a}`:`${s} ${i.toUpperCase()} [Better Auth]: ${a}`);e&&"function"==typeof e.log?e.log("success"===i?"info":i,a,...o):"error"===i?console.error(l,...o):"warn"===i?console.warn(l,...o):console.log(l,...o)})(i,a,o)])),get level(){return r}}},_=w();function x(e){return e?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function E(e,t,r){let n="",i=0,a=0;for(let r of e)for(i=i<<8|r,a+=8;a>=6;)a-=6,n+=t[i>>a&63];if(a>0&&(n+=t[i<<6-a&63]),r){let e=(4-n.length%4)%4;n+="=".repeat(e)}return n}function I(e,t){let r=new Map;for(let e=0;e<t.length;e++)r.set(t[e],e);let n=[],i=0,a=0;for(let t of e){if("="===t)break;let e=r.get(t);if(void 0===e)throw Error(`Invalid Base64 character: ${t}`);i=i<<6|e,(a+=6)>=8&&(a-=8,n.push(i>>a&255))}return Uint8Array.from(n)}e.s(["ENV",()=>d,"TTY_COLORS",()=>g,"createLogger",()=>w,"env",()=>i,"getBooleanEnvVar",()=>c,"getColorDepth",()=>h,"getEnvVar",()=>u,"isDevelopment",()=>s,"isProduction",()=>o,"isTest",()=>l,"logger",()=>_,"shouldPublishLog",()=>v],1127);let S={encode(e,t={}){let r=x(!1);return E("string"==typeof e?new TextEncoder().encode(e):new Uint8Array(e),r,t.padding??!0)},decode(e){"string"!=typeof e&&(e=new TextDecoder().decode(e));let t=x(e.includes("-")||e.includes("_"));return I(e,t)}},$={encode(e,t={}){let r=x(!0);return E("string"==typeof e?new TextEncoder().encode(e):new Uint8Array(e),r,t.padding??!0)},decode(e){let t=x(e.includes("-")||e.includes("_"));return I(e,t)}};function k(e){return e}e.s(["base64",()=>S,"base64Url",()=>$],49974),e.s(["defineErrorCodes",()=>k],27341);let A={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account."};class T extends Error{constructor(e,t){super(e),this.name="BetterAuthError",this.message=e,this.cause=t,this.stack=""}}function O(){let e="undefined"!=typeof globalThis&&globalThis.crypto;if(e&&"object"==typeof e.subtle&&null!=e.subtle)return e.subtle;throw Error("crypto.subtle must be defined")}e.s(["BASE_ERROR_CODES",()=>A,"BetterAuthError",()=>T],13012),e.s(["getWebcryptoSubtle",()=>O],10831);let R=((t=function(){}).prototype=Object.create(null),t);function N(){return{root:{key:""},static:new R}}function P(e){return e.split("/").filter(Boolean)}function U(e,t){let r=new R;for(let[n,i]of t){let t=n<0?e.slice(-1*n).join("/"):e[n];if("string"==typeof i)r[i]=t;else{let e=t.match(i);if(e)for(let t in e.groups)r[t]=e.groups[t]}}return r}function D(e,t="",r,n){let i=P(r),a=e.root,o=0,s=[];for(let e=0;e<i.length;e++){let t=i[e];if(t.startsWith("**")){a.wildcard||(a.wildcard={key:"**"}),a=a.wildcard,s.push([-e,t.split(":")[1]||"_",2===t.length]);break}if("*"===t||t.includes(":")){a.param||(a.param={key:"*"}),a=a.param;let r="*"===t;s.push([e,r?`_${o++}`:function(e){if(!e.includes(":",1))return e.slice(1);let t=e.replace(/:(\w+)/g,(e,t)=>`(?<${t}>\\w+)`);return RegExp(`^${t}$`)}(t),r]);continue}let r=a.static?.[t];if(r)a=r;else{let e={key:t};a.static||(a.static=new R),a.static[t]=e,a=e}}let l=s.length>0;a.methods||(a.methods=new R),a.methods[t]||(a.methods[t]=[]),a.methods[t].push({data:n||null,paramsMap:l?s:void 0}),l||(e.static[r]=a)}var C=Object.defineProperty,j={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},z=function(e,t){class r extends e{#t;constructor(...e){if(function(){let e=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return void 0===e?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(e,"writable")?e.writable:void 0!==e.set}()){const t=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...e),Error.stackTraceLimit=t}else super(...e);const t=Error().stack;t&&(this.#t=function(e){let t=e.split("\n    at ");return t.length<=1?e:(t.splice(1,1),t.join("\n    at "))}(t.replace(/^Error/,this.name)))}get errorStack(){return this.#t}}return Object.defineProperty(r.prototype,"constructor",{get:()=>t,enumerable:!1,configurable:!0}),r}(class extends Error{constructor(e="INTERNAL_SERVER_ERROR",t,r={},n="number"==typeof e?e:j[e]){super(t?.message,t?.cause?{cause:t.cause}:void 0),this.status=e,this.body=t,this.headers=r,this.statusCode=n,this.name="APIError",this.status=e,this.headers=r,this.statusCode=n,this.body=t?{code:t?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...t}:void 0}},Error);async function L(e){let t=e.headers.get("content-type")||"";if(e.body){if(t.includes("application/json"))return await e.json();if(t.includes("application/x-www-form-urlencoded")){let t=await e.formData(),r={};return t.forEach((e,t)=>{r[t]=e.toString()}),r}if(t.includes("multipart/form-data")){let t=await e.formData(),r={};return t.forEach((e,t)=>{r[t]=e}),r}return t.includes("text/plain")?await e.text():t.includes("application/octet-stream")?await e.arrayBuffer():t.includes("application/pdf")||t.includes("image/")||t.includes("video/")?await e.blob():t.includes("application/stream")||e.body instanceof ReadableStream?e.body:await e.text()}}function Z(e){return e instanceof z||e?.name==="APIError"}function M(e,t){if(e instanceof Response)return t?.headers instanceof Headers&&t.headers.forEach((t,r)=>{e.headers.set(r,t)}),e;if(e&&"object"==typeof e&&"_flag"in e&&"json"===e._flag){let r=e.body,n=e.routerResponse;if(n instanceof Response)return n;let i=new Headers({...n?.headers,...e.headers,...t?.headers,"Content-Type":"application/json"});return new Response(JSON.stringify(r),{...n,headers:i,status:e.status??t?.status??n?.status,statusText:t?.statusText??n?.statusText})}if(Z(e))return M(e.body,{status:t?.status??e.statusCode,statusText:e.status.toString(),headers:t?.headers||e.headers});let r=e,n=new Headers(t?.headers);if(e){if("string"==typeof e)r=e,n.set("Content-Type","text/plain");else if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))r=e,n.set("Content-Type","application/octet-stream");else if(e instanceof Blob)r=e,n.set("Content-Type",e.type||"application/octet-stream");else if(e instanceof FormData)r=e;else if(e instanceof URLSearchParams)r=e,n.set("Content-Type","application/x-www-form-urlencoded");else if(e instanceof ReadableStream)r=e,n.set("Content-Type","application/octet-stream");else if(function(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(e)){let t,i;t=0,i=new WeakMap,r=JSON.stringify(e,(e,r)=>{if("bigint"==typeof r)return r.toString();if("object"==typeof r&&null!==r){if(i.has(r))return`[Circular ref-${i.get(r)}]`;i.set(r,t++)}return r},void 0),n.set("Content-Type","application/json")}}else null===e&&(r=JSON.stringify(null)),n.set("content-type","application/json");return new Response(r,{...t,headers:n})}async function q(e,t={}){let r={body:t.body,query:t.query};if(e.body){let n=await e.body["~standard"].validate(t.body);if(n.issues)return{data:null,error:V(n.issues,"body")};r.body=n.value}if(e.query){let n=await e.query["~standard"].validate(t.query);if(n.issues)return{data:null,error:V(n.issues,"query")};r.query=n.value}return e.requireHeaders&&!t.headers?{data:null,error:{message:"Headers is required"}}:e.requireRequest&&!t.request?{data:null,error:{message:"Request is required"}}:{data:r,error:null}}function V(e,t){let r=[];for(let t of e){let e=t.message;r.push(e)}return{message:`Invalid ${t} parameters`}}var B={name:"HMAC",hash:"SHA-256"},F=async e=>{let t="string"==typeof e?new TextEncoder().encode(e):e;return await O().importKey("raw",t,B,!1,["sign","verify"])},W=async(e,t,r)=>{try{let n=atob(e),i=new Uint8Array(n.length);for(let e=0,t=n.length;e<t;e++)i[e]=n.charCodeAt(e);return await O().verify(B,r,i,new TextEncoder().encode(t))}catch(e){return!1}},H=async(e,t)=>{let r=await F(t);return btoa(String.fromCharCode(...new Uint8Array(await O().sign(B.name,r,new TextEncoder().encode(e)))))},K=async(e,t)=>{let r=await H(e,t);return encodeURIComponent(e=`${e}.${r}`)},G=(e,t)=>{let r=e;if(t)if("secure"===t)r="__Secure-"+e;else{if("host"!==t)return;r="__Host-"+e}return r},J=(e,t,r={})=>{let n;if(n=r?.prefix==="secure"?`__Secure-${e}=${t}`:r?.prefix==="host"?`__Host-${e}=${t}`:`${e}=${t}`,e.startsWith("__Secure-")&&!r.secure&&(r.secure=!0),e.startsWith("__Host-")&&(r.secure||(r.secure=!0),"/"!==r.path&&(r.path="/"),r.domain&&(r.domain=void 0)),r&&"number"==typeof r.maxAge&&r.maxAge>=0){if(r.maxAge>3456e4)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");n+=`; Max-Age=${Math.floor(r.maxAge)}`}if(r.domain&&"host"!==r.prefix&&(n+=`; Domain=${r.domain}`),r.path&&(n+=`; Path=${r.path}`),r.expires){if(r.expires.getTime()-Date.now()>3456e7)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");n+=`; Expires=${r.expires.toUTCString()}`}return r.httpOnly&&(n+="; HttpOnly"),r.secure&&(n+="; Secure"),r.sameSite&&(n+=`; SameSite=${r.sameSite.charAt(0).toUpperCase()+r.sameSite.slice(1)}`),r.partitioned&&(r.secure||(r.secure=!0),n+="; Partitioned"),n},Q=async(e,t,r,n)=>J(e,t=await K(t,r),n),X=async(e,{options:t,path:r})=>{let n=new Headers,{data:i,error:a}=await q(t,e);if(a)throw new z(400,{message:a.message,code:"VALIDATION_ERROR"});let o="headers"in e?e.headers instanceof Headers?e.headers:new Headers(e.headers):"request"in e&&e.request instanceof Request?e.request.headers:null,s=o?.get("cookie"),l=s?function(e){if("string"!=typeof e)throw TypeError("argument str must be a string");let t=new Map,r=0;for(;r<e.length;){let n=e.indexOf("=",r);if(-1===n)break;let i=e.indexOf(";",r);if(-1===i)i=e.length;else if(i<n){r=e.lastIndexOf(";",n-1)+1;continue}let a=e.slice(r,n).trim();if(!t.has(a)){let r=e.slice(n+1,i).trim();34===r.codePointAt(0)&&(r=r.slice(1,-1)),t.set(a,function(e){try{return e.includes("%")?decodeURIComponent(e):e}catch{return e}}(r))}r=i+1}return t}(s):void 0,u={...e,body:i.body,query:i.query,path:e.path||r,context:"context"in e&&e.context?e.context:{},returned:void 0,headers:e?.headers,request:e?.request,params:"params"in e?e.params:void 0,method:e.method,setHeader:(e,t)=>{n.set(e,t)},getHeader:e=>o?o.get(e):null,getCookie:(e,t)=>{let r=G(e,t);return r&&l?.get(r)||null},getSignedCookie:async(e,t,r)=>{let n=G(e,r);if(!n)return null;let i=l?.get(n);if(!i)return null;let a=i.lastIndexOf(".");if(a<1)return null;let o=i.substring(0,a),s=i.substring(a+1);if(44!==s.length||!s.endsWith("="))return null;let u=await F(t);return!!await W(s,o,u)&&o},setCookie:(e,t,r)=>{var i;let a=J(e,i=encodeURIComponent(i=t),r);return n.append("set-cookie",a),a},setSignedCookie:async(e,t,r,i)=>{let a=await Q(e,t,r,i);return n.append("set-cookie",a),a},redirect:e=>(n.set("location",e),new z("FOUND",void 0,n)),error:(e,t,r)=>new z(e,t,r),json:(t,r)=>e.asResponse?{body:r?.body||t,routerResponse:r,_flag:"json"}:t,responseHeaders:n};for(let e of t.use||[]){let t=await e({...u,returnHeaders:!0,asResponse:!1});t.response&&Object.assign(u.context,t.response),t.headers&&t.headers.forEach((e,t)=>{u.responseHeaders.set(t,e)})}return u};function Y(e,t){let r=async r=>{let n="function"==typeof e?e:t,i=await X(r,{options:"function"==typeof e?{}:e,path:"/"});if(!n)throw Error("handler must be defined");let a=await n(i),o=i.responseHeaders;return r.returnHeaders?{headers:o,response:a}:a};return r.options="function"==typeof e?{}:e,r}Y.create=e=>function(t,r){if("function"==typeof t)return Y({use:e?.use},t);if(!r)throw Error("Middleware handler is required");return Y({...t,method:"*",use:[...e?.use||[],...t.use||[]]},r)};var ee=(e,t,r)=>{let n=async(...n)=>{let i=n[0]||{},a=await X(i,{options:t,path:e}),o=await r(a).catch(async e=>{if(Z(e)){let r=t.onAPIError;if(r&&await r(e),i.asResponse)return e}throw e}),s=a.responseHeaders;return i.asResponse?M(o,{headers:s}):i.returnHeaders?{headers:s,response:o}:o};return n.options=t,n.path=e,n};function et(e,t,r){function n(r,n){var i;for(let a in Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(i=r._zod).traits??(i.traits=new Set),r._zod.traits.add(e),t(r,n),o.prototype)a in r||Object.defineProperty(r,a,{value:o.prototype[a].bind(r)});r._zod.constr=o,r._zod.def=n}let i=r?.Parent??Object;class a extends i{}function o(e){var t;let i=r?.Parent?new a:this;for(let r of(n(i,e),(t=i._zod).deferred??(t.deferred=[]),i._zod.deferred))r();return i}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(o,"init",{value:n}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}ee.create=e=>(t,r,n)=>ee(t,{...r,use:[...r?.use||[],...e?.use||[]]},n),Object.freeze({status:"aborted"}),Symbol("zod_brand");var er=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},en={};function ei(e){return e&&Object.assign(en,e),en}var ea={},eo={BIGINT_FORMAT_RANGES:()=>eM,Class:()=>e4,NUMBER_FORMAT_RANGES:()=>eZ,aborted:()=>eK,allowsEval:()=>eA,assert:()=>ep,assertEqual:()=>el,assertIs:()=>ec,assertNever:()=>ed,assertNotEqual:()=>eu,assignProp:()=>e_,cached:()=>eg,captureStackTrace:()=>e$,cleanEnum:()=>e1,cleanRegex:()=>ev,clone:()=>eD,createTransparentProxy:()=>ej,defineLazy:()=>ew,esc:()=>eS,escapeRegex:()=>eU,extend:()=>eB,finalizeIssue:()=>eQ,floatSafeRemainder:()=>eb,getElementAtPath:()=>ex,getEnumValues:()=>ef,getLengthableOrigin:()=>eY,getParsedType:()=>eR,getSizableOrigin:()=>eX,isObject:()=>ek,isPlainObject:()=>eT,issue:()=>e0,joinValues:()=>em,jsonStringifyReplacer:()=>eh,merge:()=>eF,normalizeParams:()=>eC,nullish:()=>ey,numKeys:()=>eO,omit:()=>eV,optionalKeys:()=>eL,partial:()=>eW,pick:()=>eq,prefixIssues:()=>eG,primitiveTypes:()=>eP,promiseAllObject:()=>eE,propertyKeyTypes:()=>eN,randomString:()=>eI,required:()=>eH,stringifyPrimitive:()=>ez,unwrapMessage:()=>eJ};for(var es in eo)C(ea,es,{get:eo[es],enumerable:!0});function el(e){return e}function eu(e){return e}function ec(e){}function ed(e){throw Error()}function ep(e){}function ef(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function em(e,t="|"){return e.map(e=>ez(e)).join(t)}function eh(e,t){return"bigint"==typeof t?t.toString():t}function eg(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ey(e){return null==e}function ev(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function eb(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}function ew(e,t,r){Object.defineProperty(e,t,{get(){{let n=r();return e[t]=n,n}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function e_(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ex(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function eE(e){let t=Object.keys(e);return Promise.all(t.map(t=>e[t])).then(e=>{let r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r})}function eI(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}function eS(e){return JSON.stringify(e)}var e$=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function ek(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}var eA=eg(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function eT(e){if(!1===ek(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!1!==ek(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function eO(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}var eR=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return"promise";if("undefined"!=typeof Map&&e instanceof Map)return"map";if("undefined"!=typeof Set&&e instanceof Set)return"set";if("undefined"!=typeof Date&&e instanceof Date)return"date";if("undefined"!=typeof File&&e instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${t}`)}},eN=new Set(["string","number","symbol"]),eP=new Set(["string","number","bigint","boolean","symbol","undefined"]);function eU(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function eD(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function eC(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}function ej(e){let t;return new Proxy({},{get:(r,n,i)=>(t??(t=e()),Reflect.get(t,n,i)),set:(r,n,i,a)=>(t??(t=e()),Reflect.set(t,n,i,a)),has:(r,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(r,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(r,n,i)=>(t??(t=e()),Reflect.defineProperty(t,n,i))})}function ez(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function eL(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}var eZ={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},eM={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function eq(e,t){let r={},n=e._zod.def;for(let e in t){if(!(e in n.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&(r[e]=n.shape[e])}return eD(e,{...e._zod.def,shape:r,checks:[]})}function eV(e,t){let r={...e._zod.def.shape},n=e._zod.def;for(let e in t){if(!(e in n.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return eD(e,{...e._zod.def,shape:r,checks:[]})}function eB(e,t){if(!eT(t))throw Error("Invalid input to extend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return e_(this,"shape",r),r},checks:[]};return eD(e,r)}function eF(e,t){return eD(e,{...e._zod.def,get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return e_(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function eW(e,t,r){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)i[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return eD(t,{...t._zod.def,shape:i,checks:[]})}function eH(e,t,r){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)i[t]=new e({type:"nonoptional",innerType:n[t]});return eD(t,{...t._zod.def,shape:i,checks:[]})}function eK(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function eG(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function eJ(e){return"string"==typeof e?e:e?.message}function eQ(e,t,r){let n={...e,path:e.path??[]};return e.message||(n.message=eJ(e.inst?._zod.def?.error?.(e))??eJ(t?.error?.(e))??eJ(r.customError?.(e))??eJ(r.localeError?.(e))??"Invalid input"),delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function eX(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function eY(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function e0(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}function e1(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}var e4=class{constructor(...e){}},e6=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,eh,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},e2=et("$ZodError",e6),e3=et("$ZodError",e6,{Parent:Error}),e9=e=>(t,r,n)=>{let i=n?{...n,async:!1}:{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new er;return a.issues.length?{success:!1,error:new(e??e2)(a.issues.map(e=>eQ(e,i,ei())))}:{success:!0,data:a.value}},e8=e9(e3),e5=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>eQ(e,i,ei())))}:{success:!0,data:a.value}},e7=e5(e3),te=et("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),tt=et("$ZodCheckMaxLength",(e,t)=>{var r;te.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!ey(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let i=eY(n);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),tr=et("$ZodCheckMinLength",(e,t)=>{var r;te.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!ey(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let i=eY(n);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),tn=et("$ZodCheckLengthEquals",(e,t)=>{var r;te.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!ey(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,i=n.length;if(i===t.length)return;let a=eY(n),o=i>t.length;r.issues.push({origin:a,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),ti=et("$ZodCheckOverwrite",(e,t)=>{te.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}}),ta=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}},to={major:4,minor:0,patch:0},ts=et("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=to;let n=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&n.unshift(e),n))for(let r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,i=eK(e);for(let a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(i)continue;let t=e.issues.length,o=a._zod.check(e);if(o instanceof Promise&&r?.async===!1)throw new er;if(n||o instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await o,e.issues.length!==t&&(i||(i=eK(e,t)))});else{if(e.issues.length===t)continue;i||(i=eK(e,t))}}return n?n.then(()=>e):e};e._zod.run=(r,i)=>{let a=e._zod.parse(r,i);if(a instanceof Promise){if(!1===i.async)throw new er;return a.then(e=>t(e,n,i))}return t(a,n,i)}}e["~standard"]={validate:t=>{try{let r=e8(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return e7(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),tl=et("$ZodUnknown",(e,t)=>{ts.init(e,t),e._zod.parse=e=>e}),tu=et("$ZodNever",(e,t)=>{ts.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function tc(e,t,r){e.issues.length&&t.issues.push(...eG(r,e.issues)),t.value[r]=e.value}var td=et("$ZodArray",(e,t)=>{ts.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let o=i[e],s=t.element._zod.run({value:o,issues:[]},n);s instanceof Promise?a.push(s.then(t=>tc(t,r,e))):tc(s,r,e)}return a.length?Promise.all(a).then(()=>r):r}});function tp(e,t,r){e.issues.length&&t.issues.push(...eG(r,e.issues)),t.value[r]=e.value}function tf(e,t,r,n){e.issues.length?void 0===n[r]?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...eG(r,e.issues)):void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}var tm=et("$ZodObject",(e,t)=>{let r,n;ts.init(e,t);let i=eg(()=>{let e=Object.keys(t.shape);for(let r of e)if(!(t.shape[r]instanceof ts))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=eL(t.shape);return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}});ew(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values)for(let e of(r[t]??(r[t]=new Set),n.values))r[t].add(e)}return r});let a=!en.jitless,o=a&&eA.value,s=t.catchall;e._zod.parse=(l,u)=>{n??(n=i.value);let c=l.value;if(!ek(c))return l.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),l;let d=[];if(a&&o&&u?.async===!1&&!0!==u.jitless)r||(r=(e=>{let t=new ta(["shape","payload","ctx"]),r=i.value,n=e=>{let t=eS(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let a=Object.create(null),o=0;for(let e of r.keys)a[e]=`key_${o++}`;for(let e of(t.write("const newResult = {}"),r.keys))if(r.optionalKeys.has(e)){let r=a[e];t.write(`const ${r} = ${n(e)};`);let i=eS(e);t.write(`
        if (${r}.issues.length) {
          if (input[${i}] === undefined) {
            if (${i} in input) {
              newResult[${i}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${r}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${i}, ...iss.path] : [${i}],
              }))
            );
          }
        } else if (${r}.value === undefined) {
          if (${i} in input) newResult[${i}] = undefined;
        } else {
          newResult[${i}] = ${r}.value;
        }
        `)}else{let r=a[e];t.write(`const ${r} = ${n(e)};`),t.write(`
          if (${r}.issues.length) payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${eS(e)}, ...iss.path] : [${eS(e)}]
          })));`),t.write(`newResult[${eS(e)}] = ${r}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");let s=t.compile();return(t,r)=>s(e,t,r)})(t.shape)),l=r(l,u);else{l.value={};let e=n.shape;for(let t of n.keys){let r=e[t],n=r._zod.run({value:c[t],issues:[]},u),i="optional"===r._zod.optin&&"optional"===r._zod.optout;n instanceof Promise?d.push(n.then(e=>i?tf(e,l,t,c):tp(e,l,t))):i?tf(n,l,t,c):tp(n,l,t)}}if(!s)return d.length?Promise.all(d).then(()=>l):l;let p=[],f=n.keySet,m=s._zod,h=m.def.type;for(let e of Object.keys(c)){if(f.has(e))continue;if("never"===h){p.push(e);continue}let t=m.run({value:c[e],issues:[]},u);t instanceof Promise?d.push(t.then(t=>tp(t,l,e))):tp(t,l,e)}return(p.length&&l.issues.push({code:"unrecognized_keys",keys:p,input:c,inst:e}),d.length)?Promise.all(d).then(()=>l):l}});function th(e,t,r,n){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>eQ(e,n,ei())))}),t}var tg=et("$ZodUnion",(e,t)=>{ts.init(e,t),ew(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),ew(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),ew(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),ew(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>ev(e.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let i=!1,a=[];for(let e of t.options){let t=e._zod.run({value:r.value,issues:[]},n);if(t instanceof Promise)a.push(t),i=!0;else{if(0===t.issues.length)return t;a.push(t)}}return i?Promise.all(a).then(t=>th(t,r,e,n)):th(a,r,e,n)}}),ty=et("$ZodIntersection",(e,t)=>{ts.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,i=t.left._zod.run({value:n,issues:[]},r),a=t.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([t,r])=>tv(e,t,r)):tv(e,i,a)}});function tv(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),eK(e))return e;let n=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(eT(t)&&eT(r)){let n=Object.keys(r),i=Object.keys(t).filter(e=>-1!==n.indexOf(e)),a={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};a[n]=i.data}return{valid:!0,data:a}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let i=0;i<t.length;i++){let a=e(t[i],r[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!n.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}var tb=et("$ZodEnum",(e,t)=>{ts.init(e,t);let r=ef(t.entries);e._zod.values=new Set(r),e._zod.pattern=RegExp(`^(${r.filter(e=>eN.has(typeof e)).map(e=>"string"==typeof e?eU(e):e.toString()).join("|")})$`),e._zod.parse=(t,n)=>{let i=t.value;return e._zod.values.has(i)||t.issues.push({code:"invalid_value",values:r,input:i,inst:e}),t}}),tw=et("$ZodTransform",(e,t)=>{ts.init(e,t),e._zod.parse=(e,r)=>{let n=t.transform(e.value,e);if(r.async)return(n instanceof Promise?n:Promise.resolve(n)).then(t=>(e.value=t,e));if(n instanceof Promise)throw new er;return e.value=n,e}}),t_=et("$ZodOptional",(e,t)=>{ts.init(e,t),e._zod.optin="optional",e._zod.optout="optional",ew(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),ew(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${ev(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,r):void 0===e.value?e:t.innerType._zod.run(e,r)}),tx=et("$ZodNullable",(e,t)=>{ts.init(e,t),ew(e._zod,"optin",()=>t.innerType._zod.optin),ew(e._zod,"optout",()=>t.innerType._zod.optout),ew(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${ev(e.source)}|null)$`):void 0}),ew(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),tE=et("$ZodDefault",(e,t)=>{ts.init(e,t),e._zod.optin="optional",ew(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>tI(e,t)):tI(n,t)}});function tI(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}var tS=et("$ZodPrefault",(e,t)=>{ts.init(e,t),e._zod.optin="optional",ew(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),t$=et("$ZodNonOptional",(e,t)=>{ts.init(e,t),ew(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(t=>tk(t,e)):tk(i,e)}});function tk(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var tA=et("$ZodCatch",(e,t)=>{ts.init(e,t),e._zod.optin="optional",ew(e._zod,"optout",()=>t.innerType._zod.optout),ew(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>eQ(e,r,ei()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>eQ(e,r,ei()))},input:e.value}),e.issues=[]),e)}}),tT=et("$ZodPipe",(e,t)=>{ts.init(e,t),ew(e._zod,"values",()=>t.in._zod.values),ew(e._zod,"optin",()=>t.in._zod.optin),ew(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,r)=>{let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>tO(e,t,r)):tO(n,t,r)}});function tO(e,t,r){return eK(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}var tR=et("$ZodReadonly",(e,t)=>{ts.init(e,t),ew(e._zod,"propValues",()=>t.innerType._zod.propValues),ew(e._zod,"values",()=>t.innerType._zod.values),ew(e._zod,"optin",()=>t.innerType._zod.optin),ew(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(tN):tN(n)}});function tN(e){return e.value=Object.freeze(e.value),e}var tP=et("$ZodCustom",(e,t)=>{te.init(e,t),ts.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(t=>tU(t,r,n,e));tU(i,r,n,e)}});function tU(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(e0(e))}}Symbol("ZodOutput"),Symbol("ZodInput");var tD=new class{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}};function tC(e,t){return new tr({check:"min_length",...eC(t),minimum:e})}var tj=(e,t)=>{e2.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>{let r,n,i;return r=t||function(e){return e.message},n={_errors:[]},(i=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>i({issues:e}));else if("invalid_key"===t.code)i({issues:t.issues});else if("invalid_element"===t.code)i({issues:t.issues});else if(0===t.path.length)n._errors.push(r(t));else{let e=n,i=0;for(;i<t.path.length;){let n=t.path[i];i===t.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(r(t))):e[n]=e[n]||{_errors:[]},e=e[n],i++}}})(e),n}},flatten:{value:t=>(function(e,t=e=>e.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}})(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})};et("ZodError",tj);var tz=et("ZodError",tj,{Parent:Error}),tL=(e,t,r,n)=>{let i=r?Object.assign(r,{async:!1}):{async:!1},a=e._zod.run({value:t,issues:[]},i);if(a instanceof Promise)throw new er;if(a.issues.length){let e=new(n?.Err??tz)(a.issues.map(e=>eQ(e,i,ei())));throw e$(e,n?.callee),e}return a.value},tZ=async(e,t,r,n)=>{let i=r?Object.assign(r,{async:!0}):{async:!0},a=e._zod.run({value:t,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){let e=new(n?.Err??tz)(a.issues.map(e=>eQ(e,i,ei())));throw e$(e,n?.callee),e}return a.value},tM=e9(tz),tq=e5(tz),tV=et("ZodType",(e,t)=>(ts.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,r)=>eD(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>tL(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>tM(e,t,r),e.parseAsync=async(t,r)=>tZ(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>tq(e,t,r),e.spa=e.safeParseAsync,e.refine=(t,r)=>e.check(function(e,t={}){return new re({type:"custom",check:"custom",fn:e,...eC(t)})}(t,r)),e.superRefine=t=>{var r,n;let i,a;return e.check((r=t,a=(n=e=>(e.addIssue=t=>{"string"==typeof t?e.issues.push(ea.issue(t,e.value,a._zod.def)):(t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=e.value),t.inst??(t.inst=a),t.continue??(t.continue=!a._zod.def.abort),e.issues.push(ea.issue(t)))},r(e.value,e)),(i=new te({check:"custom"}))._zod.check=n,i)))},e.overwrite=t=>e.check(new ti({check:"overwrite",tx:t})),e.optional=()=>t0(e),e.nullable=()=>t4(e),e.nullish=()=>t0(t4(e)),e.nonoptional=t=>{var r,n;return r=e,n=t,new t3({type:"nonoptional",innerType:r,...ea.normalizeParams(n)})},e.array=()=>(function(e,t){return new tH({type:"array",element:e,...eC(void 0)})})(e),e.or=t=>new tG({type:"union",options:[e,t],...ea.normalizeParams(void 0)}),e.and=t=>{var r;return r=e,new tJ({type:"intersection",left:r,right:t})},e.transform=t=>t5(e,new tX({type:"transform",transform:t})),e.default=t=>{var r,n;return r=e,n=t,new t6({type:"default",innerType:r,get defaultValue(){return"function"==typeof n?n():n}})},e.prefault=t=>{var r,n;return r=e,n=t,new t2({type:"prefault",innerType:r,get defaultValue(){return"function"==typeof n?n():n}})},e.catch=t=>{var r;return new t9({type:"catch",innerType:e,catchValue:"function"==typeof(r=t)?r:()=>r})},e.pipe=t=>t5(e,t),e.readonly=()=>new t7({type:"readonly",innerType:e}),e.describe=t=>{let r=e.clone();return tD.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>tD.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return tD.get(e);let r=e.clone();return tD.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),tB=et("ZodUnknown",(e,t)=>{tl.init(e,t),tV.init(e,t)});function tF(){return new tB({type:"unknown"})}var tW=et("ZodNever",(e,t)=>{tu.init(e,t),tV.init(e,t)}),tH=et("ZodArray",(e,t)=>{td.init(e,t),tV.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(tC(t,r)),e.nonempty=t=>e.check(tC(1,t)),e.max=(t,r)=>e.check(new tt({check:"max_length",...eC(r),maximum:t})),e.length=(t,r)=>e.check(new tn({check:"length_equals",...eC(r),length:t})),e.unwrap=()=>e.element}),tK=et("ZodObject",(e,t)=>{tm.init(e,t),tV.init(e,t),ea.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>{var t;return new tQ({type:"enum",entries:Array.isArray(t=Object.keys(e._zod.def.shape))?Object.fromEntries(t.map(e=>[e,e])):t,...ea.normalizeParams(void 0)})},e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:tF()}),e.loose=()=>e.clone({...e._zod.def,catchall:tF()}),e.strict=()=>e.clone({...e._zod.def,catchall:new tW({type:"never",...eC(void 0)})}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>ea.extend(e,t),e.merge=t=>ea.merge(e,t),e.pick=t=>ea.pick(e,t),e.omit=t=>ea.omit(e,t),e.partial=(...t)=>ea.partial(tY,e,t[0]),e.required=(...t)=>ea.required(t3,e,t[0])}),tG=et("ZodUnion",(e,t)=>{tg.init(e,t),tV.init(e,t),e.options=t.options}),tJ=et("ZodIntersection",(e,t)=>{ty.init(e,t),tV.init(e,t)}),tQ=et("ZodEnum",(e,t)=>{tb.init(e,t),tV.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let i={};for(let n of e)if(r.has(n))i[n]=t.entries[n];else throw Error(`Key ${n} not found in enum`);return new tQ({...t,checks:[],...ea.normalizeParams(n),entries:i})},e.exclude=(e,n)=>{let i={...t.entries};for(let t of e)if(r.has(t))delete i[t];else throw Error(`Key ${t} not found in enum`);return new tQ({...t,checks:[],...ea.normalizeParams(n),entries:i})}}),tX=et("ZodTransform",(e,t)=>{tw.init(e,t),tV.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=n=>{"string"==typeof n?r.issues.push(ea.issue(n,r.value,t)):(n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=e),n.continue??(n.continue=!0),r.issues.push(ea.issue(n)))};let i=t.transform(r.value,r);return i instanceof Promise?i.then(e=>(r.value=e,r)):(r.value=i,r)}}),tY=et("ZodOptional",(e,t)=>{t_.init(e,t),tV.init(e,t),e.unwrap=()=>e._zod.def.innerType});function t0(e){return new tY({type:"optional",innerType:e})}var t1=et("ZodNullable",(e,t)=>{tx.init(e,t),tV.init(e,t),e.unwrap=()=>e._zod.def.innerType});function t4(e){return new t1({type:"nullable",innerType:e})}var t6=et("ZodDefault",(e,t)=>{tE.init(e,t),tV.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),t2=et("ZodPrefault",(e,t)=>{tS.init(e,t),tV.init(e,t),e.unwrap=()=>e._zod.def.innerType}),t3=et("ZodNonOptional",(e,t)=>{t$.init(e,t),tV.init(e,t),e.unwrap=()=>e._zod.def.innerType}),t9=et("ZodCatch",(e,t)=>{tA.init(e,t),tV.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),t8=et("ZodPipe",(e,t)=>{tT.init(e,t),tV.init(e,t),e.in=t.in,e.out=t.out});function t5(e,t){return new t8({type:"pipe",in:e,out:t})}var t7=et("ZodReadonly",(e,t)=>{tR.init(e,t),tV.init(e,t)}),re=et("ZodCustom",(e,t)=>{tP.init(e,t),tV.init(e,t)}),rt={};function rr(e){switch(e.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function rn(e){let t=[];return e.metadata?.openapi?.parameters?t.push(...e.metadata.openapi.parameters):e.query instanceof tK&&Object.entries(e.query.shape).forEach(([e,r])=>{r instanceof tK&&t.push({name:e,in:"query",schema:{type:rr(r),..."minLength"in r&&r.minLength?{minLength:r.minLength}:{},description:r.description}})}),t}function ri(e){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...e}}async function ra(e,t){return Object.entries(e).forEach(([e,t])=>{let r=t.options;if(!r.metadata?.SERVER_ONLY&&("GET"===r.method&&(rt[t.path]={get:{tags:["Default",...r.metadata?.openapi?.tags||[]],description:r.metadata?.openapi?.description,operationId:r.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:rn(r),responses:ri(r.metadata?.openapi?.responses)}}),"POST"===r.method)){let e=function(e){if(e.metadata?.openapi?.requestBody)return e.metadata.openapi.requestBody;if(e.body&&(e.body instanceof tK||e.body instanceof tY)){let t=e.body.shape;if(!t)return;let r={},n=[];return Object.entries(t).forEach(([e,t])=>{t instanceof tK&&(r[e]={type:rr(t),description:t.description},t instanceof tY||n.push(e))}),{required:!(e.body instanceof tY)&&!!e.body,content:{"application/json":{schema:{type:"object",properties:r,required:n}}}}}}(r);rt[t.path]={post:{tags:["Default",...r.metadata?.openapi?.tags||[]],description:r.metadata?.openapi?.description,operationId:r.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:rn(r),...e?{requestBody:e}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:ri(r.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{schemas:{}},security:[{apiKeyCookie:[]}],servers:[{url:t?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:rt}}var ro=(e,t)=>{if(!t?.openapi?.disabled){let r={path:"/api/reference",...t?.openapi};e.openapi=ee(r.path,{method:"GET"},async t=>{let n,i;return new Response((n=await ra(e),i=r.scalar,`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(n)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${i?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(i.logo)}`:void 0} ,
	   	theme: ${i?.theme||"saturn"},
        metaData: {
			title: ${i?.title||"Open API Reference"},
			description: ${i?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`),{headers:{"Content-Type":"text/html"}})})}let r=N(),n=N();for(let t of Object.values(e))if(!(!t.options||t.options?.metadata?.SERVER_ONLY))for(let e of Array.isArray(t.options?.method)?t.options.method:[t.options?.method])D(r,e,t.path,t);if(t?.routerMiddleware?.length)for(let{path:e,middleware:r}of t.routerMiddleware)D(n,"*",e,r);let i=async e=>{let i=new URL(e.url),a=t?.basePath?i.pathname.split(t.basePath).reduce((e,r,n)=>(0!==n&&(n>1?e.push(`${t.basePath}${r}`):e.push(r)),e),[]).join(""):i.pathname;if(!a?.length)return new Response(null,{status:404,statusText:"Not Found"});let o=function(e,t="",r,n){"/"===r[r.length-1]&&(r=r.slice(0,-1));let i=e.static[r];if(i&&i.methods){let e=i.methods[t]||i.methods[""];if(void 0!==e)return e[0]}let a=P(r),o=function e(t,r,n,i,a){if(a===i.length){if(r.methods){let e=r.methods[n]||r.methods[""];if(e)return e}if(r.param&&r.param.methods){let e=r.param.methods[n]||r.param.methods[""];if(e){let t=e[0].paramsMap;if(t?.[t?.length-1]?.[2])return e}}if(r.wildcard&&r.wildcard.methods){let e=r.wildcard.methods[n]||r.wildcard.methods[""];if(e){let t=e[0].paramsMap;if(t?.[t?.length-1]?.[2])return e}}return}let o=i[a];if(r.static){let s=r.static[o];if(s){let r=e(t,s,n,i,a+1);if(r)return r}}if(r.param){let o=e(t,r.param,n,i,a+1);if(o)return o}if(r.wildcard&&r.wildcard.methods)return r.wildcard.methods[n]||r.wildcard.methods[""]}(e,e.root,t,a,0)?.[0];if(void 0!==o)return{data:o.data,params:o.paramsMap?U(a,o.paramsMap):void 0}}(r,e.method,a);if(!o?.data)return new Response(null,{status:404,statusText:"Not Found"});let s={};i.searchParams.forEach((e,t)=>{t in s?Array.isArray(s[t])?s[t].push(e):s[t]=[s[t],e]:s[t]=e});let l=o.data,u={path:a,method:e.method,headers:e.headers,params:o.params?JSON.parse(JSON.stringify(o.params)):{},request:e,body:l.options.disableBody?void 0:await L(l.options.cloneRequest?e.clone():e),query:s,_flag:"router",asResponse:!0,context:t?.routerContext};try{let e=function(e,t="",r,n){"/"===r[r.length-1]&&(r=r.slice(0,-1));let i=P(r);return(function e(t,r,n,i,a,o=[]){let s=i[a];if(r.wildcard&&r.wildcard.methods){let e=r.wildcard.methods[n]||r.wildcard.methods[""];e&&o.push(...e)}if(r.param&&(e(t,r.param,n,i,a+1,o),a===i.length&&r.param.methods)){let e=r.param.methods[n]||r.param.methods[""];e&&o.push(...e)}let l=r.static?.[s];if(l&&e(t,l,n,i,a+1,o),a===i.length&&r.methods){let e=r.methods[n]||r.methods[""];e&&o.push(...e)}return o})(e,e.root,t,i,0).map(e=>({data:e.data,params:e.paramsMap?U(i,e.paramsMap):void 0}))}(n,"*",a);if(e?.length)for(let{data:t,params:r}of e){let e=await t({...u,params:r,asResponse:!1});if(e instanceof Response)return e}return await l(u)}catch(e){if(t?.onError)try{let r=await t.onError(e);if(r instanceof Response)return M(r)}catch(e){if(Z(e))return M(e);throw e}if(t?.throwError)throw e;if(Z(e))return M(e);return console.error("# SERVER_ERROR: ",e),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async e=>{let r=await t?.onRequest?.(e);if(r instanceof Response)return r;let n=r instanceof Request?r:e,a=await i(n),o=await t?.onResponse?.(a);return o instanceof Response?o:a},endpoints:e}};e.s(["APIError",()=>z,"createEndpoint",()=>ee,"createMiddleware",()=>Y,"createRouter",()=>ro,"toResponse",()=>M],91804);let rs={encode:e=>{if("string"==typeof e&&(e=new TextEncoder().encode(e)),0===e.byteLength)return"";let t=new Uint8Array(e),r="";for(let e of t)r+=e.toString(16).padStart(2,"0");return r},decode:e=>{if(!e)return"";if("string"==typeof e){if(e.length%2!=0||!RegExp("^[0123456789abcdef]+$").test(e))throw Error("Invalid hexadecimal string");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.slice(r,r+2),16);return new TextDecoder().decode(t)}return new TextDecoder().decode(e)}};e.s(["hex",()=>rs],42293)},80012,66207,17722,25269,e=>{"use strict";var t=e.i(42293),r=e.i(49974),n=e.i(10831);let i=(e="SHA-256",i="none")=>{let a={importKey:async(t,r)=>(0,n.getWebcryptoSubtle)().importKey("raw","string"==typeof t?new TextEncoder().encode(t):t,{name:"HMAC",hash:{name:e}},!1,[r]),sign:async(e,o)=>{"string"==typeof e&&(e=await a.importKey(e,"sign"));let s=await (0,n.getWebcryptoSubtle)().sign("HMAC",e,"string"==typeof o?new TextEncoder().encode(o):o);return"hex"===i?t.hex.encode(s):"base64"===i||"base64url"===i||"base64urlnopad"===i?r.base64Url.encode(s,{padding:"base64urlnopad"!==i}):s},verify:async(e,o,s)=>("string"==typeof e&&(e=await a.importKey(e,"verify")),"hex"===i&&(s=t.hex.decode(s)),("base64"===i||"base64url"===i||"base64urlnopad"===i)&&(s=await r.base64.decode(s)),(0,n.getWebcryptoSubtle)().verify("HMAC",e,"string"==typeof s?new TextEncoder().encode(s):s,"string"==typeof o?new TextEncoder().encode(o):o))};return a};e.s(["createHMAC",()=>i],80012);let a=new Map,o={decode:(e,t="utf-8")=>(a.has(t)||a.set(t,new TextDecoder(t)),a.get(t).decode(e)),encode:new TextEncoder().encode};function s(e){let t=new Map;return e.split(", ").forEach(e=>{let[r,...n]=e.split(";").map(e=>e.trim()),[i,...a]=(r||"").split("="),o=a.join("=");if(!i||void 0===o)return;let s={value:o};n.forEach(e=>{let[t,...r]=e.split("="),n=r.join("="),i=t.trim().toLowerCase();switch(i){case"max-age":s["max-age"]=n?parseInt(n.trim(),10):void 0;break;case"expires":s.expires=n?new Date(n.trim()):void 0;break;case"domain":s.domain=n?n.trim():void 0;break;case"path":s.path=n?n.trim():void 0;break;case"secure":s.secure=!0;break;case"httponly":s.httponly=!0;break;case"samesite":s.samesite=n?n.trim().toLowerCase():void 0;break;default:s[i]=!n||n.trim()}}),t.set(i,s)}),t}e.s(["binary",()=>o],66207),e.s(["p",()=>s],17722);var l=e.i(91804);let u=(0,l.createMiddleware)(async()=>({})),c=l.createMiddleware.create({use:[u,(0,l.createMiddleware)(async()=>({}))]}),d=l.createEndpoint.create({use:[u]});e.s(["createAuthEndpoint",()=>d,"createAuthMiddleware",()=>c],25269)},43608,e=>{"use strict";var t=e.i(69288);e.s(["z",0,t])},90545,27003,93139,31668,24965,21454,91609,43027,e=>{"use strict";var t=e.i(1127);function r(e){try{if("string"!=typeof e)return e;return JSON.parse(e,function(e,t){if("string"==typeof t&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(t)){let e=new Date(t);if(!isNaN(e.getTime()))return e}return t})}catch(e){return t.logger.error("Error parsing JSON",{error:e}),null}}function n(e){switch(e){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${e}`)}}function i(...e){let t=e.map(n).join("");if(0===t.length)throw Error("No valid characters provided for random string generation.");let r=t.length;return(e,...i)=>{let a;if(e<=0)throw Error("Length must be a positive integer.");let o=t,s=r;i.length>0&&(s=(o=i.map(n).join("")).length);let l=Math.floor(256/s)*s,u=new Uint8Array(2*e),c=u.length,d="",p=c;for(;d.length<e;)p>=c&&(crypto.getRandomValues(u),p=0),(a=u[p++])<l&&(d+=o[a%s]);return d}}e.s(["s",()=>r],90545),e.s(["createRandomStringGenerator",()=>i],27003);let a=e=>i("a-z","A-Z","0-9")(e||32);e.s(["g",()=>a],93139);var o=e.i(49974),s=e.i(10831);function l(e,t){return{digest:async r=>{let n=new TextEncoder,i="string"==typeof r?n.encode(r):r,a=await (0,s.getWebcryptoSubtle)().digest(e,i);return"hex"===t?Array.from(new Uint8Array(a)).map(e=>e.toString(16).padStart(2,"0")).join(""):"base64"===t||"base64url"===t||"base64urlnopad"===t?t.includes("url")?o.base64Url.encode(a,{padding:"base64urlnopad"!==t}):o.base64.encode(a):a}}}e.s(["createHash",()=>l],31668);let u=i("a-z","0-9","A-Z","-_");e.s(["g",()=>u],24965),e.s([],21454);let c=e=>{let t=(e.plugins??[]).reduce((e,t)=>{let r=t.schema;if(!r)return e;for(let[t,n]of Object.entries(r))e[t]={fields:{...e[t]?.fields,...n.fields},modelName:n.modelName||t};return e},{}),r=e.rateLimit?.storage==="database",n={rateLimit:{modelName:e.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:e.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:e.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:e.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:i,session:a,account:o,...s}=t,l={session:{modelName:e.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:e.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:e.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:e.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:e.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:e.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:e.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:e.session?.fields?.userId||"userId",references:{model:e.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0},...a?.fields,...e.session?.additionalFields},order:2}};return{user:{modelName:e.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:e.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:e.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:e.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:e.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:e.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:e.user?.fields?.updatedAt||"updatedAt"},...i?.fields,...e.user?.additionalFields},order:1},...!e.secondaryStorage||e.session?.storeSessionInDatabase?l:{},account:{modelName:e.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:e.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:e.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:e.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:e.account?.fields?.userId||"userId"},accessToken:{type:"string",required:!1,fieldName:e.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:e.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:e.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:e.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:e.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:e.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:e.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:e.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:e.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...o?.fields,...e.account?.additionalFields},order:3},verification:{modelName:e.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:e.verification?.fields?.identifier||"identifier"},value:{type:"string",required:!0,fieldName:e.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:e.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:e.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:e.verification?.fields?.updatedAt||"updatedAt"}},order:4},...s,...r?n:{}}};e.s(["g",()=>c],91609),e.i(91804),e.i(42293),e.i(13012);let d=[],p=-1,f=({adapter:e,config:n})=>i=>{let o=Math.random().toString(36).substring(2,15),s={...n,supportsBooleans:n.supportsBooleans??!0,supportsDates:n.supportsDates??!0,supportsJSON:n.supportsJSON??!1,adapterName:n.adapterName??n.adapterId,supportsNumericIds:n.supportsNumericIds??!0,transaction:n.transaction??!1,disableTransformInput:n.disableTransformInput??!1,disableTransformOutput:n.disableTransformOutput??!1};if(i.advanced?.database?.useNumberId===!0&&!1===s.supportsNumericIds)throw Error(`[${s.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let l=c(i),u=({field:e,model:t})=>{if("id"===e||"_id"===e)return"id";let r=f(t),n=l[r]?.fields[e];if(!n){let t=Object.entries(l[r].fields).find(([t,r])=>r.fieldName===e);t&&(n=t[1],e=t[0])}if(!n)throw w(`Field ${e} not found in model ${r}`),w("Schema:",l),Error(`Field ${e} not found in model ${r}`);return e},f=e=>{if(s.usePlural&&"s"===e.charAt(e.length-1)){let t=e.slice(0,-1),r=l[t]?t:void 0;if(r||(r=Object.entries(l).find(([e,r])=>r.modelName===t)?.[0]),r)return r}let t=l[e]?e:void 0;if(t||(t=Object.entries(l).find(([t,r])=>r.modelName===e)?.[0]),!t)throw w(`Model "${e}" not found in schema`),w("Schema:",l),Error(`Model "${e}" not found in schema`);return t},v=e=>{let t=f(e),r=s&&s.usePlural;return l&&l[t]&&l[t].modelName!==e?r?`${l[t].modelName}s`:l[t].modelName:r?`${e}s`:e};function b({model:e,field:t}){let r=f(e),n=u({model:r,field:t});return l[r]?.fields[n]?.fieldName||n}let w=(...e)=>{if(!0===s.debugLogs||"object"==typeof s.debugLogs){if("object"==typeof s.debugLogs&&"isRunningAdapterTests"in s.debugLogs){s.debugLogs.isRunningAdapterTests&&(e.shift(),d.push({instance:o,args:e}));return}if("object"!=typeof s.debugLogs||!s.debugLogs.logCondition||s.debugLogs.logCondition?.())if("object"==typeof e[0]&&"method"in e[0]){let r=e.shift().method;if("object"==typeof s.debugLogs){if("create"===r&&!s.debugLogs.create)return;else if("update"===r&&!s.debugLogs.update)return;else if("updateMany"===r&&!s.debugLogs.updateMany)return;else if("findOne"===r&&!s.debugLogs.findOne)return;else if("findMany"===r&&!s.debugLogs.findMany)return;else if("delete"===r&&!s.debugLogs.delete)return;else if("deleteMany"===r&&!s.debugLogs.deleteMany)return;else if("count"===r&&!s.debugLogs.count)return}t.logger.info(`[${s.adapterName}]`,...e)}else t.logger.info(`[${s.adapterName}]`,...e)}},_=({customModelName:e,forceAllowId:r})=>{let n=!s.disableIdGeneration&&!i.advanced?.database?.useNumberId&&!r,o=f(e??"id");return{type:i.advanced?.database?.useNumberId?"number":"string",required:!!n,...n?{defaultValue(){if(s.disableIdGeneration)return;let e=i.advanced?.database?.useNumberId,r=i.advanced?.database?.generateId;if(i.advanced?.generateId!==void 0&&(t.logger.warn("Your Better Auth config includes advanced.generateId which is deprecated. Please use advanced.database.generateId instead. This will be removed in future releases."),r=i.advanced?.generateId),!1!==r&&!e)return r?r({model:o}):s.customIdGenerator?s.customIdGenerator({model:o}):a()}}:{}}},x=({model:e,field:t})=>{let r=f(e),n=u({field:t,model:r}),i=l[r].fields;return i.id=_({customModelName:r}),i[n]},E=async(e,t,r,n)=>{let a={},o=l[t].fields,u=s.mapKeysTransformInput??{};for(let c in s.disableIdGeneration||i.advanced?.database?.useNumberId||(o.id=_({customModelName:t,forceAllowId:n&&"id"in e})),o){let n=e[c],d=o[c],p=u[c]||o[c].fieldName||c;if(void 0===n&&(void 0===d.defaultValue&&!d.transform?.input&&!("update"===r&&d.onUpdate)||"update"===r&&!d.onUpdate))continue;let f=function(e,t,r){if("update"===r)return void 0===e&&void 0!==t.onUpdate?"function"==typeof t.onUpdate?t.onUpdate():t.onUpdate:e;return null==e&&void 0!==t.defaultValue?"function"==typeof t.defaultValue?t.defaultValue():t.defaultValue:e}(n,d,r);d.transform?.input&&(f=await d.transform.input(f)),d.references?.field==="id"&&i.advanced?.database?.useNumberId?f=Array.isArray(f)?f.map(e=>null!==e?Number(e):null):null!==f?Number(f):null:!1===s.supportsJSON&&"object"==typeof f&&"json"===d.type?f=JSON.stringify(f):!1===s.supportsDates&&f instanceof Date&&"date"===d.type?f=f.toISOString():!1===s.supportsBooleans&&"boolean"==typeof f&&(f=+!!f),s.customTransformInput&&(f=s.customTransformInput({data:f,action:r,field:p,fieldAttributes:d,model:t,schema:l,options:i})),void 0!==f&&(a[p]=f)}return a},I=async(e,t,n=[])=>{if(!e)return null;let a=s.mapKeysTransformOutput??{},o={},u=l[t].fields;for(let c in u[Object.entries(a).find(([e,t])=>"id"===t)?.[0]??"id"]={type:i.advanced?.database?.useNumberId?"number":"string"},u){if(n.length&&!n.includes(c))continue;let d=u[c];if(d){let u=d.fieldName||c,p=e[Object.entries(a).find(([e,t])=>t===u)?.[0]||u];d.transform?.output&&(p=await d.transform.output(p));let f=a[c]||c;"id"===u||d.references?.field==="id"?null!=p&&(p=String(p)):!1===s.supportsJSON&&"string"==typeof p&&"json"===d.type?p=r(p):!1===s.supportsDates&&"string"==typeof p&&"date"===d.type?p=new Date(p):!1===s.supportsBooleans&&"number"==typeof p&&"boolean"===d.type&&(p=1===p),s.customTransformOutput&&(p=s.customTransformOutput({data:p,field:f,fieldAttributes:d,select:n,model:t,schema:l,options:i})),o[f]=p}}return o},S=({model:e,where:t})=>{if(!t)return;let r=s.mapKeysTransformInput??{};return t.map(t=>{let{field:n,value:a,operator:o="eq",connector:s="AND"}=t;if("in"===o&&!Array.isArray(a))throw Error("Value must be an array");let l=f(e),c=u({field:n,model:e}),d=r[c]||b({field:c,model:l}),p=x({field:c,model:l});return("id"===c||p.references?.field==="id")&&i.advanced?.database?.useNumberId?Array.isArray(a)?{operator:o,connector:s,field:d,value:a.map(Number)}:{operator:o,connector:s,field:d,value:Number(a)}:{operator:o,connector:s,field:d,value:a}})},$=e({options:i,schema:l,debugLog:w,getFieldName:b,getModelName:v,getDefaultModelName:f,getDefaultFieldName:u,getFieldAttributes:x,transformInput:E,transformOutput:I,transformWhereClause:S}),k=null,A={transaction:async e=>{if(!k)if(s.transaction)t.logger.debug(`[${s.adapterName}] - Using provided transaction implementation.`),k=s.transaction;else"object"==typeof s.debugLogs&&"isRunningAdapterTests"in s.debugLogs&&s.debugLogs.isRunningAdapterTests||t.logger.warn(`[${s.adapterName}] - Transactions are not supported. Executing operations sequentially.`),k=e=>e(A);return k(e)},create:async({data:e,model:r,select:n,forceAllowId:i=!1})=>{let a=++p,o=v(r);if(r=f(r),"id"in e&&!i){t.logger.warn(`[${s.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`);let r=Error();console.log(r.stack?.split("\n").filter((e,t)=>1!==t).join("\n").replace("Error:","Create method with `id` being called at:")),e.id=void 0}w({method:"create"},`${m(a)} ${h(1,4)}`,`${g("create")} ${y("Unsafe Input")}:`,{model:o,data:e});let l=e;s.disableTransformInput||(l=await E(e,r,"create",i)),w({method:"create"},`${m(a)} ${h(2,4)}`,`${g("create")} ${y("Parsed Input")}:`,{model:o,data:l});let u=await $.create({data:l,model:o});w({method:"create"},`${m(a)} ${h(3,4)}`,`${g("create")} ${y("DB Result")}:`,{model:o,res:u});let c=u;return s.disableTransformOutput||(c=await I(u,r,n)),w({method:"create"},`${m(a)} ${h(4,4)}`,`${g("create")} ${y("Parsed Result")}:`,{model:o,data:c}),c},update:async({model:e,where:t,update:r})=>{let n=++p,i=v(e=f(e)),a=S({model:e,where:t});w({method:"update"},`${m(n)} ${h(1,4)}`,`${g("update")} ${y("Unsafe Input")}:`,{model:i,data:r});let o=r;s.disableTransformInput||(o=await E(r,e,"update")),w({method:"update"},`${m(n)} ${h(2,4)}`,`${g("update")} ${y("Parsed Input")}:`,{model:i,data:o});let l=await $.update({model:i,where:a,update:o});w({method:"update"},`${m(n)} ${h(3,4)}`,`${g("update")} ${y("DB Result")}:`,{model:i,data:l});let u=l;return s.disableTransformOutput||(u=await I(l,e)),w({method:"update"},`${m(n)} ${h(4,4)}`,`${g("update")} ${y("Parsed Result")}:`,{model:i,data:u}),u},updateMany:async({model:e,where:t,update:r})=>{let n=++p,i=v(e),a=S({model:e,where:t});e=f(e),w({method:"updateMany"},`${m(n)} ${h(1,4)}`,`${g("updateMany")} ${y("Unsafe Input")}:`,{model:i,data:r});let o=r;s.disableTransformInput||(o=await E(r,e,"update")),w({method:"updateMany"},`${m(n)} ${h(2,4)}`,`${g("updateMany")} ${y("Parsed Input")}:`,{model:i,data:o});let l=await $.updateMany({model:i,where:a,update:o});return w({method:"updateMany"},`${m(n)} ${h(3,4)}`,`${g("updateMany")} ${y("DB Result")}:`,{model:i,data:l}),w({method:"updateMany"},`${m(n)} ${h(4,4)}`,`${g("updateMany")} ${y("Parsed Result")}:`,{model:i,data:l}),l},findOne:async({model:e,where:t,select:r})=>{let n=++p,i=v(e),a=S({model:e,where:t});e=f(e),w({method:"findOne"},`${m(n)} ${h(1,3)}`,`${g("findOne")}:`,{model:i,where:a,select:r});let o=await $.findOne({model:i,where:a,select:r});w({method:"findOne"},`${m(n)} ${h(2,3)}`,`${g("findOne")} ${y("DB Result")}:`,{model:i,data:o});let l=o;return s.disableTransformOutput||(l=await I(o,e,r)),w({method:"findOne"},`${m(n)} ${h(3,3)}`,`${g("findOne")} ${y("Parsed Result")}:`,{model:i,data:l}),l},findMany:async({model:e,where:t,limit:r,sortBy:n,offset:a})=>{let o=++p,l=r??i.advanced?.database?.defaultFindManyLimit??100,u=v(e),c=S({model:e,where:t});e=f(e),w({method:"findMany"},`${m(o)} ${h(1,3)}`,`${g("findMany")}:`,{model:u,where:c,limit:l,sortBy:n,offset:a});let d=await $.findMany({model:u,where:c,limit:l,sortBy:n,offset:a});w({method:"findMany"},`${m(o)} ${h(2,3)}`,`${g("findMany")} ${y("DB Result")}:`,{model:u,data:d});let b=d;return s.disableTransformOutput||(b=await Promise.all(d.map(async t=>await I(t,e)))),w({method:"findMany"},`${m(o)} ${h(3,3)}`,`${g("findMany")} ${y("Parsed Result")}:`,{model:u,data:b}),b},delete:async({model:e,where:t})=>{let r=++p,n=v(e),i=S({model:e,where:t});e=f(e),w({method:"delete"},`${m(r)} ${h(1,2)}`,`${g("delete")}:`,{model:n,where:i}),await $.delete({model:n,where:i}),w({method:"delete"},`${m(r)} ${h(2,2)}`,`${g("delete")} ${y("DB Result")}:`,{model:n})},deleteMany:async({model:e,where:t})=>{let r=++p,n=v(e),i=S({model:e,where:t});e=f(e),w({method:"deleteMany"},`${m(r)} ${h(1,2)}`,`${g("deleteMany")} ${y("DeleteMany")}:`,{model:n,where:i});let a=await $.deleteMany({model:n,where:i});return w({method:"deleteMany"},`${m(r)} ${h(2,2)}`,`${g("deleteMany")} ${y("DB Result")}:`,{model:n,data:a}),a},count:async({model:e,where:t})=>{let r=++p,n=v(e),i=S({model:e,where:t});e=f(e),w({method:"count"},`${m(r)} ${h(1,2)}`,`${g("count")}:`,{model:n,where:i});let a=await $.count({model:n,where:i});return w({method:"count"},`${m(r)} ${h(2,2)}`,`${g("count")}:`,{model:n,data:a}),a},createSchema:$.createSchema?async(e,t)=>{let r=c(i);return i.secondaryStorage&&!i.session?.storeSessionInDatabase&&delete r.session,i.rateLimit&&"database"===i.rateLimit.storage&&(void 0===i.rateLimit.enabled||!0===i.rateLimit.enabled)&&(r.ratelimit={modelName:i.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:i.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:i.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:i.rateLimit.fields?.lastRequest??"lastRequest"}}}),$.createSchema({file:t,tables:r})}:void 0,options:{adapterConfig:s,...$.options??{}},id:s.adapterId,...s.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){d=d.filter(e=>e.instance!==o)},printDebugLogs(){let e=`\u2500`.repeat(80),t=d.filter(e=>e.instance===o);0===t.length||console.log(...t.reverse().map(e=>(e.args[0]=`
${e.args[0]}`,[...e.args,"\n"])).reduce((e,t)=>[...t,...e],[`
${e}`]))}}}:{}};return A};function m(e){return 8>(0,t.getColorDepth)()?`#${e}`:`${t.TTY_COLORS.fg.magenta}#${e}${t.TTY_COLORS.reset}`}function h(e,r){return`${t.TTY_COLORS.bg.black}${t.TTY_COLORS.fg.yellow}[${e}/${r}]${t.TTY_COLORS.reset}`}function g(e){return`${t.TTY_COLORS.bright}${e}${t.TTY_COLORS.reset}`}function y(e){return`${t.TTY_COLORS.dim}(${e})${t.TTY_COLORS.reset}`}e.s(["c",()=>f],43027)},48151,55018,67166,89593,7117,52633,10465,7834,80338,56723,80799,26235,88071,56370,47117,15516,68706,51327,71718,e=>{"use strict";let t,r,n,i,a,o,s;var l,u=e.i(49974),c=Object.defineProperty,d=Object.defineProperties,p=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))m.call(t,r)&&g(e,r,t[r]);if(f)for(var r of f(t))h.call(t,r)&&g(e,r,t[r]);return e},v=(e,t)=>d(e,p(t)),b=class extends Error{constructor(e,t,r){super(t||e.toString(),{cause:r}),this.status=e,this.statusText=t,this.error=r}},w=async(e,t)=>{var r,n,i,a,o,s;let l=t||{},u={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:l,hooks:u};for(let c of(null==t?void 0:t.plugins)||[]){if(c.init){let n=await (null==(r=c.init)?void 0:r.call(c,e.toString(),t));l=n.options||l,e=n.url}u.onRequest.push(null==(n=c.hooks)?void 0:n.onRequest),u.onResponse.push(null==(i=c.hooks)?void 0:i.onResponse),u.onSuccess.push(null==(a=c.hooks)?void 0:a.onSuccess),u.onError.push(null==(o=c.hooks)?void 0:o.onError),u.onRetry.push(null==(s=c.hooks)?void 0:s.onRetry)}return{url:e,options:l,hooks:u}},_=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},x=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}},E=async e=>{let t={},r=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth){if("Bearer"===e.auth.type){let n=await r(e.auth.token);if(!n)return t;t.authorization=`Bearer ${n}`}else if("Basic"===e.auth.type){let n=r(e.auth.username),i=r(e.auth.password);if(!n||!i)return t;t.authorization=`Basic ${btoa(`${n}:${i}`)}`}else if("Custom"===e.auth.type){let n=r(e.auth.value);if(!n)return t;t.authorization=`${r(e.auth.prefix)} ${n}`}}return t},I=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function S(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function $(e){try{return JSON.parse(e)}catch(t){return e}}async function k(e){let t=new Headers(null==e?void 0:e.headers);for(let[r,n]of Object.entries(await E(e)||{}))t.set(r,n);if(!t.has("content-type")){let r=S(null==e?void 0:e.body)?"application/json":null;r&&t.set("content-type",r)}return t}var A=class e extends Error{constructor(t,r){super(r||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function T(e,t){let r=await e["~standard"].validate(t);if(r.issues)throw new A(r.issues);return r.value}var O=["get","post","put","patch","delete"],R=async(e,t)=>{var r,n,i,a,o,s,l,u;let c,{hooks:d,url:p,options:f}=await w(e,t),m=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("undefined"!=typeof globalThis&&"function"==typeof globalThis.fetch)return globalThis.fetch;throw Error("No fetch implementation found")}(f),h=new AbortController,g=null!=(r=f.signal)?r:h.signal,E=function(e,t){let{baseURL:r,params:n,query:i}=t||{query:{},params:{},baseURL:""},a=e.startsWith("http")?e.split("/").slice(0,3).join("/"):r||"";if(e.startsWith("@")){let t=e.toString().split("@")[1].split("/")[0];O.includes(t)&&(e=e.replace(`@${t}/`,"/"))}a.endsWith("/")||(a+="/");let[o,s]=e.replace(a,"").split("?"),l=new URLSearchParams(s);for(let[e,t]of Object.entries(i||{}))null!=t&&l.set(e,String(t));if(n)if(Array.isArray(n))for(let[e,t]of o.split("/").filter(e=>e.startsWith(":")).entries()){let r=n[e];o=o.replace(t,r)}else for(let[e,t]of Object.entries(n))o=o.replace(`:${e}`,String(t));(o=o.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(o=o.slice(1));let u=l.toString();return(u=u.length>0?`?${u}`.replace(/\+/g,"%20"):"",a.startsWith("http"))?new URL(`${o}${u}`,a):`${a}${o}${u}`}(p,f),A=function(e){if(!(null==e?void 0:e.body))return null;let t=new Headers(null==e?void 0:e.headers);if(S(e.body)&&!t.has("content-type")){for(let[t,r]of Object.entries(null==e?void 0:e.body))r instanceof Date&&(e.body[t]=r.toISOString());return JSON.stringify(e.body)}return e.body}(f),N=await k(f),P=function(e,t){var r;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){let n=null==(r=e.split("@")[1])?void 0:r.split("/")[0];return O.includes(n)?n.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(p,f),U=v(y({},f),{url:E,headers:N,body:A,method:P,signal:g});for(let e of d.onRequest)if(e){let t=await e(U);t instanceof Object&&(U=t)}("pipeTo"in U&&"function"==typeof U.pipeTo||"function"==typeof(null==(n=null==t?void 0:t.body)?void 0:n.pipe))&&!("duplex"in U)&&(U.duplex="half");let{clearTimeout:D}=(!(null==f?void 0:f.signal)&&(null==f?void 0:f.timeout)&&(c=setTimeout(()=>null==h?void 0:h.abort(),null==f?void 0:f.timeout)),{abortTimeout:c,clearTimeout:()=>{c&&clearTimeout(c)}}),C=await m(U.url,U);D();let j={response:C,request:U};for(let e of d.onResponse)if(e){let r=await e(v(y({},j),{response:(null==(i=null==t?void 0:t.hookOptions)?void 0:i.cloneResponse)?C.clone():C}));r instanceof Response?C=r:r instanceof Object&&(C=r.response)}if(C.ok){if("HEAD"===U.method)return{data:"",error:null};let e=function(e){let t=e.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let n=t.split(";").shift()||"";return I.test(n)?"json":r.has(n)||n.startsWith("text/")?"text":"blob"}(C),r={data:"",response:C,request:U};if("json"===e||"text"===e){let e=await C.text(),t=null!=(a=U.jsonParser)?a:$;r.data=await t(e)}else r.data=await C[e]();for(let e of((null==U?void 0:U.output)&&U.output&&!U.disableValidation&&(r.data=await T(U.output,r.data)),d.onSuccess))e&&await e(v(y({},r),{response:(null==(o=null==t?void 0:t.hookOptions)?void 0:o.cloneResponse)?C.clone():C}));return(null==t?void 0:t.throw)?r.data:{data:r.data,error:null}}let z=null!=(s=null==t?void 0:t.jsonParser)?s:$,L=await C.text(),Z=function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(L),M=Z?await z(L):null,q={response:C,responseText:L,request:U,error:v(y({},M),{status:C.status,statusText:C.statusText})};for(let e of d.onError)e&&await e(v(y({},q),{response:(null==(l=null==t?void 0:t.hookOptions)?void 0:l.cloneResponse)?C.clone():C}));if(null==t?void 0:t.retry){let r=function(e){if("number"==typeof e)return new _({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new _(e);case"exponential":return new x(e);default:throw Error("Invalid retry strategy")}}(t.retry),n=null!=(u=t.retryAttempt)?u:0;if(await r.shouldAttemptRetry(n,C)){for(let e of d.onRetry)e&&await e(j);let i=r.getDelay(n);return await new Promise(e=>setTimeout(e,i)),await R(e,v(y({},t),{retryAttempt:n+1}))}}if(null==t?void 0:t.throw)throw new b(C.status,C.statusText,Z?M:L);return{data:null,error:v(y({},M),{status:C.status,statusText:C.statusText})}};let N=new TextEncoder,P=new TextDecoder;function U(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function D(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n>127)throw TypeError("non-ASCII string encountered in encode()");t[r]=n}return t}function C(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:P.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=P.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/");try{var r=t;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);let e=atob(r),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function j(e){let t=e;return("string"==typeof t&&(t=N.encode(t)),Uint8Array.prototype.toBase64)?t.toBase64({alphabet:"base64url",omitPadding:!0}):(function(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=[];for(let r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class z extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class L extends z{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class Z extends z{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class M extends z{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class q extends z{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class V extends z{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class B extends z{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class F extends z{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class W extends z{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t)}}class H extends z{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}class K extends z{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",t){super(e,t)}}class G extends z{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}function J(e,t){let r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(e.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:e};default:throw new q(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function Q(e,t){if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}}let X=(e,t="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`);function Y(e){return parseInt(e.name.slice(4),10)}function ee(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let et=(e,t,...r)=>ee(`Key for the ${e} algorithm must be `,t,...r);async function er(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(((e,...t)=>ee("Key must be ",e,...t))(t,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}return!function(e,t,r){switch(t){case"HS256":case"HS384":case"HS512":{if("HMAC"!==e.algorithm.name)throw X("HMAC");let r=parseInt(t.slice(2),10);if(Y(e.algorithm.hash)!==r)throw X(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if("RSASSA-PKCS1-v1_5"!==e.algorithm.name)throw X("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(Y(e.algorithm.hash)!==r)throw X(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if("RSA-PSS"!==e.algorithm.name)throw X("RSA-PSS");let r=parseInt(t.slice(2),10);if(Y(e.algorithm.hash)!==r)throw X(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if("Ed25519"!==e.algorithm.name)throw X("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":let n;if(n=e.algorithm,n.name!==t)throw X(t);break;case"ES256":case"ES384":case"ES512":{if("ECDSA"!==e.algorithm.name)throw X("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw X(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}if(r&&!e.usages.includes(r))throw TypeError(`CryptoKey does not support this operation, its usages must include ${r}.`)}(t,e,r),t}async function en(e,t,r,n){let i=await er(e,t,"verify");Q(e,i);let a=J(e,i.algorithm);try{return await crypto.subtle.verify(a,i,r,n)}catch{return!1}}function ei(...e){let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}function ea(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}let eo=e=>e?.[Symbol.toStringTag]==="CryptoKey",es=e=>e?.[Symbol.toStringTag]==="KeyObject",el=e=>eo(e)||es(e),eu=e=>ea(e)&&"string"==typeof e.kty,ec=e=>e?.[Symbol.toStringTag],ed=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):n="wrapKey";break;case"decrypt"===r:n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&t.key_ops?.includes?.(n)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0};function ep(e,t,r){switch(e.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((e,t,r)=>{if(!(t instanceof Uint8Array)){if(eu(t)){if("oct"===t.kty&&"string"==typeof t.k&&ed(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!el(t))throw TypeError(et(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${ec(t)} instances for symmetric algorithms must be of type "secret"`)}})(e,t,r);break;default:((e,t,r)=>{if(eu(t))switch(r){case"decrypt":case"sign":if("oct"!==t.kty&&("AKP"===t.kty&&"string"==typeof t.priv||"string"==typeof t.d)&&ed(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if("oct"!==t.kty&&void 0===t.d&&void 0===t.priv&&ed(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!el(t))throw TypeError(et(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${ec(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${ec(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${ec(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${ec(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${ec(t)} instances for asymmetric algorithm encryption must be of type "public"`)}})(e,t,r)}}function ef(e,t,r,n,i){let a;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let o of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(o))throw new q(`Extension Header Parameter "${o}" is not recognized`);if(void 0===i[o])throw new e(`Extension Header Parameter "${o}" is missing`);if(a.get(o)&&void 0===n[o])throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}async function em(e){if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"AKP":switch(e.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":t={name:e.alg},r=e.priv?["sign"]:["verify"];break;default:throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new q('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new q('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n={...e};return"AKP"!==n.kty&&delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??(!e.d&&!e.priv),e.key_ops??r)}let eh=async(e,r,n,i=!1)=>{let a=(t||=new WeakMap).get(e);if(a?.[n])return a[n];let o=await em({...r,alg:n});return i&&Object.freeze(e),a?a[n]=o:t.set(e,{[n]:o}),o};async function eg(e,r){if(e instanceof Uint8Array||eo(e))return e;if(es(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return((e,r)=>{let n,i=(t||=new WeakMap).get(e);if(i?.[r])return i[r];let a="public"===e.type,o=!!a;if("x25519"===e.asymmetricKeyType){switch(r){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}n=e.toCryptoKey(e.asymmetricKeyType,o,a?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==r&&"Ed25519"!==r)throw TypeError("given KeyObject instance cannot be used for this algorithm");n=e.toCryptoKey(e.asymmetricKeyType,o,[a?"verify":"sign"])}switch(e.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(r!==e.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");n=e.toCryptoKey(e.asymmetricKeyType,o,[a?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let t;switch(r){case"RSA-OAEP":t="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":t="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":t="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":t="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(r.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:t},o,a?["encrypt"]:["decrypt"]);n=e.toCryptoKey({name:r.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:t},o,[a?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let t=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!t)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===r&&"P-256"===t&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:t},o,[a?"verify":"sign"])),"ES384"===r&&"P-384"===t&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:t},o,[a?"verify":"sign"])),"ES512"===r&&"P-521"===t&&(n=e.toCryptoKey({name:"ECDSA",namedCurve:t},o,[a?"verify":"sign"])),r.startsWith("ECDH-ES")&&(n=e.toCryptoKey({name:"ECDH",namedCurve:t},o,a?[]:["deriveBits"]))}if(!n)throw TypeError("given KeyObject instance cannot be used for this algorithm");return i?i[r]=n:t.set(e,{[r]:n}),n})(e,r)}catch(e){if(e instanceof TypeError)throw e}let n=e.export({format:"jwk"});return eh(e,n,r)}if(eu(e))return e.k?C(e.k):eh(e,e,r,!0);throw Error("unreachable")}async function ey(e,t,r){let n,i;if(!ea(e))throw new V("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new V('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new V("JWS Protected Header incorrect type");if(void 0===e.payload)throw new V("JWS Payload missing");if("string"!=typeof e.signature)throw new V("JWS Signature missing or incorrect type");if(void 0!==e.header&&!ea(e.header))throw new V("JWS Unprotected Header incorrect type");let a={};if(e.protected)try{let t=C(e.protected);a=JSON.parse(P.decode(t))}catch{throw new V("JWS Protected Header is invalid")}if(!ei(a,e.header))throw new V("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let o={...a,...e.header},s=ef(V,new Map([["b64",!0]]),r?.crit,a,o),l=!0;if(s.has("b64")&&"boolean"!=typeof(l=a.b64))throw new V('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:u}=o;if("string"!=typeof u||!u)throw new V('JWS "alg" (Algorithm) Header Parameter missing or invalid');let c=r&&function(e,t){if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}("algorithms",r.algorithms);if(c&&!c.has(u))throw new M('"alg" (Algorithm) Header Parameter value not allowed');if(l){if("string"!=typeof e.payload)throw new V("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new V("JWS Payload must be a string or an Uint8Array instance");let d=!1;"function"==typeof t&&(t=await t(a,e),d=!0),ep(u,t,"verify");let p=U(void 0!==e.protected?D(e.protected):new Uint8Array,D("."),"string"==typeof e.payload?l?D(e.payload):N.encode(e.payload):e.payload);try{n=C(e.signature)}catch{throw new V("Failed to base64url decode the signature")}let f=await eg(t,u);if(!await en(u,f,n,p))throw new G;if(l)try{i=C(e.payload)}catch{throw new V("Failed to base64url decode the payload")}else i="string"==typeof e.payload?N.encode(e.payload):e.payload;let m={payload:i};return(void 0!==e.protected&&(m.protectedHeader=a),void 0!==e.header&&(m.unprotectedHeader=e.header),d)?{...m,key:f}:m}async function ev(e,t,r){if(e instanceof Uint8Array&&(e=P.decode(e)),"string"!=typeof e)throw new V("Compact JWS must be a string or Uint8Array");let{0:n,1:i,2:a,length:o}=e.split(".");if(3!==o)throw new V("Invalid Compact JWS");let s=await ey({payload:i,protected:n,signature:a},t,r),l={payload:s.payload,protectedHeader:s.protectedHeader};return"function"==typeof t?{...l,key:s.key}:l}let eb=e=>Math.floor(e.getTime()/1e3),ew=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function e_(e){let t,r=ew.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t}function ex(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let eE=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`;class eI{#r;constructor(e){if(!ea(e))throw TypeError("JWT Claims Set MUST be an object");this.#r=structuredClone(e)}data(){return N.encode(JSON.stringify(this.#r))}get iss(){return this.#r.iss}set iss(e){this.#r.iss=e}get sub(){return this.#r.sub}set sub(e){this.#r.sub=e}get aud(){return this.#r.aud}set aud(e){this.#r.aud=e}set jti(e){this.#r.jti=e}set nbf(e){"number"==typeof e?this.#r.nbf=ex("setNotBefore",e):e instanceof Date?this.#r.nbf=ex("setNotBefore",eb(e)):this.#r.nbf=eb(new Date)+e_(e)}set exp(e){"number"==typeof e?this.#r.exp=ex("setExpirationTime",e):e instanceof Date?this.#r.exp=ex("setExpirationTime",eb(e)):this.#r.exp=eb(new Date)+e_(e)}set iat(e){void 0===e?this.#r.iat=eb(new Date):e instanceof Date?this.#r.iat=ex("setIssuedAt",eb(e)):"string"==typeof e?this.#r.iat=ex("setIssuedAt",eb(new Date)+e_(e)):this.#r.iat=ex("setIssuedAt",e)}}async function eS(e,t,r){let n=await ev(e,t,r);if(n.protectedHeader.crit?.includes("b64")&&!1===n.protectedHeader.b64)throw new B("JWTs MUST NOT use unencoded payload");let i={payload:function(e,t,r={}){var n,i;let a,o;try{a=JSON.parse(P.decode(t))}catch{}if(!ea(a))throw new B("JWT Claims Set must be a top-level JSON object");let{typ:s}=r;if(s&&("string"!=typeof e.typ||eE(e.typ)!==eE(s)))throw new L('unexpected "typ" JWT header value',a,"typ","check_failed");let{requiredClaims:l=[],issuer:u,subject:c,audience:d,maxTokenAge:p}=r,f=[...l];for(let e of(void 0!==p&&f.push("iat"),void 0!==d&&f.push("aud"),void 0!==c&&f.push("sub"),void 0!==u&&f.push("iss"),new Set(f.reverse())))if(!(e in a))throw new L(`missing required "${e}" claim`,a,e,"missing");if(u&&!(Array.isArray(u)?u:[u]).includes(a.iss))throw new L('unexpected "iss" claim value',a,"iss","check_failed");if(c&&a.sub!==c)throw new L('unexpected "sub" claim value',a,"sub","check_failed");if(d&&(n=a.aud,i="string"==typeof d?[d]:d,"string"==typeof n?!i.includes(n):!(Array.isArray(n)&&i.some(Set.prototype.has.bind(new Set(n))))))throw new L('unexpected "aud" claim value',a,"aud","check_failed");switch(typeof r.clockTolerance){case"string":o=e_(r.clockTolerance);break;case"number":o=r.clockTolerance;break;case"undefined":o=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:m}=r,h=eb(m||new Date);if((void 0!==a.iat||p)&&"number"!=typeof a.iat)throw new L('"iat" claim must be a number',a,"iat","invalid");if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw new L('"nbf" claim must be a number',a,"nbf","invalid");if(a.nbf>h+o)throw new L('"nbf" claim timestamp check failed',a,"nbf","check_failed")}if(void 0!==a.exp){if("number"!=typeof a.exp)throw new L('"exp" claim must be a number',a,"exp","invalid");if(a.exp<=h-o)throw new Z('"exp" claim timestamp check failed',a,"exp","check_failed")}if(p){let e=h-a.iat;if(e-o>("number"==typeof p?p:e_(p)))throw new Z('"iat" claim timestamp check failed (too far in the past)',a,"iat","check_failed");if(e<0-o)throw new L('"iat" claim timestamp check failed (it should be in the past)',a,"iat","check_failed")}return a}(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return"function"==typeof t?{...i,key:n.key}:i}function e$(e){let t=e=>new Date(new Date().getTime()+1e3*e);return{tokenType:e.token_type,accessToken:e.access_token,refreshToken:e.refresh_token,accessTokenExpiresAt:e.expires_in?t(e.expires_in):void 0,refreshTokenExpiresAt:e.refresh_token_expires_in?t(e.refresh_token_expires_in):void 0,scopes:e?.scope?"string"==typeof e.scope?e.scope.split(" "):e.scope:[],idToken:e.id_token}}async function ek(e){let t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t);return u.base64Url.encode(new Uint8Array(r),{padding:!1})}async function eA({id:e,options:t,authorizationEndpoint:r,state:n,codeVerifier:i,scopes:a,claims:o,redirectURI:s,duration:l,prompt:u,accessType:c,responseType:d,display:p,loginHint:f,hd:m,responseMode:h,additionalParams:g,scopeJoiner:y}){let v=new URL(r);v.searchParams.set("response_type",d||"code");let b=Array.isArray(t.clientId)?t.clientId[0]:t.clientId;if(v.searchParams.set("client_id",b),v.searchParams.set("state",n),v.searchParams.set("scope",a.join(y||" ")),v.searchParams.set("redirect_uri",t.redirectURI||s),l&&v.searchParams.set("duration",l),p&&v.searchParams.set("display",p),f&&v.searchParams.set("login_hint",f),u&&v.searchParams.set("prompt",u),m&&v.searchParams.set("hd",m),c&&v.searchParams.set("access_type",c),h&&v.searchParams.set("response_mode",h),i){let e=await ek(i);v.searchParams.set("code_challenge_method","S256"),v.searchParams.set("code_challenge",e)}if(o){let e=o.reduce((e,t)=>(e[t]=null,e),{});v.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...e}}))}return g&&Object.entries(g).forEach(([e,t])=>{v.searchParams.set(e,t)}),v}async function eT({code:e,codeVerifier:t,redirectURI:r,options:n,tokenEndpoint:i,authentication:a,deviceId:o,headers:s,additionalParams:l={},resource:c}){let{body:d,headers:p}=function({code:e,codeVerifier:t,redirectURI:r,options:n,authentication:i,deviceId:a,headers:o,additionalParams:s={},resource:l}){let c=new URLSearchParams,d={"content-type":"application/x-www-form-urlencoded",accept:"application/json","user-agent":"better-auth",...o};if(c.set("grant_type","authorization_code"),c.set("code",e),t&&c.set("code_verifier",t),n.clientKey&&c.set("client_key",n.clientKey),a&&c.set("device_id",a),c.set("redirect_uri",n.redirectURI||r),l)if("string"==typeof l)c.append("resource",l);else for(let e of l)c.append("resource",e);if("basic"===i){let e=Array.isArray(n.clientId)?n.clientId[0]:n.clientId,t=u.base64.encode(`${e}:${n.clientSecret??""}`);d.authorization=`Basic ${t}`}else{let e=Array.isArray(n.clientId)?n.clientId[0]:n.clientId;c.set("client_id",e),n.clientSecret&&c.set("client_secret",n.clientSecret)}for(let[e,t]of Object.entries(s))c.has(e)||c.append(e,t);return{body:c,headers:d}}({code:e,codeVerifier:t,redirectURI:r,options:n,authentication:a,deviceId:o,headers:s,additionalParams:l,resource:c}),{data:f,error:m}=await R(i,{method:"POST",body:d,headers:p});if(m)throw m;return e$(f)}async function eO({refreshToken:e,options:t,tokenEndpoint:r,authentication:n,extraParams:i}){let{body:a,headers:o}=function({refreshToken:e,options:t,authentication:r,extraParams:n,resource:i}){let a=new URLSearchParams,o={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(a.set("grant_type","refresh_token"),a.set("refresh_token",e),"basic"===r){let e=Array.isArray(t.clientId)?t.clientId[0]:t.clientId;e?o.authorization="Basic "+u.base64.encode(`${e}:${t.clientSecret??""}`):o.authorization="Basic "+u.base64.encode(`:${t.clientSecret??""}`)}else{let e=Array.isArray(t.clientId)?t.clientId[0]:t.clientId;a.set("client_id",e),t.clientSecret&&a.set("client_secret",t.clientSecret)}if(i)if("string"==typeof i)a.append("resource",i);else for(let e of i)a.append("resource",e);if(n)for(let[e,t]of Object.entries(n))a.set(e,t);return{body:a,headers:o}}({refreshToken:e,options:t,authentication:n,extraParams:i}),{data:s,error:l}=await R(r,{method:"POST",body:a,headers:o});if(l)throw l;let c={accessToken:s.access_token,refreshToken:s.refresh_token,tokenType:s.token_type,scopes:s.scope?.split(" "),idToken:s.id_token};return s.expires_in&&(c.accessTokenExpiresAt=new Date(new Date().getTime()+1e3*s.expires_in)),c}e.s(["createAuthorizationURL",()=>eA,"generateCodeChallenge",()=>ek,"getOAuth2Tokens",()=>e$,"refreshAccessToken",()=>eO,"validateAuthorizationCode",()=>eT],48151);var eR=e.i(91804),eN=e.i(89271),eP=e.i(69288);e.s(["$brand",()=>eP.$brand,"$input",()=>eP.$input,"$output",()=>eP.$output,"NEVER",()=>eP.NEVER,"TimePrecision",()=>eP.TimePrecision,"ZodAny",()=>eP.ZodAny,"ZodArray",()=>eP.ZodArray,"ZodBase64",()=>eP.ZodBase64,"ZodBase64URL",()=>eP.ZodBase64URL,"ZodBigInt",()=>eP.ZodBigInt,"ZodBigIntFormat",()=>eP.ZodBigIntFormat,"ZodBoolean",()=>eP.ZodBoolean,"ZodCIDRv4",()=>eP.ZodCIDRv4,"ZodCIDRv6",()=>eP.ZodCIDRv6,"ZodCUID",()=>eP.ZodCUID,"ZodCUID2",()=>eP.ZodCUID2,"ZodCatch",()=>eP.ZodCatch,"ZodCodec",()=>eP.ZodCodec,"ZodCustom",()=>eP.ZodCustom,"ZodCustomStringFormat",()=>eP.ZodCustomStringFormat,"ZodDate",()=>eP.ZodDate,"ZodDefault",()=>eP.ZodDefault,"ZodDiscriminatedUnion",()=>eP.ZodDiscriminatedUnion,"ZodE164",()=>eP.ZodE164,"ZodEmail",()=>eP.ZodEmail,"ZodEmoji",()=>eP.ZodEmoji,"ZodEnum",()=>eP.ZodEnum,"ZodError",()=>eP.ZodError,"ZodFile",()=>eP.ZodFile,"ZodFirstPartyTypeKind",()=>eP.ZodFirstPartyTypeKind,"ZodFunction",()=>eP.ZodFunction,"ZodGUID",()=>eP.ZodGUID,"ZodIPv4",()=>eP.ZodIPv4,"ZodIPv6",()=>eP.ZodIPv6,"ZodISODate",()=>eP.ZodISODate,"ZodISODateTime",()=>eP.ZodISODateTime,"ZodISODuration",()=>eP.ZodISODuration,"ZodISOTime",()=>eP.ZodISOTime,"ZodIntersection",()=>eP.ZodIntersection,"ZodIssueCode",()=>eP.ZodIssueCode,"ZodJWT",()=>eP.ZodJWT,"ZodKSUID",()=>eP.ZodKSUID,"ZodLazy",()=>eP.ZodLazy,"ZodLiteral",()=>eP.ZodLiteral,"ZodMap",()=>eP.ZodMap,"ZodNaN",()=>eP.ZodNaN,"ZodNanoID",()=>eP.ZodNanoID,"ZodNever",()=>eP.ZodNever,"ZodNonOptional",()=>eP.ZodNonOptional,"ZodNull",()=>eP.ZodNull,"ZodNullable",()=>eP.ZodNullable,"ZodNumber",()=>eP.ZodNumber,"ZodNumberFormat",()=>eP.ZodNumberFormat,"ZodObject",()=>eP.ZodObject,"ZodOptional",()=>eP.ZodOptional,"ZodPipe",()=>eP.ZodPipe,"ZodPrefault",()=>eP.ZodPrefault,"ZodPromise",()=>eP.ZodPromise,"ZodReadonly",()=>eP.ZodReadonly,"ZodRealError",()=>eP.ZodRealError,"ZodRecord",()=>eP.ZodRecord,"ZodSet",()=>eP.ZodSet,"ZodString",()=>eP.ZodString,"ZodStringFormat",()=>eP.ZodStringFormat,"ZodSuccess",()=>eP.ZodSuccess,"ZodSymbol",()=>eP.ZodSymbol,"ZodTemplateLiteral",()=>eP.ZodTemplateLiteral,"ZodTransform",()=>eP.ZodTransform,"ZodTuple",()=>eP.ZodTuple,"ZodType",()=>eP.ZodType,"ZodULID",()=>eP.ZodULID,"ZodURL",()=>eP.ZodURL,"ZodUUID",()=>eP.ZodUUID,"ZodUndefined",()=>eP.ZodUndefined,"ZodUnion",()=>eP.ZodUnion,"ZodUnknown",()=>eP.ZodUnknown,"ZodVoid",()=>eP.ZodVoid,"ZodXID",()=>eP.ZodXID,"_ZodString",()=>eP._ZodString,"_default",()=>eP._default,"_function",()=>eP._function,"any",()=>eP.any,"array",()=>eP.array,"base64",()=>eP.base64,"base64url",()=>eP.base64url,"bigint",()=>eP.bigint,"boolean",()=>eP.boolean,"catch",()=>eP.catch,"check",()=>eP.check,"cidrv4",()=>eP.cidrv4,"cidrv6",()=>eP.cidrv6,"clone",()=>eP.clone,"codec",()=>eP.codec,"coerce",()=>eP.coerce,"config",()=>eP.config,"core",()=>eP.core,"cuid",()=>eP.cuid,"cuid2",()=>eP.cuid2,"custom",()=>eP.custom,"date",()=>eP.date,"decode",()=>eP.decode,"decodeAsync",()=>eP.decodeAsync,"default",()=>eN.default,"discriminatedUnion",()=>eP.discriminatedUnion,"e164",()=>eP.e164,"email",()=>eP.email,"emoji",()=>eP.emoji,"encode",()=>eP.encode,"encodeAsync",()=>eP.encodeAsync,"endsWith",()=>eP.endsWith,"enum",()=>eP.enum,"file",()=>eP.file,"flattenError",()=>eP.flattenError,"float32",()=>eP.float32,"float64",()=>eP.float64,"formatError",()=>eP.formatError,"function",()=>eP.function,"getErrorMap",()=>eP.getErrorMap,"globalRegistry",()=>eP.globalRegistry,"gt",()=>eP.gt,"gte",()=>eP.gte,"guid",()=>eP.guid,"hash",()=>eP.hash,"hex",()=>eP.hex,"hostname",()=>eP.hostname,"httpUrl",()=>eP.httpUrl,"includes",()=>eP.includes,"instanceof",()=>eP.instanceof,"int",()=>eP.int,"int32",()=>eP.int32,"int64",()=>eP.int64,"intersection",()=>eP.intersection,"ipv4",()=>eP.ipv4,"ipv6",()=>eP.ipv6,"iso",()=>eP.iso,"json",()=>eP.json,"jwt",()=>eP.jwt,"keyof",()=>eP.keyof,"ksuid",()=>eP.ksuid,"lazy",()=>eP.lazy,"length",()=>eP.length,"literal",()=>eP.literal,"locales",()=>eP.locales,"looseObject",()=>eP.looseObject,"lowercase",()=>eP.lowercase,"lt",()=>eP.lt,"lte",()=>eP.lte,"map",()=>eP.map,"maxLength",()=>eP.maxLength,"maxSize",()=>eP.maxSize,"mime",()=>eP.mime,"minLength",()=>eP.minLength,"minSize",()=>eP.minSize,"multipleOf",()=>eP.multipleOf,"nan",()=>eP.nan,"nanoid",()=>eP.nanoid,"nativeEnum",()=>eP.nativeEnum,"negative",()=>eP.negative,"never",()=>eP.never,"nonnegative",()=>eP.nonnegative,"nonoptional",()=>eP.nonoptional,"nonpositive",()=>eP.nonpositive,"normalize",()=>eP.normalize,"null",()=>eP.null,"nullable",()=>eP.nullable,"nullish",()=>eP.nullish,"number",()=>eP.number,"object",()=>eP.object,"optional",()=>eP.optional,"overwrite",()=>eP.overwrite,"parse",()=>eP.parse,"parseAsync",()=>eP.parseAsync,"partialRecord",()=>eP.partialRecord,"pipe",()=>eP.pipe,"positive",()=>eP.positive,"prefault",()=>eP.prefault,"preprocess",()=>eP.preprocess,"prettifyError",()=>eP.prettifyError,"promise",()=>eP.promise,"property",()=>eP.property,"readonly",()=>eP.readonly,"record",()=>eP.record,"refine",()=>eP.refine,"regex",()=>eP.regex,"regexes",()=>eP.regexes,"registry",()=>eP.registry,"safeDecode",()=>eP.safeDecode,"safeDecodeAsync",()=>eP.safeDecodeAsync,"safeEncode",()=>eP.safeEncode,"safeEncodeAsync",()=>eP.safeEncodeAsync,"safeParse",()=>eP.safeParse,"safeParseAsync",()=>eP.safeParseAsync,"set",()=>eP.set,"setErrorMap",()=>eP.setErrorMap,"size",()=>eP.size,"startsWith",()=>eP.startsWith,"strictObject",()=>eP.strictObject,"string",()=>eP.string,"stringFormat",()=>eP.stringFormat,"stringbool",()=>eP.stringbool,"success",()=>eP.success,"superRefine",()=>eP.superRefine,"symbol",()=>eP.symbol,"templateLiteral",()=>eP.templateLiteral,"toJSONSchema",()=>eP.toJSONSchema,"toLowerCase",()=>eP.toLowerCase,"toUpperCase",()=>eP.toUpperCase,"transform",()=>eP.transform,"treeifyError",()=>eP.treeifyError,"trim",()=>eP.trim,"tuple",()=>eP.tuple,"uint32",()=>eP.uint32,"uint64",()=>eP.uint64,"ulid",()=>eP.ulid,"undefined",()=>eP.undefined,"union",()=>eP.union,"unknown",()=>eP.unknown,"uppercase",()=>eP.uppercase,"url",()=>eP.url,"util",()=>eP.util,"uuid",()=>eP.uuid,"uuidv4",()=>eP.uuidv4,"uuidv6",()=>eP.uuidv6,"uuidv7",()=>eP.uuidv7,"void",()=>eP.void,"xid",()=>eP.xid,"z",0,eP],75237),e.i(75237);var eU=e.i(66904),eD=e.i(13012);let eC=(e,t="ms")=>new Date(Date.now()+("sec"===t?1e3*e:e));e.s(["g",()=>eC],55018);var ej=e.i(1127),ez=e.i(80012),eL=e.i(90545);function eZ(e,t="/api/auth"){if(function(e){try{let t=new URL(e).pathname.replace(/\/+$/,"")||"/";return"/"!==t}catch(t){throw new eD.BetterAuthError(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}(e))return e;let r=e.replace(/\/+$/,"");return t&&"/"!==t?(t=t.startsWith("/")?t:`/${t}`,`${r}${t}`):r}function eM(e,t,r,n){if(e)return eZ(e,t);if(!1!==n){let e=ej.env.BETTER_AUTH_URL||ej.env.NEXT_PUBLIC_BETTER_AUTH_URL||ej.env.PUBLIC_BETTER_AUTH_URL||ej.env.NUXT_PUBLIC_BETTER_AUTH_URL||ej.env.NUXT_PUBLIC_AUTH_URL||("/"!==ej.env.BASE_URL?ej.env.BASE_URL:void 0);if(e)return eZ(e,t)}let i=r?.headers.get("x-forwarded-host"),a=r?.headers.get("x-forwarded-proto");if(i&&a)return eZ(`${a}://${i}`,t);if(r){let e=eq(r.url);if(!e)throw new eD.BetterAuthError("Could not get origin from request. Please provide a valid base URL.");return eZ(e,t)}}function eq(e){try{return new URL(e).origin}catch(e){return null}}function eV(e){try{return new URL(e).protocol}catch(e){return null}}function eB(e){try{return new URL(e).host}catch(e){return null}}e.s(["a",()=>eM,"b",()=>eB,"c",()=>eV,"g",()=>eq],67166);var eF=e.i(66207);e.i(17722);function eW(e){let t=(e.advanced?.useSecureCookies!==void 0?e.advanced?.useSecureCookies:void 0!==e.baseURL?!!e.baseURL.startsWith("https://"):ej.isProduction)?"__Secure-":"",r=!!e.advanced?.crossSubDomainCookies?.enabled,n=r?e.advanced?.crossSubDomainCookies?.domain||(e.baseURL?new URL(e.baseURL).hostname:void 0):void 0;if(r&&!n)throw new eD.BetterAuthError("baseURL is required when crossSubdomainCookies are enabled");return function(i,a={}){let o=e.advanced?.cookiePrefix||"better-auth",s=e.advanced?.cookies?.[i]?.name||`${o}.${i}`,l=e.advanced?.cookies?.[i]?.attributes;return{name:`${t}${s}`,attributes:{secure:!!t,sameSite:"lax",path:"/",httpOnly:!0,...r?{domain:n}:{},...e.advanced?.defaultCookieAttributes,...a,...l}}}}function eH(e){let t=eW(e),r=t("session_token",{maxAge:e.session?.expiresIn||function(e){!1;let t=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec("7d");if(!t?.groups)return NaN;let{value:r,unit:n="ms"}=t.groups,i=parseFloat(r),a=n.toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"months":case"month":case"mo":return 26298e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:throw Error(`Unknown unit "${a}" provided to ms.parse(). value=${JSON.stringify("7d")}`)}}("7d")/1e3}),n=t("session_data",{maxAge:e.session?.cookieCache?.maxAge||300}),i=t("dont_remember");return{sessionToken:{name:r.name,options:r.attributes},sessionData:{name:n.name,options:n.attributes},dontRememberToken:{name:i.name,options:i.attributes}}}async function eK(e,t,r){if(e.context.options.session?.cookieCache?.enabled){let n={session:Object.entries(t.session).reduce((t,[r,n])=>{let i=e.context.options.session?.additionalFields?.[r];return i&&!1===i.returned||(t[r]=n),t},{}),user:t.user},i={...e.context.authCookies.sessionData.options,maxAge:r?void 0:e.context.authCookies.sessionData.options.maxAge},a=eC(i.maxAge||60,"sec").getTime(),o=u.base64Url.encode(JSON.stringify({session:n,expiresAt:a,signature:await (0,ez.createHMAC)("SHA-256","base64urlnopad").sign(e.context.secret,JSON.stringify({...n,expiresAt:a}))}),{padding:!1});if(o.length>4093)return void e.context?.logger?.error(`Session data exceeds cookie size limit (${o.length} bytes > 4093 bytes). Consider reducing session data size or disabling cookie cache. Session will not be cached in cookie.`);e.setCookie(e.context.authCookies.sessionData.name,o,i)}}async function eG(e,t,r,n){let i=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);r=void 0!==r?r:!!i;let a=e.context.authCookies.sessionToken.options,o=r?void 0:e.context.sessionConfig.expiresIn;await e.setSignedCookie(e.context.authCookies.sessionToken.name,t.session.token,e.context.secret,{...a,maxAge:o,...n}),r&&await e.setSignedCookie(e.context.authCookies.dontRememberToken.name,"true",e.context.secret,e.context.authCookies.dontRememberToken.options),await eK(e,t,r),e.context.setNewSession(t),e.context.options.secondaryStorage&&await e.context.secondaryStorage?.set(t.session.token,JSON.stringify({user:t.user,session:t.session}),Math.floor((new Date(t.session.expiresAt).getTime()-Date.now())/1e3))}function eJ(e,t){e.setCookie(e.context.authCookies.sessionToken.name,"",{...e.context.authCookies.sessionToken.options,maxAge:0}),e.setCookie(e.context.authCookies.sessionData.name,"",{...e.context.authCookies.sessionData.options,maxAge:0}),t||e.setCookie(e.context.authCookies.dontRememberToken.name,"",{...e.context.authCookies.dontRememberToken.options,maxAge:0})}e.s(["a",()=>eK,"c",()=>eW,"d",()=>eJ,"g",()=>eH,"s",()=>eG],89593);var eQ=e.i(25269),eX=e.i(27003);function eY(e){let t,r;if("string"!=typeof e)throw new B("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new B("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new B("Invalid JWT");if(!n)throw new B("JWTs must contain a payload");try{t=C(n)}catch{throw new B("Failed to base64url decode the payload")}try{r=JSON.parse(P.decode(t))}catch{throw new B("Failed to parse the decoded payload as JSON")}if(!ea(r))throw new B("Invalid JWT Claims Set");return r}function e0(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e)if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(P.decode(C(t)));if(!ea(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}}async function e1(e,t,r){let n;if(!ea(e))throw TypeError("JWK must be an object");switch(t??=e.alg,n??=r?.extractable??e.ext,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return C(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new q('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return em({...e,alg:t,ext:n});case"AKP":if("string"!=typeof e.alg||!e.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==t&&t!==e.alg)throw TypeError("JWK alg and alg option value mismatch");return em({...e,ext:n});case"EC":case"OKP":return em({...e,alg:t,ext:n});default:throw new q('Unsupported "kty" (Key Type) Parameter value')}}function e4(e){return ea(e)}class e6{#n;#i=new WeakMap;constructor(e){if(!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(e4)}(e))throw new F("JSON Web Key Set malformed");this.#n=structuredClone(e)}jwks(){return this.#n}async getKey(e,t){let{alg:r,kid:n}={...e,...t?.header},i=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new q('Unsupported "alg" value for a JSON Web Key Set')}}(r),a=this.#n.keys.filter(e=>{let t=i===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&("string"==typeof e.alg||"AKP"===i)&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":case"EdDSA":t="Ed25519"===e.crv}return t}),{0:o,length:s}=a;if(0===s)throw new W;if(1!==s){let e=new H,t=this.#i;throw e[Symbol.asyncIterator]=async function*(){for(let e of a)try{yield await e2(t,e,r)}catch{}},e}return e2(this.#i,o,r)}}async function e2(e,t,r){let n=e.get(t)||e.set(t,{}).get(t);if(void 0===n[r]){let e=await e1({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new F("JSON Web Key Set members must be public keys");n[r]=e}return n[r]}function e3(e){let t=new e6(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>structuredClone(t.jwks()),enumerable:!1,configurable:!1,writable:!1}}),r}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(r="jose/v6.1.1");let e9=Symbol();async function e8(e,t,r,n=fetch){let i=await n(e,{method:"GET",signal:r,redirect:"manual",headers:t}).catch(e=>{if("TimeoutError"===e.name)throw new K;throw e});if(200!==i.status)throw new z("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await i.json()}catch{throw new z("Failed to parse the JSON Web Key Set HTTP response as JSON")}}let e5=Symbol();class e7{#a;#o;#s;#l;#u;#c;#d;#p;#f;#m;constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this.#a=new URL(e.href),this.#o="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this.#s="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this.#l="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,this.#d=new Headers(t?.headers),r&&!this.#d.has("User-Agent")&&this.#d.set("User-Agent",r),this.#d.has("accept")||(this.#d.set("accept","application/json"),this.#d.append("accept","application/jwk-set+json")),this.#p=t?.[e9],t?.[e5]!==void 0&&(this.#m=t?.[e5],function(e,t){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&!!ea(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,ea)}(t?.[e5],this.#l)&&(this.#u=this.#m.uat,this.#f=e3(this.#m.jwks)))}pendingFetch(){return!!this.#c}coolingDown(){return"number"==typeof this.#u&&Date.now()<this.#u+this.#s}fresh(){return"number"==typeof this.#u&&Date.now()<this.#u+this.#l}jwks(){return this.#f?.jwks()}async getKey(e,t){this.#f&&this.fresh()||await this.reload();try{return await this.#f(e,t)}catch(r){if(r instanceof W&&!1===this.coolingDown())return await this.reload(),this.#f(e,t);throw r}}async reload(){this.#c&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this.#c=void 0),this.#c||=e8(this.#a.href,this.#d,AbortSignal.timeout(this.#o),this.#p).then(e=>{this.#f=e3(e),this.#m&&(this.#m.uat=Date.now(),this.#m.jwks=e),this.#u=Date.now(),this.#c=void 0}).catch(e=>{throw this.#c=void 0,e}),await this.#c}}e.i(27341);let te=async e=>{let{data:t}=await R("https://appleid.apple.com/auth/keys");if(!t?.keys)throw new eR.APIError("BAD_REQUEST",{message:"Keys not found"});let r=t.keys.find(t=>t.kid===e);if(!r)throw Error(`JWK with kid ${e} not found`);return await e1(r,r.alg)},tt=async(e,t,r)=>{let n=`https://cognito-idp.${t}.amazonaws.com/${r}/.well-known/jwks.json`;try{let{data:t}=await R(n);if(!t?.keys)throw new eR.APIError("BAD_REQUEST",{message:"Keys not found"});let r=t.keys.find(t=>t.kid===e);if(!r)throw Error(`JWK with kid ${e} not found`);return await e1(r,r.alg)}catch(e){throw ej.logger.error("Failed to fetch Cognito public key:",e),e}},tr=(e="")=>e.split("://").map(e=>e.replace(/\/{2,}/g,"/")).join("://"),tn={apple:e=>({id:"apple",name:"Apple",async createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["email","name"];return e.scope&&i.push(...e.scope),r&&i.push(...r),await eA({id:"apple",options:e,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:i,state:t,redirectURI:n,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>eT({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://appleid.apple.com/auth/token"}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);let{kid:n,alg:i}=e0(t);if(!n||!i)return!1;let a=await te(n),{payload:o}=await eS(t,a,{algorithms:[i],issuer:"https://appleid.apple.com",audience:e.audience&&e.audience.length?e.audience:e.appBundleIdentifier?e.appBundleIdentifier:e.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(e=>{void 0!==o[e]&&(o[e]=!!o[e])}),(!r||o.nonce===r)&&!!o},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=eY(t.idToken);if(!r)return null;let n=t.user?`${t.user.name?.firstName} ${t.user.name?.lastName}`:r.name||r.email,i="boolean"==typeof r.email_verified?r.email_verified:"true"===r.email_verified,a={...r,name:n},o=await e.mapProfileToUser?.(a);return{user:{id:r.sub,name:a.name,emailVerified:i,email:r.email,...o},data:a}},options:e}),atlassian:e=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){if(!e.clientId||!e.clientSecret)throw ej.logger.error("Client Id and Secret are required for Atlassian"),new eD.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(!n)throw new eD.BetterAuthError("codeVerifier is required for Atlassian");let a=e.disableDefaultScope?[]:["read:jira-user","offline_access"];return e.scope&&a.push(...e.scope),r&&a.push(...r),eA({id:"atlassian",options:e,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:a,state:t,codeVerifier:n,redirectURI:i,additionalParams:{audience:"api.atlassian.com"},prompt:e.prompt})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>eT({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.accessToken)return null;try{let{data:r}=await R("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(!r)return null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.account_id,name:r.name,email:r.email,image:r.picture,emailVerified:!1,...n},data:r}}catch(e){return ej.logger.error("Failed to fetch user info from Figma:",e),null}},options:e}),cognito:e=>{if(!e.domain||!e.region||!e.userPoolId)throw ej.logger.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new eD.BetterAuthError("DOMAIN_AND_REGION_REQUIRED");let t=e.domain.replace(/^https?:\/\//,""),r=`https://${t}/oauth2/authorize`,n=`https://${t}/oauth2/token`,i=`https://${t}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:t,scopes:n,codeVerifier:i,redirectURI:a}){if(!e.clientId)throw ej.logger.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new eD.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(e.requireClientSecret&&!e.clientSecret)throw ej.logger.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new eD.BetterAuthError("CLIENT_SECRET_REQUIRED");let o=e.disableDefaultScope?[]:["openid","profile","email"];return e.scope&&o.push(...e.scope),n&&o.push(...n),await eA({id:"cognito",options:{...e},authorizationEndpoint:r,scopes:o,state:t,codeVerifier:i,redirectURI:a,prompt:e.prompt})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>eT({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:n}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:n}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);try{let{kid:n,alg:i}=e0(t);if(!n||!i)return!1;let a=await tt(n,e.region,e.userPoolId),o=`https://cognito-idp.${e.region}.amazonaws.com/${e.userPoolId}`,{payload:s}=await eS(t,a,{algorithms:[i],issuer:o,audience:e.clientId,maxTokenAge:"1h"});if(r&&s.nonce!==r)return!1;return!0}catch(e){return ej.logger.error("Failed to verify ID token:",e),!1}},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(t.idToken)try{let r=eY(t.idToken);if(!r)return null;let n=r.name||r.given_name||r.username||r.email,i={...r,name:n},a=await e.mapProfileToUser?.(i);return{user:{id:r.sub,name:i.name,email:r.email,image:r.picture,emailVerified:r.email_verified,...a},data:i}}catch(e){ej.logger.error("Failed to decode ID token:",e)}if(t.accessToken)try{let{data:r}=await R(i,{headers:{Authorization:`Bearer ${t.accessToken}`}});if(r){let t=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name||r.given_name||r.username,email:r.email,image:r.picture,emailVerified:r.email_verified,...t},data:r}}}catch(e){ej.logger.error("Failed to fetch user info from Cognito:",e)}return null},options:e}},discord:e=>({id:"discord",name:"Discord",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["identify","email"];r&&i.push(...r),e.scope&&i.push(...e.scope);let a=i.includes("bot")&&void 0!==e.permissions?`&permissions=${e.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${i.join("+")}&response_type=code&client_id=${e.clientId}&redirect_uri=${encodeURIComponent(e.redirectURI||n)}&state=${t}&prompt=${e.prompt||"none"}${a}`)},validateAuthorizationCode:async({code:t,redirectURI:r})=>eT({code:t,redirectURI:r,options:e,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${t.accessToken}`}});if(n)return null;if(null===r.avatar){let e="0"===r.discriminator?Number(BigInt(r.id)>>BigInt(22))%6:parseInt(r.discriminator)%5;r.image_url=`https://cdn.discordapp.com/embed/avatars/${e}.png`}else{let e=r.avatar.startsWith("a_")?"gif":"png";r.image_url=`https://cdn.discordapp.com/avatars/${r.id}/${r.avatar}.${e}`}let i=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.global_name||r.username||"",email:r.email,emailVerified:r.verified,image:r.image_url,...i},data:r}},options:e}),facebook:e=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:t,scopes:r,redirectURI:n,loginHint:i}){let a=e.disableDefaultScope?[]:["email","public_profile"];return e.scope&&a.push(...e.scope),r&&a.push(...r),await eA({id:"facebook",options:e,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:a,state:t,redirectURI:n,loginHint:i,additionalParams:e.configId?{config_id:e.configId}:{}})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eT({code:t,redirectURI:r,options:e,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);if(3===t.split(".").length)try{var n;let i,a,{payload:o}=await eS(t,(n=new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/"),i=new e7(n,void 0),a=async(e,t)=>i.getKey(e,t),Object.defineProperties(a,{coolingDown:{get:()=>i.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>i.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>i.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>i.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>i.jwks(),enumerable:!0,configurable:!1,writable:!1}}),a),{algorithms:["RS256"],audience:e.clientId,issuer:"https://www.facebook.com"});if(r&&o.nonce!==r)return!1;return!!o}catch(e){return!1}return!0},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(t.idToken&&3===t.idToken.split(".").length){let r=eY(t.idToken),n={id:r.sub,name:r.name,email:r.email,picture:{data:{url:r.picture,height:100,width:100,is_silhouette:!1}}},i=await e.mapProfileToUser?.({...n,email_verified:!0});return{user:{...n,emailVerified:!0,...i},data:r}}let r=["id","name","email","picture",...e?.fields||[]],{data:n,error:i}=await R("https://graph.facebook.com/me?fields="+r.join(","),{auth:{type:"Bearer",token:t.accessToken}});if(i)return null;let a=await e.mapProfileToUser?.(n);return{user:{id:n.id,name:n.name,email:n.email,image:n.picture.data.url,emailVerified:n.email_verified,...a},data:n}},options:e}),figma:e=>({id:"figma",name:"Figma",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){if(!e.clientId||!e.clientSecret)throw ej.logger.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new eD.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(!n)throw new eD.BetterAuthError("codeVerifier is required for Figma");let a=e.disableDefaultScope?[]:["file_read"];return e.scope&&a.push(...e.scope),r&&a.push(...r),await eA({id:"figma",options:e,authorizationEndpoint:"https://www.figma.com/oauth",scopes:a,state:t,codeVerifier:n,redirectURI:i})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>eT({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://www.figma.com/api/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);try{let{data:r}=await R("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(!r)return ej.logger.error("Failed to fetch user from Figma"),null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.handle,email:r.email,image:r.img_url,emailVerified:!!r.email,...n},data:r}}catch(e){return ej.logger.error("Failed to fetch user info from Figma:",e),null}},options:e}),github:e=>({id:"github",name:"GitHub",createAuthorizationURL({state:t,scopes:r,loginHint:n,redirectURI:i}){let a=e.disableDefaultScope?[]:["read:user","user:email"];return e.scope&&a.push(...e.scope),r&&a.push(...r),eA({id:"github",options:e,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:a,state:t,redirectURI:i,loginHint:n,prompt:e.prompt})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eT({code:t,redirectURI:r,options:e,tokenEndpoint:"https://github.com/login/oauth/access_token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${t.accessToken}`}});if(n)return null;let{data:i}=await R("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${t.accessToken}`,"User-Agent":"better-auth"}});!r.email&&i&&(r.email=(i.find(e=>e.primary)??i[0])?.email);let a=i?.find(e=>e.email===r.email)?.verified??!1,o=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name||r.login,email:r.email,image:r.avatar_url,emailVerified:a,...o},data:r}},options:e}),microsoft:e=>{let t=e.tenantId||"common",r=e.authority||"https://login.microsoftonline.com",n=`${r}/${t}/oauth2/v2.0/authorize`,i=`${r}/${t}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(t){let r=e.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return e.scope&&r.push(...e.scope),t.scopes&&r.push(...t.scopes),eA({id:"microsoft",options:e,authorizationEndpoint:n,state:t.state,codeVerifier:t.codeVerifier,scopes:r,redirectURI:t.redirectURI,prompt:e.prompt,loginHint:t.loginHint})},validateAuthorizationCode:({code:t,codeVerifier:r,redirectURI:n})=>eT({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:i}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=eY(t.idToken),n=e.profilePhotoSize||48;await R(`https://graph.microsoft.com/v1.0/me/photos/${n}x${n}/$value`,{headers:{Authorization:`Bearer ${t.accessToken}`},async onResponse(t){if(!e.disableProfilePhoto&&t.response.ok)try{let e=t.response.clone(),n=await e.arrayBuffer(),i=u.base64.encode(n);r.picture=`data:image/jpeg;base64, ${i}`}catch(e){ej.logger.error(e&&"object"==typeof e&&"name"in e?e.name:"",e)}}});let i=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,image:r.picture,emailVerified:!0,...i},data:r}},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>{let r=e.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return e.scope&&r.push(...e.scope),eO({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},extraParams:{scope:r.join(" ")},tokenEndpoint:i})},options:e}},google:e=>({id:"google",name:"Google",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i,loginHint:a,display:o}){if(!e.clientId||!e.clientSecret)throw ej.logger.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new eD.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(!n)throw new eD.BetterAuthError("codeVerifier is required for Google");let s=e.disableDefaultScope?[]:["email","profile","openid"];return e.scope&&s.push(...e.scope),r&&s.push(...r),await eA({id:"google",options:e,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:s,state:t,codeVerifier:n,redirectURI:i,prompt:e.prompt,accessType:e.accessType,display:o||e.display,loginHint:a,hd:e.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>eT({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);let n=`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${t}`,{data:i}=await R(n);return!!i&&i.aud===e.clientId&&("https://accounts.google.com"===i.iss||"accounts.google.com"===i.iss)},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=eY(t.idToken),n=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,image:r.picture,emailVerified:r.email_verified,...n},data:r}},options:e}),huggingface:e=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){let a=e.disableDefaultScope?[]:["openid","profile","email"];return e.scope&&a.push(...e.scope),r&&a.push(...r),eA({id:"huggingface",options:e,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:a,state:t,codeVerifier:n,redirectURI:i})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>eT({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name||r.preferred_username,email:r.email,image:r.picture,emailVerified:r.email_verified??!1,...i},data:r}},options:e}),slack:e=>({id:"slack",name:"Slack",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["openid","profile","email"];r&&i.push(...r),e.scope&&i.push(...e.scope);let a=new URL("https://slack.com/openid/connect/authorize");return a.searchParams.set("scope",i.join(" ")),a.searchParams.set("response_type","code"),a.searchParams.set("client_id",e.clientId),a.searchParams.set("redirect_uri",e.redirectURI||n),a.searchParams.set("state",t),a},validateAuthorizationCode:async({code:t,redirectURI:r})=>eT({code:t,redirectURI:r,options:e,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r["https://slack.com/user_id"],name:r.name||"",email:r.email,emailVerified:r.email_verified,image:r.picture||r["https://slack.com/user_image_512"],...i},data:r}},options:e}),spotify:e=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){let a=e.disableDefaultScope?[]:["user-read-email"];return e.scope&&a.push(...e.scope),r&&a.push(...r),eA({id:"spotify",options:e,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:a,state:t,codeVerifier:n,redirectURI:i})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>eT({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.display_name,email:r.email,image:r.images[0]?.url,emailVerified:!1,...i},data:r}},options:e}),twitch:e=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["user:read:email","openid"];return e.scope&&i.push(...e.scope),r&&i.push(...r),eA({id:"twitch",redirectURI:n,options:e,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:i,state:t,claims:e.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eT({code:t,redirectURI:r,options:e,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let r=t.idToken;if(!r)return ej.logger.error("No idToken found in token"),null;let n=eY(r),i=await e.mapProfileToUser?.(n);return{user:{id:n.sub,name:n.preferred_username,email:n.email,image:n.picture,emailVerified:n.email_verified,...i},data:n}},options:e}),twitter:e=>({id:"twitter",name:"Twitter",createAuthorizationURL(t){let r=e.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return e.scope&&r.push(...e.scope),t.scopes&&r.push(...t.scopes),eA({id:"twitter",options:e,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:r,state:t.state,codeVerifier:t.codeVerifier,redirectURI:t.redirectURI})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>eT({code:t,codeVerifier:r,authentication:"basic",redirectURI:n,options:e,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let{data:i,error:a}=await R("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}}),o=!1;!a&&i?.data?.confirmed_email&&(r.data.email=i.data.confirmed_email,o=!0);let s=await e.mapProfileToUser?.(r);return{user:{id:r.data.id,name:r.data.name,email:r.data.email||r.data.username||null,image:r.data.profile_image_url,emailVerified:o,...s},data:r}},options:e}),dropbox:e=>({id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:t,scopes:r,codeVerifier:n,redirectURI:i})=>{let a=e.disableDefaultScope?[]:["account_info.read"];e.scope&&a.push(...e.scope),r&&a.push(...r);let o={};return e.accessType&&(o.token_access_type=e.accessType),await eA({id:"dropbox",options:e,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:a,state:t,redirectURI:i,codeVerifier:n,additionalParams:o})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>await eT({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.account_id,name:r.name?.display_name,email:r.email,emailVerified:r.email_verified||!1,image:r.profile_photo_url,...i},data:r}},options:e}),kick:e=>({id:"kick",name:"Kick",createAuthorizationURL({state:t,scopes:r,redirectURI:n,codeVerifier:i}){let a=e.disableDefaultScope?[]:["user:read"];return e.scope&&a.push(...e.scope),r&&a.push(...r),eA({id:"kick",redirectURI:n,options:e,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:a,codeVerifier:i,state:t})},validateAuthorizationCode:async({code:t,redirectURI:r,codeVerifier:n})=>eT({code:t,redirectURI:r,options:e,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:n}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=r.data[0],a=await e.mapProfileToUser?.(i);return{user:{id:i.user_id,name:i.name,email:i.email,image:i.profile_picture,emailVerified:!0,...a},data:i}},options:e}),linear:e=>{let t="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:t,scopes:r,loginHint:n,redirectURI:i}){let a=e.disableDefaultScope?[]:["read"];return e.scope&&a.push(...e.scope),r&&a.push(...r),eA({id:"linear",options:e,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:a,state:t,redirectURI:i,loginHint:n})},validateAuthorizationCode:async({code:r,redirectURI:n})=>eT({code:r,redirectURI:n,options:e,tokenEndpoint:t}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>eO({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:t}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(n||!r?.data?.viewer)return null;let i=r.data.viewer,a=await e.mapProfileToUser?.(i);return{user:{id:r.data.viewer.id,name:r.data.viewer.name,email:r.data.viewer.email,image:r.data.viewer.avatarUrl,emailVerified:!0,...a},data:i}},options:e}},linkedin:e=>{let t="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:t,scopes:r,redirectURI:n,loginHint:i})=>{let a=e.disableDefaultScope?[]:["profile","email","openid"];return e.scope&&a.push(...e.scope),r&&a.push(...r),await eA({id:"linkedin",options:e,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:a,state:t,loginHint:i,redirectURI:n})},validateAuthorizationCode:async({code:r,redirectURI:n})=>await eT({code:r,redirectURI:n,options:e,tokenEndpoint:t}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>eO({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:t}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,emailVerified:r.email_verified||!1,image:r.picture,...i},data:r}},options:e}},gitlab:e=>{let t,{authorizationEndpoint:r,tokenEndpoint:n,userinfoEndpoint:i}=(t=e.issuer||"https://gitlab.com",{authorizationEndpoint:tr(`${t}/oauth/authorize`),tokenEndpoint:tr(`${t}/oauth/token`),userinfoEndpoint:tr(`${t}/api/v4/user`)}),a="gitlab";return{id:a,name:"Gitlab",createAuthorizationURL:async({state:t,scopes:n,codeVerifier:i,loginHint:o,redirectURI:s})=>{let l=e.disableDefaultScope?[]:["read_user"];return e.scope&&l.push(...e.scope),n&&l.push(...n),await eA({id:a,options:e,authorizationEndpoint:r,scopes:l,state:t,redirectURI:s,codeVerifier:i,loginHint:o})},validateAuthorizationCode:async({code:t,redirectURI:r,codeVerifier:i})=>eT({code:t,redirectURI:r,options:e,codeVerifier:i,tokenEndpoint:n}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:n}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R(i,{headers:{authorization:`Bearer ${t.accessToken}`}});if(n||"active"!==r.state||r.locked)return null;let a=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name??r.username,email:r.email,image:r.avatar_url,emailVerified:!0,...a},data:r}},options:e}},tiktok:e=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["user.info.profile"];return e.scope&&i.push(...e.scope),r&&i.push(...r),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${i.join(",")}&response_type=code&client_key=${e.clientKey}&redirect_uri=${encodeURIComponent(e.redirectURI||n)}&state=${t}`)},validateAuthorizationCode:async({code:t,redirectURI:r})=>eT({code:t,redirectURI:e.redirectURI||r,options:{clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientSecret:e.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:e.clientKey}}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://open.tiktokapis.com/v2/user/info/?fields=open_id,avatar_large_url,display_name,username",{headers:{authorization:`Bearer ${t.accessToken}`}});return n?null:{user:{email:r.data.user.email||r.data.user.username,id:r.data.user.open_id,name:r.data.user.display_name||r.data.user.username,image:r.data.user.avatar_large_url,emailVerified:!!r.data.user.email},data:r}},options:e}),reddit:e=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["identity"];return e.scope&&i.push(...e.scope),r&&i.push(...r),eA({id:"reddit",options:e,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:i,state:t,redirectURI:n,duration:e.duration})},validateAuthorizationCode:async({code:t,redirectURI:r})=>{let n=new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:e.redirectURI||r}),i={"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${u.base64.encode(`${e.clientId}:${e.clientSecret}`)}`},{data:a,error:o}=await R("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:i,body:n.toString()});if(o)throw o;return e$(a)},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${t.accessToken}`,"User-Agent":"better-auth"}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name,email:r.oauth_client_id,emailVerified:r.has_verified_email,image:r.icon_img?.split("?")[0],...i},data:r}},options:e}),roblox:e=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["openid","profile"];return e.scope&&i.push(...e.scope),r&&i.push(...r),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${i.join("+")}&response_type=code&client_id=${e.clientId}&redirect_uri=${encodeURIComponent(e.redirectURI||n)}&state=${t}&prompt=${e.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:t,redirectURI:r})=>eT({code:t,redirectURI:e.redirectURI||r,options:e,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${t.accessToken}`}});if(n)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.nickname||r.preferred_username||"",image:r.picture,email:r.preferred_username||null,emailVerified:!0,...i},data:{...r}}},options:e}),salesforce:e=>{let t="sandbox"===(e.environment??"production"),r=e.loginUrl?`https://${e.loginUrl}/services/oauth2/authorize`:t?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",n=e.loginUrl?`https://${e.loginUrl}/services/oauth2/token`:t?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",i=e.loginUrl?`https://${e.loginUrl}/services/oauth2/userinfo`:t?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:t,scopes:n,codeVerifier:i,redirectURI:a}){if(!e.clientId||!e.clientSecret)throw ej.logger.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new eD.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new eD.BetterAuthError("codeVerifier is required for Salesforce");let o=e.disableDefaultScope?[]:["openid","email","profile"];return e.scope&&o.push(...e.scope),n&&o.push(...n),eA({id:"salesforce",options:e,authorizationEndpoint:r,scopes:o,state:t,codeVerifier:i,redirectURI:e.redirectURI||a})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>eT({code:t,codeVerifier:r,redirectURI:e.redirectURI||i,options:e,tokenEndpoint:n}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:n}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);try{let{data:r}=await R(i,{headers:{Authorization:`Bearer ${t.accessToken}`}});if(!r)return ej.logger.error("Failed to fetch user info from Salesforce"),null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.user_id,name:r.name,email:r.email,image:r.photos?.picture||r.photos?.thumbnail,emailVerified:r.email_verified??!1,...n},data:r}}catch(e){return ej.logger.error("Failed to fetch user info from Salesforce:",e),null}},options:e}},vk:e=>({id:"vk",name:"VK",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i}){let a=e.disableDefaultScope?[]:["email","phone"];return e.scope&&a.push(...e.scope),r&&a.push(...r),eA({id:"vk",options:e,authorizationEndpoint:"https://id.vk.com/authorize",scopes:a,state:t,redirectURI:i,codeVerifier:n})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n,deviceId:i})=>eT({code:t,codeVerifier:r,redirectURI:e.redirectURI||n,options:e,deviceId:i,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.accessToken)return null;let r=new URLSearchParams({access_token:t.accessToken,client_id:e.clientId}).toString(),{data:n,error:i}=await R("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(i||!n.user.email)return null;let a=await e.mapProfileToUser?.(n);return{user:{id:n.user.user_id,first_name:n.user.first_name,last_name:n.user.last_name,email:n.user.email,image:n.user.avatar,emailVerified:!!n.user.email,birthday:n.user.birthday,sex:n.user.sex,name:`${n.user.first_name} ${n.user.last_name}`,...a},data:n}},options:e}),zoom:e=>{let t={pkce:!0,...e};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:e,redirectURI:r,codeVerifier:n})=>{let i=new URLSearchParams({response_type:"code",redirect_uri:t.redirectURI?t.redirectURI:r,client_id:t.clientId,state:e});if(t.pkce){let e=await ek(n);i.set("code_challenge_method","S256"),i.set("code_challenge",e)}let a=new URL("https://zoom.us/oauth/authorize");return a.search=i.toString(),a},validateAuthorizationCode:async({code:e,redirectURI:r,codeVerifier:n})=>eT({code:e,redirectURI:t.redirectURI||r,codeVerifier:n,options:t,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:n}=await R("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${e.accessToken}`}});if(n)return null;let i=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.display_name,image:r.pic_url,email:r.email,emailVerified:!!r.verified,...i},data:{...r}}}}},notion:e=>{let t="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:t,scopes:r,loginHint:n,redirectURI:i}){let a=(e.disableDefaultScope,[]);return e.scope&&a.push(...e.scope),r&&a.push(...r),eA({id:"notion",options:e,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:a,state:t,redirectURI:i,loginHint:n,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:r,redirectURI:n})=>eT({code:r,redirectURI:n,options:e,tokenEndpoint:t,authentication:"basic"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>eO({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:t}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${t.accessToken}`,"Notion-Version":"2022-06-28"}});if(n||!r)return null;let i=r.bot?.owner?.user;if(!i)return null;let a=await e.mapProfileToUser?.(i);return{user:{id:i.id,name:i.name||"Notion User",email:i.person?.email||null,image:i.avatar_url,emailVerified:!!i.person?.email,...a},data:i}},options:e}},kakao:e=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return e.scope&&i.push(...e.scope),r&&i.push(...r),eA({id:"kakao",options:e,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:i,state:t,redirectURI:n})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eT({code:t,redirectURI:r,options:e,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(n||!r)return null;let i=await e.mapProfileToUser?.(r),a=r.kakao_account||{},o=a.profile||{};return{user:{id:String(r.id),name:o.nickname||a.name||void 0,email:a.email,image:o.profile_image_url||o.thumbnail_image_url,emailVerified:!!a.is_email_valid&&!!a.is_email_verified,...i},data:r}},options:e}),naver:e=>({id:"naver",name:"Naver",createAuthorizationURL({state:t,scopes:r,redirectURI:n}){let i=e.disableDefaultScope?[]:["profile","email"];return e.scope&&i.push(...e.scope),r&&i.push(...r),eA({id:"naver",options:e,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:i,state:t,redirectURI:n})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eT({code:t,redirectURI:r,options:e,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eO({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await R("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(n||!r||"00"!==r.resultcode)return null;let i=await e.mapProfileToUser?.(r),a=r.response||{};return{user:{id:a.id,name:a.name||a.nickname,email:a.email,image:a.profile_image,emailVerified:!1,...i},data:r}},options:e}),line:e=>{let t="https://api.line.me/oauth2/v2.1/token";return{id:"line",name:"LINE",async createAuthorizationURL({state:t,scopes:r,codeVerifier:n,redirectURI:i,loginHint:a}){let o=e.disableDefaultScope?[]:["openid","profile","email"];return e.scope&&o.push(...e.scope),r&&o.push(...r),await eA({id:"line",options:e,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:o,state:t,codeVerifier:n,redirectURI:i,loginHint:a})},validateAuthorizationCode:async({code:r,codeVerifier:n,redirectURI:i})=>eT({code:r,codeVerifier:n,redirectURI:i,options:e,tokenEndpoint:t}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>eO({refreshToken:r,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:t}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);let n=new URLSearchParams;n.set("id_token",t),n.set("client_id",e.clientId),r&&n.set("nonce",r);let{data:i,error:a}=await R("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:n});return!a&&!!i&&i.aud===e.clientId&&(!r||!i.nonce||i.nonce===r)},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let r=null;if(t.idToken)try{r=eY(t.idToken)}catch{}if(!r){let{data:e}=await R("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${t.accessToken}`}});r=e||null}if(!r)return null;let n=await e.mapProfileToUser?.(r),i=r.sub||r.userId,a=r.name||r.displayName,o=r.picture||r.pictureUrl||void 0;return{user:{id:i,name:a,email:r.email,image:o,emailVerified:!1,...n},data:r}},options:e}},paypal:e=>{let t="sandbox"===(e.environment||"sandbox"),r=t?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",n=t?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",i=t?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:t,codeVerifier:n,redirectURI:i}){if(!e.clientId||!e.clientSecret)throw ej.logger.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new eD.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");return await eA({id:"paypal",options:e,authorizationEndpoint:r,scopes:[],state:t,codeVerifier:n,redirectURI:i,prompt:e.prompt})},validateAuthorizationCode:async({code:t,redirectURI:r})=>{let i=u.base64.encode(`${e.clientId}:${e.clientSecret}`);try{let e=await R(n,{method:"POST",headers:{Authorization:`Basic ${i}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:r}).toString()});if(!e.data)throw new eD.BetterAuthError("FAILED_TO_GET_ACCESS_TOKEN");let a=e.data;return{accessToken:a.access_token,refreshToken:a.refresh_token,accessTokenExpiresAt:a.expires_in?new Date(Date.now()+1e3*a.expires_in):void 0,idToken:a.id_token}}catch(e){throw ej.logger.error("PayPal token exchange failed:",e),new eD.BetterAuthError("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>{let r=u.base64.encode(`${e.clientId}:${e.clientSecret}`);try{let e=await R(n,{method:"POST",headers:{Authorization:`Basic ${r}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:t}).toString()});if(!e.data)throw new eD.BetterAuthError("FAILED_TO_REFRESH_ACCESS_TOKEN");let i=e.data;return{accessToken:i.access_token,refreshToken:i.refresh_token,accessTokenExpiresAt:i.expires_in?new Date(Date.now()+1e3*i.expires_in):void 0}}catch(e){throw ej.logger.error("PayPal token refresh failed:",e),new eD.BetterAuthError("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);try{return!!eY(t).sub}catch(e){return ej.logger.error("Failed to verify PayPal ID token:",e),!1}},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.accessToken)return ej.logger.error("Access token is required to fetch PayPal user info"),null;try{let r=await R(`${i}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${t.accessToken}`,Accept:"application/json"}});if(!r.data)return ej.logger.error("Failed to fetch user info from PayPal"),null;let n=r.data,a=await e.mapProfileToUser?.(n);return{user:{id:n.user_id,name:n.name,email:n.email,image:n.picture,emailVerified:n.email_verified,...a},data:n}}catch(e){return ej.logger.error("Failed to fetch user info from PayPal:",e),null}},options:e}}},ti=Object.keys(tn),ta=eU.enum(ti).or(eU.string());e.s(["SocialProviderListEnum",()=>ta,"socialProviders",()=>tn],7117);let to=eU.optional(eU.object({disableCookieCache:eP.coerce.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:eP.coerce.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()})),ts=()=>(0,eQ.createAuthEndpoint)("/get-session",{method:"GET",query:to,requireHeaders:!0,metadata:{openapi:{description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async e=>{try{let t=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(!t)return null;let r=e.getCookie(e.context.authCookies.sessionData.name),n=r?(0,eL.s)(eF.binary.decode(u.base64Url.decode(r))):null;if(n&&!await (0,ez.createHMAC)("SHA-256","base64urlnopad").verify(e.context.secret,JSON.stringify({...n.session,expiresAt:n.expiresAt}),n.signature)){let t=e.context.authCookies.sessionData.name;return e.setCookie(t,"",{maxAge:0}),e.json(null)}let i=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);if(n?.session&&e.context.options.session?.cookieCache?.enabled&&!e.query?.disableCookieCache){let t=n.session;if(!(n.expiresAt<Date.now()||t.session.expiresAt<new Date))return e.context.session=t,e.json(t);{let t=e.context.authCookies.sessionData.name;e.setCookie(t,"",{maxAge:0})}}let a=await e.context.internalAdapter.findSession(t);if(e.context.session=a,!a||a.session.expiresAt<new Date)return eJ(e),a&&await e.context.internalAdapter.deleteSession(a.session.token),e.json(null);if(i||e.query?.disableRefresh)return e.json(a);let o=e.context.sessionConfig.expiresIn,s=e.context.sessionConfig.updateAge;if(a.session.expiresAt.valueOf()-1e3*o+1e3*s<=Date.now()&&(!e.query?.disableRefresh||!e.context.options.session?.disableSessionRefresh)){let t=await e.context.internalAdapter.updateSession(a.session.token,{expiresAt:eC(e.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!t)return eJ(e),e.json(null,{status:401});let r=(t.expiresAt.valueOf()-Date.now())/1e3;return await eG(e,{session:t,user:a.user},!1,{maxAge:r}),e.json({session:t,user:a.user})}return await eK(e,a,!!i),e.json(a)}catch(t){throw e.context.logger.error("INTERNAL_SERVER_ERROR",t),new eR.APIError("INTERNAL_SERVER_ERROR",{message:eD.BASE_ERROR_CODES.FAILED_TO_GET_SESSION})}}),tl=async(e,t)=>{if(e.context.session)return e.context.session;let r=await ts()({...e,asResponse:!1,headers:e.headers,returnHeaders:!1,query:{...t,...e.query}}).catch(e=>null);return e.context.session=r,r},tu=(0,eQ.createAuthMiddleware)(async e=>{let t=await tl(e);if(!t?.session)throw new eR.APIError("UNAUTHORIZED");return{session:t}}),tc=(0,eQ.createAuthMiddleware)(async e=>{let t=await tl(e,{disableCookieCache:!0});if(!t?.session)throw new eR.APIError("UNAUTHORIZED");return{session:t}});(0,eQ.createAuthMiddleware)(async e=>{let t=await tl(e);if(!t?.session&&(e.request||e.headers))throw new eR.APIError("UNAUTHORIZED");return{session:t}});let td=(0,eQ.createAuthMiddleware)(async e=>{let t=await tl(e);if(!t?.session)throw new eR.APIError("UNAUTHORIZED");if(0===e.context.sessionConfig.freshAge)return{session:t};let r=e.context.sessionConfig.freshAge,n=t.session.updatedAt?.valueOf()||t.session.createdAt.valueOf();if(!(Date.now()-n<1e3*r))throw new eR.APIError("FORBIDDEN",{message:"Session is not fresh"});return{session:t}}),tp=()=>(0,eQ.createAuthEndpoint)("/list-sessions",{method:"GET",use:[tu],requireHeaders:!0,metadata:{openapi:{description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async e=>{try{let t=(await e.context.internalAdapter.listSessions(e.context.session.user.id)).filter(e=>e.expiresAt>new Date);return e.json(t)}catch(t){throw e.context.logger.error(t),e.error("INTERNAL_SERVER_ERROR")}}),tf=(0,eQ.createAuthEndpoint)("/revoke-session",{method:"POST",body:eU.object({token:eU.string().meta({description:"The token to revoke"})}),use:[tc],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async e=>{let t=e.body.token,r=await e.context.internalAdapter.findSession(t);if(!r)throw new eR.APIError("BAD_REQUEST",{message:"Session not found"});if(r.session.userId!==e.context.session.user.id)throw new eR.APIError("UNAUTHORIZED");try{await e.context.internalAdapter.deleteSession(t)}catch(t){throw e.context.logger.error(t&&"object"==typeof t&&"name"in t?t.name:"",t),new eR.APIError("INTERNAL_SERVER_ERROR")}return e.json({status:!0})}),tm=(0,eQ.createAuthEndpoint)("/revoke-sessions",{method:"POST",use:[tc],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async e=>{try{await e.context.internalAdapter.deleteSessions(e.context.session.user.id)}catch(t){throw e.context.logger.error(t&&"object"==typeof t&&"name"in t?t.name:"",t),new eR.APIError("INTERNAL_SERVER_ERROR")}return e.json({status:!0})}),th=(0,eQ.createAuthEndpoint)("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[tc],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async e=>{let t=e.context.session;if(!t.user)throw new eR.APIError("UNAUTHORIZED");let r=(await e.context.internalAdapter.listSessions(t.user.id)).filter(e=>e.expiresAt>new Date).filter(t=>t.token!==e.context.session.session.token);return await Promise.all(r.map(t=>e.context.internalAdapter.deleteSession(t.token))),e.json({status:!0})});e.s(["a",()=>ts,"b",()=>tm,"c",()=>tf,"e",()=>tc,"f",()=>td,"g",()=>tl,"l",()=>tp,"r",()=>th,"s",()=>tu],52633);var tg=e.i(93139),ty=e.i(31668),tv=e.i(42293),tb=e.i(24965);let tw=new WeakMap;function t_(e,t){let r=t.fields,n={};for(let t in e){let i=r[t];if(!i){n[t]=e[t];continue}!1!==i.returned&&(n[t]=e[t])}return n}function tx(e,t){tw.has(e)||tw.set(e,new Map);let r=tw.get(e);if(r.has(t))return r.get(t);let n={..."user"===t?e.user?.additionalFields:{},..."session"===t?e.session?.additionalFields:{}};for(let r of e.plugins||[])r.schema&&r.schema[t]&&(n={...n,...r.schema[t].fields});return tw.get(e).set(t,n),n}function tE(e,t){return t_(t,{fields:tx(e,"user")})}function tI(e,t){return t_(t,{fields:tx(e,"session")})}function tS(e,t={},r){return function(e,t){let r=t.action||"create",n=t.fields,i=Object.assign(Object.create(null),null);for(let t in n){if(t in e){if(!1===n[t].input){if(void 0!==n[t].defaultValue&&"update"!==r){i[t]=n[t].defaultValue;continue}if(e[t])throw new eR.APIError("BAD_REQUEST",{message:`${t} is not allowed to be set`});continue}if(n[t].validator?.input&&void 0!==e[t]){i[t]=n[t].validator.input.parse(e[t]);continue}if(n[t].transform?.input&&void 0!==e[t]){i[t]=n[t].transform?.input(e[t]);continue}i[t]=e[t];continue}if(void 0!==n[t].defaultValue&&"create"===r){i[t]=n[t].defaultValue;continue}if(n[t].required&&"create"===r)throw new eR.APIError("BAD_REQUEST",{message:`${t} is required`})}return i}(t,{fields:tx(e,"user"),action:r})}e.s(["b",()=>tI,"d",()=>tS,"p",()=>tE],10465);let t$=eU.object({id:eU.string(),createdAt:eU.date().default(()=>new Date),updatedAt:eU.date().default(()=>new Date)});function tk(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e))}function tA(e){return(...t)=>t.reduce((t,r)=>(function e(t,r,n=".",i){if(!tk(r))return e(t,{},n,i);let a=Object.assign({},r);for(let r in t){if("__proto__"===r||"constructor"===r)continue;let o=t[r];null!=o&&(i&&i(a,r,o,n)||(Array.isArray(o)&&Array.isArray(a[r])?a[r]=[...o,...a[r]]:tk(o)&&tk(a[r])?a[r]=e(o,a[r],(n?`${n}.`:"")+r.toString(),i):a[r]=o))}return a})(t,r,"",e),{})}t$.extend({email:eU.string().transform(e=>e.toLowerCase()),emailVerified:eU.boolean().default(!1),name:eU.string(),image:eU.string().nullish()}),t$.extend({providerId:eU.string(),accountId:eU.string(),userId:eP.coerce.string(),accessToken:eU.string().nullish(),refreshToken:eU.string().nullish(),idToken:eU.string().nullish(),accessTokenExpiresAt:eU.date().nullish(),refreshTokenExpiresAt:eU.date().nullish(),scope:eU.string().nullish(),password:eU.string().nullish()}),t$.extend({userId:eP.coerce.string(),expiresAt:eU.date(),token:eU.string(),ipAddress:eU.string().nullish(),userAgent:eU.string().nullish()}),t$.extend({value:eU.string(),expiresAt:eU.date(),identifier:eU.string()}),eU.object({key:eU.string(),count:eU.number(),lastRequest:eU.number()}),e.s([],7834),e.i(21454);let tT=tA();function tO(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function tR(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function tN(e,t,r=""){let n=e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name,i=e?.length,a=void 0!==t;if(!n||a&&i!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(a?` of length ${t}`:"")+", got "+(n?`length=${i}`:`type=${typeof e}`));return e}function tP(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function tU(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function tD(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}tA((e,t,r)=>{if(void 0!==e[t]&&"function"==typeof r)return e[t]=r(e[t]),!0}),tA((e,t,r)=>{if(Array.isArray(e[t])&&"function"==typeof r)return e[t]=r(e[t]),!0}),e.s(["createDefu",()=>tA,"defu",()=>tT],80338);let tC=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],tj="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,tz=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tL(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function tZ(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error('"output" expected Uint8Array of length '+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function tM(e){return Uint8Array.from(e)}function tq(e=32){let t="object"==typeof globalThis?globalThis.crypto:null;if("function"!=typeof t?.getRandomValues)throw Error("crypto.getRandomValues must be defined");return t.getRandomValues(new Uint8Array(e))}function tV(e,t=tq){let{nonceLength:r}=e;tR(r);let n=(e,t)=>{let r=function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];tN(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}(e,t);return t.fill(0),r};return(i,...a)=>({encrypt(o){tN(o);let s=t(r),l=e(i,s,...a).encrypt(o);return l instanceof Promise?l.then(e=>n(s,e)):n(s,l)},decrypt(t){tN(t);let n=t.subarray(0,r),o=t.subarray(r);return e(i,n,...a).decrypt(o)}})}let tB=e=>Uint8Array.from(e.split(""),e=>e.charCodeAt(0)),tF=tB("expand 16-byte k"),tW=tB("expand 32-byte k"),tH=tU(tF),tK=tU(tW);function tG(e,t){return e<<t|e>>>32-t}function tJ(e){return e.byteOffset%4==0}let tQ=0x100000000-1,tX=Uint32Array.of();function tY(e,t){let{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:a,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return tR(i),tR(o),tO(a),tO(r),(t,s,l,u,c=0)=>{let d,p;tN(t,void 0,"key"),tN(s,void 0,"nonce"),tN(l,void 0,"data");let f=l.length;if(void 0===u&&(u=new Uint8Array(f)),tN(u,void 0,"output"),tR(c),c<0||c>=tQ)throw Error("arx: counter overflow");if(u.length<f)throw Error(`arx: output (${u.length}) is shorter than data (${f})`);let m=[],h=t.length;if(32===h)m.push(d=tM(t)),p=tK;else if(16===h&&r)(d=new Uint8Array(32)).set(t),d.set(t,16),p=tH,m.push(d);else throw tN(t,32,"arx key"),Error("invalid key size");tJ(s)||m.push(s=tM(s));let g=tU(d);if(n){if(24!==s.length)throw Error("arx: extended nonce must be 24 bytes");n(p,g,tU(s.subarray(0,16)),g),s=s.subarray(16)}let y=16-i;if(y!==s.length)throw Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){let e=new Uint8Array(12);e.set(s,a?0:12-s.length),s=e,m.push(s)}return!function(e,t,r,n,i,a,o,s){let l=i.length,u=new Uint8Array(64),c=tU(u),d=tJ(i)&&tJ(a),p=d?tU(i):tX,f=d?tU(a):tX;for(let m=0;m<l;o++){if(e(t,r,n,c,o,s),o>=tQ)throw Error("arx: counter overflow");let h=Math.min(64,l-m);if(d&&64===h){let e=m/4;if(m%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)f[r=e+t]=p[r]^c[t];m+=64;continue}for(let e=0,t;e<h;e++)a[t=m+e]=i[t]^u[e];m+=h}}(e,p,g,tU(s),l,u,c,o),tD(...m),u}}function t0(e,t){return 255&e[t++]|(255&e[t++])<<8}class t1{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(e){const t=t0(e=tM(tN(e,32,"key")),0),r=t0(e,2),n=t0(e,4),i=t0(e,6),a=t0(e,8),o=t0(e,10),s=t0(e,12),l=t0(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|n<<6)&7939,this.r[3]=(n>>>7|i<<9)&8191,this.r[4]=(i>>>4|a<<12)&255,this.r[5]=a>>>1&8190,this.r[6]=(a>>>14|o<<2)&8191,this.r[7]=(o>>>11|s<<5)&8065,this.r[8]=(s>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=t0(e,16+2*t)}process(e,t,r=!1){let{h:n,r:i}=this,a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],c=i[5],d=i[6],p=i[7],f=i[8],m=i[9],h=t0(e,t+0),g=t0(e,t+2),y=t0(e,t+4),v=t0(e,t+6),b=t0(e,t+8),w=t0(e,t+10),_=t0(e,t+12),x=t0(e,t+14),E=n[0]+(8191&h),I=n[1]+((h>>>13|g<<3)&8191),S=n[2]+((g>>>10|y<<6)&8191),$=n[3]+((y>>>7|v<<9)&8191),k=n[4]+((v>>>4|b<<12)&8191),A=n[5]+(b>>>1&8191),T=n[6]+((b>>>14|w<<2)&8191),O=n[7]+((w>>>11|_<<5)&8191),R=n[8]+((_>>>8|x<<8)&8191),N=n[9]+(x>>>5|2048*!r),P=0,U=0+E*a+5*m*I+5*f*S+5*p*$+5*d*k;P=U>>>13,U&=8191,U+=5*c*A+5*u*T+5*l*O+5*s*R+5*o*N,P+=U>>>13,U&=8191;let D=P+E*o+I*a+5*m*S+5*f*$+5*p*k;P=D>>>13,D&=8191,D+=5*d*A+5*c*T+5*u*O+5*l*R+5*s*N,P+=D>>>13,D&=8191;let C=P+E*s+I*o+S*a+5*m*$+5*f*k;P=C>>>13,C&=8191,C+=5*p*A+5*d*T+5*c*O+5*u*R+5*l*N,P+=C>>>13,C&=8191;let j=P+E*l+I*s+S*o+$*a+5*m*k;P=j>>>13,j&=8191,j+=5*f*A+5*p*T+5*d*O+5*c*R+5*u*N,P+=j>>>13,j&=8191;let z=P+E*u+I*l+S*s+$*o+k*a;P=z>>>13,z&=8191,z+=5*m*A+5*f*T+5*p*O+5*d*R+5*c*N,P+=z>>>13,z&=8191;let L=P+E*c+I*u+S*l+$*s+k*o;P=L>>>13,L&=8191,L+=A*a+5*m*T+5*f*O+5*p*R+5*d*N,P+=L>>>13,L&=8191;let Z=P+E*d+I*c+S*u+$*l+k*s;P=Z>>>13,Z&=8191,Z+=A*o+T*a+5*m*O+5*f*R+5*p*N,P+=Z>>>13,Z&=8191;let M=P+E*p+I*d+S*c+$*u+k*l;P=M>>>13,M&=8191,M+=A*s+T*o+O*a+5*m*R+5*f*N,P+=M>>>13,M&=8191;let q=P+E*f+I*p+S*d+$*c+k*u;P=q>>>13,q&=8191,q+=A*l+T*s+O*o+R*a+5*m*N,P+=q>>>13,q&=8191;let V=P+E*m+I*f+S*p+$*d+k*c;P=V>>>13,V&=8191,V+=A*u+T*l+O*s+R*o+N*a,P+=V>>>13,V&=8191,U=8191&(P=(P=(P<<2)+P|0)+U|0),P>>>=13,D+=P,n[0]=U,n[1]=D,n[2]=C,n[3]=j,n[4]=z,n[5]=L,n[6]=Z,n[7]=M,n[8]=q,n[9]=V}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let a=e[0]+t[0];e[0]=65535&a;for(let r=1;r<8;r++)a=(e[r]+t[r]|0)+(a>>>16)|0,e[r]=65535&a;tD(r)}update(e){tP(this),tN(e);let{buffer:t,blockLen:r}=this,n=(e=tM(e)).length;for(let i=0;i<n;){let a=Math.min(r-this.pos,n-i);if(a===r){for(;r<=n-i;i+=r)this.process(e,i);continue}t.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){tD(this.h,this.r,this.buffer,this.pad)}digestInto(e){tP(this);tN(e,void 0,"output");let t=this.outputLen;if(e.length<t)throw Error("digestInto() expects output buffer of length at least "+t);this.finished=!0;let{buffer:r,h:n}=this,{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let a=0;for(let t=0;t<8;t++)e[a++]=n[t]>>>0,e[a++]=n[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let t4=(l=e=>new t1(e),(o=(e,t)=>l(t).update(e).digest()).outputLen=(s=l(new Uint8Array(32))).outputLen,o.blockLen=s.blockLen,o.create=e=>l(e),o);function t6(e,t,r,n,i,a=20){let o=e[0],s=e[1],l=e[2],u=e[3],c=t[0],d=t[1],p=t[2],f=t[3],m=t[4],h=t[5],g=t[6],y=t[7],v=r[0],b=r[1],w=r[2],_=o,x=s,E=l,I=u,S=c,$=d,k=p,A=f,T=m,O=h,R=g,N=y,P=i,U=v,D=b,C=w;for(let e=0;e<a;e+=2)T=T+(P=tG(P^(_=_+S|0),16))|0,_=_+(S=tG(S^T,12))|0,T=T+(P=tG(P^_,8))|0,S=tG(S^T,7),O=O+(U=tG(U^(x=x+$|0),16))|0,x=x+($=tG($^O,12))|0,O=O+(U=tG(U^x,8))|0,$=tG($^O,7),R=R+(D=tG(D^(E=E+k|0),16))|0,E=E+(k=tG(k^R,12))|0,R=R+(D=tG(D^E,8))|0,k=tG(k^R,7),N=N+(C=tG(C^(I=I+A|0),16))|0,I=I+(A=tG(A^N,12))|0,N=N+(C=tG(C^I,8))|0,A=tG(A^N,7),R=R+(C=tG(C^(_=_+$|0),16))|0,_=_+($=tG($^R,12))|0,R=R+(C=tG(C^_,8))|0,$=tG($^R,7),N=N+(P=tG(P^(x=x+k|0),16))|0,x=x+(k=tG(k^N,12))|0,N=N+(P=tG(P^x,8))|0,k=tG(k^N,7),T=T+(U=tG(U^(E=E+A|0),16))|0,E=E+(A=tG(A^T,12))|0,T=T+(U=tG(U^E,8))|0,A=tG(A^T,7),O=O+(D=tG(D^(I=I+S|0),16))|0,I=I+(S=tG(S^O,12))|0,O=O+(D=tG(D^I,8))|0,S=tG(S^O,7);let j=0;n[j++]=o+_|0,n[j++]=s+x|0,n[j++]=l+E|0,n[j++]=u+I|0,n[j++]=c+S|0,n[j++]=d+$|0,n[j++]=p+k|0,n[j++]=f+A|0,n[j++]=m+T|0,n[j++]=h+O|0,n[j++]=g+R|0,n[j++]=y+N|0,n[j++]=i+P|0,n[j++]=v+U|0,n[j++]=b+D|0,n[j++]=w+C|0}let t2=tY(t6,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t3=tY(t6,{counterRight:!1,counterLength:8,extendNonceFn:function(e,t,r,n){let i=e[0],a=e[1],o=e[2],s=e[3],l=t[0],u=t[1],c=t[2],d=t[3],p=t[4],f=t[5],m=t[6],h=t[7],g=r[0],y=r[1],v=r[2],b=r[3];for(let e=0;e<20;e+=2)p=p+(g=tG(g^(i=i+l|0),16))|0,i=i+(l=tG(l^p,12))|0,p=p+(g=tG(g^i,8))|0,l=tG(l^p,7),f=f+(y=tG(y^(a=a+u|0),16))|0,a=a+(u=tG(u^f,12))|0,f=f+(y=tG(y^a,8))|0,u=tG(u^f,7),m=m+(v=tG(v^(o=o+c|0),16))|0,o=o+(c=tG(c^m,12))|0,m=m+(v=tG(v^o,8))|0,c=tG(c^m,7),h=h+(b=tG(b^(s=s+d|0),16))|0,s=s+(d=tG(d^h,12))|0,h=h+(b=tG(b^s,8))|0,d=tG(d^h,7),m=m+(b=tG(b^(i=i+u|0),16))|0,i=i+(u=tG(u^m,12))|0,m=m+(b=tG(b^i,8))|0,u=tG(u^m,7),h=h+(g=tG(g^(a=a+c|0),16))|0,a=a+(c=tG(c^h,12))|0,h=h+(g=tG(g^a,8))|0,c=tG(c^h,7),p=p+(y=tG(y^(o=o+d|0),16))|0,o=o+(d=tG(d^p,12))|0,p=p+(y=tG(y^o,8))|0,d=tG(d^p,7),f=f+(v=tG(v^(s=s+l|0),16))|0,s=s+(l=tG(l^f,12))|0,f=f+(v=tG(v^s,8))|0,l=tG(l^f,7);let w=0;n[w++]=i,n[w++]=a,n[w++]=o,n[w++]=s,n[w++]=g,n[w++]=y,n[w++]=v,n[w++]=b},allowShortKeys:!1}),t9=new Uint8Array(16),t8=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(t9.subarray(r))},t5=new Uint8Array(32);function t7(e,t,r,n,i){var a,o;let s,l;void 0!==i&&tN(i,void 0,"AAD");let u=e(t,r,t5),c=(a=n.length,o=i?i.length:0,tO(!0),(l=new DataView((s=new Uint8Array(16)).buffer,s.byteOffset,s.byteLength)).setBigUint64(0,BigInt(o),!0),l.setBigUint64(8,BigInt(a),!0),s),d=t4.create(u);i&&t8(d,i),t8(d,n),d.update(c);let p=d.digest();return tD(u,c),p}let re=e=>(t,r,n)=>({encrypt(i,a){let o=i.length;(a=tZ(o+16,a,!1)).set(i);let s=a.subarray(0,-16);e(t,r,s,s,1);let l=t7(e,t,r,s,n);return a.set(l,o),tD(l),a},decrypt(i,a){a=tZ(i.length-16,a,!1);let o=i.subarray(0,-16),s=i.subarray(-16),l=t7(e,t,r,o,n);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(s,l))throw Error("invalid tag");return a.set(i.subarray(0,-16)),e(t,r,a,a,1),tD(l),a}});re(t2);let rt=((e,t)=>{function r(n,...i){if(tN(n,void 0,"key"),!tC)throw Error("Non little-endian hardware is not yet supported");void 0!==e.nonceLength&&tN(i[0],e.varSizeNonce?void 0:e.nonceLength,"nonce");let a=e.tagLength;a&&void 0!==i[1]&&tN(i[1],void 0,"AAD");let o=t(n,...i),s=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");tN(t,void 0,"output")}},l=!1;return{encrypt(e,t){if(l)throw Error("cannot encrypt() twice with same key + nonce");return l=!0,tN(e),s(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(tN(e),a&&e.length<a)throw Error('"ciphertext" expected length bigger than tagLength='+a);return s(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:24,tagLength:16},re(t3));async function rr(e,t,r){let n=await er(e,t,"sign");return Q(e,n),new Uint8Array(await crypto.subtle.sign(J(e,n.algorithm),n,r))}class rn{#r;#h;#g;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#r=e}setProtectedHeader(e){if(this.#h)throw TypeError("setProtectedHeader can only be called once");return this.#h=e,this}setUnprotectedHeader(e){if(this.#g)throw TypeError("setUnprotectedHeader can only be called once");return this.#g=e,this}async sign(e,t){let r,n,i,a;if(!this.#h&&!this.#g)throw new V("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!ei(this.#h,this.#g))throw new V("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let o={...this.#h,...this.#g},s=ef(V,new Map([["b64",!0]]),t?.crit,this.#h,o),l=!0;if(s.has("b64")&&"boolean"!=typeof(l=this.#h.b64))throw new V('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:u}=o;if("string"!=typeof u||!u)throw new V('JWS "alg" (Algorithm) Header Parameter missing or invalid');ep(u,e,"sign"),l?n=D(r=j(this.#r)):(n=this.#r,r=""),this.#h?a=D(i=j(JSON.stringify(this.#h))):(i="",a=new Uint8Array);let c=U(a,D("."),n),d=await eg(e,u),p={signature:j(await rr(u,d,c)),payload:r};return this.#g&&(p.header=this.#g),this.#h&&(p.protected=i),p}}class ri{#y;constructor(e){this.#y=new rn(e)}setProtectedHeader(e){return this.#y.setProtectedHeader(e),this}async sign(e,t){let r=await this.#y.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class ra{#h;#v;constructor(e={}){this.#v=new eI(e)}setIssuer(e){return this.#v.iss=e,this}setSubject(e){return this.#v.sub=e,this}setAudience(e){return this.#v.aud=e,this}setJti(e){return this.#v.jti=e,this}setNotBefore(e){return this.#v.nbf=e,this}setExpirationTime(e){return this.#v.exp=e,this}setIssuedAt(e){return this.#v.iat=e,this}setProtectedHeader(e){return this.#h=e,this}async sign(e,t){let r=new ri(this.#v.data());if(r.setProtectedHeader(this.#h),Array.isArray(this.#h?.crit)&&this.#h.crit.includes("b64")&&!1===this.#h.b64)throw new B("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}function ro(e,t=""){if(!Number.isSafeInteger(e)||e<0){let r=t&&`"${t}" `;throw Error(`${r}expected integer >= 0, got ${e}`)}}function rs(e,t,r=""){let n=e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name,i=e?.length,a=void 0!==t;if(!n||a&&i!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(a?` of length ${t}`:"")+", got "+(n?`length=${i}`:`type=${typeof e}`));return e}function rl(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash must wrapped by utils.createHasher");ro(e.outputLen),ro(e.blockLen)}function ru(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function rc(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function rd(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function rp(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function rf(e,t){return e<<32-t|e>>>t}function rm(e,t){return e<<t|e>>>32-t>>>0}let rh=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?e=>e:function(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255}return e},rg="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex;function ry(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}let rv=async()=>{};async function rb(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let e=Date.now()-n;e>=0&&e<t||(await rv(),n+=e)}}function rw(e,t=""){if("string"==typeof e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}return rs(e,void 0,t)}function r_(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("options must be object or undefined");return Object.assign(e,t)}class rx{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,t){if(rl(e),rs(t,void 0,"key"),this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,n=new Uint8Array(r);n.set(t.length>r?e.create().update(t).digest():t);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),rd(n)}update(e){return ru(this),this.iHash.update(e),this}digestInto(e){ru(this),rs(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:a,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let rE=(e,t,r)=>new rx(e,t).update(r).digest();function rI(e,t,r,n){var i;let a,{c:o,dkLen:s,DK:l,PRF:u,PRFSalt:c}=function(e,t,r,n){rl(e);let{c:i,dkLen:a,asyncTick:o}=r_({dkLen:32,asyncTick:10},n);if(ro(i,"c"),ro(a,"dkLen"),ro(o,"asyncTick"),i<1)throw Error("iterations (c) must be >= 1");let s=rw(t,"password"),l=rw(r,"salt"),u=new Uint8Array(a),c=rE.create(e,s),d=c._cloneInto().update(l);return{c:i,dkLen:a,asyncTick:o,DK:u,PRF:c,PRFSalt:d}}(e,t,r,n),d=new Uint8Array(4),p=rp(d),f=new Uint8Array(u.outputLen);for(let e=1,t=0;t<s;e++,t+=u.outputLen){let r=l.subarray(t,t+u.outputLen);p.setInt32(0,e,!1),(a=c._cloneInto(a)).update(d).digestInto(f),r.set(f.subarray(0,r.length));for(let e=1;e<o;e++){u._cloneInto(a).update(f).digestInto(f);for(let e=0;e<r.length;e++)r[e]^=f[e]}}return i=a,u.destroy(),c.destroy(),i&&i.destroy(),rd(f),l}rE.create=(e,t)=>new rx(e,t);class rS{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,t,r,n){this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=rp(this.buffer)}update(e){ru(this),rs(e);let{view:t,buffer:r,blockLen:n}=this,i=e.length;for(let a=0;a<i;){let o=Math.min(n-this.pos,i-a);if(o===n){let t=rp(e);for(;n<=i-a;a+=n)this.process(t,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ru(this);rs(e,void 0,"digestInto() output");let t=this.outputLen;if(e.length<t)throw Error('"digestInto() output" expected to be of length >='+t);this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:a}=this,{pos:o}=this;r[o++]=128,rd(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let e=o;e<i;e++)r[e]=0;n.setBigUint64(i-8,BigInt(8*this.length),a),this.process(n,0);let s=rp(e),l=this.outputLen;if(l%4)throw Error("_sha2: outputLen must be aligned to 32bit");let u=l/4,c=this.get();if(u>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)s.setUint32(4*e,c[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){(e||=new this.constructor).set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:a,pos:o}=this;return e.destroyed=a,e.finished=i,e.length=n,e.pos=o,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let r$=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),rk=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),rA=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),rT=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),rO=BigInt(0x100000000-1),rR=BigInt(32),rN=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),rP=new Uint32Array(64);class rU extends rS{constructor(e){super(64,e,8,!1)}get(){let{A:e,B:t,C:r,D:n,E:i,F:a,G:o,H:s}=this;return[e,t,r,n,i,a,o,s]}set(e,t,r,n,i,a,o,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|o,this.H=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)rP[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=rP[e-15],r=rP[e-2],n=rf(t,7)^rf(t,18)^t>>>3,i=rf(r,17)^rf(r,19)^r>>>10;rP[e]=i+rP[e-7]+n+rP[e-16]|0}let{A:r,B:n,C:i,D:a,E:o,F:s,G:l,H:u}=this;for(let e=0;e<64;e++){var c,d,p,f;let t=u+(rf(o,6)^rf(o,11)^rf(o,25))+((c=o)&s^~c&l)+rN[e]+rP[e]|0,m=(rf(r,2)^rf(r,13)^rf(r,22))+((d=r)&(p=n)^d&(f=i)^p&f)|0;u=l,l=s,s=o,o=a+t|0,a=i,i=n,n=r,r=t+m|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,s=s+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,i,a,o,s,l,u)}roundClean(){rd(rP)}destroy(){this.set(0,0,0,0,0,0,0,0),rd(this.buffer)}}class rD extends rU{A=0|r$[0];B=0|r$[1];C=0|r$[2];D=0|r$[3];E=0|r$[4];F=0|r$[5];G=0|r$[6];H=0|r$[7];constructor(){super(32)}}let rC=function(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let a=0;a<r;a++){let{h:r,l:o}=function(e,t=!1){return t?{h:Number(e&rO),l:Number(e>>rR&rO)}:{h:0|Number(e>>rR&rO),l:0|Number(e&rO)}}(e[a],t);[n[a],i[a]]=[r,o]}return[n,i]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),rj=rC[0],rz=rC[1],rL=new Uint32Array(80),rZ=new Uint32Array(80),rM=function(e,t={}){let r=(t,r)=>e(r).update(t).digest(),n=e(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=t=>e(t),Object.assign(r,t),Object.freeze(r)}(()=>new rD,{oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,1])});function rq(e,t,r,n,i,a){let o=e[t++]^r[n++],s=e[t++]^r[n++],l=e[t++]^r[n++],u=e[t++]^r[n++],c=e[t++]^r[n++],d=e[t++]^r[n++],p=e[t++]^r[n++],f=e[t++]^r[n++],m=e[t++]^r[n++],h=e[t++]^r[n++],g=e[t++]^r[n++],y=e[t++]^r[n++],v=e[t++]^r[n++],b=e[t++]^r[n++],w=e[t++]^r[n++],_=e[t++]^r[n++],x=o,E=s,I=l,S=u,$=c,k=d,A=p,T=f,O=m,R=h,N=g,P=y,U=v,D=b,C=w,j=_;for(let e=0;e<8;e+=2)$^=rm(x+U|0,7),O^=rm($+x|0,9),U^=rm(O+$|0,13),x^=rm(U+O|0,18),R^=rm(k+E|0,7),D^=rm(R+k|0,9),E^=rm(D+R|0,13),k^=rm(E+D|0,18),C^=rm(N+A|0,7),I^=rm(C+N|0,9),A^=rm(I+C|0,13),N^=rm(A+I|0,18),S^=rm(j+P|0,7),T^=rm(S+j|0,9),P^=rm(T+S|0,13),j^=rm(P+T|0,18),E^=rm(x+S|0,7),I^=rm(E+x|0,9),S^=rm(I+E|0,13),x^=rm(S+I|0,18),A^=rm(k+$|0,7),T^=rm(A+k|0,9),$^=rm(T+A|0,13),k^=rm($+T|0,18),P^=rm(N+R|0,7),O^=rm(P+N|0,9),R^=rm(O+P|0,13),N^=rm(R+O|0,18),U^=rm(j+C|0,7),D^=rm(U+j|0,9),C^=rm(D+U|0,13),j^=rm(C+D|0,18);i[a++]=o+x|0,i[a++]=s+E|0,i[a++]=l+I|0,i[a++]=u+S|0,i[a++]=c+$|0,i[a++]=d+k|0,i[a++]=p+A|0,i[a++]=f+T|0,i[a++]=m+O|0,i[a++]=h+R|0,i[a++]=g+N|0,i[a++]=y+P|0,i[a++]=v+U|0,i[a++]=b+D|0,i[a++]=w+C|0,i[a++]=_+j|0}function rV(e,t,r,n,i){let a=n+0,o=n+16*i;for(let n=0;n<16;n++)r[o+n]=e[t+(2*i-1)*16+n];for(let n=0;n<i;n++,a+=16,t+=16)rq(r,o,e,t,r,a),n>0&&(o+=16),rq(r,a,e,t+=16,r,o)}async function rB(e,t,r){let n,{N:i,r:a,p:o,dkLen:s,blockSize32:l,V:u,B32:c,B:d,tmp:p,blockMixCb:f,asyncTick:m}=function(e,t,r){let{N:n,r:i,p:a,dkLen:o,asyncTick:s,maxmem:l,onProgress:u}=r_({dkLen:32,asyncTick:10,maxmem:0x40000400},r);if(ro(n,"N"),ro(i,"r"),ro(a,"p"),ro(o,"dkLen"),ro(s,"asyncTick"),ro(l,"maxmem"),void 0!==u&&"function"!=typeof u)throw Error("progressCb must be a function");let c=128*i,d=c/4;if(n<=1||(n&n-1)!=0||n>0x100000000)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(a<1||a>0x1fffffffe0/c)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(o<1||o>0x1fffffffe0)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(c*(n+a)>l)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+l);let p=rI(rM,e,t,{c:1,dkLen:c*a}),f=rc(p),m=rc(new Uint8Array(c*n)),h=rc(new Uint8Array(c)),g=()=>{};if(u){let e=2*n*a,t=Math.max(Math.floor(e/1e4),1),r=0;g=()=>{r++,u&&(!(r%t)||r===e)&&u(r/e)}}return{N:n,r:i,p:a,dkLen:o,blockSize32:d,V:m,B32:f,B:p,tmp:h,blockMixCb:g,asyncTick:s}}(e,t,r);rh(c);for(let e=0;e<o;e++){let t=l*e;for(let e=0;e<l;e++)u[e]=c[t+e];let r=0;await rb(i-1,m,()=>{rV(u,r,u,r+=l,a),f()}),rV(u,(i-1)*l,c,t,a),f(),await rb(i,m,()=>{let e=(c[t+l-16]&i-1)>>>0;for(let r=0;r<l;r++)p[r]=c[t+r]^u[e*l+r];rV(p,0,c,t,a),f()})}return rh(c),n=rI(rM,e,d,{c:1,dkLen:s}),rd(d,u,p),n}async function rF(e,t,r=3600){return await new ra(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+r).sign(new TextEncoder().encode(t))}async function rW(e,t){return await rB(e.normalize("NFKC"),t,{N:16384,p:1,r:16,dkLen:64,maxmem:0x4000000})}let rH=async e=>{let t=tv.hex.encode(crypto.getRandomValues(new Uint8Array(16))),r=await rW(e,t);return`${t}:${tv.hex.encode(r)}`},rK=async({hash:e,password:t})=>{let[r,n]=e.split(":");if(!r||!n)throw new eD.BetterAuthError("Invalid password hash");return function(e,t){let r=new Uint8Array(e),n=new Uint8Array(t),i=r.length^n.length,a=Math.max(r.length,n.length);for(let e=0;e<a;e++)i|=(e<r.length?r[e]:0)^(e<n.length?n[e]:0);return 0===i}(await rW(t,r),function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(rg)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=ry(e.charCodeAt(i)),a=ry(e.charCodeAt(i+1));if(void 0===r||void 0===a)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+a}return n}(n))},rG=async({key:e,data:t})=>{let r=await (0,ty.createHash)("SHA-256").digest(e),n=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(t);var i=tV(rt)(new Uint8Array(r)).encrypt(n);if(tN(i),tj)return i.toHex();let a="";for(let e=0;e<i.length;e++)a+=tz[i[e]];return a},rJ=async({key:e,data:t})=>{let r=await (0,ty.createHash)("SHA-256").digest(e),n=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(tj)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=tL(e.charCodeAt(i)),a=tL(e.charCodeAt(i+1));if(void 0===r||void 0===a)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+a}return n}(t),i=tV(rt)(new Uint8Array(r));return new TextDecoder().decode(i.decrypt(n))};function rQ(e){return"-"===e||"^"===e||"$"===e||"+"===e||"."===e||"("===e||")"===e||"|"===e||"["===e||"]"===e||"{"===e||"}"===e||"*"===e||"?"===e||"\\"===e?`\\${e}`:e}function rX(e,t){if("string"!=typeof t)throw TypeError(`Sample must be a string, but ${typeof t} given`);return e.test(t)}function rY(e,t){if("string"!=typeof e&&!Array.isArray(e))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof e} given`);if(("string"==typeof t||"boolean"==typeof t)&&(t={separator:t}),2==arguments.length&&!(void 0===t||"object"==typeof t&&null!==t&&!Array.isArray(t)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof t} given`);if("\\"===(t=t||{}).separator)throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let r=function e(t,r=!0){if(Array.isArray(t)){let n=t.map(t=>`^${e(t,r)}$`);return`(?:${n.join("|")})`}let n="",i="",a=".";!0===r?(n="/",i="[/\\\\]",a="[^/\\\\]"):r&&((i=function(e){let t="";for(let r=0;r<e.length;r++)t+=rQ(e[r]);return t}(n=r)).length>1?(i=`(?:${i})`,a=`((?!${i}).)`):a=`[^${i}]`);let o=r?`${i}+?`:"",s=r?`${i}*?`:"",l=r?t.split(n):[t],u="";for(let e=0;e<l.length;e++){let t=l[e],n=l[e+1],i="";if(t||!(e>0)){if(r&&(i=e===l.length-1?s:"**"!==n?o:""),r&&"**"===t){i&&(u+=0===e?"":i,u+=`(?:${a}*?${i})*?`);continue}for(let e=0;e<t.length;e++){let r=t[e];"\\"===r?e<t.length-1&&(u+=rQ(t[e+1]),e++):"?"===r?u+=a:"*"===r?u+=`${a}*?`:u+=rQ(r)}u+=i}}return u}(e,t.separator),n=RegExp(`^${r}$`,t.flags),i=rX.bind(null,n);return i.options=t,i.pattern=e,i.regexp=n,i}e.s(["hashPassword",()=>rH,"signJWT",()=>rF,"symmetricDecrypt",()=>rJ,"symmetricEncrypt",()=>rG,"verifyPassword",()=>rK],56723);let r0=(0,eQ.createAuthMiddleware)(async e=>{if(e.request?.method!=="POST"||!e.request)return;let t=e.request?.headers,r=e.request,{body:n,query:i,context:a}=e;if(function(e){let t=["accept","accept-language","content-language","content-type"],r=["application/x-www-form-urlencoded","multipart/form-data","text/plain"];for(let[n,i]of e.entries())if(!t.includes(n.toLowerCase())||"content-type"===n.toLowerCase()&&!r.includes(i?.split(";")[0]?.trim()?.toLowerCase()||""))return!1;return!0}(t)&&!e.context.skipCSRFCheck)throw new eR.APIError("FORBIDDEN",{message:"Invalid request"});let o=t?.get("origin")||t?.get("referer")||"",s=n?.callbackURL||i?.callbackURL,l=n?.redirectTo,u=n?.errorCallbackURL,c=n?.newUserCallbackURL,d=Array.isArray(a.options.trustedOrigins)?a.trustedOrigins:[...a.trustedOrigins,...await a.options.trustedOrigins?.(r)||[]],p=t?.has("cookie"),f=(t,r)=>{if(t&&!d.some(e=>((e,t)=>{if(e.startsWith("/"))return!1;if(t.includes("*")){if(t.includes("://"))return rY(t)(eq(e)||e);let r=eB(e);return!!r&&rY(t)(r)}let r=eV(e);return"http:"!==r&&"https:"!==r&&r?e.startsWith(t):t===eq(e)})(t,e)||t?.startsWith("/")&&"origin"!==r&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(t)))throw e.context.logger.error(`Invalid ${r}: ${t}`),e.context.logger.info(`If it's a valid URL, please add ${t} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${d}`),new eR.APIError("FORBIDDEN",{message:`Invalid ${r}`})};if(p&&!e.context.skipCSRFCheck&&!e.context.skipOriginCheck){if(!o||"null"===o)throw new eR.APIError("FORBIDDEN",{message:"Missing or null Origin"});f(o,"origin")}s&&f(s,"callbackURL"),l&&f(l,"redirectURL"),u&&f(u,"errorCallbackURL"),c&&f(c,"newUserCallbackURL")}),r1=e=>(0,eQ.createAuthMiddleware)(async t=>{if(!t.request)return;let{context:r}=t,n=e(t),i=Array.isArray(r.options.trustedOrigins)?r.trustedOrigins:[...r.trustedOrigins,...await r.options.trustedOrigins?.(t.request)||[]],a=(e,r)=>{if(e&&!i.some(t=>((e,t)=>{if(e.startsWith("/"))return!1;if(t.includes("*")){if(t.includes("://"))return rY(t)(eq(e)||e);let r=eB(e);return!!r&&rY(t)(r)}let r=eV(e);return"http:"!==r&&"https:"!==r&&r?e.startsWith(t):t===eq(e)})(e,t)||e?.startsWith("/")&&"origin"!==r&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(e)))throw t.context.logger.error(`Invalid ${r}: ${e}`),t.context.logger.info(`If it's a valid URL, please add ${e} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${i}`),new eR.APIError("FORBIDDEN",{message:`Invalid ${r}`})};for(let e of Array.isArray(n)?n:[n])a(e,"callbackURL")});async function r4(e,t,r,n=3600){return await rF({email:t.toLowerCase(),updateTo:r},e,n)}async function r6(e,t){if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new eR.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await r4(e.context.secret,t.email,void 0,e.context.options.emailVerification?.expiresIn),n=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;await e.context.options.emailVerification.sendVerificationEmail({user:t,url:n,token:r},e.request)}let r2=(0,eQ.createAuthEndpoint)("/send-verification-email",{method:"POST",body:eU.object({email:eU.email().meta({description:"The email to send the verification email to"}),callbackURL:eU.string().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async e=>{if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new eR.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:t}=e.body,r=await tl(e);if(!r){let r=await e.context.internalAdapter.findUserByEmail(t);return r&&await r6(e,r.user),e.json({status:!0})}if(r?.user.emailVerified)throw new eR.APIError("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(r?.user.email!==t)throw new eR.APIError("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await r6(e,r.user),e.json({status:!0})}),r3=(0,eQ.createAuthEndpoint)("/verify-email",{method:"GET",query:eU.object({token:eU.string().meta({description:"The token to verify the email"}),callbackURL:eU.string().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[r1(e=>e.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string",description:"User ID"},email:{type:"string",description:"User email"},name:{type:"string",description:"User name"},image:{type:"string",description:"User image URL"},emailVerified:{type:"boolean",description:"Indicates if the user email is verified"},createdAt:{type:"string",description:"User creation date"},updatedAt:{type:"string",description:"User update date"}},required:["id","email","name","image","emailVerified","createdAt","updatedAt"]},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async e=>{let t;function r(t){if(e.query.callbackURL){if(e.query.callbackURL.includes("?"))throw e.redirect(`${e.query.callbackURL}&error=${t}`);throw e.redirect(`${e.query.callbackURL}?error=${t}`)}throw new eR.APIError("UNAUTHORIZED",{message:t})}let{token:n}=e.query;try{t=await eS(n,new TextEncoder().encode(e.context.secret),{algorithms:["HS256"]})}catch(e){if(e instanceof Z)return r("token_expired");return r("invalid_token")}let i=eU.object({email:eU.string().email(),updateTo:eU.string().optional()}).parse(t.payload),a=await e.context.internalAdapter.findUserByEmail(i.email);if(!a)return r("user_not_found");if(i.updateTo){let t=await tl(e);if(!t||t.user.email!==i.email){if(e.query.callbackURL)throw e.redirect(`${e.query.callbackURL}?error=unauthorized`);return r("unauthorized")}let n=await e.context.internalAdapter.updateUserByEmail(i.email,{email:i.updateTo,emailVerified:!1},e),a=await r4(e.context.secret,i.updateTo);if(await e.context.options.emailVerification?.sendVerificationEmail?.({user:n,url:`${e.context.baseURL}/verify-email?token=${a}&callbackURL=${e.query.callbackURL||"/"}`,token:a},e.request),await eG(e,{session:t.session,user:{...t.user,email:i.updateTo,emailVerified:!1}}),e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:{id:n.id,email:n.email,name:n.name,image:n.image,emailVerified:n.emailVerified,createdAt:n.createdAt,updatedAt:n.updatedAt}})}e.context.options.emailVerification?.onEmailVerification&&await e.context.options.emailVerification.onEmailVerification(a.user,e.request);let o=await e.context.internalAdapter.updateUserByEmail(i.email,{emailVerified:!0},e);if(e.context.options.emailVerification?.afterEmailVerification&&await e.context.options.emailVerification.afterEmailVerification(o,e.request),e.context.options.emailVerification?.autoSignInAfterVerification){let t=await tl(e);if(t&&t.user.email===i.email)await eG(e,{session:t.session,user:{...t.user,emailVerified:!0}});else{let t=await e.context.internalAdapter.createSession(a.user.id,e);if(!t)throw new eR.APIError("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await eG(e,{session:t,user:{...a.user,emailVerified:!0}})}}if(e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:null})}),r9={isAction:!1};async function r8(e,t){let r=e.body?.callbackURL||e.context.options.baseURL;if(!r)throw new eR.APIError("BAD_REQUEST",{message:"callbackURL is required"});let n=(0,tb.g)(128),i=(0,tb.g)(32),a=e.context.createAuthCookie("state",{maxAge:3e5});await e.setSignedCookie(a.name,i,e.context.secret,a.attributes);let o=JSON.stringify({callbackURL:r,codeVerifier:n,errorURL:e.body?.errorCallbackURL,newUserURL:e.body?.newUserCallbackURL,link:t,expiresAt:Date.now()+6e5,requestSignUp:e.body?.requestSignUp}),s=new Date;s.setMinutes(s.getMinutes()+10);let l=await e.context.internalAdapter.createVerificationValue({value:o,identifier:i,expiresAt:s},e);if(!l)throw e.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new eR.APIError("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:l.identifier,codeVerifier:n}}async function r5(e){let t=e.query.state||e.body.state,r=await e.context.internalAdapter.findVerificationValue(t);if(!r){e.context.logger.error("State Mismatch. Verification not found",{state:t});let r=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${r}?error=please_restart_the_process`)}let n=eU.object({callbackURL:eU.string(),codeVerifier:eU.string(),errorURL:eU.string().optional(),newUserURL:eU.string().optional(),expiresAt:eU.number(),link:eU.object({email:eU.string(),userId:eP.coerce.string()}).optional(),requestSignUp:eU.boolean().optional()}).parse(JSON.parse(r.value));n.errorURL||(n.errorURL=`${e.context.baseURL}/error`);let i=e.context.createAuthCookie("state"),a=await e.getSignedCookie(i.name,e.context.secret);if(!e.context.oauthConfig?.skipStateCookieCheck&&(!a||a!==t)){let t=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${t}?error=state_mismatch`)}if(e.setCookie(i.name,"",{maxAge:0}),n.expiresAt<Date.now()){await e.context.internalAdapter.deleteVerificationValue(r.id);let t=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${t}?error=please_restart_the_process`)}return await e.context.internalAdapter.deleteVerificationValue(r.id),n}function r7(e,t){return t.options.account?.encryptOAuthTokens&&e?rG({key:t.secret,data:e}):e}async function ne(e,{userInfo:t,account:r,callbackURL:n,disableSignUp:i,overrideUserInfo:a}){let o=await e.context.internalAdapter.findOAuthUser(t.email.toLowerCase(),r.accountId,r.providerId).catch(t=>{ej.logger.error("Better auth was unable to query your database.\nError: ",t);let r=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${r}?error=internal_server_error`)}),s=o?.user,l=!s;if(o){let n=o.accounts.find(e=>e.providerId===r.providerId&&e.accountId===r.accountId);if(n){if(e.context.options.account?.updateAccountOnSignIn!==!1){let t=Object.fromEntries(Object.entries({idToken:r.idToken,accessToken:await r7(r.accessToken,e.context),refreshToken:await r7(r.refreshToken,e.context),accessTokenExpiresAt:r.accessTokenExpiresAt,refreshTokenExpiresAt:r.refreshTokenExpiresAt,scope:r.scope}).filter(([e,t])=>void 0!==t));Object.keys(t).length>0&&await e.context.internalAdapter.updateAccount(n.id,t,e)}t.emailVerified&&!o.user.emailVerified&&t.email.toLowerCase()===o.user.email&&await e.context.internalAdapter.updateUser(o.user.id,{emailVerified:!0})}else{let n=e.context.options.account?.accountLinking?.trustedProviders;if(!n?.includes(r.providerId)&&!t.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)return(0,ej.isDevelopment)()&&ej.logger.warn(`User already exist but account isn't linked to ${r.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await e.context.internalAdapter.linkAccount({providerId:r.providerId,accountId:t.id.toString(),userId:o.user.id,accessToken:await r7(r.accessToken,e.context),refreshToken:await r7(r.refreshToken,e.context),idToken:r.idToken,accessTokenExpiresAt:r.accessTokenExpiresAt,refreshTokenExpiresAt:r.refreshTokenExpiresAt,scope:r.scope},e)}catch(e){return ej.logger.error("Unable to link account",e),{error:"unable to link account",data:null}}t.emailVerified&&!o.user.emailVerified&&t.email.toLowerCase()===o.user.email&&await e.context.internalAdapter.updateUser(o.user.id,{emailVerified:!0})}if(a){let{id:r,...n}=t;await e.context.internalAdapter.updateUser(o.user.id,{...n,email:t.email.toLowerCase(),emailVerified:t.email.toLowerCase()===o.user.email&&o.user.emailVerified||t.emailVerified})}}else{if(i)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:i,...a}=t;if(s=await e.context.internalAdapter.createOAuthUser({...a,email:t.email.toLowerCase()},{accessToken:await r7(r.accessToken,e.context),refreshToken:await r7(r.refreshToken,e.context),idToken:r.idToken,accessTokenExpiresAt:r.accessTokenExpiresAt,refreshTokenExpiresAt:r.refreshTokenExpiresAt,scope:r.scope,providerId:r.providerId,accountId:t.id.toString()},e).then(e=>e?.user),!t.emailVerified&&s&&e.context.options.emailVerification?.sendOnSignUp){let t=await r4(e.context.secret,s.email,void 0,e.context.options.emailVerification?.expiresIn),r=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${n}`;await e.context.options.emailVerification?.sendVerificationEmail?.({user:s,url:r,token:t},e.request)}}catch(e){if(ej.logger.error(e),e instanceof eR.APIError)return{error:e.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!s)return{error:"unable to create user",data:null,isRegister:!1};let u=await e.context.internalAdapter.createSession(s.id,e);return u?{data:{session:u,user:s},error:null,isRegister:l}:{error:"unable to create session",data:null,isRegister:!1}}let nt=(0,eQ.createAuthEndpoint)("/sign-in/social",{method:"POST",body:eU.object({callbackURL:eU.string().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:eU.string().optional(),errorCallbackURL:eU.string().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:ta,disableRedirect:eU.boolean().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:eU.optional(eU.object({token:eU.string().meta({description:"ID token from the provider"}),nonce:eU.string().meta({description:"Nonce used to generate the token"}).optional(),accessToken:eU.string().meta({description:"Access token from the provider"}).optional(),refreshToken:eU.string().meta({description:"Refresh token from the provider"}).optional(),expiresAt:eU.number().meta({description:"Expiry date of the token"}).optional()})),scopes:eU.array(eU.string()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:eU.boolean().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:eU.string().meta({description:"The login hint to use for the authorization code request"}).optional()}),metadata:{openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token",url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}}},required:["redirect","token","user"]}}}}}}}},async e=>{let t=e.context.socialProviders.find(t=>t.id===e.body.provider);if(!t)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new eR.APIError("NOT_FOUND",{message:eD.BASE_ERROR_CODES.PROVIDER_NOT_FOUND});if(e.body.idToken){if(!t.verifyIdToken)throw e.context.logger.error("Provider does not support id token verification",{provider:e.body.provider}),new eR.APIError("NOT_FOUND",{message:eD.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED});let{token:r,nonce:n}=e.body.idToken;if(!await t.verifyIdToken(r,n))throw e.context.logger.error("Invalid id token",{provider:e.body.provider}),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.INVALID_TOKEN});let i=await t.getUserInfo({idToken:r,accessToken:e.body.idToken.accessToken,refreshToken:e.body.idToken.refreshToken});if(!i||!i?.user)throw e.context.logger.error("Failed to get user info",{provider:e.body.provider}),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO});if(!i.user.email)throw e.context.logger.error("User email not found",{provider:e.body.provider}),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND});let a=await ne(e,{userInfo:{...i.user,email:i.user.email,id:String(i.user.id),name:i.user.name||"",image:i.user.image,emailVerified:i.user.emailVerified||!1},account:{providerId:t.id,accountId:String(i.user.id),accessToken:e.body.idToken.accessToken},callbackURL:e.body.callbackURL,disableSignUp:t.disableImplicitSignUp&&!e.body.requestSignUp||t.disableSignUp});if(a.error)throw new eR.APIError("UNAUTHORIZED",{message:a.error});return await eG(e,a.data),e.json({redirect:!1,token:a.data.session.token,url:void 0,user:{id:a.data.user.id,email:a.data.user.email,name:a.data.user.name,image:a.data.user.image,emailVerified:a.data.user.emailVerified,createdAt:a.data.user.createdAt,updatedAt:a.data.user.updatedAt}})}let{codeVerifier:r,state:n}=await r8(e),i=await t.createAuthorizationURL({state:n,codeVerifier:r,redirectURI:`${e.context.baseURL}/callback/${t.id}`,scopes:e.body.scopes,loginHint:e.body.loginHint});return e.json({url:i.toString(),redirect:!e.body.disableRedirect})}),nr=(0,eQ.createAuthEndpoint)("/sign-in/email",{method:"POST",body:eU.object({email:eU.string().meta({description:"Email of the user"}),password:eU.string().meta({description:"Password of the user"}),callbackURL:eU.string().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:eU.boolean().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{openapi:{description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}},required:["redirect","token","user"]}}}}}}}},async e=>{if(!e.context.options?.emailAndPassword?.enabled)throw e.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new eR.APIError("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:t,password:r}=e.body;if(!eU.string().email().safeParse(t).success)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.INVALID_EMAIL});let n=await e.context.internalAdapter.findUserByEmail(t,{includeAccounts:!0});if(!n)throw await e.context.password.hash(r),e.context.logger.error("User not found",{email:t}),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD});let i=n.accounts.find(e=>"credential"===e.providerId);if(!i)throw e.context.logger.error("Credential account not found",{email:t}),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD});let a=i?.password;if(!a)throw e.context.logger.error("Password not found",{email:t}),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD});if(!await e.context.password.verify({hash:a,password:r}))throw e.context.logger.error("Invalid password"),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD});if(e.context.options?.emailAndPassword?.requireEmailVerification&&!n.user.emailVerified){if(!e.context.options?.emailVerification?.sendVerificationEmail)throw new eR.APIError("FORBIDDEN",{message:eD.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED});if(e.context.options?.emailVerification?.sendOnSignIn){let t=await r4(e.context.secret,n.user.email,void 0,e.context.options.emailVerification?.expiresIn),r=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${e.body.callbackURL||"/"}`;await e.context.options.emailVerification.sendVerificationEmail({user:n.user,url:r,token:t},e.request)}throw new eR.APIError("FORBIDDEN",{message:eD.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED})}let o=await e.context.internalAdapter.createSession(n.user.id,e,!1===e.body.rememberMe);if(!o)throw e.context.logger.error("Failed to create session"),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION});return await eG(e,{session:o,user:n.user},!1===e.body.rememberMe),e.json({redirect:!!e.body.callbackURL,token:o.token,url:e.body.callbackURL,user:{id:n.user.id,email:n.user.email,name:n.user.name,image:n.user.image,emailVerified:n.user.emailVerified,createdAt:n.user.createdAt,updatedAt:n.user.updatedAt}})}),nn=eU.object({code:eU.string().optional(),error:eU.string().optional(),device_id:eU.string().optional(),error_description:eU.string().optional(),state:eU.string().optional(),user:eU.string().optional()}),ni=(0,eQ.createAuthEndpoint)("/callback/:id",{method:["GET","POST"],body:nn.optional(),query:nn.optional(),metadata:r9},async e=>{let t,r,n,i=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;try{if("GET"===e.method)t=nn.parse(e.query);else if("POST"===e.method)t=nn.parse(e.body);else throw Error("Unsupported method")}catch(t){throw e.context.logger.error("INVALID_CALLBACK_REQUEST",t),e.redirect(`${i}?error=invalid_callback_request`)}let{code:a,error:o,state:s,error_description:l,device_id:u}=t;if(!s){e.context.logger.error("State not found",o);let t=i.includes("?")?"&":"?",r=`${i}${t}state=state_not_found`;throw e.redirect(r)}let{codeVerifier:c,callbackURL:d,link:p,errorURL:f,newUserURL:m,requestSignUp:h}=await r5(e);function g(t,r){let n=f??i,a=new URLSearchParams({error:t});r&&a.set("error_description",r);let o=n.includes("?")?"&":"?",s=`${n}${o}${a.toString()}`;throw e.redirect(s)}if(o&&g(o,l),!a)throw e.context.logger.error("Code not found"),g("no_code");let y=e.context.socialProviders.find(t=>t.id===e.params.id);if(!y)throw e.context.logger.error("Oauth provider with id",e.params.id,"not found"),g("oauth_provider_not_found");try{r=await y.validateAuthorizationCode({code:a,codeVerifier:c,deviceId:u,redirectURI:`${e.context.baseURL}/callback/${y.id}`})}catch(t){throw e.context.logger.error("",t),g("invalid_code")}let v=await y.getUserInfo({...r,user:e.body?.user?(0,eL.s)(e.body.user):void 0}).then(e=>e?.user);if(!v)return e.context.logger.error("Unable to get user info"),g("unable_to_get_user_info");if(!d)throw e.context.logger.error("No callback URL found"),g("no_callback_url");if(p){let t,n=e.context.options.account?.accountLinking?.trustedProviders;if(!n?.includes(y.id)&&!v.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)return e.context.logger.error("Unable to link account - untrusted provider"),g("unable_to_link_account");if(v.email!==p.email&&e.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return g("email_doesn't_match");let i=await e.context.internalAdapter.findAccount(String(v.id));if(i){if(i.userId.toString()!==p.userId.toString())return g("account_already_linked_to_different_user");let t=Object.fromEntries(Object.entries({accessToken:await r7(r.accessToken,e.context),refreshToken:await r7(r.refreshToken,e.context),idToken:r.idToken,accessTokenExpiresAt:r.accessTokenExpiresAt,refreshTokenExpiresAt:r.refreshTokenExpiresAt,scope:r.scopes?.join(",")}).filter(([e,t])=>void 0!==t));await e.context.internalAdapter.updateAccount(i.id,t)}else if(!await e.context.internalAdapter.createAccount({userId:p.userId,providerId:y.id,accountId:String(v.id),...r,accessToken:await r7(r.accessToken,e.context),refreshToken:await r7(r.refreshToken,e.context),scope:r.scopes?.join(",")},e))return g("unable_to_link_account");try{t=d.toString()}catch{t=d}throw e.redirect(t)}if(!v.email)return e.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),g("email_not_found");let b=await ne(e,{userInfo:{...v,id:String(v.id),email:v.email,name:v.name||v.email},account:{providerId:y.id,accountId:String(v.id),...r,scope:r.scopes?.join(",")},callbackURL:d,disableSignUp:y.disableImplicitSignUp&&!h||y.options?.disableSignUp,overrideUserInfo:y.options?.overrideUserInfoOnSignIn});if(b.error)return e.context.logger.error(b.error.split(" ").join("_")),g(b.error.split(" ").join("_"));let{session:w,user:_}=b.data;await eG(e,{session:w,user:_});try{n=(b.isRegister&&m||d).toString()}catch{n=b.isRegister&&m||d}throw e.redirect(n)}),na=(0,eQ.createAuthEndpoint)("/sign-out",{method:"POST",requireHeaders:!0,metadata:{openapi:{description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async e=>{let t=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(!t)throw eJ(e),new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.FAILED_TO_GET_SESSION});return await e.context.internalAdapter.deleteSession(t),eJ(e),e.json({success:!0})});function no(e,t,r){let n=t?new URL(t,e.baseURL):new URL(`${e.baseURL}/error`);return r&&Object.entries(r).forEach(([e,t])=>n.searchParams.set(e,t)),n.href}let ns=(0,eQ.createAuthEndpoint)("/request-password-reset",{method:"POST",body:eU.object({email:eU.email().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:eU.string().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async e=>{if(!e.context.options.emailAndPassword?.sendResetPassword)throw e.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new eR.APIError("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:t,redirectTo:r}=e.body,n=await e.context.internalAdapter.findUserByEmail(t,{includeAccounts:!0});if(!n)return e.context.logger.error("Reset Password: User not found",{email:t}),e.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let i=eC(e.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),a=(0,tg.g)(24);await e.context.internalAdapter.createVerificationValue({value:n.user.id,identifier:`reset-password:${a}`,expiresAt:i},e);let o=r?encodeURIComponent(r):"",s=`${e.context.baseURL}/reset-password/${a}?callbackURL=${o}`;return await e.context.options.emailAndPassword.sendResetPassword({user:n.user,url:s,token:a},e.request),e.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),nl=(0,eQ.createAuthEndpoint)("/forget-password",{method:"POST",body:eU.object({email:eU.string().email().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:eU.string().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async e=>{if(!e.context.options.emailAndPassword?.sendResetPassword)throw e.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new eR.APIError("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:t,redirectTo:r}=e.body,n=await e.context.internalAdapter.findUserByEmail(t,{includeAccounts:!0});if(!n)return e.context.logger.error("Reset Password: User not found",{email:t}),e.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let i=eC(e.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),a=(0,tg.g)(24);await e.context.internalAdapter.createVerificationValue({value:n.user.id,identifier:`reset-password:${a}`,expiresAt:i},e);let o=r?encodeURIComponent(r):"",s=`${e.context.baseURL}/reset-password/${a}?callbackURL=${o}`;return await e.context.options.emailAndPassword.sendResetPassword({user:n.user,url:s,token:a},e.request),e.json({status:!0})}),nu=(0,eQ.createAuthEndpoint)("/reset-password/:token",{method:"GET",query:eU.object({callbackURL:eU.string().meta({description:"The URL to redirect the user to reset their password"})}),use:[r1(e=>e.query.callbackURL)],metadata:{openapi:{description:"Redirects the user to the callback URL with the token",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async e=>{var t,r;let n,{token:i}=e.params,{callbackURL:a}=e.query;if(!i||!a)throw e.redirect(no(e.context,a,{error:"INVALID_TOKEN"}));let o=await e.context.internalAdapter.findVerificationValue(`reset-password:${i}`);if(!o||o.expiresAt<new Date)throw e.redirect(no(e.context,a,{error:"INVALID_TOKEN"}));throw e.redirect((t=e.context,r={token:i},n=new URL(a,t.baseURL),r&&Object.entries(r).forEach(([e,t])=>n.searchParams.set(e,t)),n.href))}),nc=(0,eQ.createAuthEndpoint)("/reset-password",{method:"POST",query:eU.object({token:eU.string().optional()}).optional(),body:eU.object({newPassword:eU.string().meta({description:"The new password to set"}),token:eU.string().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{let t=e.body.token||e.query?.token;if(!t)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.INVALID_TOKEN});let{newPassword:r}=e.body,n=e.context.password?.config.minPasswordLength,i=e.context.password?.config.maxPasswordLength;if(r.length<n)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.PASSWORD_TOO_SHORT});if(r.length>i)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.PASSWORD_TOO_LONG});let a=`reset-password:${t}`,o=await e.context.internalAdapter.findVerificationValue(a);if(!o||o.expiresAt<new Date)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.INVALID_TOKEN});let s=o.value,l=await e.context.password.hash(r);if((await e.context.internalAdapter.findAccounts(s)).find(e=>"credential"===e.providerId)?await e.context.internalAdapter.updatePassword(s,l,e):await e.context.internalAdapter.createAccount({userId:s,providerId:"credential",password:l,accountId:s},e),await e.context.internalAdapter.deleteVerificationValue(o.id),e.context.options.emailAndPassword?.onPasswordReset){let t=await e.context.internalAdapter.findUserById(s);t&&await e.context.options.emailAndPassword.onPasswordReset({user:t},e.request)}return e.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await e.context.internalAdapter.deleteSessions(s),e.json({status:!0})}),nd=()=>(0,eQ.createAuthEndpoint)("/update-user",{method:"POST",body:eU.record(eU.string().meta({description:"Field name must be a string"}),eU.any()),use:[tu],metadata:{$Infer:{body:{}},openapi:{description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user"}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the update was successful"}}}}}}}}}},async e=>{let t=e.body;if(t.email)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.EMAIL_CAN_NOT_BE_UPDATED});let{name:r,image:n,...i}=t,a=e.context.session,o=tS(e.context.options,i,"update");if(void 0===n&&void 0===r&&0===Object.keys(o).length)throw new eR.APIError("BAD_REQUEST",{message:"No fields to update"});let s=await e.context.internalAdapter.updateUser(a.user.id,{name:r,image:n,...o},e);return await eG(e,{session:a.session,user:s}),e.json({status:!0})}),np=(0,eQ.createAuthEndpoint)("/change-password",{method:"POST",body:eU.object({newPassword:eU.string().meta({description:"The new password to set"}),currentPassword:eU.string().meta({description:"The current password is required"}),revokeOtherSessions:eU.boolean().meta({description:"Must be a boolean value"}).optional()}),use:[tc],metadata:{openapi:{description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async e=>{let{newPassword:t,currentPassword:r,revokeOtherSessions:n}=e.body,i=e.context.session,a=e.context.password.config.minPasswordLength;if(t.length<a)throw e.context.logger.error("Password is too short"),new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.PASSWORD_TOO_SHORT});let o=e.context.password.config.maxPasswordLength;if(t.length>o)throw e.context.logger.error("Password is too long"),new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.PASSWORD_TOO_LONG});let s=(await e.context.internalAdapter.findAccounts(i.user.id)).find(e=>"credential"===e.providerId&&e.password);if(!s||!s.password)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND});let l=await e.context.password.hash(t);if(!await e.context.password.verify({hash:s.password,password:r}))throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.INVALID_PASSWORD});await e.context.internalAdapter.updateAccount(s.id,{password:l});let u=null;if(n){await e.context.internalAdapter.deleteSessions(i.user.id);let t=await e.context.internalAdapter.createSession(i.user.id,e);if(!t)throw new eR.APIError("INTERNAL_SERVER_ERROR",{message:eD.BASE_ERROR_CODES.FAILED_TO_GET_SESSION});await eG(e,{session:t,user:i.user}),u=t.token}return e.json({token:u,user:{id:i.user.id,email:i.user.email,name:i.user.name,image:i.user.image,emailVerified:i.user.emailVerified,createdAt:i.user.createdAt,updatedAt:i.user.updatedAt}})}),nf=(0,eQ.createAuthEndpoint)("/set-password",{method:"POST",body:eU.object({newPassword:eU.string().meta({description:"The new password to set is required"})}),metadata:{SERVER_ONLY:!0},use:[tc]},async e=>{let{newPassword:t}=e.body,r=e.context.session,n=e.context.password.config.minPasswordLength;if(t.length<n)throw e.context.logger.error("Password is too short"),new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.PASSWORD_TOO_SHORT});let i=e.context.password.config.maxPasswordLength;if(t.length>i)throw e.context.logger.error("Password is too long"),new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.PASSWORD_TOO_LONG});let a=(await e.context.internalAdapter.findAccounts(r.user.id)).find(e=>"credential"===e.providerId&&e.password),o=await e.context.password.hash(t);if(!a)return await e.context.internalAdapter.linkAccount({userId:r.user.id,providerId:"credential",accountId:r.user.id,password:o},e),e.json({status:!0});throw new eR.APIError("BAD_REQUEST",{message:"user already has a password"})}),nm=(0,eQ.createAuthEndpoint)("/delete-user",{method:"POST",use:[tc],body:eU.object({callbackURL:eU.string().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:eU.string().meta({description:"The password of the user is required to delete the user"}).optional(),token:eU.string().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{description:"Delete the user",responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options"),new eR.APIError("NOT_FOUND");let t=e.context.session;if(e.body.password){let r=(await e.context.internalAdapter.findAccounts(t.user.id)).find(e=>"credential"===e.providerId&&e.password);if(!r||!r.password)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await e.context.password.verify({hash:r.password,password:e.body.password}))throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.INVALID_PASSWORD})}if(e.body.token)return await nh({...e,query:{token:e.body.token}}),e.json({success:!0,message:"User deleted"});if(e.context.options.user.deleteUser?.sendDeleteAccountVerification){let r=(0,tb.g)(32,"0-9","a-z");await e.context.internalAdapter.createVerificationValue({value:t.user.id,identifier:`delete-account-${r}`,expiresAt:new Date(Date.now()+1e3*(e.context.options.user.deleteUser?.deleteTokenExpiresIn||86400))},e);let n=`${e.context.baseURL}/delete-user/callback?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;return await e.context.options.user.deleteUser.sendDeleteAccountVerification({user:t.user,url:n,token:r},e.request),e.json({success:!0,message:"Verification email sent"})}if(!e.body.password&&0!==e.context.sessionConfig.freshAge){let r=new Date(t.session.createdAt).getTime(),n=1e3*e.context.sessionConfig.freshAge;if(Date.now()-r>1e3*n)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.SESSION_EXPIRED})}let r=e.context.options.user.deleteUser?.beforeDelete;r&&await r(t.user,e.request),await e.context.internalAdapter.deleteUser(t.user.id),await e.context.internalAdapter.deleteSessions(t.user.id),await e.context.internalAdapter.deleteAccounts(t.user.id),eJ(e);let n=e.context.options.user.deleteUser?.afterDelete;return n&&await n(t.user,e.request),e.json({success:!0,message:"User deleted"})}),nh=(0,eQ.createAuthEndpoint)("/delete-user/callback",{method:"GET",query:eU.object({token:eU.string().meta({description:"The token to verify the deletion request"}),callbackURL:eU.string().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[r1(e=>e.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options"),new eR.APIError("NOT_FOUND");let t=await tl(e);if(!t)throw new eR.APIError("NOT_FOUND",{message:eD.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO});let r=await e.context.internalAdapter.findVerificationValue(`delete-account-${e.query.token}`);if(!r||r.expiresAt<new Date||r.value!==t.user.id)throw new eR.APIError("NOT_FOUND",{message:eD.BASE_ERROR_CODES.INVALID_TOKEN});let n=e.context.options.user.deleteUser?.beforeDelete;n&&await n(t.user,e.request),await e.context.internalAdapter.deleteUser(t.user.id),await e.context.internalAdapter.deleteSessions(t.user.id),await e.context.internalAdapter.deleteAccounts(t.user.id),await e.context.internalAdapter.deleteVerificationValue(r.id),eJ(e);let i=e.context.options.user.deleteUser?.afterDelete;if(i&&await i(t.user,e.request),e.query.callbackURL)throw e.redirect(e.query.callbackURL||"/");return e.json({success:!0,message:"User deleted"})}),ng=(0,eQ.createAuthEndpoint)("/change-email",{method:"POST",body:eU.object({newEmail:eU.email().meta({description:"The new email address to set must be a valid email address"}),callbackURL:eU.string().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[tc],metadata:{openapi:{responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async e=>{if(!e.context.options.user?.changeEmail?.enabled)throw e.context.logger.error("Change email is disabled."),new eR.APIError("BAD_REQUEST",{message:"Change email is disabled"});let t=e.body.newEmail.toLowerCase();if(t===e.context.session.user.email)throw e.context.logger.error("Email is the same"),new eR.APIError("BAD_REQUEST",{message:"Email is the same"});if(await e.context.internalAdapter.findUserByEmail(t))throw e.context.logger.error("Email already exists"),new eR.APIError("BAD_REQUEST",{message:"Couldn't update your email"});if(!0!==e.context.session.user.emailVerified){if(await e.context.internalAdapter.findUserByEmail(t))throw new eR.APIError("UNPROCESSABLE_ENTITY",{message:eD.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(await e.context.internalAdapter.updateUserByEmail(e.context.session.user.email,{email:t},e),await eG(e,{session:e.context.session.session,user:{...e.context.session.user,email:t}}),e.context.options.emailVerification?.sendVerificationEmail){let r=await r4(e.context.secret,t,void 0,e.context.options.emailVerification?.expiresIn),n=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;await e.context.options.emailVerification.sendVerificationEmail({user:{...e.context.session.user,email:t},url:n,token:r},e.request)}return e.json({status:!0})}if(!e.context.options.user.changeEmail.sendChangeEmailVerification)throw e.context.logger.error("Verification email isn't enabled."),new eR.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await r4(e.context.secret,e.context.session.user.email,t,e.context.options.emailVerification?.expiresIn),n=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;return await e.context.options.user.changeEmail.sendChangeEmailVerification({user:e.context.session.user,newEmail:t,url:n,token:r},e.request),e.json({status:!0})}),ny=(0,eQ.createAuthEndpoint)("/error",{method:"GET",metadata:{...r9,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async e=>new Response(((e="Unknown")=>`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Error</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --accent-color: #000000;
            --error-color: #dc3545;
            --border-color: #e9ecef;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            line-height: 1.5;
        }
        .error-container {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            text-align: center;
            max-width: 90%;
            width: 400px;
        }
        h1 {
            color: var(--error-color);
            font-size: 1.75rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        p {
            margin-bottom: 1.5rem;
            color: #495057;
        }
        .btn {
            background-color: var(--accent-color);
            color: #ffffff;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: inline-block;
            font-weight: 500;
            border: 2px solid var(--accent-color);
        }
        .btn:hover {
            background-color: #131721;
        }
        .error-code {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }
        .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="icon">\u26A0\uFE0F</div>
        <h1>Better Auth Error</h1>
        <p>We encountered an issue while processing your request. Please try again or contact the application owner if the problem persists.</p>
        <a href="/" id="returnLink" class="btn">Return to Application</a>
        <div class="error-code">Error Code: <span id="errorCode">${e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}</span></div>
    </div>
</body>
</html>`)(new URL(e.request?.url||"").searchParams.get("error")||"Unknown"),{headers:{"Content-Type":"text/html"}})),nv=(0,eQ.createAuthEndpoint)("/ok",{method:"GET",metadata:{...r9,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async e=>e.json({ok:!0})),nb=(0,eQ.createAuthEndpoint)("/list-accounts",{method:"GET",use:[tu],metadata:{openapi:{description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","scopes"]}}}}}}}}},async e=>{let t=e.context.session,r=await e.context.internalAdapter.findAccounts(t.user.id);return e.json(r.map(e=>({id:e.id,providerId:e.providerId,createdAt:e.createdAt,updatedAt:e.updatedAt,accountId:e.accountId,scopes:e.scope?.split(",")||[]})))}),nw=(0,eQ.createAuthEndpoint)("/link-social",{method:"POST",requireHeaders:!0,body:eU.object({callbackURL:eU.string().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:ta,idToken:eU.object({token:eU.string(),nonce:eU.string().optional(),accessToken:eU.string().optional(),refreshToken:eU.string().optional(),scopes:eU.array(eU.string()).optional()}).optional(),requestSignUp:eU.boolean().optional(),scopes:eU.array(eU.string()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:eU.string().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:eU.boolean().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional()}),use:[tu],metadata:{openapi:{description:"Link a social account to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async e=>{let t=e.context.session,r=e.context.socialProviders.find(t=>t.id===e.body.provider);if(!r)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new eR.APIError("NOT_FOUND",{message:eD.BASE_ERROR_CODES.PROVIDER_NOT_FOUND});if(e.body.idToken){if(!r.verifyIdToken)throw e.context.logger.error("Provider does not support id token verification",{provider:e.body.provider}),new eR.APIError("NOT_FOUND",{message:eD.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED});let{token:n,nonce:i}=e.body.idToken;if(!await r.verifyIdToken(n,i))throw e.context.logger.error("Invalid id token",{provider:e.body.provider}),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.INVALID_TOKEN});let a=await r.getUserInfo({idToken:n,accessToken:e.body.idToken.accessToken,refreshToken:e.body.idToken.refreshToken});if(!a||!a?.user)throw e.context.logger.error("Failed to get user info",{provider:e.body.provider}),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO});let o=String(a.user.id);if(!a.user.email)throw e.context.logger.error("User email not found",{provider:e.body.provider}),new eR.APIError("UNAUTHORIZED",{message:eD.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND});if((await e.context.internalAdapter.findAccounts(t.user.id)).find(e=>e.providerId===r.id&&e.accountId===o))return e.json({url:"",status:!0,redirect:!1});let s=e.context.options.account?.accountLinking?.trustedProviders;if(!s?.includes(r.id)&&!a.user.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)throw new eR.APIError("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(a.user.email!==t.user.email&&e.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new eR.APIError("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await e.context.internalAdapter.createAccount({userId:t.user.id,providerId:r.id,accountId:o,accessToken:e.body.idToken.accessToken,idToken:n,refreshToken:e.body.idToken.refreshToken,scope:e.body.idToken.scopes?.join(",")},e)}catch(e){throw new eR.APIError("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(e.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await e.context.internalAdapter.updateUser(t.user.id,{name:a.user?.name,image:a.user?.image})}catch(e){console.warn("Could not update user - "+e.toString())}return e.json({url:"",status:!0,redirect:!1})}let n=await r8(e,{userId:t.user.id,email:t.user.email}),i=await r.createAuthorizationURL({state:n.state,codeVerifier:n.codeVerifier,redirectURI:`${e.context.baseURL}/callback/${r.id}`,scopes:e.body.scopes});return e.json({url:i.toString(),redirect:!e.body.disableRedirect})}),n_=(0,eQ.createAuthEndpoint)("/unlink-account",{method:"POST",body:eU.object({providerId:eU.string(),accountId:eU.string().optional()}),use:[td],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{let{providerId:t,accountId:r}=e.body,n=await e.context.internalAdapter.findAccounts(e.context.session.user.id);if(1===n.length&&!e.context.options.account?.accountLinking?.allowUnlinkingAll)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.FAILED_TO_UNLINK_LAST_ACCOUNT});let i=n.find(e=>r?e.accountId===r&&e.providerId===t:e.providerId===t);if(!i)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.ACCOUNT_NOT_FOUND});return await e.context.internalAdapter.deleteAccount(i.id),e.json({status:!0})}),nx=(0,eQ.createAuthEndpoint)("/get-access-token",{method:"POST",body:eU.object({providerId:eU.string().meta({description:"The provider ID for the OAuth provider"}),accountId:eU.string().meta({description:"The account ID associated with the refresh token"}).optional(),userId:eU.string().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async e=>{let{providerId:t,accountId:r,userId:n}=e.body,i=e.request,a=await tl(e);if(i&&!a)throw e.error("UNAUTHORIZED");let o=a?.user?.id||n;if(!o)throw new eR.APIError("BAD_REQUEST",{message:"Either userId or session is required"});if(!e.context.socialProviders.find(e=>e.id===t))throw new eR.APIError("BAD_REQUEST",{message:`Provider ${t} is not supported.`});let s=(await e.context.internalAdapter.findAccounts(o)).find(e=>r?e.id===r&&e.providerId===t:e.providerId===t);if(!s)throw new eR.APIError("BAD_REQUEST",{message:"Account not found"});let l=e.context.socialProviders.find(e=>e.id===t);if(!l)throw new eR.APIError("BAD_REQUEST",{message:`Provider ${t} not found.`});try{var u,c;let t=null,r=s.accessTokenExpiresAt&&new Date(s.accessTokenExpiresAt).getTime()-Date.now()<5e3;s.refreshToken&&r&&l.refreshAccessToken&&(t=await l.refreshAccessToken(s.refreshToken),await e.context.internalAdapter.updateAccount(s.id,{accessToken:await r7(t.accessToken,e.context),accessTokenExpiresAt:t.accessTokenExpiresAt,refreshToken:await r7(t.refreshToken,e.context),refreshTokenExpiresAt:t.refreshTokenExpiresAt}));let n={accessToken:await (u=t?.accessToken??s.accessToken??"",c=e.context,!u?u:c.options.account?.encryptOAuthTokens?rJ({key:c.secret,data:u}):u),accessTokenExpiresAt:t?.accessTokenExpiresAt??s.accessTokenExpiresAt??void 0,scopes:s.scope?.split(",")??[],idToken:t?.idToken??s.idToken??void 0};return e.json(n)}catch(e){throw new eR.APIError("BAD_REQUEST",{message:"Failed to get a valid access token",cause:e})}}),nE=(0,eQ.createAuthEndpoint)("/refresh-token",{method:"POST",body:eU.object({providerId:eU.string().meta({description:"The provider ID for the OAuth provider"}),accountId:eU.string().meta({description:"The account ID associated with the refresh token"}).optional(),userId:eU.string().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async e=>{let{providerId:t,accountId:r,userId:n}=e.body,i=e.request,a=await tl(e);if(i&&!a)throw e.error("UNAUTHORIZED");let o=a?.user?.id||n;if(!o)throw new eR.APIError("BAD_REQUEST",{message:"Either userId or session is required"});let s=(await e.context.internalAdapter.findAccounts(o)).find(e=>r?e.id===r&&e.providerId===t:e.providerId===t);if(!s)throw new eR.APIError("BAD_REQUEST",{message:"Account not found"});let l=e.context.socialProviders.find(e=>e.id===t);if(!l)throw new eR.APIError("BAD_REQUEST",{message:`Provider ${t} not found.`});if(!l.refreshAccessToken)throw new eR.APIError("BAD_REQUEST",{message:`Provider ${t} does not support token refreshing.`});try{let t=await l.refreshAccessToken(s.refreshToken);return await e.context.internalAdapter.updateAccount(s.id,{accessToken:await r7(t.accessToken,e.context),refreshToken:await r7(t.refreshToken,e.context),accessTokenExpiresAt:t.accessTokenExpiresAt,refreshTokenExpiresAt:t.refreshTokenExpiresAt}),e.json(t)}catch(e){throw new eR.APIError("BAD_REQUEST",{message:"Failed to refresh access token",cause:e})}}),nI=(0,eQ.createAuthEndpoint)("/account-info",{method:"POST",use:[tu],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},body:eU.object({accountId:eU.string().meta({description:"The provider given account id for which to get the account info"})})},async e=>{let t=await e.context.internalAdapter.findAccount(e.body.accountId);if(!t||t.userId!==e.context.session.user.id)throw new eR.APIError("BAD_REQUEST",{message:"Account not found"});let r=e.context.socialProviders.find(e=>e.id===t.providerId);if(!r)throw new eR.APIError("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${t.providerId} but it is not configured`});let n=await nx({...e,body:{accountId:t.id,providerId:t.providerId},returnHeaders:!1});if(!n.accessToken)throw new eR.APIError("BAD_REQUEST",{message:"Access token not found"});let i=await r.getUserInfo({...n,accessToken:n.accessToken});return e.json(i)}),nS=tA((e,t,r)=>{if(Array.isArray(e[t])&&Array.isArray(r))return e[t]=r,!0});function n$(e,t){let r={};for(let[n,i]of Object.entries(e))r[n]=async e=>{let r=await t,n={...e,context:{...r,returned:void 0,responseHeaders:void 0,session:null},path:i.path,headers:e?.headers?new Headers(e?.headers):void 0},{beforeHooks:a,afterHooks:o}=function(e){let t=e.options.plugins||[],r=[],n=[];e.options.hooks?.before&&r.push({matcher:()=>!0,handler:e.options.hooks.before}),e.options.hooks?.after&&n.push({matcher:()=>!0,handler:e.options.hooks.after});let i=t.map(e=>{if(e.hooks?.before)return e.hooks.before}).filter(e=>void 0!==e).flat(),a=t.map(e=>{if(e.hooks?.after)return e.hooks.after}).filter(e=>void 0!==e).flat();return i.length&&r.push(...i),a.length&&n.push(...a),{beforeHooks:r,afterHooks:n}}(r),s=await nk(n,a);if("context"in s&&s.context&&"object"==typeof s.context){let{headers:e,...t}=s.context;e&&e.forEach((e,t)=>{n.headers.set(t,e)}),n=nS(t,n)}else if(s)return e?.asResponse?(0,eR.toResponse)(s,{headers:e?.headers}):e?.returnHeaders?{headers:e?.headers,response:s}:s;n.asResponse=!1,n.returnHeaders=!0;let l=await i(n).catch(e=>{if(e instanceof eR.APIError)return{response:e,headers:e.headers?new Headers(e.headers):null};throw e});if(l&&l instanceof Response)return l;n.context.returned=l.response,n.context.responseHeaders=l.headers;let u=await nA(n,o);if(u.response&&(l.response=u.response),l.response instanceof eR.APIError&&(0,ej.shouldPublishLog)(r.logger.level,"debug")&&(l.response.stack=l.response.errorStack),l.response instanceof eR.APIError&&!e?.asResponse)throw l.response;return e?.asResponse?(0,eR.toResponse)(l.response,{headers:l.headers}):e?.returnHeaders?{headers:l.headers,response:l.response}:l.response},r[n].path=i.path,r[n].options=i.options;return r}async function nk(e,t){let r={};for(let n of t)if(n.matcher(e)){let t=await n.handler({...e,returnHeaders:!1}).catch(t=>{throw t instanceof eR.APIError&&(0,ej.shouldPublishLog)(e.context.logger.level,"debug")&&(t.stack=t.errorStack),t});if(t&&"object"==typeof t){if("context"in t&&"object"==typeof t.context){let{headers:e,...n}=t.context;e instanceof Headers&&(r.headers?e.forEach((e,t)=>{r.headers?.set(t,e)}):r.headers=e),r=nS(n,r);continue}return t}}return{context:r}}async function nA(e,t){for(let r of t)if(r.matcher(e)){let t=await r.handler(e).catch(t=>{if(t instanceof eR.APIError)return(0,ej.shouldPublishLog)(e.context.logger.level,"debug")&&(t.stack=t.errorStack),{response:t,headers:t.headers?new Headers(t.headers):null};throw t});t.headers&&t.headers.forEach((t,r)=>{e.context.responseHeaders?"set-cookie"===r.toLowerCase()?e.context.responseHeaders.append(r,t):e.context.responseHeaders.set(r,t):e.context.responseHeaders=new Headers({[r]:t})}),t.response&&(e.context.returned=t.response)}return{response:e.context.returned,headers:e.context.responseHeaders}}e.s(["A",()=>ng,"B",()=>r2,"C",()=>r3,"D",()=>nc,"E",()=>nl,"F",()=>nr,"G",()=>na,"I",()=>ni,"J",()=>nt,"a",()=>r0,"b",()=>nv,"c",()=>r4,"e",()=>ny,"f",()=>nI,"i",()=>nx,"j",()=>n_,"k",()=>nh,"l",()=>nb,"m",()=>nw,"n",()=>nu,"q",()=>ns,"r",()=>nE,"t",()=>n$,"u",()=>nd,"v",()=>nu,"w",()=>rY,"x",()=>nm,"y",()=>nf,"z",()=>np],80799);var nT=e.i(43608);function nO(e,t){if(t.advanced?.ipAddress?.disableIpTracking)return null;if((0,ej.isTest)()||(0,ej.isDevelopment)())return"127.0.0.1";let r="headers"in e?e.headers:e;for(let e of t.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"]){let t="get"in r?r.get(e):r[e];if("string"==typeof t){var n;let e=t.split(",")[0].trim();if(n=e,nT.z.ipv4().safeParse(n).success||nT.z.ipv6().safeParse(n).success)return e}}return null}e.s(["g",()=>nO],26235);let nR=new Map;async function nN(e,t){if(!t.rateLimit.enabled)return;let r=new URL(e.url).pathname.replace(t.options.basePath||"/api/auth",""),n=t.rateLimit.window,i=t.rateLimit.max,a=nO(e,t.options);if(!a)return;let o=a+r,s=[{pathMatcher:e=>e.startsWith("/sign-in")||e.startsWith("/sign-up")||e.startsWith("/change-password")||e.startsWith("/change-email"),window:10,max:3}].find(e=>e.pathMatcher(r));for(let e of(s&&(n=s.window,i=s.max),t.options.plugins||[]))if(e.rateLimit){let t=e.rateLimit.find(e=>e.pathMatcher(r));if(t){n=t.window,i=t.max;break}}if(t.rateLimit.customRules){let a=Object.keys(t.rateLimit.customRules).find(e=>e.includes("*")?rY(e)(r):e===r);if(a){let r=t.rateLimit.customRules[a],o="function"==typeof r?await r(e):r;if(o&&(n=o.window,i=o.max),!1===o)return}}let l=function(e,t){let r,n;if(e.options.rateLimit?.customStorage)return e.options.rateLimit.customStorage;let i=e.rateLimit.storage;return"secondary-storage"===i?{get:async t=>{let r=await e.options.secondaryStorage?.get(t);return r?(0,eL.s)(r):void 0},set:async(r,n,i)=>{let a=t?.window??e.options.rateLimit?.window??10;await e.options.secondaryStorage?.set?.(r,JSON.stringify(n),a)}}:"memory"===i?{get:async e=>nR.get(e),async set(e,t,r){nR.set(e,t)}}:(r="rateLimit",n=e.adapter,{get:async e=>{let t=(await n.findMany({model:r,where:[{field:"key",value:e}]}))[0];return"bigint"==typeof t?.lastRequest&&(t.lastRequest=Number(t.lastRequest)),t},set:async(t,i,a)=>{try{a?await n.updateMany({model:r,where:[{field:"key",value:t}],update:{count:i.count,lastRequest:i.lastRequest}}):await n.create({model:r,data:{key:t,count:i.count,lastRequest:i.lastRequest}})}catch(t){e.logger.error("Error setting rate limit",t)}}})}(t,{window:n}),u=await l.get(o),c=Date.now();if(u){var d,p,f;let e=c-u.lastRequest;if(d=i,p=n,Date.now()-u.lastRequest<1e3*p&&u.count>=d)return f=Math.ceil((u.lastRequest+1e3*n-Date.now())/1e3),new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":f.toString()}});e>1e3*n?await l.set(o,{...u,count:1,lastRequest:c},!0):await l.set(o,{...u,count:u.count+1,lastRequest:c},!0)}else await l.set(o,{key:o,count:1,lastRequest:c})}function nP(e,t){let r=new Map;e.plugins?.forEach(e=>{if(e.endpoints){for(let[t,n]of Object.entries(e.endpoints))if(n&&"path"in n){let i=n.path,a=[];n.options&&"method"in n.options&&(Array.isArray(n.options.method)?a=n.options.method:"string"==typeof n.options.method&&(a=[n.options.method])),0===a.length&&(a=["*"]),r.has(i)||r.set(i,[]),r.get(i).push({pluginId:e.id,endpointKey:t,methods:a})}}});let n=[];for(let[e,t]of r.entries())if(t.length>1){let r=new Map,i=!1;for(let e of t)for(let n of e.methods)r.has(n)||r.set(n,[]),r.get(n).push(e.pluginId),r.get(n).length>1&&(i=!0),"*"===n&&t.length>1?i=!0:"*"!==n&&r.has("*")&&(i=!0);if(i){let i=[...new Set(t.map(e=>e.pluginId))],a=[];for(let[e,n]of r.entries())(n.length>1||"*"===e&&t.length>1||"*"!==e&&r.has("*"))&&a.push(e);n.push({path:e,plugins:i,conflictingMethods:a})}}if(n.length>0){let e=n.map(e=>`  - "${e.path}" [${e.conflictingMethods.join(", ")}] used by plugins: ${e.plugins.join(", ")}`).join("\n");t.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${e}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}function nU(e,t){let r=t.plugins?.reduce((e,t)=>({...e,...t.endpoints}),{})??{},n=t.plugins?.map(t=>t.middlewares?.map(t=>{let r=async r=>{let n=await e;return t.middleware({...r,context:{...n,...r.context}})};return r.options=t.middleware.options,{path:t.path,middleware:r}})).filter(e=>void 0!==e).flat()||[];return{api:n$({...{signInSocial:nt,callbackOAuth:ni,getSession:ts(),signOut:na,signUpEmail:(0,eQ.createAuthEndpoint)("/sign-up/email",{method:"POST",body:eU.record(eU.string(),eU.any()),metadata:{$Infer:{body:{}},openapi:{description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async e=>{let t;if(!e.context.options.emailAndPassword?.enabled||e.context.options.emailAndPassword?.disableSignUp)throw new eR.APIError("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let r=e.body,{name:n,email:i,password:a,image:o,callbackURL:s,rememberMe:l,...u}=r;if(!eU.email().safeParse(i).success)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.INVALID_EMAIL});let c=e.context.password.config.minPasswordLength;if(a.length<c)throw e.context.logger.error("Password is too short"),new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.PASSWORD_TOO_SHORT});let d=e.context.password.config.maxPasswordLength;if(a.length>d)throw e.context.logger.error("Password is too long"),new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.PASSWORD_TOO_LONG});let p=await e.context.internalAdapter.findUserByEmail(i);if(p?.user)throw e.context.logger.info(`Sign-up attempt for existing email: ${i}`),new eR.APIError("UNPROCESSABLE_ENTITY",{message:eD.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let f=await e.context.password.hash(a);try{let r=tS(e.context.options,u,"create");if(!(t=await e.context.internalAdapter.createUser({email:i.toLowerCase(),name:n,image:o,...r,emailVerified:!1},e)))throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.FAILED_TO_CREATE_USER})}catch(t){if((0,ej.isDevelopment)()&&e.context.logger.error("Failed to create user",t),t instanceof eR.APIError)throw t;throw e.context.logger?.error("Failed to create user",t),new eR.APIError("UNPROCESSABLE_ENTITY",{message:eD.BASE_ERROR_CODES.FAILED_TO_CREATE_USER,details:t})}if(!t)throw new eR.APIError("UNPROCESSABLE_ENTITY",{message:eD.BASE_ERROR_CODES.FAILED_TO_CREATE_USER});if(await e.context.internalAdapter.linkAccount({userId:t.id,providerId:"credential",accountId:t.id,password:f},e),e.context.options.emailVerification?.sendOnSignUp||e.context.options.emailAndPassword.requireEmailVerification){let n=await r4(e.context.secret,t.email,void 0,e.context.options.emailVerification?.expiresIn),i=`${e.context.baseURL}/verify-email?token=${n}&callbackURL=${r.callbackURL||"/"}`,a=e.request?[{user:t,url:i,token:n},e.request]:[{user:t,url:i,token:n}];await e.context.options.emailVerification?.sendVerificationEmail?.(...a)}if(!1===e.context.options.emailAndPassword.autoSignIn||e.context.options.emailAndPassword.requireEmailVerification)return e.json({token:null,user:{id:t.id,email:t.email,name:t.name,image:t.image,emailVerified:t.emailVerified,createdAt:t.createdAt,updatedAt:t.updatedAt}});let m=await e.context.internalAdapter.createSession(t.id,e,!1===l);if(!m)throw new eR.APIError("BAD_REQUEST",{message:eD.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION});return await eG(e,{session:m,user:t},!1===l),e.json({token:m.token,user:{id:t.id,email:t.email,name:t.name,image:t.image,emailVerified:t.emailVerified,createdAt:t.createdAt,updatedAt:t.updatedAt}})}),signInEmail:nr,forgetPassword:nl,resetPassword:nc,verifyEmail:r3,sendVerificationEmail:r2,changeEmail:ng,changePassword:np,setPassword:nf,updateUser:nd(),deleteUser:nm,forgetPasswordCallback:nu,requestPasswordReset:ns,requestPasswordResetCallback:nu,listSessions:tp(),revokeSession:tf,revokeSessions:tm,revokeOtherSessions:th,linkSocialAccount:nw,listUserAccounts:nb,deleteUserCallback:nh,unlinkAccount:n_,refreshToken:nE,getAccessToken:nx,accountInfo:nI},...r,ok:nv,error:ny},e),middlewares:n}}let nD=(e,t)=>{let{api:r,middlewares:n}=nU(e,t),i=new URL(e.baseURL).pathname;return(0,eR.createRouter)(r,{routerContext:e,openapi:{disabled:!0},basePath:i,routerMiddleware:[{path:"/**",middleware:r0},...n],async onRequest(t){let r=e.options.disabledPaths||[],n=new URL(t.url).pathname.replace(i,"");if(r.includes(n))return new Response("Not Found",{status:404});for(let r of e.options.plugins||[])if(r.onRequest){let n=await r.onRequest(t,e);if(n&&"response"in n)return n.response;if(n&&"request"in n){let t=await nN(n.request,e);if(t)return t;return n.request}}return nN(t,e)},async onResponse(t){for(let r of e.options.plugins||[])if(r.onResponse){let n=await r.onResponse(t,e);if(n)return n.response}return t},onError(r){if(r instanceof eR.APIError&&"FOUND"===r.status)return;if(t.onAPIError?.throw)throw r;if(t.onAPIError?.onError)return void t.onAPIError.onError(r,e);let n=t.logger?.level,i="error"===n||"warn"===n||"debug"===n?ej.logger:void 0;if(t.logger?.disabled!==!0){if(r&&"object"==typeof r&&"message"in r&&"string"==typeof r.message&&(r.message.includes("no column")||r.message.includes("column")||r.message.includes("relation")||r.message.includes("table")||r.message.includes("does not exist")))return void e.logger?.error(r.message);r instanceof eR.APIError?("INTERNAL_SERVER_ERROR"===r.status&&e.logger.error(r.status,r),i?.error(r.message)):e.logger?.error(r&&"object"==typeof r&&"name"in r?r.name:"",r)}}})};e.s(["checkEndpointConflicts",()=>nP,"getEndpoints",()=>nU,"router",()=>nD],88071);var nC=e.i(91609),nj=e.i(85310),nz=e.i(25802),nL=e.i(92420);function nZ(e,t){return nL.RawNode.createWithChildren([nL.RawNode.createWithSql(`${e} `),nz.IdentifierNode.create(t)])}var nM=e.i(49787),nq=e.i(63433),nV=e.i(89886);class nB{#b;#w=new nW;#_;#x;constructor(e){this.#b=(0,nq.freeze)({...e})}async init(){this.#_=(0,nq.isFunction)(this.#b.database)?await this.#b.database():this.#b.database,this.#x=new nF(this.#_),this.#b.onCreateConnection&&await this.#b.onCreateConnection(this.#x)}async acquireConnection(){return await this.#w.lock(),this.#x}async beginTransaction(e){await e.executeQuery(nM.CompiledQuery.raw("begin"))}async commitTransaction(e){await e.executeQuery(nM.CompiledQuery.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(nM.CompiledQuery.raw("rollback"))}async savepoint(e,t,r){await e.executeQuery(r(nZ("savepoint",t),(0,nV.createQueryId)()))}async rollbackToSavepoint(e,t,r){await e.executeQuery(r(nZ("rollback to",t),(0,nV.createQueryId)()))}async releaseSavepoint(e,t,r){await e.executeQuery(r(nZ("release",t),(0,nV.createQueryId)()))}async releaseConnection(){this.#w.unlock()}async destroy(){this.#_?.close()}}class nF{#_;constructor(e){this.#_=e}executeQuery(e){let{sql:t,parameters:r}=e,n=this.#_.prepare(t);if(n.reader)return Promise.resolve({rows:n.all(r)});let{changes:i,lastInsertRowid:a}=n.run(r);return Promise.resolve({numAffectedRows:null!=i?BigInt(i):void 0,insertId:null!=a?BigInt(a):void 0,rows:[]})}async *streamQuery(e,t){let{sql:r,parameters:n,query:i}=e,a=this.#_.prepare(r);if(nj.SelectQueryNode.is(i))for(let e of a.iterate(n))yield{rows:[e]};else throw Error("Sqlite driver only supports streaming of select queries")}}class nW{#E;#I;async lock(){for(;this.#E;)await this.#E;this.#E=new Promise(e=>{this.#I=e})}unlock(){let e=this.#I;this.#E=void 0,this.#I=void 0,e?.()}}var nH=e.i(23844);let nK=/"/g;class nG extends nH.DefaultQueryCompiler{visitOrAction(e){this.append("or "),this.append(e.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(nK,'""')}visitDefaultInsertValue(e){this.append("null")}}var nJ=e.i(51930),nQ=e.i(71100);class nX{#_;constructor(e){this.#_=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){return await this.#S(e)}async getMetadata(e){return{tables:await this.getTables(e)}}#$(e,t){let r=e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");return t.withInternalKyselyTables||(r=r.where("name","!=",nJ.DEFAULT_MIGRATION_TABLE).where("name","!=",nJ.DEFAULT_MIGRATION_LOCK_TABLE)),r}async #S(e){let t=await this.#$(this.#_,e).execute(),r=await this.#_.with("table_list",t=>this.#$(t,e)).selectFrom(["table_list as tl",nQ.sql`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),n={};for(let e of r)n[e.table]??=[],n[e.table].push(e);return t.map(({name:e,sql:t,type:r})=>{let i=t?.split(/[\(\),]/)?.find(e=>e.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),a=n[e]??[];if(!i){let e=a.filter(e=>e.pk>0);1===e.length&&"integer"===e[0].type.toLowerCase()&&(i=e[0].name)}return{name:e,isView:"view"===r,columns:a.map(e=>({name:e.name,dataType:e.type,isNullable:!e.notnull,isAutoIncrementing:e.name===i,hasDefaultValue:null!=e.dflt_value,comment:void 0}))}})}}class nY{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}class n0 extends nY{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,t){}async releaseMigrationLock(e,t){}}class n1{#b;constructor(e){this.#b=(0,nq.freeze)({...e})}createDriver(){return new nB(this.#b)}createQueryCompiler(){return new nG}createAdapter(){return new n0}createIntrospector(e){return new nX(e)}}function n4(e,t){var r;if(r=e,(0,nq.isObject)(r)&&(0,nq.isString)(r.stack)&&t.stack){let r=t.stack.split("\n").slice(1).join("\n");e.stack+=`
${r}`}return e}let n6=Symbol();class n2{#b;#k=new WeakMap;#A;constructor(e){this.#b=(0,nq.freeze)({...e})}async init(){this.#A=(0,nq.isFunction)(this.#b.pool)?await this.#b.pool():this.#b.pool}async acquireConnection(){let e=await this.#T(),t=this.#k.get(e);return!t&&(t=new n3(e),this.#k.set(e,t),this.#b?.onCreateConnection&&await this.#b.onCreateConnection(t)),this.#b?.onReserveConnection&&await this.#b.onReserveConnection(t),t}async #T(){return new Promise((e,t)=>{this.#A.getConnection(async(r,n)=>{r?t(r):e(n)})})}async beginTransaction(e,t){if(t.isolationLevel||t.accessMode){let r=[];t.isolationLevel&&r.push(`isolation level ${t.isolationLevel}`),t.accessMode&&r.push(t.accessMode);let n=`set transaction ${r.join(", ")}`;await e.executeQuery(nM.CompiledQuery.raw(n))}await e.executeQuery(nM.CompiledQuery.raw("begin"))}async commitTransaction(e){await e.executeQuery(nM.CompiledQuery.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(nM.CompiledQuery.raw("rollback"))}async savepoint(e,t,r){await e.executeQuery(r(nZ("savepoint",t),(0,nV.createQueryId)()))}async rollbackToSavepoint(e,t,r){await e.executeQuery(r(nZ("rollback to",t),(0,nV.createQueryId)()))}async releaseSavepoint(e,t,r){await e.executeQuery(r(nZ("release savepoint",t),(0,nV.createQueryId)()))}async releaseConnection(e){e[n6]()}async destroy(){return new Promise((e,t)=>{this.#A.end(r=>{r?t(r):e()})})}}class n3{#O;constructor(e){this.#O=e}async executeQuery(e){try{let t=await this.#R(e);if((0,nq.isObject)(t)&&"insertId"in t&&"affectedRows"in t){let{insertId:e,affectedRows:r,changedRows:n}=t;return{insertId:null!=e&&"0"!==e.toString()?BigInt(e):void 0,numAffectedRows:null!=r?BigInt(r):void 0,numChangedRows:null!=n?BigInt(n):void 0,rows:[]}}if(Array.isArray(t))return{rows:t};return{rows:[]}}catch(e){throw n4(e,Error())}}#R(e){return new Promise((t,r)=>{this.#O.query(e.sql,e.parameters,(e,n)=>{e?r(e):t(n)})})}async *streamQuery(e,t){let r=this.#O.query(e.sql,e.parameters).stream({objectMode:!0});try{for await(let e of r)yield{rows:[e]}}catch(e){if(e&&"object"==typeof e&&"code"in e&&"ERR_STREAM_PREMATURE_CLOSE"===e.code)return;throw e}}[n6](){this.#O.release()}}var n9=nH;let n8=/`/g;class n5 extends n9.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(n8,"``")}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.using&&(this.append(" using "),this.visitNode(e.using)),e.table&&(this.append(" on "),this.visitNode(e.table)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}}class n7{#_;constructor(e){this.#_=e}async getSchemas(){return(await this.#_.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(e=>({name:e.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let t=this.#_.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",e=>e.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",nQ.sql`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();e.withInternalKyselyTables||(t=t.where("columns.TABLE_NAME","!=",nJ.DEFAULT_MIGRATION_TABLE).where("columns.TABLE_NAME","!=",nJ.DEFAULT_MIGRATION_LOCK_TABLE));let r=await t.execute();return this.#N(r)}async getMetadata(e){return{tables:await this.getTables(e)}}#N(e){return e.reduce((e,t)=>{let r=e.find(e=>e.name===t.TABLE_NAME);return r||(r=(0,nq.freeze)({name:t.TABLE_NAME,isView:"VIEW"===t.TABLE_TYPE,schema:t.TABLE_SCHEMA,columns:[]}),e.push(r)),r.columns.push((0,nq.freeze)({name:t.COLUMN_NAME,dataType:t.DATA_TYPE,isNullable:"YES"===t.IS_NULLABLE,isAutoIncrementing:t.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:null!==t.COLUMN_DEFAULT,comment:""===t.COLUMN_COMMENT?void 0:t.COLUMN_COMMENT})),e},[])}}let ie="ea586330-2c93-47c8-908d-981d9d270f9d";class it extends nY{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e,t){await nQ.sql`select get_lock(${nQ.sql.lit(ie)}, ${nQ.sql.lit(3600)})`.execute(e)}async releaseMigrationLock(e,t){await nQ.sql`select release_lock(${nQ.sql.lit(ie)})`.execute(e)}}class ir{#b;constructor(e){this.#b=e}createDriver(){return new n2(this.#b)}createQueryCompiler(){return new n5}createAdapter(){return new it}createIntrospector(e){return new n7(e)}}let ii=Symbol();class ia{#b;#k=new WeakMap;#A;constructor(e){this.#b=(0,nq.freeze)({...e})}async init(){this.#A=(0,nq.isFunction)(this.#b.pool)?await this.#b.pool():this.#b.pool}async acquireConnection(){let e=await this.#A.connect(),t=this.#k.get(e);return!t&&(t=new io(e,{cursor:this.#b.cursor??null}),this.#k.set(e,t),this.#b.onCreateConnection&&await this.#b.onCreateConnection(t)),this.#b.onReserveConnection&&await this.#b.onReserveConnection(t),t}async beginTransaction(e,t){if(t.isolationLevel||t.accessMode){let r="start transaction";t.isolationLevel&&(r+=` isolation level ${t.isolationLevel}`),t.accessMode&&(r+=` ${t.accessMode}`),await e.executeQuery(nM.CompiledQuery.raw(r))}else await e.executeQuery(nM.CompiledQuery.raw("begin"))}async commitTransaction(e){await e.executeQuery(nM.CompiledQuery.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(nM.CompiledQuery.raw("rollback"))}async savepoint(e,t,r){await e.executeQuery(r(nZ("savepoint",t),(0,nV.createQueryId)()))}async rollbackToSavepoint(e,t,r){await e.executeQuery(r(nZ("rollback to",t),(0,nV.createQueryId)()))}async releaseSavepoint(e,t,r){await e.executeQuery(r(nZ("release",t),(0,nV.createQueryId)()))}async releaseConnection(e){e[ii]()}async destroy(){if(this.#A){let e=this.#A;this.#A=void 0,await e.end()}}}class io{#P;#U;constructor(e,t){this.#P=e,this.#U=t}async executeQuery(e){try{let{command:t,rowCount:r,rows:n}=await this.#P.query(e.sql,[...e.parameters]);return{numAffectedRows:"INSERT"===t||"UPDATE"===t||"DELETE"===t||"MERGE"===t?BigInt(r):void 0,rows:n??[]}}catch(e){throw n4(e,Error())}}async *streamQuery(e,t){if(!this.#U.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(t)||t<=0)throw Error("chunkSize must be a positive integer");let r=this.#P.query(new this.#U.cursor(e.sql,e.parameters.slice()));try{for(;;){let e=await r.read(t);if(0===e.length)break;yield{rows:e}}}finally{await r.close()}}[ii](){this.#P.release()}}class is{#_;constructor(e){this.#_=e}async getSchemas(){return(await this.#_.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(e=>({name:e.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let t=this.#_.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",nQ.sql`col_description(a.attrelid, a.attnum)`.as("column_description"),nQ.sql`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where(nQ.sql`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(t=t.where("c.relname","!=",nJ.DEFAULT_MIGRATION_TABLE).where("c.relname","!=",nJ.DEFAULT_MIGRATION_LOCK_TABLE));let r=await t.execute();return this.#N(r)}async getMetadata(e){return{tables:await this.getTables(e)}}#N(e){return e.reduce((e,t)=>{let r=e.find(e=>e.name===t.table&&e.schema===t.schema);return r||(r=(0,nq.freeze)({name:t.table,isView:"v"===t.table_type,schema:t.schema,columns:[]}),e.push(r)),r.columns.push((0,nq.freeze)({name:t.column,dataType:t.type,dataTypeSchema:t.type_schema,isNullable:!t.not_null,isAutoIncrementing:null!==t.auto_incrementing,hasDefaultValue:t.has_default,comment:t.column_description??void 0})),e},[])}}var il=nH;let iu=/"/g;class ic extends il.DefaultQueryCompiler{sanitizeIdentifier(e){return e.replace(iu,'""')}}let id=BigInt("3853314791062309107");class ip extends nY{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,t){await nQ.sql`select pg_advisory_xact_lock(${nQ.sql.lit(id)})`.execute(e)}async releaseMigrationLock(e,t){}}class im{#b;constructor(e){this.#b=e}createDriver(){return new ia(this.#b)}createQueryCompiler(){return new ic}createAdapter(){return new ip}createIntrospector(e){return new is(e)}}class ih extends nY{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(e){await nQ.sql`exec sp_getapplock @DbPrincipal = ${nQ.sql.lit("dbo")}, @Resource = ${nQ.sql.lit(nJ.DEFAULT_MIGRATION_TABLE)}, @LockMode = ${nQ.sql.lit("Exclusive")}`.execute(e)}async releaseMigrationLock(){}}var ig=e.i(40568),iy=e.i(88342);let iv=Symbol(),ib=Symbol(),iw=Symbol();class i_{#b;#A;constructor(e){this.#b=(0,nq.freeze)({...e});const{tarn:t,tedious:r,validateConnections:n}=this.#b,{validateConnections:i,...a}=t.options;this.#A=new t.Pool({...a,create:async()=>{let e=await r.connectionFactory();return await new ix(e,r).connect()},destroy:async e=>{await e[ib]()},validate:!1===n||!1===i?void 0:e=>e[iw]()})}async init(){}async acquireConnection(){return await this.#A.acquire().promise}async beginTransaction(e,t){await e.beginTransaction(t)}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async savepoint(e,t){await e.savepoint(t)}async rollbackToSavepoint(e,t){await e.rollbackTransaction(t)}async releaseConnection(e){(this.#b.resetConnectionsOnRelease||this.#b.tedious.resetConnectionOnRelease)&&await e[iv](),this.#A.release(e)}async destroy(){await this.#A.destroy()}}class ix{#x;#D;#C;constructor(e,t){this.#x=e,this.#D=!1,this.#C=t}async beginTransaction(e){let{isolationLevel:t}=e;await new Promise((e,r)=>this.#x.beginTransaction(t=>{t?r(t):e(void 0)},t?(0,ig.randomString)(8):void 0,t?this.#j(t):void 0))}async commitTransaction(){await new Promise((e,t)=>this.#x.commitTransaction(r=>{r?t(r):e(void 0)}))}async connect(){let{promise:e,reject:t,resolve:r}=new iy.Deferred;function n(){t(Error("The connection ended without ever completing the connection"))}return this.#x.connect(e=>{if(e)return t(e);r()}),this.#x.on("error",e=>{e instanceof Error&&"code"in e&&"ESOCKET"===e.code&&(this.#D=!0),console.error(e),t(e)}),this.#x.once("end",n),await e,this.#x.off("end",n),this}async executeQuery(e){try{let t=new iy.Deferred,r=new iE({compiledQuery:e,tedious:this.#C,onDone:t});this.#x.execSql(r.request);let{rowCount:n,rows:i}=await t.promise;return{numAffectedRows:void 0!==n?BigInt(n):void 0,rows:i}}catch(e){throw n4(e,Error())}}async rollbackTransaction(e){await new Promise((t,r)=>this.#x.rollbackTransaction(e=>{e?r(e):t(void 0)},e))}async savepoint(e){await new Promise((t,r)=>this.#x.saveTransaction(e=>{e?r(e):t(void 0)},e))}async *streamQuery(e,t){if(!Number.isInteger(t)||t<=0)throw Error("chunkSize must be a positive integer");let r=new iE({compiledQuery:e,streamChunkSize:t,tedious:this.#C});this.#x.execSql(r.request);try{for(;;){let e=await r.readChunk();if(0===e.length||(yield{rows:e},e.length<t))break}}finally{await this.#z(r)}}#j(e){let{ISOLATION_LEVEL:t}=this.#C,r={"read committed":t.READ_COMMITTED,"read uncommitted":t.READ_UNCOMMITTED,"repeatable read":t.REPEATABLE_READ,serializable:t.SERIALIZABLE,snapshot:t.SNAPSHOT}[e];if(void 0===r)throw Error(`Unknown isolation level: ${e}`);return r}#z(e){return new Promise(t=>{e.request.once("requestCompleted",t),this.#x.cancel()||(e.request.off("requestCompleted",t),t())})}[ib](){return"closed"in this.#x&&this.#x.closed?Promise.resolve():new Promise(e=>{this.#x.once("end",e),this.#x.close()})}async [iv](){await new Promise((e,t)=>{this.#x.reset(r=>{if(r)return t(r);e()})})}async [iw](){if(this.#D||this.#L())return!1;try{let e=new iy.Deferred,t=new iE({compiledQuery:nM.CompiledQuery.raw("select 1"),onDone:e,tedious:this.#C});return this.#x.execSql(t.request),await e.promise,!0}catch{return!1}}#L(){return"closed"in this.#x&&!!this.#x.closed}}class iE{#Z;#M;#q;#V;#C;#B;constructor(e){const{compiledQuery:t,onDone:r,streamChunkSize:n,tedious:i}=e;if(this.#M=[],this.#q=n,this.#V={},this.#C=i,r){const e="onDone";this.#V[e]=(t,n)=>{if("chunkReady"!==t){if(delete this.#V[e],"error"===t)return r.reject(n);r.resolve({rowCount:this.#B,rows:this.#M})}}}this.#Z=new this.#C.Request(t.sql,(e,t)=>{if(e)return Object.values(this.#V).forEach(t=>t("error",e instanceof AggregateError?e.errors:e));this.#B=t}),this.#F(t.parameters),this.#W()}get request(){return this.#Z}readChunk(){let e=this.readChunk.name;return new Promise((t,r)=>{this.#V[e]=(n,i)=>{if(delete this.#V[e],"error"===n)return r(i);t(this.#M.splice(0,this.#q))},this.#Z.resume()})}#F(e){for(let t=0;t<e.length;t++){let r=e[t];this.#Z.addParameter(String(t+1),this.#H(r),r)}}#W(){let e=this.#q?()=>{this.#q<=this.#M.length&&(this.#Z.pause(),Object.values(this.#V).forEach(e=>e("chunkReady")))}:()=>{},t=t=>{let r={};for(let e of t)r[e.metadata.colName]=e.value;this.#M.push(r),e()};this.#Z.on("row",t),this.#Z.once("requestCompleted",()=>{Object.values(this.#V).forEach(e=>e("completed")),this.#Z.off("row",t)})}#H(e){if((0,nq.isNull)(e)||(0,nq.isUndefined)(e)||(0,nq.isString)(e))return this.#C.TYPES.NVarChar;if((0,nq.isBigInt)(e)||(0,nq.isNumber)(e)&&e%1==0)if(e<-0x80000000||e>0x7fffffff)return this.#C.TYPES.BigInt;else return this.#C.TYPES.Int;return(0,nq.isNumber)(e)?this.#C.TYPES.Float:(0,nq.isBoolean)(e)?this.#C.TYPES.Bit:(0,nq.isDate)(e)?this.#C.TYPES.DateTime:(0,nq.isBuffer)(e)?this.#C.TYPES.VarBinary:this.#C.TYPES.NVarChar}}class iI{#_;constructor(e){this.#_=e}async getSchemas(){return await this.#_.selectFrom("sys.schemas").select("name").execute()}async getTables(e={withInternalKyselyTables:!1}){let t=await this.#_.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",e=>e.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!e.withInternalKyselyTables,e=>e.where("tables.name","!=",nJ.DEFAULT_MIGRATION_TABLE).where("tables.name","!=",nJ.DEFAULT_MIGRATION_LOCK_TABLE)).select(["tables.name as table_name",e=>e.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#_.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",e=>e.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),r={};for(let e of t){let t=`${e.table_schema_name}.${e.table_name}`;(r[t]=r[t]||(0,nq.freeze)({columns:[],isView:"V "===e.table_type,name:e.table_name,schema:e.table_schema_name??void 0})).columns.push((0,nq.freeze)({dataType:e.type_name,dataTypeSchema:e.type_schema_name??void 0,hasDefaultValue:e.column_default_object_id>0||"NOT_APPLICABLE"!==e.column_generated_always_type||e.column_is_identity||e.column_is_computed||e.column_is_rowguidcol,isAutoIncrementing:e.column_is_identity,isNullable:e.column_is_nullable&&e.type_is_nullable,name:e.column_name,comment:e.column_comment??void 0}))}return Object.values(r)}async getMetadata(e){return{tables:await this.getTables(e)}}}var iS=nH;let i$=/^[a-z0-9_]$/i;class ik extends iS.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(e){super.visitOffset(e),this.append(" rows")}compileColumnAlterations(e){let t={};for(let r of e)t[r.kind]||(t[r.kind]=[]),t[r.kind].push(r);let r=!0;t.AddColumnNode&&(this.append("add "),this.compileList(t.AddColumnNode),r=!1),t.AlterColumnNode&&(r||this.append(", "),this.compileList(t.AlterColumnNode)),t.DropColumnNode&&(r||this.append(", "),this.append("drop column "),this.compileList(t.DropColumnNode)),t.ModifyColumnNode&&(r||this.append(", "),this.compileList(t.ModifyColumnNode)),t.RenameColumnNode&&(r||this.append(", "),this.compileList(t.RenameColumnNode))}visitAddColumn(e){this.visitNode(e.column)}visitDropColumn(e){this.visitNode(e.column)}visitMergeQuery(e){super.visitMergeQuery(e),this.append(";")}visitCollate(e){this.append("collate ");let{name:t}=e.collation;for(let e of t)if(!i$.test(e))throw Error(`Invalid collation: ${t}`);this.append(t)}announcesNewColumnDataType(){return!1}}class iA{#b;constructor(e){this.#b=e}createDriver(){return new i_(this.#b)}createQueryCompiler(){return new ik}createAdapter(){return new ih}createIntrospector(e){return new iI(e)}}let iT=(0,nq.freeze)({is:e=>"AlterTableNode"===e.kind,create:e=>(0,nq.freeze)({kind:"AlterTableNode",table:e}),cloneWithTableProps:(e,t)=>(0,nq.freeze)({...e,...t}),cloneWithColumnAlteration:(e,t)=>(0,nq.freeze)({...e,columnAlterations:e.columnAlterations?[...e.columnAlterations,t]:[t]})}),iO=(0,nq.freeze)({is:e=>"CreateIndexNode"===e.kind,create:e=>(0,nq.freeze)({kind:"CreateIndexNode",name:nz.IdentifierNode.create(e)}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t}),cloneWithColumns:(e,t)=>(0,nq.freeze)({...e,columns:[...e.columns||[],...t]})}),iR=(0,nq.freeze)({is:e=>"CreateSchemaNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"CreateSchemaNode",schema:nz.IdentifierNode.create(e),...t}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})});var iN=e.i(36369),iP=e.i(42349);let iU=(0,nq.freeze)({is:e=>"DropIndexNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"DropIndexNode",name:iP.SchemableIdentifierNode.create(e),...t}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})}),iD=(0,nq.freeze)({is:e=>"DropSchemaNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"DropSchemaNode",schema:nz.IdentifierNode.create(e),...t}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})}),iC=(0,nq.freeze)({is:e=>"DropTableNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"DropTableNode",table:e,...t}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})});var ij=e.i(13981);let iz=(0,nq.freeze)({is:e=>"AddColumnNode"===e.kind,create:e=>(0,nq.freeze)({kind:"AddColumnNode",column:e})});var iL=e.i(65477);let iZ=(0,nq.freeze)({is:e=>"ColumnDefinitionNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"ColumnDefinitionNode",column:iL.ColumnNode.create(e),dataType:t}),cloneWithFrontModifier:(e,t)=>(0,nq.freeze)({...e,frontModifiers:e.frontModifiers?(0,nq.freeze)([...e.frontModifiers,t]):[t]}),cloneWithEndModifier:(e,t)=>(0,nq.freeze)({...e,endModifiers:e.endModifiers?(0,nq.freeze)([...e.endModifiers,t]):[t]}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})}),iM=(0,nq.freeze)({is:e=>"DropColumnNode"===e.kind,create:e=>(0,nq.freeze)({kind:"DropColumnNode",column:iL.ColumnNode.create(e)})}),iq=(0,nq.freeze)({is:e=>"RenameColumnNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"RenameColumnNode",column:iL.ColumnNode.create(e),renameTo:iL.ColumnNode.create(t)})}),iV=(0,nq.freeze)({is:e=>"CheckConstraintNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"CheckConstraintNode",expression:e,name:t?nz.IdentifierNode.create(t):void 0})}),iB=["no action","restrict","cascade","set null","set default"],iF=(0,nq.freeze)({is:e=>"ReferencesNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"ReferencesNode",table:e,columns:(0,nq.freeze)([...t])}),cloneWithOnDelete:(e,t)=>(0,nq.freeze)({...e,onDelete:t}),cloneWithOnUpdate:(e,t)=>(0,nq.freeze)({...e,onUpdate:t})});var iW=e.i(31754),iH=e.i(44892),iK=e.i(22254),iG=e.i(37356);function iJ(e){return(0,iK.isOperationNodeSource)(e)?e.toOperationNode():iG.ValueNode.createImmediate(e)}let iQ=(0,nq.freeze)({is:e=>"GeneratedNode"===e.kind,create:e=>(0,nq.freeze)({kind:"GeneratedNode",...e}),createWithExpression:e=>(0,nq.freeze)({kind:"GeneratedNode",always:!0,expression:e}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})}),iX=(0,nq.freeze)({is:e=>"DefaultValueNode"===e.kind,create:e=>(0,nq.freeze)({kind:"DefaultValueNode",defaultValue:e})});function iY(e){if(iB.includes(e))return e;throw Error(`invalid OnModifyForeignAction ${e}`)}class i0{#K;constructor(e){this.#K=e}autoIncrement(){return new i0(iZ.cloneWith(this.#K,{autoIncrement:!0}))}identity(){return new i0(iZ.cloneWith(this.#K,{identity:!0}))}primaryKey(){return new i0(iZ.cloneWith(this.#K,{primaryKey:!0}))}references(e){let t=(0,iH.parseStringReference)(e);if(!t.table||iW.SelectAllNode.is(t.column))throw Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new i0(iZ.cloneWith(this.#K,{references:iF.create(t.table,[t.column])}))}onDelete(e){if(!this.#K.references)throw Error("on delete constraint can only be added for foreign keys");return new i0(iZ.cloneWith(this.#K,{references:iF.cloneWithOnDelete(this.#K.references,iY(e))}))}onUpdate(e){if(!this.#K.references)throw Error("on update constraint can only be added for foreign keys");return new i0(iZ.cloneWith(this.#K,{references:iF.cloneWithOnUpdate(this.#K.references,iY(e))}))}unique(){return new i0(iZ.cloneWith(this.#K,{unique:!0}))}notNull(){return new i0(iZ.cloneWith(this.#K,{notNull:!0}))}unsigned(){return new i0(iZ.cloneWith(this.#K,{unsigned:!0}))}defaultTo(e){return new i0(iZ.cloneWith(this.#K,{defaultTo:iX.create(iJ(e))}))}check(e){return new i0(iZ.cloneWith(this.#K,{check:iV.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new i0(iZ.cloneWith(this.#K,{generated:iQ.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new i0(iZ.cloneWith(this.#K,{generated:iQ.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new i0(iZ.cloneWith(this.#K,{generated:iQ.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#K.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new i0(iZ.cloneWith(this.#K,{generated:iQ.cloneWith(this.#K.generated,{stored:!0})}))}modifyFront(e){return new i0(iZ.cloneWithFrontModifier(this.#K,e.toOperationNode()))}nullsNotDistinct(){return new i0(iZ.cloneWith(this.#K,{nullsNotDistinct:!0}))}ifNotExists(){return new i0(iZ.cloneWith(this.#K,{ifNotExists:!0}))}modifyEnd(e){return new i0(iZ.cloneWithEndModifier(this.#K,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#K}}let i1=(0,nq.freeze)({is:e=>"ModifyColumnNode"===e.kind,create:e=>(0,nq.freeze)({kind:"ModifyColumnNode",column:e})});var i4=e.i(70366);let i6=(0,nq.freeze)({is:e=>"ForeignKeyConstraintNode"===e.kind,create:(e,t,r,n)=>(0,nq.freeze)({kind:"ForeignKeyConstraintNode",columns:e,references:iF.create(t,r),name:n?nz.IdentifierNode.create(n):void 0}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})});class i2{#K;constructor(e){this.#K=e}onDelete(e){return new i2(i6.cloneWith(this.#K,{onDelete:iY(e)}))}onUpdate(e){return new i2(i6.cloneWith(this.#K,{onUpdate:iY(e)}))}deferrable(){return new i2(i6.cloneWith(this.#K,{deferrable:!0}))}notDeferrable(){return new i2(i6.cloneWith(this.#K,{deferrable:!1}))}initiallyDeferred(){return new i2(i6.cloneWith(this.#K,{initiallyDeferred:!0}))}initiallyImmediate(){return new i2(i6.cloneWith(this.#K,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#K}}let i3=(0,nq.freeze)({is:e=>"AddConstraintNode"===e.kind,create:e=>(0,nq.freeze)({kind:"AddConstraintNode",constraint:e})}),i9=(0,nq.freeze)({is:e=>"UniqueConstraintNode"===e.kind,create:(e,t,r)=>(0,nq.freeze)({kind:"UniqueConstraintNode",columns:(0,nq.freeze)(e.map(iL.ColumnNode.create)),name:t?nz.IdentifierNode.create(t):void 0,nullsNotDistinct:r}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})}),i8=(0,nq.freeze)({is:e=>"DropConstraintNode"===e.kind,create:e=>(0,nq.freeze)({kind:"DropConstraintNode",constraintName:nz.IdentifierNode.create(e)}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})}),i5=(0,nq.freeze)({is:e=>"AlterColumnNode"===e.kind,create:(e,t,r)=>(0,nq.freeze)({kind:"AlterColumnNode",column:iL.ColumnNode.create(e),[t]:r})});class i7{#G;constructor(e){this.#G=e}setDataType(e){return new ae(i5.create(this.#G,"dataType",(0,i4.parseDataTypeExpression)(e)))}setDefault(e){return new ae(i5.create(this.#G,"setDefault",iJ(e)))}dropDefault(){return new ae(i5.create(this.#G,"dropDefault",!0))}setNotNull(){return new ae(i5.create(this.#G,"setNotNull",!0))}dropNotNull(){return new ae(i5.create(this.#G,"dropNotNull",!0))}$call(e){return e(this)}}class ae{#J;constructor(e){this.#J=e}toOperationNode(){return this.#J}}class at{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}class ar{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}onDelete(e){return new ar({...this.#Q,constraintBuilder:this.#Q.constraintBuilder.onDelete(e)})}onUpdate(e){return new ar({...this.#Q,constraintBuilder:this.#Q.constraintBuilder.onUpdate(e)})}deferrable(){return new ar({...this.#Q,constraintBuilder:this.#Q.constraintBuilder.deferrable()})}notDeferrable(){return new ar({...this.#Q,constraintBuilder:this.#Q.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new ar({...this.#Q,constraintBuilder:this.#Q.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new ar({...this.#Q,constraintBuilder:this.#Q.constraintBuilder.initiallyImmediate()})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(iT.cloneWithTableProps(this.#Q.node,{addConstraint:i3.create(this.#Q.constraintBuilder.toOperationNode())}),this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}class an{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}ifExists(){return new an({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{dropConstraint:i8.cloneWith(this.#Q.node.dropConstraint,{ifExists:!0})})})}cascade(){return new an({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{dropConstraint:i8.cloneWith(this.#Q.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new an({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{dropConstraint:i8.cloneWith(this.#Q.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}let ai=(0,nq.freeze)({is:e=>"PrimaryKeyConstraintNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"PrimaryKeyConstraintNode",columns:(0,nq.freeze)(e.map(iL.ColumnNode.create)),name:t?nz.IdentifierNode.create(t):void 0}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})}),aa=(0,nq.freeze)({is:e=>"AddIndexNode"===e.kind,create:e=>(0,nq.freeze)({kind:"AddIndexNode",name:nz.IdentifierNode.create(e)}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t}),cloneWithColumns:(e,t)=>(0,nq.freeze)({...e,columns:[...e.columns||[],...t]})});class ao{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}unique(){return new ao({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{addIndex:aa.cloneWith(this.#Q.node.addIndex,{unique:!0})})})}column(e){return new ao({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{addIndex:aa.cloneWithColumns(this.#Q.node.addIndex,[(0,iH.parseOrderedColumnName)(e)])})})}columns(e){return new ao({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{addIndex:aa.cloneWithColumns(this.#Q.node.addIndex,e.map(iH.parseOrderedColumnName))})})}expression(e){return new ao({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{addIndex:aa.cloneWithColumns(this.#Q.node.addIndex,[e.toOperationNode()])})})}using(e){return new ao({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{addIndex:aa.cloneWith(this.#Q.node.addIndex,{using:nL.RawNode.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}class as{#K;constructor(e){this.#K=e}nullsNotDistinct(){return new as(i9.cloneWith(this.#K,{nullsNotDistinct:!0}))}deferrable(){return new as(i9.cloneWith(this.#K,{deferrable:!0}))}notDeferrable(){return new as(i9.cloneWith(this.#K,{deferrable:!1}))}initiallyDeferred(){return new as(i9.cloneWith(this.#K,{initiallyDeferred:!0}))}initiallyImmediate(){return new as(i9.cloneWith(this.#K,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#K}}class al{#K;constructor(e){this.#K=e}deferrable(){return new al(ai.cloneWith(this.#K,{deferrable:!0}))}notDeferrable(){return new al(ai.cloneWith(this.#K,{deferrable:!1}))}initiallyDeferred(){return new al(ai.cloneWith(this.#K,{initiallyDeferred:!0}))}initiallyImmediate(){return new al(ai.cloneWith(this.#K,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#K}}class au{#K;constructor(e){this.#K=e}$call(e){return e(this)}toOperationNode(){return this.#K}}let ac=(0,nq.freeze)({is:e=>"RenameConstraintNode"===e.kind,create:(e,t)=>(0,nq.freeze)({kind:"RenameConstraintNode",oldName:nz.IdentifierNode.create(e),newName:nz.IdentifierNode.create(t)})});class ad{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}renameTo(e){return new at({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{renameTo:(0,ij.parseTable)(e)})})}setSchema(e){return new at({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{setSchema:nz.IdentifierNode.create(e)})})}alterColumn(e,t){let r=t(new i7(e));return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,r.toOperationNode())})}dropColumn(e){return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,iM.create(e))})}renameColumn(e,t){return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,iq.create(e,t))})}addColumn(e,t,r=nq.noop){let n=r(new i0(iZ.create(e,(0,i4.parseDataTypeExpression)(t))));return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,iz.create(n.toOperationNode()))})}modifyColumn(e,t,r=nq.noop){let n=r(new i0(iZ.create(e,(0,i4.parseDataTypeExpression)(t))));return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,i1.create(n.toOperationNode()))})}addUniqueConstraint(e,t,r=nq.noop){let n=r(new as(i9.create(t,e)));return new at({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{addConstraint:i3.create(n.toOperationNode())})})}addCheckConstraint(e,t,r=nq.noop){let n=r(new au(iV.create(t.toOperationNode(),e)));return new at({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{addConstraint:i3.create(n.toOperationNode())})})}addForeignKeyConstraint(e,t,r,n,i=nq.noop){let a=i(new i2(i6.create(t.map(iL.ColumnNode.create),(0,ij.parseTable)(r),n.map(iL.ColumnNode.create),e)));return new ar({...this.#Q,constraintBuilder:a})}addPrimaryKeyConstraint(e,t,r=nq.noop){let n=r(new al(ai.create(t,e)));return new at({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{addConstraint:i3.create(n.toOperationNode())})})}dropConstraint(e){return new an({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{dropConstraint:i8.create(e)})})}renameConstraint(e,t){return new an({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{renameConstraint:ac.create(e,t)})})}addIndex(e){return new ao({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{addIndex:aa.create(e)})})}dropIndex(e){return new at({...this.#Q,node:iT.cloneWithTableProps(this.#Q.node,{dropIndex:iU.create(e)})})}$call(e){return e(this)}}class ap{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}alterColumn(e,t){let r=t(new i7(e));return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,r.toOperationNode())})}dropColumn(e){return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,iM.create(e))})}renameColumn(e,t){return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,iq.create(e,t))})}addColumn(e,t,r=nq.noop){let n=r(new i0(iZ.create(e,(0,i4.parseDataTypeExpression)(t))));return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,iz.create(n.toOperationNode()))})}modifyColumn(e,t,r=nq.noop){let n=r(new i0(iZ.create(e,(0,i4.parseDataTypeExpression)(t))));return new ap({...this.#Q,node:iT.cloneWithColumnAlteration(this.#Q.node,i1.create(n.toOperationNode()))})}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}var af=e.i(84951),am=e.i(9559),ah=e.i(44952),ag=e.i(53414);class ay extends ah.OperationNodeTransformer{transformPrimitiveValueList(e){return ag.ValueListNode.create(e.values.map(iG.ValueNode.createImmediate))}transformValue(e){return iG.ValueNode.createImmediate(e.value)}}class av{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}ifNotExists(){return new av({...this.#Q,node:iO.cloneWith(this.#Q.node,{ifNotExists:!0})})}unique(){return new av({...this.#Q,node:iO.cloneWith(this.#Q.node,{unique:!0})})}nullsNotDistinct(){return new av({...this.#Q,node:iO.cloneWith(this.#Q.node,{nullsNotDistinct:!0})})}on(e){return new av({...this.#Q,node:iO.cloneWith(this.#Q.node,{table:(0,ij.parseTable)(e)})})}column(e){return new av({...this.#Q,node:iO.cloneWithColumns(this.#Q.node,[(0,iH.parseOrderedColumnName)(e)])})}columns(e){return new av({...this.#Q,node:iO.cloneWithColumns(this.#Q.node,e.map(iH.parseOrderedColumnName))})}expression(e){return new av({...this.#Q,node:iO.cloneWithColumns(this.#Q.node,[e.toOperationNode()])})}using(e){return new av({...this.#Q,node:iO.cloneWith(this.#Q.node,{using:nL.RawNode.createWithSql(e)})})}where(...e){let t=new ay;return new av({...this.#Q,node:am.QueryNode.cloneWithWhere(this.#Q.node,t.transformNode((0,af.parseValueBinaryOperationOrExpression)(e),this.#Q.queryId))})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}class ab{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}ifNotExists(){return new ab({...this.#Q,node:iR.cloneWith(this.#Q.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}var aw=e.i(90222);class a_{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}temporary(){return new a_({...this.#Q,node:iN.CreateTableNode.cloneWith(this.#Q.node,{temporary:!0})})}onCommit(e){return new a_({...this.#Q,node:iN.CreateTableNode.cloneWith(this.#Q.node,{onCommit:function(e){if(iN.ON_COMMIT_ACTIONS.includes(e))return e;throw Error(`invalid OnCommitAction ${e}`)}(e)})})}ifNotExists(){return new a_({...this.#Q,node:iN.CreateTableNode.cloneWith(this.#Q.node,{ifNotExists:!0})})}addColumn(e,t,r=nq.noop){let n=r(new i0(iZ.create(e,(0,i4.parseDataTypeExpression)(t))));return new a_({...this.#Q,node:iN.CreateTableNode.cloneWithColumn(this.#Q.node,n.toOperationNode())})}addPrimaryKeyConstraint(e,t,r=nq.noop){let n=r(new al(ai.create(t,e)));return new a_({...this.#Q,node:iN.CreateTableNode.cloneWithConstraint(this.#Q.node,n.toOperationNode())})}addUniqueConstraint(e,t,r=nq.noop){let n=r(new as(i9.create(t,e)));return new a_({...this.#Q,node:iN.CreateTableNode.cloneWithConstraint(this.#Q.node,n.toOperationNode())})}addCheckConstraint(e,t,r=nq.noop){let n=r(new au(iV.create(t.toOperationNode(),e)));return new a_({...this.#Q,node:iN.CreateTableNode.cloneWithConstraint(this.#Q.node,n.toOperationNode())})}addForeignKeyConstraint(e,t,r,n,i=nq.noop){let a=i(new i2(i6.create(t.map(iL.ColumnNode.create),(0,ij.parseTable)(r),n.map(iL.ColumnNode.create),e)));return new a_({...this.#Q,node:iN.CreateTableNode.cloneWithConstraint(this.#Q.node,a.toOperationNode())})}modifyFront(e){return new a_({...this.#Q,node:iN.CreateTableNode.cloneWithFrontModifier(this.#Q.node,e.toOperationNode())})}modifyEnd(e){return new a_({...this.#Q,node:iN.CreateTableNode.cloneWithEndModifier(this.#Q.node,e.toOperationNode())})}as(e){return new a_({...this.#Q,node:iN.CreateTableNode.cloneWith(this.#Q.node,{selectQuery:(0,aw.parseExpression)(e)})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}class ax{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}on(e){return new ax({...this.#Q,node:iU.cloneWith(this.#Q.node,{table:(0,ij.parseTable)(e)})})}ifExists(){return new ax({...this.#Q,node:iU.cloneWith(this.#Q.node,{ifExists:!0})})}cascade(){return new ax({...this.#Q,node:iU.cloneWith(this.#Q.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}class aE{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}ifExists(){return new aE({...this.#Q,node:iD.cloneWith(this.#Q.node,{ifExists:!0})})}cascade(){return new aE({...this.#Q,node:iD.cloneWith(this.#Q.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}class aI{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}ifExists(){return new aI({...this.#Q,node:iC.cloneWith(this.#Q.node,{ifExists:!0})})}cascade(){return new aI({...this.#Q,node:iC.cloneWith(this.#Q.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}var aS=e.i(45213),a$=e.i(42339);class ak{#X=new ay;transformQuery(e){return this.#X.transformNode(e.node,e.queryId)}transformResult(e){return Promise.resolve(e.result)}}class aA{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}temporary(){return new aA({...this.#Q,node:a$.CreateViewNode.cloneWith(this.#Q.node,{temporary:!0})})}materialized(){return new aA({...this.#Q,node:a$.CreateViewNode.cloneWith(this.#Q.node,{materialized:!0})})}ifNotExists(){return new aA({...this.#Q,node:a$.CreateViewNode.cloneWith(this.#Q.node,{ifNotExists:!0})})}orReplace(){return new aA({...this.#Q,node:a$.CreateViewNode.cloneWith(this.#Q.node,{orReplace:!0})})}columns(e){return new aA({...this.#Q,node:a$.CreateViewNode.cloneWith(this.#Q.node,{columns:e.map(iH.parseColumnName)})})}as(e){let t=e.withPlugin(new ak).toOperationNode();return new aA({...this.#Q,node:a$.CreateViewNode.cloneWith(this.#Q.node,{as:t})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}let aT=(0,nq.freeze)({is:e=>"DropViewNode"===e.kind,create:e=>(0,nq.freeze)({kind:"DropViewNode",name:iP.SchemableIdentifierNode.create(e)}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})});class aO{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}materialized(){return new aO({...this.#Q,node:aT.cloneWith(this.#Q.node,{materialized:!0})})}ifExists(){return new aO({...this.#Q,node:aT.cloneWith(this.#Q.node,{ifExists:!0})})}cascade(){return new aO({...this.#Q,node:aT.cloneWith(this.#Q.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}let aR=(0,nq.freeze)({is:e=>"CreateTypeNode"===e.kind,create:e=>(0,nq.freeze)({kind:"CreateTypeNode",name:e}),cloneWithEnum:(e,t)=>(0,nq.freeze)({...e,enum:ag.ValueListNode.create(t.map(iG.ValueNode.createImmediate))})});class aN{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}asEnum(e){return new aN({...this.#Q,node:aR.cloneWithEnum(this.#Q.node,e)})}$call(e){return e(this)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}let aP=(0,nq.freeze)({is:e=>"DropTypeNode"===e.kind,create:e=>(0,nq.freeze)({kind:"DropTypeNode",name:e}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})});class aU{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}ifExists(){return new aU({...this.#Q,node:aP.cloneWith(this.#Q.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}function aD(e){if(!e.includes("."))return iP.SchemableIdentifierNode.create(e);{let t=e.split(".").map(aC);if(2===t.length)return iP.SchemableIdentifierNode.createWithSchema(t[0],t[1]);throw Error(`invalid schemable identifier ${e}`)}}function aC(e){return e.trim()}let aj=(0,nq.freeze)({is:e=>"RefreshMaterializedViewNode"===e.kind,create:e=>(0,nq.freeze)({kind:"RefreshMaterializedViewNode",name:iP.SchemableIdentifierNode.create(e)}),cloneWith:(e,t)=>(0,nq.freeze)({...e,...t})});class az{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}concurrently(){return new az({...this.#Q,node:aj.cloneWith(this.#Q.node,{concurrently:!0,withNoData:!1})})}withData(){return new az({...this.#Q,node:aj.cloneWith(this.#Q.node,{withNoData:!1})})}withNoData(){return new az({...this.#Q,node:aj.cloneWith(this.#Q.node,{withNoData:!0,concurrently:!1})})}$call(e){return e(this)}toOperationNode(){return this.#Q.executor.transformQuery(this.#Q.node,this.#Q.queryId)}compile(){return this.#Q.executor.compileQuery(this.toOperationNode(),this.#Q.queryId)}async execute(){await this.#Q.executor.executeQuery(this.compile())}}class aL{#Y;constructor(e){this.#Y=e}createTable(e){return new a_({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:iN.CreateTableNode.create((0,ij.parseTable)(e))})}dropTable(e){return new aI({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:iC.create((0,ij.parseTable)(e))})}createIndex(e){return new av({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:iO.create(e)})}dropIndex(e){return new ax({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:iU.create(e)})}createSchema(e){return new ab({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:iR.create(e)})}dropSchema(e){return new aE({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:iD.create(e)})}alterTable(e){return new ad({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:iT.create((0,ij.parseTable)(e))})}createView(e){return new aA({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:a$.CreateViewNode.create(e)})}refreshMaterializedView(e){return new az({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:aj.create(e)})}dropView(e){return new aO({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:aT.create(e)})}createType(e){return new aN({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:aR.create(aD(e))})}dropType(e){return new aU({queryId:(0,nV.createQueryId)(),executor:this.#Y,node:aP.create(aD(e))})}withPlugin(e){return new aL(this.#Y.withPlugin(e))}withoutPlugins(){return new aL(this.#Y.withoutPlugins())}withSchema(e){return new aL(this.#Y.withPluginAtFront(new aS.WithSchemaPlugin(e)))}}var aZ=e.i(10912),aM=e.i(98035);class aq{ref(e){return new aZ.DynamicReferenceBuilder(e)}table(e){return new aM.DynamicTableBuilder(e)}}class aV{#ee;constructor(e){this.#ee=e}async provideConnection(e){let t=await this.#ee.acquireConnection();try{return await e(t)}finally{await this.#ee.releaseConnection(t)}}}var aB=e.i(54755),aF=e.i(42686);class aW extends aF.QueryExecutorBase{#et;#er;#en;constructor(e,t,r,n=[]){super(n),this.#et=e,this.#er=t,this.#en=r}get adapter(){return this.#er}compileQuery(e,t){return this.#et.compileQuery(e,t)}provideConnection(e){return this.#en.provideConnection(e)}withPlugins(e){return new aW(this.#et,this.#er,this.#en,[...this.plugins,...e])}withPlugin(e){return new aW(this.#et,this.#er,this.#en,[...this.plugins,e])}withPluginAtFront(e){return new aW(this.#et,this.#er,this.#en,[e,...this.plugins])}withConnectionProvider(e){return new aW(this.#et,this.#er,e,[...this.plugins])}withoutPlugins(){return new aW(this.#et,this.#er,this.#en,[])}}function aH(){return"undefined"!=typeof performance&&(0,nq.isFunction)(performance.now)?performance.now():Date.now()}class aK{#ee;#ei;#ea;#eo;#es;#k=new WeakSet;constructor(e,t){this.#eo=!1,this.#ee=e,this.#ei=t}async init(){if(this.#es)throw Error("driver has already been destroyed");this.#ea||(this.#ea=this.#ee.init().then(()=>{this.#eo=!0}).catch(e=>(this.#ea=void 0,Promise.reject(e)))),await this.#ea}async acquireConnection(){if(this.#es)throw Error("driver has already been destroyed");this.#eo||await this.init();let e=await this.#ee.acquireConnection();return this.#k.has(e)||(this.#el()&&this.#eu(e),this.#k.add(e)),e}async releaseConnection(e){await this.#ee.releaseConnection(e)}beginTransaction(e,t){return this.#ee.beginTransaction(e,t)}commitTransaction(e){return this.#ee.commitTransaction(e)}rollbackTransaction(e){return this.#ee.rollbackTransaction(e)}savepoint(e,t,r){if(this.#ee.savepoint)return this.#ee.savepoint(e,t,r);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(e,t,r){if(this.#ee.rollbackToSavepoint)return this.#ee.rollbackToSavepoint(e,t,r);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(e,t,r){if(this.#ee.releaseSavepoint)return this.#ee.releaseSavepoint(e,t,r);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){this.#ea&&(await this.#ea,this.#es||(this.#es=this.#ee.destroy().catch(e=>(this.#es=void 0,Promise.reject(e)))),await this.#es)}#el(){return this.#ei.isLevelEnabled("query")||this.#ei.isLevelEnabled("error")}#eu(e){let t=e.executeQuery,r=e.streamQuery,n=this;e.executeQuery=async r=>{let i,a=aH();try{return await t.call(e,r)}catch(e){throw i=e,await n.#ec(e,r,a),e}finally{i||await n.#ed(r,a)}},e.streamQuery=async function*(t,i){let a,o=aH();try{for await(let n of r.call(e,t,i))yield n}catch(e){throw a=e,await n.#ec(e,t,o),e}finally{a||await n.#ed(t,o,!0)}}}async #ec(e,t,r){await this.#ei.error(()=>({level:"error",error:e,query:t,queryDurationMillis:this.#ep(r)}))}async #ed(e,t,r=!1){await this.#ei.query(()=>({level:"query",isStream:r,query:e,queryDurationMillis:this.#ep(t)}))}#ep(e){return aH()-e}}let aG=()=>{};class aJ{#x;#ef;constructor(e){this.#x=e}async provideConnection(e){for(;this.#ef;)await this.#ef.catch(aG);return this.#ef=this.#em(e).finally(()=>{this.#ef=void 0}),this.#ef}async #em(e){return await e(this.#x)}}let aQ=["read only","read write"],aX=["read uncommitted","read committed","repeatable read","serializable","snapshot"];function aY(e){if(e.accessMode&&!aQ.includes(e.accessMode))throw Error(`invalid transaction access mode ${e.accessMode}`);if(e.isolationLevel&&!aX.includes(e.isolationLevel))throw Error(`invalid transaction isolation level ${e.isolationLevel}`)}var a0=e.i(4248);(0,nq.freeze)(["query","error"]);class a1{#eh;#eg;constructor(e){(0,nq.isFunction)(e)?(this.#eg=e,this.#eh=(0,nq.freeze)({query:!0,error:!0})):(this.#eg=a4,this.#eh=(0,nq.freeze)({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#eh[e]}async query(e){this.#eh.query&&await this.#eg(e())}async error(e){this.#eh.error&&await this.#eg(e())}}function a4(e){if("query"===e.level){let t=`kysely:query:${e.isStream?"stream:":""}`;console.log(`${t} ${e.query.sql}`),console.log(`${t} duration: ${e.queryDurationMillis.toFixed(1)}ms`)}else"error"===e.level&&(e.error instanceof Error?console.error(`kysely:error: ${e.error.stack??e.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:e.error,query:e.query.sql,queryDurationMillis:e.queryDurationMillis})}`))}var a6=e.i(31628),a2=e.i(47638),a3=e.i(87728),a9=e.i(51701);Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");class a8 extends aB.QueryCreator{#Q;constructor(e){let t,r;if(function(e){return(0,nq.isObject)(e)&&(0,nq.isObject)(e.config)&&(0,nq.isObject)(e.driver)&&(0,nq.isObject)(e.executor)&&(0,nq.isObject)(e.dialect)}(e))t={executor:e.executor},r={...e};else{const n=e.dialect,i=n.createDriver(),a=n.createQueryCompiler(),o=n.createAdapter(),s=new aK(i,new a1(e.log??[])),l=new aW(a,o,new aV(s),e.plugins??[]);t={executor:l},r={config:e,executor:l,dialect:n,driver:s}}super(t),this.#Q=(0,nq.freeze)(r)}get schema(){return new aL(this.#Q.executor)}get dynamic(){return new aq}get introspection(){return this.#Q.dialect.createIntrospector(this.withoutPlugins())}case(e){return new a6.CaseBuilder({node:a2.CaseNode.create((0,nq.isUndefined)(e)?void 0:(0,aw.parseExpression)(e))})}get fn(){return(0,a0.createFunctionModule)()}transaction(){return new oe({...this.#Q})}startTransaction(){return new ot({...this.#Q})}connection(){return new a7({...this.#Q})}withPlugin(e){return new a8({...this.#Q,executor:this.#Q.executor.withPlugin(e)})}withoutPlugins(){return new a8({...this.#Q,executor:this.#Q.executor.withoutPlugins()})}withSchema(e){return new a8({...this.#Q,executor:this.#Q.executor.withPluginAtFront(new aS.WithSchemaPlugin(e))})}withTables(){return new a8({...this.#Q})}async destroy(){await this.#Q.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#Q.executor}executeQuery(e,t){void 0!==t&&(0,a9.logOnce)("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let r=(0,nq.isObject)(e)&&(0,nq.isFunction)(e.compile)?e.compile():e;return this.getExecutor().executeQuery(r)}async [Symbol.asyncDispose](){await this.destroy()}}class a5 extends a8{#Q;constructor(e){super(e),this.#Q=e}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new a5({...this.#Q,executor:this.#Q.executor.withPlugin(e)})}withoutPlugins(){return new a5({...this.#Q,executor:this.#Q.executor.withoutPlugins()})}withSchema(e){return new a5({...this.#Q,executor:this.#Q.executor.withPluginAtFront(new aS.WithSchemaPlugin(e))})}withTables(){return new a5({...this.#Q})}}class a7{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}async execute(e){return this.#Q.executor.provideConnection(async t=>{let r=this.#Q.executor.withConnectionProvider(new aJ(t)),n=new a8({...this.#Q,executor:r});return await e(n)})}}class oe{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}setAccessMode(e){return new oe({...this.#Q,accessMode:e})}setIsolationLevel(e){return new oe({...this.#Q,isolationLevel:e})}async execute(e){let{isolationLevel:t,accessMode:r,...n}=this.#Q,i={isolationLevel:t,accessMode:r};return aY(i),this.#Q.executor.provideConnection(async t=>{let r=this.#Q.executor.withConnectionProvider(new aJ(t)),a=new a5({...n,executor:r}),o=!1;try{await this.#Q.driver.beginTransaction(t,i),o=!0;let r=await e(a);return await this.#Q.driver.commitTransaction(t),r}catch(e){throw o&&await this.#Q.driver.rollbackTransaction(t),e}})}}class ot{#Q;constructor(e){this.#Q=(0,nq.freeze)(e)}setAccessMode(e){return new ot({...this.#Q,accessMode:e})}setIsolationLevel(e){return new ot({...this.#Q,isolationLevel:e})}async execute(){let{isolationLevel:e,accessMode:t,...r}=this.#Q,n={isolationLevel:e,accessMode:t};aY(n);let i=await (0,a3.provideControlledConnection)(this.#Q.executor);return await this.#Q.driver.beginTransaction(i.connection,n),new or({...r,connection:i,executor:this.#Q.executor.withConnectionProvider(new aJ(i.connection))})}}class or extends a5{#Q;#ey;#ev;constructor(e){const t={isCommitted:!1,isRolledBack:!1},{connection:r,...n}=e={...e,executor:new oa(e.executor,t)};super(n),this.#Q=(0,nq.freeze)(e),this.#ev=t;const i=(0,nV.createQueryId)();this.#ey=t=>e.executor.compileQuery(t,i)}get isCommitted(){return this.#ev.isCommitted}get isRolledBack(){return this.#ev.isRolledBack}commit(){return oi(this.#ev),new on(async()=>{await this.#Q.driver.commitTransaction(this.#Q.connection.connection),this.#ev.isCommitted=!0,this.#Q.connection.release()})}rollback(){return oi(this.#ev),new on(async()=>{await this.#Q.driver.rollbackTransaction(this.#Q.connection.connection),this.#ev.isRolledBack=!0,this.#Q.connection.release()})}savepoint(e){return oi(this.#ev),new on(async()=>(await this.#Q.driver.savepoint?.(this.#Q.connection.connection,e,this.#ey),new or({...this.#Q})))}rollbackToSavepoint(e){return oi(this.#ev),new on(async()=>(await this.#Q.driver.rollbackToSavepoint?.(this.#Q.connection.connection,e,this.#ey),new or({...this.#Q})))}releaseSavepoint(e){return oi(this.#ev),new on(async()=>(await this.#Q.driver.releaseSavepoint?.(this.#Q.connection.connection,e,this.#ey),new or({...this.#Q})))}withPlugin(e){return new or({...this.#Q,executor:this.#Q.executor.withPlugin(e)})}withoutPlugins(){return new or({...this.#Q,executor:this.#Q.executor.withoutPlugins()})}withSchema(e){return new or({...this.#Q,executor:this.#Q.executor.withPluginAtFront(new aS.WithSchemaPlugin(e))})}withTables(){return new or({...this.#Q})}}class on{#eb;constructor(e){this.#eb=e}async execute(){return await this.#eb()}}function oi(e){if(e.isCommitted)throw Error("Transaction is already committed");if(e.isRolledBack)throw Error("Transaction is already rolled back")}class oa{#Y;#ev;constructor(e,t){e instanceof oa?this.#Y=e.#Y:this.#Y=e,this.#ev=t}get adapter(){return this.#Y.adapter}get plugins(){return this.#Y.plugins}transformQuery(e,t){return this.#Y.transformQuery(e,t)}compileQuery(e,t){return this.#Y.compileQuery(e,t)}provideConnection(e){return this.#Y.provideConnection(e)}executeQuery(e){return oi(this.#ev),this.#Y.executeQuery(e)}stream(e,t){return oi(this.#ev),this.#Y.stream(e,t)}withConnectionProvider(e){return new oa(this.#Y.withConnectionProvider(e),this.#ev)}withPlugin(e){return new oa(this.#Y.withPlugin(e),this.#ev)}withPlugins(e){return new oa(this.#Y.withPlugins(e),this.#ev)}withPluginAtFront(e){return new oa(this.#Y.withPluginAtFront(e),this.#ev)}withoutPlugins(){return new oa(this.#Y.withoutPlugins(),this.#ev)}}var oo=e.i(43027);function os(e){if(!e)return null;if("dialect"in e)return os(e.dialect);if("createDriver"in e){if(e instanceof n1)return"sqlite";if(e instanceof ir)return"mysql";if(e instanceof im)return"postgres";if(e instanceof iA)return"mssql"}return"aggregate"in e?"sqlite":"getConnection"in e?"mysql":"connect"in e?"postgres":"fileControl"in e||"open"in e&&"close"in e&&"prepare"in e?"sqlite":null}let ol=async t=>{let r,n=t.database;if(!n)return{kysely:null,databaseType:null,transaction:void 0};if("db"in n)return{kysely:n.db,databaseType:n.type,transaction:n.transaction};if("dialect"in n)return{kysely:new a8({dialect:n.dialect}),databaseType:n.type,transaction:n.transaction};let i=os(n);if("createDriver"in n&&(r=n),"aggregate"in n&&!("createSession"in n)&&(r=new n1({database:n})),"getConnection"in n&&(r=new ir(n)),"connect"in n&&(r=new im({pool:n})),"fileControl"in n){let{BunSqliteDialect:t}=await e.A(44818);r=new t({database:n})}if("createSession"in n){let t;try{({DatabaseSync:t}=await import("node:sqlite"))}catch(e){if(null!==e&&"object"==typeof e&&"code"in e&&"ERR_UNKNOWN_BUILTIN_MODULE"!==e.code)throw e}if(t&&n instanceof t){let{NodeSqliteDialect:t}=await e.A(64962);r=new t({database:n})}}return{kysely:r?new a8({dialect:r}):null,databaseType:i,transaction:void 0}},ou=(e,t)=>{let r=null,n=e=>({getFieldName:r,schema:n,getDefaultModelName:i})=>{let a=async(n,i,a,o)=>{if(t?.type==="mysql"){await i.execute();let t=n.id?"id":o.length>0&&o[0]?.field?o[0].field:"id";if(!n.id&&0===o.length)return await e.selectFrom(a).selectAll().orderBy(r({model:a,field:t}),"desc").limit(1).executeTakeFirst();let s=n[t]||o[0]?.value;return await e.selectFrom(a).selectAll().orderBy(r({model:a,field:t}),"desc").where(r({model:a,field:t}),"=",s).limit(1).executeTakeFirst()}return t?.type==="mssql"?await i.outputAll("inserted").executeTakeFirst():await i.returningAll().executeTakeFirst()};function o(e){function r(e){for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let i=e[n];i instanceof Date&&t?.type==="mysql"||"object"==typeof i&&null!==i&&r(i)}}if(Array.isArray(e))for(let t=0;t<e.length;t++){let n=e[t];"object"==typeof n&&null!==n&&r(n)}else"object"==typeof e&&null!==e&&r(e);return e}function s(e,i){if(!i)return{and:null,or:null};let a=[],o=[];return i.forEach(i=>{let{field:s,value:l,operator:u="=",connector:c="AND"}=i,d=r({model:e,field:s});l=function(e,r,i){if("id"===i)return e;let{type:a="sqlite"}=t||{},o=n[r]?.fields[i];return(o||(o=Object.values(n).find(e=>e.modelName===r)),"boolean"===o.type&&("sqlite"===a||"mssql"===a)&&null!=e)?+!!e:"date"===o.type&&e&&e instanceof Date&&"sqlite"===a?e.toISOString():e}(l,e,s);let p=e=>"in"===u.toLowerCase()?e(d,"in",Array.isArray(l)?l:[l]):"not_in"===u.toLowerCase()?e(d,"not in",Array.isArray(l)?l:[l]):"contains"===u?e(d,"like",`%${l}%`):"starts_with"===u?e(d,"like",`${l}%`):"ends_with"===u?e(d,"like",`%${l}`):e(d,"eq"===u?"=":"ne"===u?"<>":"gt"===u?">":"gte"===u?">=":"lt"===u?"<":"lte"===u?"<=":u,l);"OR"===c?o.push(p):a.push(p)}),{and:a.length?a:null,or:o.length?o:null}}return{async create({data:t,model:r}){let n=e.insertInto(r).values(t);return o(await a(t,n,r,[]))},async findOne({model:t,where:r,select:n}){let{and:i,or:a}=s(t,r),l=e.selectFrom(t).selectAll();i&&(l=l.where(e=>e.and(i.map(t=>t(e))))),a&&(l=l.where(e=>e.or(a.map(t=>t(e)))));let u=await l.executeTakeFirst();return u?o(u):null},async findMany({model:n,where:i,limit:a,offset:l,sortBy:u}){let{and:c,or:d}=s(n,i),p=e.selectFrom(n);c&&(p=p.where(e=>e.and(c.map(t=>t(e))))),d&&(p=p.where(e=>e.or(d.map(t=>t(e))))),t?.type==="mssql"?l||(p=p.top(a||100)):p=p.limit(a||100),u&&(p=p.orderBy(r({model:n,field:u.field}),u.direction)),l&&(t?.type==="mssql"?(u||(p=p.orderBy(r({model:n,field:"id"}))),p=p.offset(l).fetch(a||100)):p=p.offset(l));let f=await p.selectAll().execute();return f?o(f):[]},async update({model:t,where:r,update:n}){let{and:i,or:l}=s(t,r),u=e.updateTable(t).set(n);return i&&(u=u.where(e=>e.and(i.map(t=>t(e))))),l&&(u=u.where(e=>e.or(l.map(t=>t(e))))),o(await a(n,u,t,r))},async updateMany({model:t,where:r,update:n}){let{and:i,or:a}=s(t,r),o=e.updateTable(t).set(n);return i&&(o=o.where(e=>e.and(i.map(t=>t(e))))),a&&(o=o.where(e=>e.or(a.map(t=>t(e))))),(await o.execute()).length},async count({model:t,where:r}){let{and:n,or:i}=s(t,r),a=e.selectFrom(t).select(e.fn.count("id").as("count"));n&&(a=a.where(e=>e.and(n.map(t=>t(e))))),i&&(a=a.where(e=>e.or(i.map(t=>t(e)))));let o=await a.execute();return"number"==typeof o[0].count?o[0].count:"bigint"==typeof o[0].count?Number(o[0].count):parseInt(o[0].count)},async delete({model:t,where:r}){let{and:n,or:i}=s(t,r),a=e.deleteFrom(t);n&&(a=a.where(e=>e.and(n.map(t=>t(e))))),i&&(a=a.where(e=>e.or(i.map(t=>t(e))))),await a.execute()},async deleteMany({model:t,where:r}){let{and:n,or:i}=s(t,r),a=e.deleteFrom(t);return n&&(a=a.where(e=>e.and(n.map(t=>t(e))))),i&&(a=a.where(e=>e.or(i.map(t=>t(e))))),(await a.execute()).length},options:t}},i=null;i={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:t?.usePlural,debugLogs:t?.debugLogs,supportsBooleans:t?.type!=="sqlite"&&t?.type!=="mssql"&&t?.type!=="mysql"&&!!t?.type,supportsDates:t?.type!=="sqlite"&&t?.type!=="mssql"&&!!t?.type,supportsJSON:!1,transaction:!!t?.transaction&&(t=>e.transaction().execute(e=>t((0,oo.c)({config:i.config,adapter:n(e)})(r))))},adapter:n(e)};let a=(0,oo.c)(i);return e=>(r=e,a(e))};e.s(["c",()=>ol,"g",()=>os,"k",()=>ou],56370);let oc=(e,t)=>{let r=null,n=(0,oo.c)({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:t?.debugLogs||!1,customTransformInput:t=>t.options.advanced?.database?.useNumberId&&"id"===t.field&&"create"===t.action?e[t.model].length+1:t.data,transaction:async t=>{let i=structuredClone(e);try{return await t(n(r))}catch(t){throw Object.keys(e).forEach(t=>{e[t]=i[t]}),t}}},adapter:({getFieldName:t,options:r,debugLog:n})=>{function i(t,r){let n=e[r];if(!n)throw ej.logger.error(`[MemoryAdapter] Model ${r} not found in the DB`,Object.keys(e)),Error(`Model ${r} not found`);let i=(e,t)=>{let{field:r,value:n,operator:i}=t;switch(i){case"in":if(!Array.isArray(n))throw Error("Value must be an array");return n.includes(e[r]);case"not_in":if(!Array.isArray(n))throw Error("Value must be an array");return!n.includes(e[r]);case"contains":return e[r].includes(n);case"starts_with":return e[r].startsWith(n);case"ends_with":return e[r].endsWith(n);case"ne":return e[r]!==n;case"gt":return null!=n&&e[r]>n;case"gte":return null!=n&&e[r]>=n;case"lt":return null!=n&&e[r]<n;case"lte":return null!=n&&e[r]<=n;default:return e[r]===n}};return n.filter(e=>{if(!t.length||0===t.length)return!0;let r=i(e,t[0]);for(let n of t){let t=i(e,n);r="OR"===n.connector?r||t:r&&t}return r})}return{create:async({model:t,data:n})=>(r.advanced?.database?.useNumberId&&(n.id=e[t].length+1),e[t]||(e[t]=[]),e[t].push(n),n),findOne:async({model:e,where:t})=>i(t,e)[0]||null,findMany:async({model:r,where:n,sortBy:a,limit:o,offset:s})=>{let l=e[r];return n&&(l=i(n,r)),a&&(l=l.sort((e,n)=>{let i=t({model:r,field:a.field}),o=e[i],s=n[i],l=0;return l=null==o&&null==s?0:null==o?-1:null==s?1:"string"==typeof o&&"string"==typeof s?o.localeCompare(s):o instanceof Date&&s instanceof Date?o.getTime()-s.getTime():"number"==typeof o&&"number"==typeof s?o-s:"boolean"==typeof o&&"boolean"==typeof s?o===s?0:o?1:-1:String(o).localeCompare(String(s)),"asc"===a.direction?l:-l})),void 0!==s&&(l=l.slice(s)),void 0!==o&&(l=l.slice(0,o)),l||[]},count:async({model:t,where:r})=>r?i(r,t).length:e[t].length,update:async({model:e,where:t,update:r})=>{let n=i(t,e);return n.forEach(e=>{Object.assign(e,r)}),n[0]||null},delete:async({model:t,where:r})=>{let n=e[t],a=i(r,t);e[t]=n.filter(e=>!a.includes(e))},deleteMany:async({model:t,where:r})=>{let n=e[t],a=i(r,t),o=0;return e[t]=n.filter(e=>a.includes(e)?(o++,!1):!a.includes(e)),o},updateMany({model:e,where:t,update:r}){let n=i(t,e);return n.forEach(e=>{Object.assign(e,r)}),n[0]||null}}}});return e=>(r=e,n(e))};e.s(["m",()=>oc],47117);let od=(e,t)=>{let r,n=t.logger,i=t.options,a=i.secondaryStorage,o=i.session?.expiresIn||604800,{createWithHooks:s,updateWithHooks:l,updateManyWithHooks:u}=(r=t.hooks,{createWithHooks:async function(t,n,i,a,o){let s=t;for(let e of r||[]){let t=e[n]?.create?.before;if(t){let e=await t(s,a);if(!1===e)return null;"object"==typeof e&&"data"in e&&(s={...s,...e.data})}}let l=i?await i.fn(s):null,u=!i||i.executeMainFn?await (o||e).create({model:n,data:s,forceAllowId:!0}):l;for(let e of r||[]){let t=e[n]?.create?.after;t&&await t(u,a)}return u},updateWithHooks:async function(t,n,i,a,o,s){let l=t;for(let e of r||[]){let r=e[i]?.update?.before;if(r){let e=await r(t,o);if(!1===e)return null;l="object"==typeof e?e.data:e}}let u=a?await a.fn(l):null,c=!a||a.executeMainFn?await (s||e).update({model:i,update:l,where:n}):u;for(let e of r||[]){let t=e[i]?.update?.after;t&&await t(c,o)}return c},updateManyWithHooks:async function(t,n,i,a,o,s){let l=t;for(let e of r||[]){let r=e[i]?.update?.before;if(r){let e=await r(t,o);if(!1===e)return null;l="object"==typeof e?e.data:e}}let u=a?await a.fn(l):null,c=!a||a.executeMainFn?await (s||e).updateMany({model:i,update:l,where:n}):u;for(let e of r||[]){let t=e[i]?.update?.after;t&&await t(c,o)}return c}});async function c(e){if(!a)return;let t=await a.get(`active-sessions-${e.id}`);if(!t)return;let r=Date.now(),n=((0,eL.s)(t)||[]).filter(e=>e.expiresAt>r);await Promise.all(n.map(async({token:t})=>{let n=await a.get(t);if(!n)return;let i=(0,eL.s)(n);if(!i)return;let o=Math.max(Math.floor(new Date(i.session.expiresAt).getTime()-r)/1e3,0);await a.set(t,JSON.stringify({session:i.session,user:e}),Math.floor(o))}))}return{createOAuthUser:async(t,r,n)=>e.transaction(async e=>{let i=await s({createdAt:new Date,updatedAt:new Date,...t},"user",void 0,n,e),a=await s({...r,userId:i.id,createdAt:new Date,updatedAt:new Date},"account",void 0,n,e);return{user:i,account:a}}),createUser:async(e,t,r)=>await s({createdAt:new Date,updatedAt:new Date,...e,email:e.email?.toLowerCase()},"user",void 0,t,r),createAccount:async(e,t,r)=>await s({createdAt:new Date,updatedAt:new Date,...e},"account",void 0,t,r),listSessions:async(r,n)=>{if(a){let e=await a.get(`active-sessions-${r}`);if(!e)return[];let n=(0,eL.s)(e)||[],i=Date.now(),o=n.filter(e=>e.expiresAt>i),s=[];for(let e of o){let r=await a.get(e.token);if(r){let e=(0,eL.s)(r);if(!e)return[];let n=tI(t.options,{...e.session,expiresAt:new Date(e.session.expiresAt)});s.push(n)}}return s}return await (n||e).findMany({model:"session",where:[{field:"userId",value:r}]})},listUsers:async(t,r,n,i,a)=>await (a||e).findMany({model:"user",limit:t,offset:r,sortBy:n,where:i}),countTotalUsers:async(t,r)=>{let n=await (r||e).count({model:"user",where:t});return"string"==typeof n?parseInt(n):n},deleteUser:async(t,r)=>{a&&await a.delete(`active-sessions-${t}`),(!a||i.session?.storeSessionInDatabase)&&await (r||e).deleteMany({model:"session",where:[{field:"userId",value:t}]}),await (r||e).deleteMany({model:"account",where:[{field:"userId",value:t}]}),await (r||e).delete({model:"user",where:[{field:"id",value:t}]})},createSession:async(t,r,n,l,u,c)=>{let d=r.headers||r.request?.headers,{id:p,...f}=l||{},m={ipAddress:(r.request||r.headers)&&nO(r.request||r.headers,r.context.options)||"",userAgent:d?.get("user-agent")||"",...f,expiresAt:n?eC(86400,"sec"):eC(o,"sec"),userId:t,token:(0,tg.g)(32),createdAt:new Date,updatedAt:new Date,...u?f:{}};return await s(m,"session",a?{fn:async r=>{let n=await a.get(`active-sessions-${t}`),i=[],o=Date.now();n&&(i=(i=(0,eL.s)(n)||[]).filter(e=>e.expiresAt>o));let s=i.sort((e,t)=>e.expiresAt-t.expiresAt),l=s.at(-1)?.expiresAt;s.push({token:m.token,expiresAt:m.expiresAt.getTime()}),(!l||l<m.expiresAt.getTime())&&(l=m.expiresAt.getTime());let u=Math.max(Math.floor((l-o)/1e3),0);u>0&&await a.set(`active-sessions-${t}`,JSON.stringify(s),u);let c=await e.findOne({model:"user",where:[{field:"id",value:t}]}),d=Math.max(Math.floor((m.expiresAt.getTime()-o)/1e3),0);return d>0&&await a.set(m.token,JSON.stringify({session:r,user:c}),d),r},executeMainFn:i.session?.storeSessionInDatabase}:void 0,r,c)},findSession:async(r,n)=>{if(a){let e=await a.get(r);if(!e&&!i.session?.storeSessionInDatabase)return null;if(e){let r=(0,eL.s)(e);return r?{session:tI(t.options,{...r.session,expiresAt:new Date(r.session.expiresAt),createdAt:new Date(r.session.createdAt),updatedAt:new Date(r.session.updatedAt)}),user:tE(t.options,{...r.user,createdAt:new Date(r.user.createdAt),updatedAt:new Date(r.user.updatedAt)})}:null}}let o=await (n||e).findOne({model:"session",where:[{value:r,field:"token"}]});if(!o)return null;let s=await (n||e).findOne({model:"user",where:[{value:o.userId,field:"id"}]});return s?{session:tI(t.options,o),user:tE(t.options,s)}:null},findSessions:async(t,r)=>{if(a){let e=[];for(let r of t){let t=await a.get(r);if(t){let r=(0,eL.s)(t);if(!r)return[];let n={session:{...r.session,expiresAt:new Date(r.session.expiresAt)},user:{...r.user,createdAt:new Date(r.user.createdAt),updatedAt:new Date(r.user.updatedAt)}};e.push(n)}}return e}let n=await (r||e).findMany({model:"session",where:[{field:"token",value:t,operator:"in"}]}),i=n.map(e=>e.userId);if(!i.length)return[];let o=await (r||e).findMany({model:"user",where:[{field:"id",value:i,operator:"in"}]});return n.map(e=>{let t=o.find(t=>t.id===e.userId);return t?{session:e,user:t}:null})},updateSession:async(e,t,r,n)=>await l(t,[{field:"token",value:e}],"session",a?{async fn(t){let r=await a.get(e);if(!r)return null;{let e=(0,eL.s)(r);return e?{...e.session,...t}:null}},executeMainFn:i.session?.storeSessionInDatabase}:void 0,r,n),deleteSession:async(r,o)=>{if(a){let e=await a.get(r);if(e){let{session:t}=(0,eL.s)(e)??{};if(!t)return void n.error("Session not found in secondary storage");let i=t.userId,o=await a.get(`active-sessions-${i}`);if(o){let e=(0,eL.s)(o)||[],t=Date.now(),n=e.filter(e=>e.expiresAt>t&&e.token!==r),s=n.sort((e,t)=>e.expiresAt-t.expiresAt),l=s.at(-1)?.expiresAt;n.length>0&&l&&l>Date.now()?await a.set(`active-sessions-${i}`,JSON.stringify(n),Math.floor((l-t)/1e3)):await a.delete(`active-sessions-${i}`)}else n.error("Active sessions list not found in secondary storage")}if(await a.delete(r),!i.session?.storeSessionInDatabase||t.options.session?.preserveSessionInDatabase)return}await (o||e).delete({model:"session",where:[{field:"token",value:r}]})},deleteAccounts:async(t,r)=>{await (r||e).deleteMany({model:"account",where:[{field:"userId",value:t}]})},deleteAccount:async(t,r)=>{await (r||e).delete({model:"account",where:[{field:"id",value:t}]})},deleteSessions:async(r,n)=>{if(a){if("string"==typeof r){let e=await a.get(`active-sessions-${r}`),t=e?(0,eL.s)(e):[];if(!t)return;for(let e of t)await a.delete(e.token)}else for(let e of r)await a.get(e)&&await a.delete(e);if(!i.session?.storeSessionInDatabase||t.options.session?.preserveSessionInDatabase)return}await (n||e).deleteMany({model:"session",where:[{field:Array.isArray(r)?"token":"userId",value:r,operator:Array.isArray(r)?"in":void 0}]})},findOAuthUser:async(t,r,n,i)=>{let a=await (i||e).findMany({model:"account",where:[{value:r,field:"accountId"}]}).then(e=>e.find(e=>e.providerId===n));if(a){let r=await (i||e).findOne({model:"user",where:[{value:a.userId,field:"id"}]});if(r)return{user:r,accounts:[a]};{let r=await (i||e).findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});return r?{user:r,accounts:[a]}:null}}{let r=await (i||e).findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});if(!r)return null;{let t=await (i||e).findMany({model:"account",where:[{value:r.id,field:"userId"}]});return{user:r,accounts:t||[]}}}},findUserByEmail:async(t,r,n)=>{let i=await (n||e).findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});if(!i)return null;if(r?.includeAccounts){let t=await (n||e).findMany({model:"account",where:[{value:i.id,field:"userId"}]});return{user:i,accounts:t}}return{user:i,accounts:[]}},findUserById:async(t,r)=>await (r||e).findOne({model:"user",where:[{field:"id",value:t}]}),linkAccount:async(e,t,r)=>await s({createdAt:new Date,updatedAt:new Date,...e},"account",void 0,t,r),updateUser:async(e,t,r,n)=>{let i=await l(t,[{field:"id",value:e}],"user",void 0,r,n);return await c(i),await c(i),i},updateUserByEmail:async(e,t,r,n)=>{let i=await l(t,[{field:"email",value:e.toLowerCase()}],"user",void 0,r,n);return await c(i),await c(i),i},updatePassword:async(e,t,r,n)=>{await u({password:t},[{field:"userId",value:e},{field:"providerId",value:"credential"}],"account",void 0,r,n)},findAccounts:async(t,r)=>await (r||e).findMany({model:"account",where:[{field:"userId",value:t}]}),findAccount:async(t,r)=>await (r||e).findOne({model:"account",where:[{field:"accountId",value:t}]}),findAccountByProviderId:async(t,r,n)=>await (n||e).findOne({model:"account",where:[{field:"accountId",value:t},{field:"providerId",value:r}]}),findAccountByUserId:async(t,r)=>await (r||e).findMany({model:"account",where:[{field:"userId",value:t}]}),updateAccount:async(e,t,r,n)=>await l(t,[{field:"id",value:e}],"account",void 0,r,n),createVerificationValue:async(e,t,r)=>await s({createdAt:new Date,updatedAt:new Date,...e},"verification",void 0,t,r),findVerificationValue:async(t,r)=>{let n=await (r||e).findMany({model:"verification",where:[{field:"identifier",value:t}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return i.verification?.disableCleanup||await (r||e).deleteMany({model:"verification",where:[{field:"expiresAt",value:new Date,operator:"lt"}]}),n[0]},deleteVerificationValue:async(t,r)=>{await (r||e).delete({model:"verification",where:[{field:"id",value:t}]})},deleteVerificationByIdentifier:async(t,r)=>{await (r||e).delete({model:"verification",where:[{field:"identifier",value:t}]})},updateVerificationValue:async(e,t,r,n)=>await l(t,[{field:"id",value:e}],"verification",void 0,r,n)}};async function op(e){if(!e.database){let t=Object.keys((0,nC.g)(e)).reduce((e,t)=>(e[t]=[],e),{});return ej.logger.warn("No database configuration provided. Using memory adapter in development"),oc(t)(e)}if("function"==typeof e.database)return e.database(e);let{kysely:t,databaseType:r,transaction:n}=await ol(e);if(!t)throw new eD.BetterAuthError("Failed to initialize database adapter");return ou(t,{type:r||"sqlite",debugLogs:"debugLogs"in e.database&&e.database.debugLogs,transaction:n})(e)}let of={postgres:{string:["character varying","varchar","text"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};async function om(e){try{let t=await nQ.sql`SHOW search_path`.execute(e);if(t.rows[0]?.search_path)return t.rows[0].search_path.split(",").map(e=>e.trim()).map(e=>e.replace(/^["']|["']$/g,"")).filter(e=>!e.startsWith("$"))[0]||"public"}catch(e){}return"public"}async function oh(e){let t=function(e){let t=(0,nC.g)(e),r={};for(let e in t){let n=t[e],i=n.fields,a={};if(Object.entries(i).forEach(([e,r])=>{if(a[r.fieldName||e]=r,r.references){let n=t[r.references.model];n&&(a[r.fieldName||e].references={...r.references,model:n.modelName,field:r.references.field})}}),r[n.modelName]){r[n.modelName].fields={...r[n.modelName].fields,...a};continue}r[n.modelName]={fields:a,order:n.order||1/0}}return r}(e),r=(0,ej.createLogger)(e.logger),{kysely:n,databaseType:i}=await ol(e);i||(r.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),i="sqlite"),n||(r.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let a="public";if("postgres"===i){a=await om(n),r.debug(`PostgreSQL migration: Using schema '${a}' (from search_path)`);try{(await nQ.sql`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${a}
			`.execute(n)).rows[0]||r.warn(`Schema '${a}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(e){r.debug(`Could not verify schema existence: ${e instanceof Error?e.message:String(e)}`)}}let o=await n.introspection.getTables(),s=o;if("postgres"===i)try{let e=await nQ.sql`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${a}
				AND table_type = 'BASE TABLE'
			`.execute(n),t=new Set(e.rows.map(e=>e.table_name));s=o.filter(e=>e.schema===a&&t.has(e.name)),r.debug(`Found ${s.length} table(s) in schema '${a}': ${s.map(e=>e.name).join(", ")||"(none)"}`)}catch(e){r.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${e instanceof Error?e.message:String(e)}`)}let l=[],u=[];for(let[e,n]of Object.entries(t)){let t=s.find(t=>t.name===e);if(!t){let t=l.findIndex(t=>t.table===e),r={table:e,fields:n.fields,order:n.order||1/0},i=l.findIndex(e=>(e.order||1/0)>r.order);-1===i?-1===t?l.push(r):l[t].fields={...l[t].fields,...n.fields}:l.splice(i,0,r);continue}let a={};for(let[o,s]of Object.entries(n.fields)){let n=t.columns.find(e=>e.name===o);if(!n){a[o]=s;continue}!function(e,t,r){if("string[]"===t||"number[]"===t)return e.toLowerCase().includes("json");let n=of[r];return(Array.isArray(t)?n.string.map(e=>e.toLowerCase()):n[t].map(e=>e.toLowerCase())).includes(e.toLowerCase().split("(")[0].trim())}(n.dataType,s.type,i)&&r.warn(`Field ${o} in table ${e} has a different type in the database. Expected ${s.type} but got ${n.dataType}.`)}Object.keys(a).length>0&&u.push({table:e,fields:a,order:n.order||1/0})}let c=[];function d(t,r){let n=t.type,a={string:{sqlite:"text",postgres:"text",mysql:t.unique?"varchar(255)":t.references?"varchar(36)":"text",mssql:t.unique||t.sortable?"varchar(255)":t.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:t.bigint?"bigint":"integer",postgres:t.bigint?"bigint":"integer",mysql:t.bigint?"bigint":"integer",mssql:t.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:nQ.sql`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:e.advanced?.database?.useNumberId?"serial":"text",mysql:e.advanced?.database?.useNumberId?"integer":"varchar(36)",mssql:e.advanced?.database?.useNumberId?"integer":"varchar(36)",sqlite:e.advanced?.database?.useNumberId?"integer":"text"},foreignKeyId:{postgres:e.advanced?.database?.useNumberId?"integer":"text",mysql:e.advanced?.database?.useNumberId?"integer":"varchar(36)",mssql:e.advanced?.database?.useNumberId?"integer":"varchar(36)",sqlite:e.advanced?.database?.useNumberId?"integer":"text"}};return"id"===r||t.references?.field==="id"?"id"===r?a.id[i]:a.foreignKeyId[i]:"sqlite"===i&&("string[]"===n||"number[]"===n)?"text":"string[]"===n||"number[]"===n?"jsonb":Array.isArray(n)?"text":a[n][i||"sqlite"]}if(u.length)for(let e of u)for(let[t,r]of Object.entries(e.fields)){let a=d(r,t),o=n.schema.alterTable(e.table).addColumn(t,a,e=>(e=!1!==r.required?e.notNull():e,r.references&&(e=e.references(`${r.references.model}.${r.references.field}`).onDelete(r.references.onDelete||"cascade")),r.unique&&(e=e.unique()),"date"===r.type&&"function"==typeof r.defaultValue&&("postgres"===i||"mysql"===i||"mssql"===i)&&(e="mysql"===i?e.defaultTo(nQ.sql`CURRENT_TIMESTAMP(3)`):e.defaultTo(nQ.sql`CURRENT_TIMESTAMP`)),e));c.push(o)}if(l.length)for(let t of l){let r=n.schema.createTable(t.table).addColumn("id",e.advanced?.database?.useNumberId?"postgres"===i?"serial":"integer":"mysql"===i||"mssql"===i?"varchar(36)":"text",t=>e.advanced?.database?.useNumberId?"postgres"===i||"sqlite"===i?t.primaryKey().notNull():"mssql"===i?t.identity().primaryKey().notNull():t.autoIncrement().primaryKey().notNull():t.primaryKey().notNull());for(let[e,n]of Object.entries(t.fields)){let t=d(n,e);r=r.addColumn(e,t,e=>(e=!1!==n.required?e.notNull():e,n.references&&(e=e.references(`${n.references.model}.${n.references.field}`).onDelete(n.references.onDelete||"cascade")),n.unique&&(e=e.unique()),"date"===n.type&&"function"==typeof n.defaultValue&&("postgres"===i||"mysql"===i||"mssql"===i)&&(e="mysql"===i?e.defaultTo(nQ.sql`CURRENT_TIMESTAMP(3)`):e.defaultTo(nQ.sql`CURRENT_TIMESTAMP`)),e))}c.push(r)}return{toBeCreated:l,toBeAdded:u,runMigrations:async function(){for(let e of c)await e.execute()},compileMigrations:async function(){return c.map(e=>e.compile().sql).join(";\n\n")+";"}}}async function og(e,t){let r=await t.context.internalAdapter.findAccounts(e),n=r?.find(e=>"credential"===e.providerId),i=n?.password;if(!n||!i||!t.body.password)throw new eR.APIError("BAD_REQUEST",{message:"No password credential found"});if(!await t.context.password.verify({hash:i,password:t.body.password}))throw new eR.APIError("BAD_REQUEST",{message:"Invalid password"});return!0}async function oy(e){let t=await (0,ty.createHash)("SHA-256").digest(e);return u.base64.encode(t)}async function ov(){if(n)return n;try{let e="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!e)return;let[{default:t},{default:r}]=await Promise.all([Function("mm","return import(mm)")("fs/promises"),Function("mm","return import(mm)")("path")]),i=await t.readFile(r.join(e,"package.json"),"utf-8");return n=JSON.parse(i)}catch{}}async function ob(e){if(n)return n.dependencies?.[e]||n.devDependencies?.[e]||n.peerDependencies?.[e];try{let t="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!t)throw Error("no-cwd");let[{default:r},{default:n}]=await Promise.all([Function("mm","return import(mm)")("fs/promises"),Function("mm","return import(mm)")("path")]),i=n.join(t,"node_modules",e,"package.json"),a=await r.readFile(i,"utf-8");return JSON.parse(a).version||await ow(e)||void 0}catch{}return await ow(e)}async function ow(e){let t=await ov();if(t)return({...t.dependencies,...t.devDependencies,...t.peerDependencies})[e]}async function o_(){let e=await ov();return e?.name}e.s(["a",()=>op,"c",()=>od,"e",()=>oh],15516),e.s(["c",()=>og],68706);let ox=null;async function oE(e){if(ox)return ox;let t=await o_();return t?ox=await oy(e?e+t:t):e?ox=await oy(e):ox=(0,eX.createRandomStringGenerator)("a-z","A-Z","0-9")(32)}function oI(){let e=(...e)=>e.some(e=>!!ej.env[e]);return e("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent?"cloudflare":e("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":e("NETLIFY","NETLIFY_URL")?"netlify":e("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":e("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":e("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":e("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":e("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":e("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":e("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":e("DYNO","HEROKU_APP_NAME")?"heroku":e("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":e("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function oS(){try{if("cloudflare"===oI())return"cloudflare";let e=await Function("mm","return import(mm)")("os"),t=e.cpus();return{deploymentVendor:oI(),systemPlatform:e.platform(),systemRelease:e.release(),systemArchitecture:e.arch(),cpuCount:t.length,cpuModel:t.length?t[0].model:null,cpuSpeed:t.length?t[0].speed:null,memory:e.totalmem(),isWSL:await oT(),isDocker:await oA(),isTTY:"undefined"!=typeof process&&process.stdout?process.stdout.isTTY:null}}catch(e){return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}async function o$(){if("cloudflare"===oI())return!1;try{return(await Function("mm","return import(mm)")("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function ok(){if("cloudflare"===oI())return!1;try{return(await Function("mm","return import(mm)")("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function oA(){return"cloudflare"!==oI()&&(void 0===i&&(i=await o$()||await ok()),i)}async function oT(){try{if("cloudflare"===oI()||"undefined"==typeof process||process?.platform!=="linux")return!1;let e=await Function("mm","return import(mm)")("fs");if((await Function("mm","return import(mm)")("os")).release().toLowerCase().includes("microsoft")){if(await oR())return!1;return!0}return!!e.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!await oR()}catch{return!1}}let oO=async()=>{if("cloudflare"===oI())return!1;try{return(await Function("mm","return import(mm)")("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function oR(){return void 0===a&&(a=await oO()||await oA()),a}let oN={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function oP(){for(let[e,t]of Object.entries(oN)){let r=await ob(e);if(r)return{name:t,version:r}}}let oU={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function oD(){for(let[e,t]of Object.entries(oU)){let r=await ob(e);if(r)return{name:t,version:r}}}async function oC(e,t){let r,n=e.telemetry?.debug||(0,ej.getBooleanEnvVar)("BETTER_AUTH_TELEMETRY_DEBUG",!1),i=ej.ENV.BETTER_AUTH_TELEMETRY_ENDPOINT,a=async e=>{try{t?.customTrack?await t.customTrack(e):n?await Promise.resolve(ej.logger.info("telemetry event",JSON.stringify(e,null,2))):await R(i,{method:"POST",body:e})}catch{}},o=async()=>{let r=e.telemetry?.enabled!==void 0&&e.telemetry.enabled;return((0,ej.getBooleanEnvVar)("BETTER_AUTH_TELEMETRY",!1)||r)&&(t?.skipTestCheck||!(0,ej.isTest)())},s=await o();s&&(r=await oE(e.baseURL),a({type:"init",payload:{config:{database:void 0,adapter:void 0,emailVerification:{sendVerificationEmail:!!e.emailVerification?.sendVerificationEmail,sendOnSignUp:!!e.emailVerification?.sendOnSignUp,sendOnSignIn:!!e.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!e.emailVerification?.autoSignInAfterVerification,expiresIn:e.emailVerification?.expiresIn,onEmailVerification:!!e.emailVerification?.onEmailVerification,afterEmailVerification:!!e.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!e.emailAndPassword?.enabled,disableSignUp:!!e.emailAndPassword?.disableSignUp,requireEmailVerification:!!e.emailAndPassword?.requireEmailVerification,maxPasswordLength:e.emailAndPassword?.maxPasswordLength,minPasswordLength:e.emailAndPassword?.minPasswordLength,sendResetPassword:!!e.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:e.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!e.emailAndPassword?.onPasswordReset,password:{hash:!!e.emailAndPassword?.password?.hash,verify:!!e.emailAndPassword?.password?.verify},autoSignIn:!!e.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!e.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(e.socialProviders||{}).map(t=>{let r=e.socialProviders?.[t];return r?{id:t,mapProfileToUser:!!r.mapProfileToUser,disableDefaultScope:!!r.disableDefaultScope,disableIdTokenSignIn:!!r.disableIdTokenSignIn,disableImplicitSignUp:r.disableImplicitSignUp,disableSignUp:r.disableSignUp,getUserInfo:!!r.getUserInfo,overrideUserInfoOnSignIn:!!r.overrideUserInfoOnSignIn,prompt:r.prompt,verifyIdToken:!!r.verifyIdToken,scope:r.scope,refreshAccessToken:!!r.refreshAccessToken}:{}}),plugins:e.plugins?.map(e=>e.id.toString()),user:{modelName:e.user?.modelName,fields:e.user?.fields,additionalFields:e.user?.additionalFields,changeEmail:{enabled:e.user?.changeEmail?.enabled,sendChangeEmailVerification:!!e.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:e.verification?.modelName,disableCleanup:e.verification?.disableCleanup,fields:e.verification?.fields},session:{modelName:e.session?.modelName,additionalFields:e.session?.additionalFields,cookieCache:{enabled:e.session?.cookieCache?.enabled,maxAge:e.session?.cookieCache?.maxAge},disableSessionRefresh:e.session?.disableSessionRefresh,expiresIn:e.session?.expiresIn,fields:e.session?.fields,freshAge:e.session?.freshAge,preserveSessionInDatabase:e.session?.preserveSessionInDatabase,storeSessionInDatabase:e.session?.storeSessionInDatabase,updateAge:e.session?.updateAge},account:{modelName:e.account?.modelName,fields:e.account?.fields,encryptOAuthTokens:e.account?.encryptOAuthTokens,updateAccountOnSignIn:e.account?.updateAccountOnSignIn,accountLinking:{enabled:e.account?.accountLinking?.enabled,trustedProviders:e.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:e.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:e.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!e.hooks?.after,before:!!e.hooks?.before},secondaryStorage:!!e.secondaryStorage,advanced:{cookiePrefix:!!e.advanced?.cookiePrefix,cookies:!!e.advanced?.cookies,crossSubDomainCookies:{domain:!!e.advanced?.crossSubDomainCookies?.domain,enabled:e.advanced?.crossSubDomainCookies?.enabled,additionalCookies:e.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!e.advanced?.database?.useNumberId,generateId:e.advanced?.database?.generateId,defaultFindManyLimit:e.advanced?.database?.defaultFindManyLimit},useSecureCookies:e.advanced?.useSecureCookies,ipAddress:{disableIpTracking:e.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:e.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:e.advanced?.disableCSRFCheck,cookieAttributes:{expires:e.advanced?.defaultCookieAttributes?.expires,secure:e.advanced?.defaultCookieAttributes?.secure,sameSite:e.advanced?.defaultCookieAttributes?.sameSite,domain:!!e.advanced?.defaultCookieAttributes?.domain,path:e.advanced?.defaultCookieAttributes?.path,httpOnly:e.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:e.trustedOrigins?.length,rateLimit:{storage:e.rateLimit?.storage,modelName:e.rateLimit?.modelName,window:e.rateLimit?.window,customStorage:!!e.rateLimit?.customStorage,enabled:e.rateLimit?.enabled,max:e.rateLimit?.max},onAPIError:{errorURL:e.onAPIError?.errorURL,onError:!!e.onAPIError?.onError,throw:e.onAPIError?.throw},logger:{disabled:e.logger?.disabled,level:e.logger?.level,log:!!e.logger?.log},databaseHooks:{user:{create:{after:!!e.databaseHooks?.user?.create?.after,before:!!e.databaseHooks?.user?.create?.before},update:{after:!!e.databaseHooks?.user?.update?.after,before:!!e.databaseHooks?.user?.update?.before}},session:{create:{after:!!e.databaseHooks?.session?.create?.after,before:!!e.databaseHooks?.session?.create?.before},update:{after:!!e.databaseHooks?.session?.update?.after,before:!!e.databaseHooks?.session?.update?.before}},account:{create:{after:!!e.databaseHooks?.account?.create?.after,before:!!e.databaseHooks?.account?.create?.before},update:{after:!!e.databaseHooks?.account?.update?.after,before:!!e.databaseHooks?.account?.update?.before}},verification:{create:{after:!!e.databaseHooks?.verification?.create?.after,before:!!e.databaseHooks?.verification?.create?.before},update:{after:!!e.databaseHooks?.verification?.update?.after,before:!!e.databaseHooks?.verification?.update?.before}}}},runtime:"undefined"!=typeof Deno?{name:"deno",version:Deno?.version?.deno??null}:"undefined"!=typeof Bun?{name:"bun",version:Bun?.version??null}:"undefined"!=typeof process&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null},database:await oP(),framework:await oD(),environment:"production"===(0,ej.getEnvVar)("NODE_ENV")?"production":"false"!==ej.env.CI&&("BUILD_ID"in ej.env||"BUILD_NUMBER"in ej.env||"CI"in ej.env||"CI_APP_ID"in ej.env||"CI_BUILD_ID"in ej.env||"CI_BUILD_NUMBER"in ej.env||"CI_NAME"in ej.env||"CONTINUOUS_INTEGRATION"in ej.env||"RUN_ID"in ej.env)?"ci":(0,ej.isTest)()?"test":"development",systemInfo:await oS(),packageManager:function(){let e=ej.env.npm_config_user_agent;if(!e)return;let t=e.split(" ")[0],r=t.lastIndexOf("/"),n=t.substring(0,r);return{name:"npminstall"===n?"cnpm":n,version:t.substring(r+1)}}()},anonymousId:r}));return{publish:async t=>{s&&(r||(r=await oE(e.baseURL)),await a({type:t.type,payload:t.payload,anonymousId:r}))}}}e.s(["createTelemetry",()=>oC],51327);let oj="better-auth-secret-123456789";function oz(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}let oL=async e=>{var t;let r,n=await op(e),i=e.plugins||[],a=(t=e,t.advanced?.crossSubDomainCookies?.enabled,[]),o=(0,ej.createLogger)(e.logger),s=eM(e.baseURL,e.basePath),l=e.secret||ej.env.BETTER_AUTH_SECRET||ej.env.AUTH_SECRET||oj;l===oj&&ej.isProduction&&o.error("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config."),nP(e={...e,secret:l,baseURL:s?new URL(s).origin:"",basePath:e.basePath||"/api/auth",plugins:i.concat(a)},o);let u=eH(e),c=(0,nC.g)(e),d=Object.entries(e.socialProviders||{}).map(([e,t])=>{if(null==t||!1===t.enabled)return null;t.clientId||o.warn(`Social provider ${e} is missing clientId or clientSecret`);let r=tn[e](t);return r.disableImplicitSignUp=t.disableImplicitSignUp,r}).filter(e=>null!==e),{publish:p}=await oC(e,{adapter:n.id,database:"function"==typeof e.database?"adapter":os(e.database)||"unknown"}),f={appName:e.appName||"Better Auth",socialProviders:d,options:e,tables:c,trustedOrigins:function(e){let t=eM(e.baseURL,e.basePath);if(!t)return[];let r=[new URL(t).origin];e.trustedOrigins&&Array.isArray(e.trustedOrigins)&&r.push(...e.trustedOrigins);let n=ej.env.BETTER_AUTH_TRUSTED_ORIGINS;if(n&&r.push(...n.split(",")),r.filter(e=>!e).length)throw new eD.BetterAuthError("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return r}(e),baseURL:s||"",sessionConfig:{updateAge:e.session?.updateAge!==void 0?e.session.updateAge:86400,expiresIn:e.session?.expiresIn||604800,freshAge:e.session?.freshAge===void 0?86400:e.session.freshAge},secret:l,rateLimit:{...e.rateLimit,enabled:e.rateLimit?.enabled??ej.isProduction,window:e.rateLimit?.window||10,max:e.rateLimit?.max||100,storage:e.rateLimit?.storage||(e.secondaryStorage?"secondary-storage":"memory")},authCookies:u,logger:o,generateId:({model:t,size:r})=>"function"==typeof e.advanced?.generateId?e.advanced.generateId({model:t,size:r}):"function"==typeof e?.advanced?.database?.generateId?e.advanced.database.generateId({model:t,size:r}):(0,tg.g)(r),session:null,secondaryStorage:e.secondaryStorage,password:{hash:e.emailAndPassword?.password?.hash||rH,verify:e.emailAndPassword?.password?.verify||rK,config:{minPasswordLength:e.emailAndPassword?.minPasswordLength||8,maxPasswordLength:e.emailAndPassword?.maxPasswordLength||128},checkPassword:og},setNewSession(e){this.newSession=e},newSession:null,adapter:n,internalAdapter:od(n,{options:e,logger:o,hooks:e.databaseHooks?[e.databaseHooks]:[]}),createAuthCookie:eW(e),async runMigrations(){if(!e.database||"updateMany"in e.database)throw new eD.BetterAuthError("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:t}=await oh(e);await t()},publishTelemetry:p,skipCSRFCheck:!!e.advanced?.disableCSRFCheck,skipOriginCheck:e.advanced?.disableOriginCheck!==void 0?e.advanced.disableOriginCheck:!!(0,ej.isTest)()},m=oZ(f);return oz(m)?{context:r}=await m:{context:r}=m,r};async function oZ(e){let t=e.options,r=t.plugins||[],n=e,i=[];for(let e of r)if(e.init){let r,a=e.init(n);if("object"==typeof(r=oz(a)?await a:a)){if(r.options){let{databaseHooks:e,...n}=r.options;e&&i.push(e),t=tT(t,n)}r.context&&(n={...n,...r.context})}}return i.push(t.databaseHooks),n.internalAdapter=od(e.adapter,{options:t,logger:e.logger,hooks:i.filter(e=>void 0!==e),generateId:e.generateId}),n.options=t,{context:n}}let oM=e=>{let t=oL(e),{api:r}=nU(t,e),n=e.plugins?.reduce((e,t)=>t.$ERROR_CODES?{...e,...t.$ERROR_CODES}:e,{});return{handler:async r=>{let n=await t,i=n.options.basePath||"/api/auth";if(!n.options.baseURL){let e=eM(void 0,i,r);if(e)n.baseURL=e,n.options.baseURL=eq(n.baseURL)||void 0;else throw new eD.BetterAuthError("Could not get base URL from request. Please provide a valid base URL.")}n.trustedOrigins=[...e.trustedOrigins?Array.isArray(e.trustedOrigins)?e.trustedOrigins:await e.trustedOrigins(r):[],n.options.baseURL];let{handler:a}=nD(n,e);return a(r)},api:r,options:e,$context:t,$Infer:{},$ERROR_CODES:{...n,...eD.BASE_ERROR_CODES}}};e.s(["b",()=>oM],71718)},88026,e=>{"use strict";e.i(1127),e.i(48151),e.i(13012),e.i(27341),e.i(71718),e.i(80799),e.i(93139),e.i(51327),e.i(91804),e.i(52633),e.i(25269),e.i(49974),e.i(80012),e.i(66207),e.i(7834),e.i(21454),e.i(88071),e.i(89593),e.i(55018),e.i(90545),e.i(67166),e.i(17722),e.i(10465),e.i(27003),e.i(31668),e.i(42293),e.i(24965),e.i(26235),e.i(80338),e.i(56723),e.i(15516),e.i(91609),e.i(56370),e.i(43027),e.i(47117),e.i(7117),e.i(68706),e.s([],88026)},68639,e=>{"use strict";var t=e.i(71718);e.s(["betterAuth",()=>t.b])},1368,e=>{"use strict";var t=e.i(43027);e.i(21454),e.i(90545),e.i(1127),e.i(91609),e.i(93139),e.i(27003),e.i(91804),e.i(31668),e.i(49974),e.i(42293);var r=e.i(13012);e.i(24965),t.c;let n=(e,n)=>{let i=null,a=e=>({getFieldName:t})=>{let i=(e,r)=>{if(e&&r)return e.reduce((e,n)=>({...e,[t({model:r,field:n})]:!0}),{})};function a(e){switch(e){case"starts_with":return"startsWith";case"ends_with":return"endsWith";case"ne":return"not";case"not_in":return"notIn";default:return e}}let o=(e,r)=>{if(!r||!r.length)return{};if(1===r.length){let n=r[0];if(!n)return;return{[t({model:e,field:n.field})]:"eq"!==n.operator&&n.operator?{[a(n.operator)]:n.value}:n.value}}let n=r.filter(e=>"AND"===e.connector||!e.connector),i=r.filter(e=>"OR"===e.connector),o=n.map(r=>({[t({model:e,field:r.field})]:"eq"!==r.operator&&r.operator?{[a(r.operator)]:r.value}:r.value})),s=i.map(r=>({[t({model:e,field:r.field})]:"eq"!==r.operator&&r.operator?{[a(r.operator)]:r.value}:r.value}));return{...o.length?{AND:o}:{},...s.length?{OR:s}:{}}};return{async create({model:t,data:n,select:a}){if(!e[t])throw new r.BetterAuthError(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await e[t].create({data:n,select:i(a,t)})},async findOne({model:t,where:n,select:a}){let s=o(t,n);if(!e[t])throw new r.BetterAuthError(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await e[t].findFirst({where:s,select:i(a,t)})},async findMany({model:n,where:i,limit:a,offset:s,sortBy:l}){let u=o(n,i);if(!e[n])throw new r.BetterAuthError(`Model ${n} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await e[n].findMany({where:u,take:a||100,skip:s||0,...l?.field?{orderBy:{[t({model:n,field:l.field})]:"desc"===l.direction?"desc":"asc"}}:{}})},async count({model:t,where:n}){let i=o(t,n);if(!e[t])throw new r.BetterAuthError(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await e[t].count({where:i})},async update({model:t,where:n,update:i}){if(!e[t])throw new r.BetterAuthError(`Model ${t} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let a=o(t,n);return await e[t].update({where:a,data:i})},async updateMany({model:t,where:r,update:n}){let i=o(t,r),a=await e[t].updateMany({where:i,data:n});return a?a.count:0},async delete({model:t,where:r}){let n=o(t,r);try{await e[t].delete({where:n})}catch(e){}},async deleteMany({model:t,where:r}){let n=o(t,r),i=await e[t].deleteMany({where:n});return i?i.count:0},options:n}},o=null;o={config:{adapterId:"prisma",adapterName:"Prisma Adapter",usePlural:n.usePlural??!1,debugLogs:n.debugLogs??!1,transaction:!!n.transaction&&(r=>e.$transaction(e=>r((0,t.c)({config:o.config,adapter:a(e)})(i))))},adapter:a(e)};let s=(0,t.c)(o);return e=>(i=e,s(e))};e.s(["prismaAdapter",()=>n],1368)},60659,e=>{"use strict";e.i(13012),e.i(1127),e.i(49974),e.i(80012),e.i(66207);var t=e.i(17722),r=e.i(25269);let n=()=>({id:"next-cookies",hooks:{after:[{matcher:e=>!0,handler:(0,r.createAuthMiddleware)(async r=>{let n=r.context.responseHeaders;if((!("_flag"in r)||"router"!==r._flag)&&n instanceof Headers){let r,i=n?.get("set-cookie");if(!i)return;let a=(0,t.p)(i),{cookies:o}=await e.A(43735);try{r=await o()}catch(e){if(e instanceof Error&&e.message.startsWith("`cookies` was called outside a request scope."))return;throw e}a.forEach((e,t)=>{if(!t)return;let n={sameSite:e.samesite,secure:e.secure,maxAge:e["max-age"],httpOnly:e.httponly,domain:e.domain,path:e.path};try{r.set(t,decodeURIComponent(e.value),n)}catch(e){}});return}})}]}});e.s(["nextCookies",()=>n])},22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},46786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},40631,e=>{e.v({name:"dotenv",version:"17.2.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}})},53021,(e,t,r)=>{let n=e.r(22734),i=e.r(14747),a=e.r(46786),o=e.r(54799),s=e.r(40631).version,l=[" encrypt with Dotenvx: https://dotenvx.com"," prevent committing .env to code: https://dotenvx.com/precommit"," prevent building .env in docker: https://dotenvx.com/prebuild"," add observability to secrets: https://dotenvx.com/ops"," sync secrets across teammates & machines: https://dotenvx.com/ops"," backup and recover secrets: https://dotenvx.com/ops"," audit secrets and track compliance: https://dotenvx.com/ops"," add secrets lifecycle management: https://dotenvx.com/ops"," add access controls to secrets: https://dotenvx.com/ops","  run anywhere with `dotenvx run -- yourcommand`","  specify custom .env file path with { path: '/custom/path/.env' }","  enable debug logging with { debug: true }","  override existing env vars with { override: true }","  suppress all logs with { quiet: true }","  write to custom object with { processEnv: myObject }","  load multiple .env files with { path: ['.env.local', '.env'] }"];function u(e){return"string"==typeof e?!["false","0","no","off",""].includes(e.toLowerCase()):!!e}let c=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function d(e){console.log(`[dotenv@${s}][DEBUG] ${e}`)}function p(e){console.log(`[dotenv@${s}] ${e}`)}function f(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function m(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(let r of e.path)n.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=i.resolve(process.cwd(),".env.vault");return n.existsSync(t)?t:null}function h(e){return"~"===e[0]?i.join(a.homedir(),e.slice(1)):e}let g={configDotenv:function(e){let t,r=i.resolve(process.cwd(),".env"),a="utf8",o=process.env;e&&null!=e.processEnv&&(o=e.processEnv);let s=u(o.DOTENV_CONFIG_DEBUG||e&&e.debug),c=u(o.DOTENV_CONFIG_QUIET||e&&e.quiet);e&&e.encoding?a=e.encoding:s&&d("No encoding is specified. UTF-8 is used by default");let f=[r];if(e&&e.path)if(Array.isArray(e.path))for(let t of(f=[],e.path))f.push(h(t));else f=[h(e.path)];let m={};for(let r of f)try{let t=g.parse(n.readFileSync(r,{encoding:a}));g.populate(m,t,e)}catch(e){s&&d(`Failed to load ${r} ${e.message}`),t=e}let y=g.populate(o,m,e);if(s=u(o.DOTENV_CONFIG_DEBUG||s),c=u(o.DOTENV_CONFIG_QUIET||c),s||!c){var v;let e=Object.keys(y).length,r=[];for(let e of f)try{let t=i.relative(process.cwd(),e);r.push(t)}catch(r){s&&d(`Failed to load ${e} ${r.message}`),t=r}p(`injecting env (${e}) from ${r.join(",")} ${(v=`-- tip: ${l[Math.floor(Math.random()*l.length)]}`,process.stdout.isTTY?`\x1b[2m${v}\x1b[0m`:v)}`)}return t?{parsed:m,error:t}:{parsed:m}},_configVault:function(e){let t=u(process.env.DOTENV_CONFIG_DEBUG||e&&e.debug),r=u(process.env.DOTENV_CONFIG_QUIET||e&&e.quiet);(t||!r)&&p("Loading env from encrypted .env.vault");let n=g._parseVault(e),i=process.env;return e&&null!=e.processEnv&&(i=e.processEnv),g.populate(i,n,e),{parsed:n}},_parseVault:function(e){let t,r=m(e=e||{});e.path=r;let n=g.configDotenv(e);if(!n.parsed){let e=Error(`MISSING_DATA: Cannot parse ${r} for an unknown reason`);throw e.code="MISSING_DATA",e}let i=f(e).split(","),a=i.length;for(let e=0;e<a;e++)try{let r=i[e].trim(),a=function(e,t){let r;try{r=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){let e=Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}let n=r.password;if(!n){let e=Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}let i=r.searchParams.get("environment");if(!i){let e=Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}let a=`DOTENV_VAULT_${i.toUpperCase()}`,o=e.parsed[a];if(!o){let e=Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${a} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:o,key:n}}(n,r);t=g.decrypt(a.ciphertext,a.key);break}catch(t){if(e+1>=a)throw t}return g.parse(t)},config:function(e){if(0===f(e).length)return g.configDotenv(e);let t=m(e);if(!t){var r;return r=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.error(`[dotenv@${s}][WARN] ${r}`),g.configDotenv(e)}return g._configVault(e)},decrypt:function(e,t){let r=Buffer.from(t.slice(-64),"hex"),n=Buffer.from(e,"base64"),i=n.subarray(0,12),a=n.subarray(-16);n=n.subarray(12,-16);try{let e=o.createDecipheriv("aes-256-gcm",r,i);return e.setAuthTag(a),`${e.update(n)}${e.final()}`}catch(n){let e=n instanceof RangeError,t="Invalid key length"===n.message,r="Unsupported state or unable to authenticate data"===n.message;if(e||t){let e=Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(r){let e=Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw n}},parse:function(e){let t,r={},n=e.toString();for(n=n.replace(/\r\n?/mg,"\n");null!=(t=c.exec(n));){let e=t[1],n=t[2]||"",i=(n=n.trim())[0];n=n.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),'"'===i&&(n=(n=n.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")),r[e]=n}return r},populate:function(e,t,r={}){let n=!!(r&&r.debug),i=!!(r&&r.override),a={};if("object"!=typeof t){let e=Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(let r of Object.keys(t))Object.prototype.hasOwnProperty.call(e,r)?(!0===i&&(e[r]=t[r],a[r]=t[r]),n&&(!0===i?d(`"${r}" is already defined and WAS overwritten`):d(`"${r}" is already defined and was NOT overwritten`))):(e[r]=t[r],a[r]=t[r]);return a}};t.exports.configDotenv=g.configDotenv,t.exports._configVault=g._configVault,t.exports._parseVault=g._parseVault,t.exports.config=g.config,t.exports.decrypt=g.decrypt,t.exports.parse=g.parse,t.exports.populate=g.populate,t.exports=g},1138,e=>{"use strict";var t=e.i(50227),r=e.i(57764);function n(e,t){if(e instanceof Promise)throw Error(t)}function i(e){let t=e.runtimeEnvStrict??e.runtimeEnv??process.env;if(e.emptyStringAsUndefined)for(let[e,r]of Object.entries(t))""===r&&delete t[e];if(e.skipValidation)return t;let r="object"==typeof e.client?e.client:{},i="object"==typeof e.server?e.server:{},a="object"==typeof e.shared?e.shared:{},o=e.isServer??!0,s=o?{...i,...a,...r}:{...r,...a},l=e.createFinalSchema?.(s,o)["~standard"].validate(t)??function(e,t){let r={},i=[];for(let a in e){let o=e[a]["~standard"].validate(t[a]);if(n(o,`Validation must be synchronous, but ${a} returned a Promise.`),o.issues){i.push(...o.issues.map(e=>({...e,message:e.message,path:[a,...e.path??[]]})));continue}r[a]=o.value}return i.length?{issues:i}:{value:r}}(s,t);n(l,"Validation must be synchronous");let u=e.onValidationError??(e=>{throw console.error(" Invalid environment variables:",e),Error("Invalid environment variables")}),c=e.onInvalidAccess??(()=>{throw Error(" Attempted to access a server-side environment variable on the client")});return l.issues?u(l.issues):new Proxy(Object.assign((e.extends??[]).reduce((e,t)=>Object.assign(e,t),{}),l.value),{get(t,r){if("string"==typeof r&&"__esModule"!==r&&"$$typeof"!==r)return o||e.clientPrefix&&(r.startsWith(e.clientPrefix)||r in a)?Reflect.get(t,r):c(r)}})}var a=e.i(53021),o=e.i(43608);let s=(0,r.fileURLToPath)({get url(){return`file://${e.P("packages/env/src/index.ts")}`}}.url),l=t.default.dirname(s);a.default.config({path:t.default.resolve(l,"../../../.env")});let u=i({server:{DATABASE_URL:o.z.string().url()},client:{NEXT_PUBLIC_NODE_ENV:o.z.enum(["development","production","local"]).default("local")},clientPrefix:"NEXT_PUBLIC_",runtimeEnv:process.env,emptyStringAsUndefined:!0}),c=i({extends:[u],server:{CORS_ORIGIN:o.z.url().default("http://localhost:3002")},runtimeEnv:process.env,emptyStringAsUndefined:!0});e.s(["env",0,c],1138)},78314,e=>e.a(async(t,r)=>{try{var n=e.i(15405);e.i(88026);var i=e.i(68639),a=e.i(1368),o=e.i(60659),s=e.i(1138),l=t([n]);[n]=l.then?(await l)():l;let u=(0,i.betterAuth)({database:(0,a.prismaAdapter)(n.default,{provider:"postgresql"}),trustedOrigins:[s.env.CORS_ORIGIN],emailAndPassword:{enabled:!0},plugins:[(0,o.nextCookies)()]});e.s(["auth",0,u]),r()}catch(e){r(e)}},!1),54116,e=>e.a(async(t,r)=>{try{var n=e.i(78314),i=t([n]);async function a(e){let t=e instanceof Headers?Object.fromEntries(e.entries()):e;return{session:await n.auth.api.getSession({headers:t})}}[n]=i.then?(await i)():i,e.s(["createContext",()=>a]),r()}catch(e){r(e)}},!1),22802,e=>{"use strict";let t;function r(e){return e[0]??{}}function n(e){return Array.isArray(e)?e:null==e?[]:[e]}class i extends Error{constructor(...e){super(...e),this.name="AbortError"}}function a(e){let t;return()=>{if(t)return t.result;let r=e();return t={result:r},r}}function o(){return globalThis["__@orpc/shared@1.11.1/otel/config__"]}function s(e,t={},r){let n=o()?.tracer;return n?.startSpan(e,t,r)}function l(e,t,r={}){if(!e)return;let n=function(e){if(e instanceof Error){let t={message:e.message,name:e.name,stack:e.stack};return"code"in e&&("string"==typeof e.code||"number"==typeof e.code)&&(t.code=e.code),t}return{message:String(e)}}(t);e.recordException(n),r.signal?.aborted&&r.signal.reason===t||e.setStatus({code:2,message:n.message})}async function u({name:e,context:t,...r},n){let i=o()?.tracer;if(!i)return n();let a=async e=>{try{return await n(e)}catch(t){throw l(e,t,r),t}finally{e.end()}};return t?i.startActiveSpan(e,r,t,a):i.startActiveSpan(e,r,a)}async function c(e,t){let r=o();if(!e||!r)return t();let n=r.trace.setSpan(r.context.active(),e);return r.context.with(n,t)}class d{openIds=new Set;queues=new Map;waiters=new Map;get length(){return this.openIds.size}get waiterIds(){return Array.from(this.waiters.keys())}hasBufferedItems(e){return!!this.queues.get(e)?.length}open(e){this.openIds.add(e)}isOpen(e){return this.openIds.has(e)}push(e,t){this.assertOpen(e);let r=this.waiters.get(e);if(r?.length)r.shift()[0](t),0===r.length&&this.waiters.delete(e);else{let r=this.queues.get(e);r?r.push(t):this.queues.set(e,[t])}}async pull(e){this.assertOpen(e);let t=this.queues.get(e);if(t?.length){let r=t.shift();return 0===t.length&&this.queues.delete(e),r}return new Promise((t,r)=>{let n=this.waiters.get(e),i=[t,r];n?n.push(i):this.waiters.set(e,[i])})}close({id:e,reason:t}={}){if(void 0===e){this.waiters.forEach((e,r)=>{let n=t??new i(`[AsyncIdQueue] Queue[${r}] was closed or aborted while waiting for pulling.`);e.forEach(([,e])=>e(n))}),this.waiters.clear(),this.openIds.clear(),this.queues.clear();return}let r=t??new i(`[AsyncIdQueue] Queue[${e}] was closed or aborted while waiting for pulling.`);this.waiters.get(e)?.forEach(([,e])=>e(r)),this.waiters.delete(e),this.openIds.delete(e),this.queues.delete(e)}assertOpen(e){if(!this.isOpen(e))throw Error(`[AsyncIdQueue] Cannot access queue[${e}] because it is not open or aborted.`)}}function p(e){return!!e&&"object"==typeof e&&"next"in e&&"function"==typeof e.next&&Symbol.asyncIterator in e&&"function"==typeof e[Symbol.asyncIterator]}let f=Symbol.for("asyncDispose"),m=Symbol.asyncDispose??f;class h{#ew=!1;#e_=!1;#ex;#eE;constructor(e,t){this.#ex=t,this.#eE=function(e){let t=Promise.resolve();return(...r)=>t=t.catch(()=>{}).then(()=>e(...r))}(async()=>{if(this.#ew)return{done:!0,value:void 0};try{let t=await e();return t.done&&(this.#ew=!0),t}catch(e){throw this.#ew=!0,e}finally{this.#ew&&!this.#e_&&(this.#e_=!0,await this.#ex("next"))}})}next(){return this.#eE()}async return(e){return this.#ew=!0,this.#e_||(this.#e_=!0,await this.#ex("return")),{done:!0,value:e}}async throw(e){throw this.#ew=!0,this.#e_||(this.#e_=!0,await this.#ex("throw")),e}async [m](){this.#ew=!0,this.#e_||(this.#e_=!0,await this.#ex("dispose"))}[Symbol.asyncIterator](){return this}}function g(e,t){let r=new d,n=Array.from({length:t},(e,t)=>t.toString()),i=!1,o=a(async()=>{try{for(;;){let t=await e.next();if(n.forEach(e=>{r.isOpen(e)&&r.push(e,{next:t})}),t.done)break}}catch(e){n.forEach(t=>{r.isOpen(t)&&r.push(t,{error:e})})}finally{i=!0}});return n.map(t=>(r.open(t),new h(async()=>{o();let e=await r.pull(t);if(e.next)return e.next;throw e.error},async n=>{r.close({id:t}),"next"===n||r.length||i||(i=!0,await e?.return?.())})))}function y({name:e,...t},r){let n;return new h(async()=>{n??=s(e);try{let e=await c(n,()=>r.next());return n?.addEvent(e.done?"completed":"yielded"),e}catch(e){throw l(n,e,t),e}},async e=>{try{"next"!==e&&await c(n,()=>r.return?.())}catch(e){throw l(n,e,t),e}finally{n?.end()}})}function v(e){return async(t,...r)=>{try{return await t.next()}catch(n){throw await e(n,t,...r),n}}}function b(e,t,r){let n=(t,i)=>{let a=e[i];return a?a({...t,next:(e=t)=>n(e,i+1)}):r(t)};return n(t,0)}function w(e){if(e)return JSON.parse(e)}function _(e){return JSON.stringify(e)}function x(e){return I(e)?Object.getPrototypeOf(e)?.constructor:null}function E(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||!t||!t.constructor}function I(e){return!!e&&("object"==typeof e||"function"==typeof e)}function S(e,t){let r=e;for(let e of t){if(!I(r))return;r=r[e]}return r}function $(e){let t=typeof e;return"string"===t||"number"===t||"symbol"===t}let k=((t=function(){}).prototype=Object.create(null),Object.freeze(t.prototype),t);function A(e,...t){return"function"==typeof e?e(...t):e}let T=/^\s*function\s*\(\)\s*\{\s*\[native code\]\s*\}\s*$/;function O(e,t){return new Proxy("function"==typeof e?t:e,{get(r,n){let i=n in t?t:A(e),a=Reflect.get(i,n);return"function"==typeof a?a.bind(i):a},has:(r,n)=>Reflect.has(t,n)||Reflect.has(A(e),n)})}function R(e){try{return decodeURIComponent(e)}catch{return e}}e.s(["AbortError",()=>i,"AsyncIteratorClass",()=>h,"NullProtoObj",()=>k,"ORPC_NAME",()=>"orpc","asyncIteratorWithSpan",()=>y,"clone",()=>function e(t){if(Array.isArray(t))return t.map(e);if(E(t)){let r={};for(let n in t)r[n]=e(t[n]);return r}return t},"findDeepMatches",()=>function e(t,r,n=[],i=[],a=[]){if(t(r))i.push(n),a.push(r);else if(Array.isArray(r))r.forEach((r,o)=>{e(t,r,[...n,o],i,a)});else if(E(r))for(let o in r)e(t,r[o],[...n,o],i,a);return{maps:i,values:a}},"get",()=>S,"getConstructor",()=>x,"getGlobalOtelConfig",()=>o,"intercept",()=>b,"isAsyncIteratorObject",()=>p,"isObject",()=>E,"isPropertyKey",()=>$,"isTypescriptObject",()=>I,"onError",()=>v,"once",()=>a,"overlayProxy",()=>O,"parseEmptyableJSON",()=>w,"preventNativeAwait",()=>function e(t){return new Proxy(t,{get(t,r,n){let i=Reflect.get(t,r,n);return"then"!==r||"function"!=typeof i?i:new Proxy(i,{apply(r,n,i){if(2!==i.length||i.some(e=>{var t;return!("function"==typeof(t=e)&&T.test(t.toString()))}))return Reflect.apply(r,n,i);let a=!0;i[0].call(n,e(new Proxy(t,{get:(e,t,r)=>{if(a&&"then"===t){a=!1;return}return Reflect.get(e,t,r)}})))}})}})},"replicateAsyncIterator",()=>g,"resolveMaybeOptionalOptions",()=>r,"runInSpanContext",()=>c,"runWithSpan",()=>u,"setSpanError",()=>l,"startSpan",()=>s,"stringifyJSON",()=>_,"toArray",()=>n,"tryDecodeURIComponent",()=>R,"value",()=>A])},74441,33050,e=>{"use strict";var t=e.i(22802);let r={BAD_REQUEST:{status:400,message:"Bad Request"},UNAUTHORIZED:{status:401,message:"Unauthorized"},FORBIDDEN:{status:403,message:"Forbidden"},NOT_FOUND:{status:404,message:"Not Found"},METHOD_NOT_SUPPORTED:{status:405,message:"Method Not Supported"},NOT_ACCEPTABLE:{status:406,message:"Not Acceptable"},TIMEOUT:{status:408,message:"Request Timeout"},CONFLICT:{status:409,message:"Conflict"},PRECONDITION_FAILED:{status:412,message:"Precondition Failed"},PAYLOAD_TOO_LARGE:{status:413,message:"Payload Too Large"},UNSUPPORTED_MEDIA_TYPE:{status:415,message:"Unsupported Media Type"},UNPROCESSABLE_CONTENT:{status:422,message:"Unprocessable Content"},TOO_MANY_REQUESTS:{status:429,message:"Too Many Requests"},CLIENT_CLOSED_REQUEST:{status:499,message:"Client Closed Request"},INTERNAL_SERVER_ERROR:{status:500,message:"Internal Server Error"},NOT_IMPLEMENTED:{status:501,message:"Not Implemented"},BAD_GATEWAY:{status:502,message:"Bad Gateway"},SERVICE_UNAVAILABLE:{status:503,message:"Service Unavailable"},GATEWAY_TIMEOUT:{status:504,message:"Gateway Timeout"}};function n(e,t){return t??r[e]?.status??500}function i(e,t){return t||r[e]?.message||e}let a=Symbol.for("__@orpc/client@1.11.1/error/ORPC_ERROR_CONSTRUCTORS__");globalThis[a]??=new WeakSet;let o=globalThis[a];class s extends Error{defined;code;status;data;constructor(e,...r){const a=(0,t.resolveMaybeOptionalOptions)(r);if(void 0!==a.status&&!c(a.status))throw Error("[ORPCError] Invalid error status code.");super(i(e,a.message),a),this.code=e,this.status=n(e,a.status),this.defined=a.defined??!1,this.data=a.data}toJSON(){return{defined:this.defined,code:this.code,status:this.status,message:this.message,data:this.data}}static[Symbol.hasInstance](e){if(o.has(this)){let r=(0,t.getConstructor)(e);if(r&&o.has(r))return!0}return super[Symbol.hasInstance](e)}}function l(e){return e instanceof s&&e.defined}function u(e){return e instanceof s?e:new s("INTERNAL_SERVER_ERROR",{message:"Internal server error",cause:e})}function c(e){return e<200||e>=400}function d(e){if(!(0,t.isObject)(e))return!1;let r=["defined","code","status","message","data"];return!Object.keys(e).some(e=>!r.includes(e))&&"defined"in e&&"boolean"==typeof e.defined&&"code"in e&&"string"==typeof e.code&&"status"in e&&"number"==typeof e.status&&c(e.status)&&"message"in e&&"string"==typeof e.message}function p(e,t={}){return new s(e.code,{...t,...e})}o.add(s),e.s(["C",()=>r,"b",()=>i,"c",()=>s,"d",()=>c,"e",()=>d,"f",()=>n,"g",()=>p,"i",()=>l,"t",()=>u],74441),e.s(["ORPCError",()=>s],33050)},14099,80895,61462,90732,21156,41384,62372,78932,79075,14861,5348,e=>{"use strict";var t=e.i(22802),r=e.i(74441),n=t;class i extends TypeError{}class a extends TypeError{}class o extends Error{data;constructor(e){super(e?.message??"An error event was received",e),this.data=e?.data}}class s{constructor(e={}){this.options=e}incomplete="";feed(e){this.incomplete+=e;let t=this.incomplete.lastIndexOf("\n\n");if(-1===t)return;let r=this.incomplete.slice(0,t).split(/\n\n/);for(let e of(this.incomplete=this.incomplete.slice(t+2),r)){let t=function(e){let t=e.replace(/\n+$/,"").split(/\n/),r={data:void 0,event:void 0,id:void 0,retry:void 0,comments:[]};for(let e of t){let t=e.indexOf(":"),n=-1===t?e:e.slice(0,t),i=-1===t?"":e.slice(t+1).replace(/^\s/,"");if(0===t)r.comments.push(i);else if("data"===n)r.data??="",r.data+=`${i}
`;else if("event"===n)r.event=i;else if("id"===n)r.id=i;else if("retry"===n){let e=Number.parseInt(i);Number.isInteger(e)&&e>=0&&e.toString()===i&&(r.retry=e)}}return r.data=r.data?.replace(/\n$/,""),r}(`${e}

`);this.options.onEvent&&this.options.onEvent(t)}this.incomplete=""}end(){if(this.incomplete)throw new a("Event Iterator ended before complete")}}class l extends TransformStream{constructor(){let e;super({start(t){e=new s({onEvent:e=>{t.enqueue(e)}})},transform(t){e.feed(t)},flush(){e.end()}})}}function u(e){if(e.includes("\n"))throw new i("Event's id must not contain a newline character")}function c(e){if(!Number.isInteger(e)||e<0)throw new i("Event's retry must be a integer and >= 0")}function d(e){if(e.includes("\n"))throw new i("Event's comment must not contain a newline character")}function p(e){let t="";if(t+=function(e){let t="";for(let r of e??[])d(r),t+=`: ${r}
`;return t}(e.comments),void 0!==e.event){if(e.event.includes("\n"))throw new i("Event's event must not contain a newline character");t+=`event: ${e.event}
`}return void 0!==e.retry&&(c(e.retry),t+=`retry: ${e.retry}
`),void 0!==e.id&&(u(e.id),t+=`id: ${e.id}
`),t+=function(e){let t=e?.split(/\n/)??[],r="";for(let e of t)r+=`data: ${e}
`;return r}(e.data),t+="\n"}let f=Symbol("ORPC_EVENT_SOURCE_META");function m(e,t){if(void 0===t.id&&void 0===t.retry&&!t.comments?.length)return e;if(void 0!==t.id&&u(t.id),void 0!==t.retry&&c(t.retry),void 0!==t.comments)for(let e of t.comments)d(e);return new Proxy(e,{get:(e,r,n)=>r===f?t:Reflect.get(e,r,n)})}function h(e){return(0,n.isTypescriptObject)(e)?Reflect.get(e,f):void 0}class g extends n.AsyncIteratorClass{hibernationCallback;constructor(e){super(async()=>{throw Error("Cannot iterate over hibernating iterator directly")},async e=>{if("next"!==e)throw Error("Cannot cleanup hibernating iterator directly")}),this.hibernationCallback=e}}function y(e){let t=e.replace(/"/g,'\\"'),r=encodeURIComponent(e).replace(/['()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`).replace(/%(7C|60|5E)/g,(e,t)=>String.fromCharCode(Number.parseInt(t,16)));return`inline; filename="${t}"; filename*=utf-8''${r}`}function v(e){let t=e.match(/filename\*=(UTF-8'')?([^;]*)/i);if(t&&"string"==typeof t[2])return(0,n.tryDecodeURIComponent)(t[2]);let r=e.match(/filename="((?:\\"|[^"])*)"/i);if(r&&"string"==typeof r[1])return r[1].replace(/\\"/g,'"')}function b(e,t){let r={...e};for(let e in t)Array.isArray(t[e])?r[e]=[...(0,n.toArray)(r[e]),...t[e]]:void 0!==t[e]&&(Array.isArray(r[e])?r[e]=[...r[e],t[e]]:void 0!==r[e]?r[e]=[r[e],t[e]]:r[e]=t[e]);return r}function w(e){return"string"==typeof e||void 0===e?e:0!==e.length?e.join(", "):void 0}function _(e,r){let n=async e=>{let n=await r.error(e);if(n!==e){let r=h(e);r&&(0,t.isTypescriptObject)(n)&&(n=m(n,r))}return n};return new t.AsyncIteratorClass(async()=>{let{done:i,value:a}=await (async()=>{try{return await e.next()}catch(e){throw await n(e)}})(),o=await r.value(a,i);if(o!==a){let e=h(a);e&&(0,t.isTypescriptObject)(o)&&(o=m(o,e))}return{done:i,value:o}},async()=>{try{await e.return?.()}catch(e){throw await n(e)}})}e.s(["ErrorEvent",()=>o,"EventDecoderStream",()=>l,"HibernationEventIterator",()=>g,"encodeEventMessage",()=>p,"flattenHeader",()=>w,"generateContentDisposition",()=>y,"getEventMeta",()=>h,"getFilenameFromContentDisposition",()=>v,"mergeStandardHeaders",()=>b,"withEventMeta",()=>m],80895),e.s(["m",()=>_],61462),e.s([],90732);var x=r;e.s(["fallbackORPCErrorStatus",()=>x.f],21156);var x=r,E=e.i(33050),I=r;e.s(["isORPCErrorStatus",()=>I.d],41384);var I=r;class S extends Error{issues;data;constructor(e){super(e.message,e),this.issues=e.issues,this.data=e.data}}function $(e,t){return{...e,...t}}async function k(e,t){let{code:r,status:n,message:i,data:a,cause:o,defined:s}=t,l=e?.[t.code];if(!l||(0,x.f)(t.code,l.status)!==t.status)return s?new E.ORPCError(r,{defined:!1,status:n,message:i,data:a,cause:o}):t;if(!l.data)return s?t:new E.ORPCError(r,{defined:!0,status:n,message:i,data:a,cause:o});let u=await l.data["~standard"].validate(t.data);return u.issues?s?new E.ORPCError(r,{defined:!1,status:n,message:i,data:a,cause:o}):t:new E.ORPCError(r,{defined:!0,status:n,message:i,data:u.value,cause:o})}class A{"~orpc";constructor(e){if(e.route?.successStatus&&(0,I.d)(e.route.successStatus))throw Error("[ContractProcedure] Invalid successStatus.");if(Object.values(e.errorMap).some(e=>e&&e.status&&!(0,I.d)(e.status)))throw Error("[ContractProcedure] Invalid error status code.");this["~orpc"]=e}}function T(e){return e instanceof A||("object"==typeof e||"function"==typeof e)&&null!==e&&"~orpc"in e&&"object"==typeof e["~orpc"]&&null!==e["~orpc"]&&"errorMap"in e["~orpc"]&&"route"in e["~orpc"]&&"meta"in e["~orpc"]}function O(e,t){return{...e,...t}}function R(e,t){return{...e,...t}}function N(e,t){return e?`${e}${t}`:t}function P(e,t){return e?[...e,...t]:t}function U(e,t){var r,n,i,a;let o=e;return t.prefix&&(r=o,n=t.prefix,o=r.path?{...r,path:`${n}${r.path}`}:r),t.tags?.length&&(i=o,a=t.tags,o={...i,tags:[...a,...i.tags??[]]}),o}function D(e,t){let r=e;for(let e=0;e<t.length;e++){let n=t[e];if(!r||T(r))return;r=r[n]}return r}e.s(["mapEventIterator",()=>_],62372);class C extends A{constructor(e){super(e),this["~orpc"].prefix=e.prefix,this["~orpc"].tags=e.tags}$meta(e){return new C({...this["~orpc"],meta:e})}$route(e){return new C({...this["~orpc"],route:e})}errors(e){return new C({...this["~orpc"],errorMap:$(this["~orpc"].errorMap,e)})}meta(e){return new C({...this["~orpc"],meta:O(this["~orpc"].meta,e)})}route(e){return new C({...this["~orpc"],route:R(this["~orpc"].route,e)})}input(e){return new C({...this["~orpc"],inputSchema:e})}output(e){return new C({...this["~orpc"],outputSchema:e})}prefix(e){return new C({...this["~orpc"],prefix:N(this["~orpc"].prefix,e)})}tag(...e){return new C({...this["~orpc"],tags:P(this["~orpc"].tags,e)})}router(e){return function e(t,r){if(T(t))return new A({...t["~orpc"],errorMap:$(r.errorMap,t["~orpc"].errorMap),route:U(t["~orpc"].route,r)});let n={};for(let i in t)n[i]=e(t[i],r);return n}(e,this["~orpc"])}}new C({errorMap:{},route:{},meta:{}});let j={defaultMethod:"POST",defaultSuccessStatus:200,defaultSuccessDescription:"OK",defaultInputStructure:"compact",defaultOutputStructure:"compact"};function z(e,t){return void 0===t?j[e]:t}let L=Symbol("ORPC_EVENT_ITERATOR_DETAILS");function Z(e){if(void 0!==e)return e["~standard"][L]}function M(e){return!!(0,t.isTypescriptObject)(e)&&"string"==typeof e.message&&(void 0===e.path||!!Array.isArray(e.path)&&!!e.path.every(e=>(0,t.isPropertyKey)(e)||(0,t.isTypescriptObject)(e)&&(0,t.isPropertyKey)(e.key)))&&!0}e.s(["enhanceRoute",()=>U,"fallbackContractConfig",()=>z,"getContractRouter",()=>D,"getEventIteratorSchemaDetails",()=>Z,"isSchemaIssue",()=>M,"mergeMeta",()=>O,"mergePrefix",()=>N,"mergeRoute",()=>R,"mergeTags",()=>P],14099),e.s(["mergeErrorMap",()=>$],78932),e.s(["isContractProcedure",()=>T],79075);let q=Symbol("ORPC_LAZY_SYMBOL");function V(e,t={}){return{[q]:{loader:e,meta:t}}}function B(e){return("object"==typeof e||"function"==typeof e)&&null!==e&&q in e}function F(e){return e[q].meta}function W(e){return B(e)?e[q].loader():Promise.resolve({default:e})}function H(e,t){return[...e,t]}class K{"~orpc";constructor(e){this["~orpc"]=e}}function G(e){return e instanceof K||T(e)&&"middlewares"in e["~orpc"]&&"inputValidationIndex"in e["~orpc"]&&"outputValidationIndex"in e["~orpc"]&&"handler"in e["~orpc"]}function J(e){return{output:e,context:{}}}function Q(e,...r){let n=(0,t.resolveMaybeOptionalOptions)(r);return async(...[r,i])=>{var a;let o=(0,t.toArray)(n.path),{default:s}=await W(e),l=i?.context??{},u=await (0,t.value)(n.context??{},l),c=new Proxy(a=s["~orpc"].errorMap,{get:(e,r)=>"string"!=typeof r?Reflect.get(e,r):(...e)=>{let n=(0,t.resolveMaybeOptionalOptions)(e),i=a[r];return new E.ORPCError(r,{defined:!!i,status:i?.status,message:n.message??i?.message,data:n.data,cause:n.cause})}}),d=async e=>e instanceof E.ORPCError?await k(s["~orpc"].errorMap,e):e;try{let e=await (0,t.runWithSpan)({name:"call_procedure",signal:i?.signal},e=>(e?.setAttribute("procedure.path",[...o]),(0,t.intercept)((0,t.toArray)(n.interceptors),{context:u,input:r,errors:c,path:o,procedure:s,signal:i?.signal,lastEventId:i?.lastEventId},e=>ee(e.procedure,e))));if((0,t.isAsyncIteratorObject)(e)){if(e instanceof g)return e;return(0,t.overlayProxy)(e,_((0,t.asyncIteratorWithSpan)({name:"consume_event_iterator_output",signal:i?.signal},e),{value:e=>e,error:e=>d(e)}))}return e}catch(e){throw await d(e)}}}async function X(e,r){let n=e["~orpc"].inputSchema;return n?(0,t.runWithSpan)({name:"validate_input"},async()=>{let e=await n["~standard"].validate(r);if(e.issues)throw new E.ORPCError("BAD_REQUEST",{message:"Input validation failed",data:{issues:e.issues},cause:new S({message:"Input validation failed",issues:e.issues,data:r})});return e.value}):r}async function Y(e,r){let n=e["~orpc"].outputSchema;return n?(0,t.runWithSpan)({name:"validate_output"},async()=>{let e=await n["~standard"].validate(r);if(e.issues)throw new E.ORPCError("INTERNAL_SERVER_ERROR",{message:"Output validation failed",cause:new S({message:"Output validation failed",issues:e.issues,data:r})});return e.value}):r}async function ee(e,r){let n=e["~orpc"].middlewares,i=Math.min(Math.max(0,e["~orpc"].inputValidationIndex),n.length),a=Math.min(Math.max(0,e["~orpc"].outputValidationIndex),n.length),o=async(s,l,u)=>{let c=u;s===i&&(c=await X(e,c));let d=n[s],p=d?await (0,t.runWithSpan)({name:`middleware.${d.name}`,signal:r.signal},async e=>(e?.setAttribute("middleware.index",s),e?.setAttribute("middleware.name",d.name),(await d({...r,context:l,next:async(...[e])=>{let t=e?.context??{};return{output:await o(s+1,{...l,...t},c),context:t}}},c,J)).output)):await (0,t.runWithSpan)({name:"handler",signal:r.signal},()=>e["~orpc"].handler({...r,context:l,input:c}));return s===a?await Y(e,p):p};return o(0,r.context,r.input)}let et=Symbol("ORPC_HIDDEN_ROUTER_CONTRACT");function er(e,t){return new Proxy(e,{get:(e,r)=>r===et?t:Reflect.get(e,r)})}function en(e,t){let r=e;for(let e=0;e<t.length;e++){let n=t[e];if(!r||G(r))return;if(!B(r)){r=r[n];continue}let i=r,a=t.slice(e);return V(async()=>{let e=en((await W(i)).default,a);return W(e)},F(i))}return r}function ei(e,t,r=[]){let n=e.router,i=e.router[et];if(void 0!==i&&(n=i),B(n))r.push({router:n,path:e.path});else if(T(n))t({contract:n,path:e.path});else for(let i in n)ei({router:n[i],path:[...e.path,i]},t,r);return r}async function ea(e,t){let r=[e];for(let e of r)for(let n of ei(e,t)){let{default:e}=await W(n.router);r.push({router:e,path:n.path})}}function eo(e){return V(async()=>{let{default:t}=await W(e);if(!G(t))throw Error(`
            Expected a lazy<procedure> but got lazy<unknown>.
            This should be caught by TypeScript compilation.
            Please report this issue if this makes you feel uncomfortable.
        `);return{default:t}},F(e))}function es(e,t){return new K({...e["~orpc"],errorMap:t["~orpc"].errorMap,route:t["~orpc"].route,meta:t["~orpc"].meta})}e.s(["P",()=>K,"a",()=>es,"b",()=>H,"c",()=>Q,"d",()=>B,"e",()=>function e(t,r){if(B(t)){let n=F(t),i=n?.prefix?N(r.prefix,n?.prefix):r.prefix;return function e(t){return new Proxy(t,{get:(r,n)=>"string"!=typeof n?Reflect.get(r,n):e(en(t,[n]))})}(V(async()=>{let{default:n}=await W(t);return W(e(n,r))},{...n,prefix:i}))}if(G(t)){var n,i;let e=(n=r.middlewares,i=t["~orpc"].middlewares,({dedupeLeading:r.dedupeLeadingMiddlewares}).dedupeLeading&&function(e,t){if(t.length>e.length)return!1;for(let r=0;r<e.length&&void 0!==t[r];r++)if(e[r]!==t[r])return!1;return!0}(i,n)?i:[...n,...i]),a=e.length-t["~orpc"].middlewares.length;return new K({...t["~orpc"],route:U(t["~orpc"].route,r),errorMap:$(r.errorMap,t["~orpc"].errorMap),middlewares:e,inputValidationIndex:t["~orpc"].inputValidationIndex+a,outputValidationIndex:t["~orpc"].outputValidationIndex+a})}let a={};for(let n in t)a[n]=e(t[n],r);return a},"f",()=>eo,"g",()=>en,"i",()=>G,"j",()=>F,"l",()=>V,"s",()=>er,"t",()=>ei,"u",()=>W,"v",()=>ea],14861),e.s(["toORPCError",()=>r.t],5348)},87349,e=>{"use strict";var t=e.i(14099),r=e.i(78932);e.i(79075);var n=e.i(14861);e.i(90732);var i=e.i(5348),a=e.i(22802);e.i(80895);let o={initialInputValidationIndex:0,initialOutputValidationIndex:0,dedupeLeadingMiddlewares:!0};function s(e,t){return void 0===t?o[e]:t}function l(e){let t=(...t)=>e(...t);return t.mapInput=t=>l((r,n,...i)=>e(r,t(n),...i)),t.concat=(t,r)=>{let n=r?l(t).mapInput(r):t;return l((t,r,i,...a)=>e({...t,next:(...[e])=>n({...t,context:{...t.context,...e?.context},next:(...[r])=>t.next({context:{...e?.context,...r?.context}})},r,i,...a)},r,i,...a))},t}class u extends n.P{errors(e){return new u({...this["~orpc"],errorMap:(0,r.mergeErrorMap)(this["~orpc"].errorMap,e)})}meta(e){return new u({...this["~orpc"],meta:(0,t.mergeMeta)(this["~orpc"].meta,e)})}route(e){return new u({...this["~orpc"],route:(0,t.mergeRoute)(this["~orpc"].route,e)})}use(e,t){let r=t?l(e).mapInput(t):e;return new u({...this["~orpc"],middlewares:(0,n.b)(this["~orpc"].middlewares,r)})}callable(...e){return new Proxy((0,n.c)(this,...e),{get:(e,t)=>Reflect.has(this,t)?Reflect.get(this,t):Reflect.get(e,t),has:(e,t)=>Reflect.has(this,t)||Reflect.has(e,t)})}actionable(...e){var t;return new Proxy((t=(0,n.c)(this,...e),async e=>{try{return[null,await t(e)]}catch(e){if(e instanceof Error&&"digest"in e&&"string"==typeof e.digest&&e.digest.startsWith("NEXT_")||e instanceof Response&&"options"in e&&(0,a.isObject)(e.options)||(0,a.isObject)(e)&&!0===e.isNotFound)throw e;return[(0,i.toORPCError)(e).toJSON(),void 0]}}),{get:(e,t)=>Reflect.has(this,t)?Reflect.get(this,t):Reflect.get(e,t),has:(e,t)=>Reflect.has(this,t)||Reflect.has(e,t)})}}class c{"~orpc";constructor(e){this["~orpc"]=e}$config(e){let t=this["~orpc"].inputValidationIndex-s("initialInputValidationIndex",this["~orpc"].config.initialInputValidationIndex),r=this["~orpc"].outputValidationIndex-s("initialOutputValidationIndex",this["~orpc"].config.initialOutputValidationIndex);return new c({...this["~orpc"],config:e,dedupeLeadingMiddlewares:s("dedupeLeadingMiddlewares",e.dedupeLeadingMiddlewares),inputValidationIndex:s("initialInputValidationIndex",e.initialInputValidationIndex)+t,outputValidationIndex:s("initialOutputValidationIndex",e.initialOutputValidationIndex)+r})}$context(){return new c({...this["~orpc"],middlewares:[],inputValidationIndex:s("initialInputValidationIndex",this["~orpc"].config.initialInputValidationIndex),outputValidationIndex:s("initialOutputValidationIndex",this["~orpc"].config.initialOutputValidationIndex)})}$meta(e){return new c({...this["~orpc"],meta:e})}$route(e){return new c({...this["~orpc"],route:e})}$input(e){return new c({...this["~orpc"],inputSchema:e})}middleware(e){return l(e)}errors(e){return new c({...this["~orpc"],errorMap:(0,r.mergeErrorMap)(this["~orpc"].errorMap,e)})}use(e,t){let r=t?l(e).mapInput(t):e;return new c({...this["~orpc"],middlewares:(0,n.b)(this["~orpc"].middlewares,r)})}meta(e){return new c({...this["~orpc"],meta:(0,t.mergeMeta)(this["~orpc"].meta,e)})}route(e){return new c({...this["~orpc"],route:(0,t.mergeRoute)(this["~orpc"].route,e)})}input(e){return new c({...this["~orpc"],inputSchema:e,inputValidationIndex:s("initialInputValidationIndex",this["~orpc"].config.initialInputValidationIndex)+this["~orpc"].middlewares.length})}output(e){return new c({...this["~orpc"],outputSchema:e,outputValidationIndex:s("initialOutputValidationIndex",this["~orpc"].config.initialOutputValidationIndex)+this["~orpc"].middlewares.length})}handler(e){return new u({...this["~orpc"],handler:e})}prefix(e){return new c({...this["~orpc"],prefix:(0,t.mergePrefix)(this["~orpc"].prefix,e)})}tag(...e){return new c({...this["~orpc"],tags:(0,t.mergeTags)(this["~orpc"].tags,e)})}router(e){return(0,n.e)(e,this["~orpc"])}lazy(e){return(0,n.e)((0,n.l)(e),this["~orpc"])}}let d=new c({config:{},route:{},meta:{},errorMap:{},inputValidationIndex:s("initialInputValidationIndex"),outputValidationIndex:s("initialOutputValidationIndex"),middlewares:[],dedupeLeadingMiddlewares:!0});e.s(["createRouterClient",()=>function e(t,...r){let i=(0,a.resolveMaybeOptionalOptions)(r);return(0,n.i)(t)?(0,n.c)(t,i):new Proxy((0,n.d)(t)?(0,n.c)((0,n.f)(t),i):{},{get(i,a){if("string"!=typeof a)return Reflect.get(i,a);let o=(0,n.g)(t,[a]);return o?e(o,{...r[0],path:[...r[0]?.path??[],a]}):Reflect.get(i,a)}})},"os",()=>d])},33107,e=>e.a(async(t,r)=>{try{e.s(["protectedProcedure",()=>c,"publicProcedure",()=>l]);var n=e.i(87349),i=e.i(33050),a=e.i(64950),o=t([a]);[a]=o.then?(await o)():o;let s=n.os.$context(),l=s,u=s.middleware(async({context:e,next:t})=>{if(!e.session?.user)throw new i.ORPCError("UNAUTHORIZED");return t({context:{session:e.session}})}),c=l.use(u);r()}catch(e){r(e)}},!1),61699,e=>e.a(async(t,r)=>{try{e.s(["todoRouter",()=>s]);var n=e.i(15405),i=e.i(89271),a=e.i(33107),o=t([n,a]);[n,a]=o.then?(await o)():o;let s={getAll:a.publicProcedure.handler(async()=>await n.default.todo.findMany({orderBy:{id:"asc"}})),create:a.publicProcedure.input(i.default.object({text:i.default.string().min(1)})).handler(async({input:e})=>await n.default.todo.create({data:{text:e.text}})),toggle:a.publicProcedure.input(i.default.object({id:i.default.number(),completed:i.default.boolean()})).handler(async({input:e})=>await n.default.todo.update({where:{id:e.id},data:{completed:e.completed}})),delete:a.publicProcedure.input(i.default.object({id:i.default.number()})).handler(async({input:e})=>await n.default.todo.delete({where:{id:e.id}}))};r()}catch(e){r(e)}},!1),64950,e=>e.a(async(t,r)=>{try{e.s(["appRouter",()=>o]);var n=e.i(33107),i=e.i(61699),a=t([n,i]);[n,i]=a.then?(await a)():a;let o={healthCheck:n.publicProcedure.handler(()=>"OK"),privateData:n.protectedProcedure.handler(({context:e})=>({message:"This is private",user:e.session?.user})),todo:i.todoRouter};r()}catch(e){r(e)}},!1),28461,98195,23780,50177,e=>{"use strict";var t=e.i(22802),r=e.i(80895);function n(e,t={}){return e.forEach((e,r)=>{Array.isArray(t[r])?t[r].push(e):void 0!==t[r]?t[r]=[t[r],e]:t[r]=e}),t}function i(e){return{url:new URL(e.url),signal:e.signal,method:e.method,body:(0,t.once)(()=>(function(e,n={}){return(0,t.runWithSpan)({name:"parse_standard_body",signal:n.signal},async()=>{let i=e.headers.get("content-disposition");if("string"==typeof i){let t=(0,r.getFilenameFromContentDisposition)(i)??"blob",n=await e.blob();return new File([n],t,{type:n.type})}let a=e.headers.get("content-type");if(!a||a.startsWith("application/json")){let r=await e.text();return(0,t.parseEmptyableJSON)(r)}if(a.startsWith("multipart/form-data"))return await e.formData();if(a.startsWith("application/x-www-form-urlencoded"))return new URLSearchParams(await e.text());if(a.startsWith("text/event-stream"))return function(e,n={}){let i,a=e?.pipeThrough(new TextDecoderStream).pipeThrough(new r.EventDecoderStream),o=a?.getReader(),s=!1;return new t.AsyncIteratorClass(async()=>{i??=(0,t.startSpan)("consume_event_iterator_stream");try{for(;;){if(void 0===o)return{done:!0,value:void 0};let{done:e,value:n}=await (0,t.runInSpanContext)(i,()=>o.read());if(e){if(s)throw new t.AbortError("Stream was cancelled");return{done:!0,value:void 0}}switch(n.event){case"message":{let e=(0,t.parseEmptyableJSON)(n.data);return(0,t.isTypescriptObject)(e)&&(e=(0,r.withEventMeta)(e,n)),i?.addEvent("message"),{done:!1,value:e}}case"error":{let e=new r.ErrorEvent({data:(0,t.parseEmptyableJSON)(n.data)});throw e=(0,r.withEventMeta)(e,n),i?.addEvent("error"),e}case"done":{let e=(0,t.parseEmptyableJSON)(n.data);return(0,t.isTypescriptObject)(e)&&(e=(0,r.withEventMeta)(e,n)),i?.addEvent("done"),{done:!0,value:e}}default:i?.addEvent("maybe_keepalive")}}}catch(e){throw e instanceof r.ErrorEvent||(0,t.setSpanError)(i,e,n),e}},async e=>{try{"next"!==e&&(s=!0,i?.addEvent("cancelled")),await (0,t.runInSpanContext)(i,()=>o?.cancel())}catch(e){throw(0,t.setSpanError)(i,e,n),e}finally{i?.end()}})}(e.body,n);if(a.startsWith("text/plain"))return await e.text();let o=await e.blob();return new File([o],"blob",{type:o.type})})})(e,{signal:e.signal})),get headers(){let t=n(e.headers);return Object.defineProperty(this,"headers",{value:t,writable:!0}),t},set headers(value){Object.defineProperty(this,"headers",{value,writable:!0})}}}function a(e,n={}){let i=function(e,t=new Headers){for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,e);else void 0!==n&&t.append(r,n);return t}(e.headers);return new Response(function(e,n,i={}){let a=n.get("content-disposition");if(n.delete("content-type"),n.delete("content-disposition"),void 0!==e)return e instanceof Blob?(n.set("content-type",e.type),n.set("content-length",e.size.toString()),n.set("content-disposition",a??(0,r.generateContentDisposition)(e instanceof File?e.name:"blob")),e):e instanceof FormData||e instanceof URLSearchParams?e:(0,t.isAsyncIteratorObject)(e)?(n.set("content-type","text/event-stream"),function(e,n={}){let i,a,o=n.eventIteratorKeepAliveEnabled??!0,s=n.eventIteratorKeepAliveInterval??5e3,l=n.eventIteratorKeepAliveComment??"",u=!1;return new ReadableStream({start(){a=(0,t.startSpan)("stream_event_iterator")},async pull(n){try{o&&(i=setInterval(()=>{n.enqueue((0,r.encodeEventMessage)({comments:[l]})),a?.addEvent("keepalive")},s));let c=await (0,t.runInSpanContext)(a,()=>e.next());if(clearInterval(i),u)return;let d=(0,r.getEventMeta)(c.value);if(!c.done||void 0!==c.value||void 0!==d){let e=c.done?"done":"message";n.enqueue((0,r.encodeEventMessage)({...d,event:e,data:(0,t.stringifyJSON)(c.value)})),a?.addEvent(e)}c.done&&(n.close(),a?.end())}catch(e){if(clearInterval(i),u)return;e instanceof r.ErrorEvent?(n.enqueue((0,r.encodeEventMessage)({...(0,r.getEventMeta)(e),event:"error",data:(0,t.stringifyJSON)(e.data)})),a?.addEvent("error"),n.close()):((0,t.setSpanError)(a,e),n.error(e)),a?.end()}},async cancel(){try{u=!0,clearInterval(i),a?.addEvent("cancelled"),await (0,t.runInSpanContext)(a,()=>e.return?.())}catch(e){throw(0,t.setSpanError)(a,e),e}finally{a?.end()}}}).pipeThrough(new TextEncoderStream)}(e,i)):(n.set("content-type","application/json"),(0,t.stringifyJSON)(e))}(e.body,i,n),{headers:i,status:e.status})}e.s(["toFetchResponse",()=>a,"toStandardHeaders",()=>n,"toStandardLazyRequest",()=>i],28461);var o=e.i(74441),s=e.i(61462);class l{plugins;constructor(e=[]){this.plugins=[...e].sort((e,t)=>(e.order??0)-(t.order??0))}init(e){for(let t of this.plugins)t.init?.(e)}}class u{constructor(e,r,n={}){this.codec=e,this.sender=r,new l(n.plugins).init(n),this.interceptors=(0,t.toArray)(n.interceptors),this.clientInterceptors=(0,t.toArray)(n.clientInterceptors)}interceptors;clientInterceptors;call(e,r,n){return(0,t.runWithSpan)({name:`${t.ORPC_NAME}.${e.join("/")}`,signal:n.signal},i=>(i?.setAttribute("rpc.system",t.ORPC_NAME),i?.setAttribute("rpc.method",e.join(".")),(0,t.isAsyncIteratorObject)(r)&&(r=(0,t.asyncIteratorWithSpan)({name:"consume_event_iterator_input",signal:n.signal},r)),(0,t.intercept)(this.interceptors,{...n,path:e,input:r},async({path:e,input:r,...n})=>{let a,o=(0,t.getGlobalOtelConfig)(),s=o?.trace.getActiveSpan()??i;s&&o&&(a=o?.trace.setSpan(o.context.active(),s));let l=await (0,t.runWithSpan)({name:"encode_request",context:a},()=>this.codec.encode(e,r,n)),u=await (0,t.intercept)(this.clientInterceptors,{...n,input:r,path:e,request:l},({input:e,path:r,request:n,...i})=>(0,t.runWithSpan)({name:"send_request",signal:i.signal,context:a},()=>this.sender.call(n,i,r,e))),c=await (0,t.runWithSpan)({name:"decode_response",context:a},()=>this.codec.decode(u,n,e,r));return(0,t.isAsyncIteratorObject)(c)?(0,t.asyncIteratorWithSpan)({name:"consume_event_iterator_output",signal:n.signal},c):c})))}}class c{customSerializers;constructor(e={}){if(this.customSerializers=e.customJsonSerializers??[],this.customSerializers.length!==new Set(this.customSerializers.map(e=>e.type)).size)throw Error("Custom serializer type must be unique.")}serialize(e,r=[],n=[],i=[],a=[]){for(let t of this.customSerializers)if(t.condition(e)){let o=this.serialize(t.serialize(e),r,n,i,a);return n.push([t.type,...r]),o}if(e instanceof Blob)return i.push(r),a.push(e),[e,n,i,a];if("bigint"==typeof e)return n.push([0,...r]),[e.toString(),n,i,a];if(e instanceof Date)return(n.push([1,...r]),Number.isNaN(e.getTime()))?[null,n,i,a]:[e.toISOString(),n,i,a];if(Number.isNaN(e))return n.push([2,...r]),[null,n,i,a];if(e instanceof URL)return n.push([4,...r]),[e.toString(),n,i,a];if(e instanceof RegExp)return n.push([5,...r]),[e.toString(),n,i,a];if(e instanceof Set){let t=this.serialize(Array.from(e),r,n,i,a);return n.push([6,...r]),t}if(e instanceof Map){let t=this.serialize(Array.from(e.entries()),r,n,i,a);return n.push([7,...r]),t}if(Array.isArray(e))return[e.map((e,t)=>void 0===e?(n.push([3,...r,t]),e):this.serialize(e,[...r,t],n,i,a)[0]),n,i,a];if((0,t.isObject)(e)){let t={};for(let o in e)("toJSON"!==o||"function"!=typeof e[o])&&(t[o]=this.serialize(e[o],[...r,o],n,i,a)[0]);return[t,n,i,a]}return[e,n,i,a]}deserialize(e,t,r,n){let i={data:e};for(let e of(r&&n&&r.forEach((e,t)=>{let r=i,a="data";e.forEach(e=>{r=r[a],a=e}),r[a]=n(t)}),t)){let t=e[0],r=i,n="data";for(let t=1;t<e.length;t++)r=r[n],n=e[t];for(let e of this.customSerializers)if(e.type===t){r[n]=e.deserialize(r[n]);break}switch(t){case 0:r[n]=BigInt(r[n]);break;case 1:r[n]=new Date(r[n]??"Invalid Date");break;case 2:r[n]=NaN;break;case 3:r[n]=void 0;break;case 4:r[n]=new URL(r[n]);break;case 5:{let[,e,t]=r[n].match(/^\/(.*)\/([a-z]*)$/);r[n]=new RegExp(e,t);break}case 6:r[n]=new Set(r[n]);break;case 7:r[n]=new Map(r[n])}}return i.data}}function d(e){return`/${e.map(encodeURIComponent).join("/")}`}function p(e){return"function"==typeof e.forEach?n(e):e}function f(e){return Object.entries(o.C).find(([,t])=>t.status===e)?.[0]??"MALFORMED_ORPC_ERROR_RESPONSE"}class m{constructor(e){this.jsonSerializer=e}serialize(e){return(0,t.isAsyncIteratorObject)(e)?(0,s.m)(e,{value:async e=>this.#eI(e,!1),error:async e=>new r.ErrorEvent({data:this.#eI((0,o.t)(e).toJSON(),!1),cause:e})}):this.#eI(e,!0)}#eI(e,r){let[n,i,a,o]=this.jsonSerializer.serialize(e),s=0===i.length?void 0:i;if(!r||0===o.length)return{json:n,meta:s};let l=new FormData;return l.set("data",(0,t.stringifyJSON)({json:n,meta:s,maps:a})),o.forEach((e,t)=>{l.set(t.toString(),e)}),l}deserialize(e){return(0,t.isAsyncIteratorObject)(e)?(0,s.m)(e,{value:async e=>this.#eS(e),error:async e=>{if(!(e instanceof r.ErrorEvent))return e;let t=this.#eS(e.data);return(0,o.e)(t)?(0,o.g)(t,{cause:e}):new r.ErrorEvent({data:t,cause:e})}}):this.#eS(e)}#eS(e){if(void 0===e)return;if(!(e instanceof FormData))return this.jsonSerializer.deserialize(e.json,e.meta??[]);let t=JSON.parse(e.get("data"));return this.jsonSerializer.deserialize(t.json,t.meta??[],t.maps,t=>e.get(t.toString()))}}e.s(["S",()=>u,"b",()=>c,"e",()=>m,"f",()=>p,"g",()=>f,"t",()=>d],98195),e.s([],23780),e.s(["toHttpPath",()=>d],50177)},38090,59778,85836,e=>{"use strict";e.i(90732);var t=e.i(33050),r=e.i(22802),n=e.i(28461);function i(e){return{...e,context:e.context??{}}}e.s(["r",()=>i],59778);var a=e.i(80895),o=e.i(14099);e.i(23780);var s=e.i(50177),l=e.i(98195),l=l,u=l,c=e.i(5348),d=e.i(14861);class p{plugins;constructor(e=[]){this.plugins=[...e].sort((e,t)=>(e.order??0)-(t.order??0))}init(e,t){for(let r of this.plugins)r.init?.(e,t)}}class f{constructor(e,t,n,i){this.matcher=t,this.codec=n,new p(i.plugins).init(i,e),this.interceptors=(0,r.toArray)(i.interceptors),this.clientInterceptors=(0,r.toArray)(i.clientInterceptors),this.rootInterceptors=(0,r.toArray)(i.rootInterceptors),this.matcher.init(e)}interceptors;clientInterceptors;rootInterceptors;async handle(e,n){let i=n.prefix?.replace(/\/$/,"")||void 0;return i&&!e.url.pathname.startsWith(`${i}/`)&&e.url.pathname!==i?{matched:!1,response:void 0}:(0,r.intercept)(this.rootInterceptors,{...n,request:e,prefix:i},async n=>(0,r.runWithSpan)({name:`${e.method} ${e.url.pathname}`},async e=>{let i;try{return await (0,r.intercept)(this.interceptors,n,async({request:t,context:n,prefix:o})=>{let s=t.method,l=t.url,u=o?l.pathname.replace(o,""):l.pathname,c=await (0,r.runWithSpan)({name:"find_procedure"},()=>this.matcher.match(s,`/${u.replace(/^\/|\/$/g,"")}`));if(!c)return{matched:!1,response:void 0};e?.updateName(`${r.ORPC_NAME}.${c.path.join("/")}`),e?.setAttribute("rpc.system",r.ORPC_NAME),e?.setAttribute("rpc.method",c.path.join(".")),i="decode_input";let p=await (0,r.runWithSpan)({name:"decode_input"},()=>this.codec.decode(t,c.params,c.procedure));i=void 0,(0,r.isAsyncIteratorObject)(p)&&(p=(0,r.asyncIteratorWithSpan)({name:"consume_event_iterator_input",signal:t.signal},p));let f=(0,d.c)(c.procedure,{context:n,path:c.path,interceptors:this.clientInterceptors});i="call_procedure";let m=await f(p,{signal:t.signal,lastEventId:(0,a.flattenHeader)(t.headers["last-event-id"])});i=void 0;let h=this.codec.encode(m,c.procedure);return{matched:!0,response:h}})}catch(a){"call_procedure"!==i&&(0,r.setSpanError)(e,a);let n="decode_input"!==i||a instanceof t.ORPCError?(0,c.toORPCError)(a):new t.ORPCError("BAD_REQUEST",{message:"Malformed request. Ensure the request body is properly formatted and the 'Content-Type' header is set correctly.",cause:a});return{matched:!0,response:this.codec.encodeError(n)}}}))}}class m{constructor(e){this.serializer=e}async decode(e,t,n){let i="GET"===e.method?(0,r.parseEmptyableJSON)(e.url.searchParams.getAll("data").at(-1)):await e.body();return this.serializer.deserialize(i)}encode(e,t){return{status:200,headers:{},body:this.serializer.serialize(e)}}encodeError(e){return{status:e.status,headers:{},body:this.serializer.serialize(e.toJSON())}}}class h{filter;tree=new r.NullProtoObj;pendingRouters=[];constructor(e={}){this.filter=e.filter??!0}init(e,t=[]){let n=(0,d.t)({router:e,path:t},t=>{if(!(0,r.value)(this.filter,t))return;let{path:n,contract:i}=t,a=(0,s.toHttpPath)(n);(0,d.i)(i)?this.tree[a]={path:n,contract:i,procedure:i,router:e}:this.tree[a]={path:n,contract:i,procedure:void 0,router:e}});this.pendingRouters.push(...n.map(e=>({...e,httpPathPrefix:(0,s.toHttpPath)(e.path)})))}async match(e,t){if(this.pendingRouters.length){let e=[];for(let r of this.pendingRouters)if(t.startsWith(r.httpPathPrefix)){let{default:e}=await (0,d.u)(r.router);this.init(e,r.path)}else e.push(r);this.pendingRouters=e}let r=this.tree[t];if(r){if(!r.procedure){let{default:e}=await (0,d.u)((0,d.g)(r.router,r.path));if(!(0,d.i)(e))throw Error(`
          [Contract-First] Missing or invalid implementation for procedure at path: ${(0,s.toHttpPath)(r.path)}.
          Ensure that the procedure is correctly defined and matches the expected contract.
        `);r.procedure=(0,d.a)(e,r.contract)}return{path:r.path,procedure:r.procedure}}}}class g extends f{constructor(e,t={}){const r=new l.b(t),n=new u.e(r);super(e,new h(t),new m(n),t)}}e.s(["C",()=>p,"S",()=>f,"b",()=>g],85836);let y=Symbol("STRICT_GET_METHOD_PLUGIN_IS_GET_METHOD_CONTEXT");class v{error;order=7e6;constructor(e={}){this.error=e.error??new t.ORPCError("METHOD_NOT_SUPPORTED")}init(e){e.rootInterceptors??=[],e.clientInterceptors??=[],e.rootInterceptors.unshift(e=>{let t="GET"===e.request.method;return e.next({...e,context:{...e.context,[y]:t}})}),e.clientInterceptors.unshift(e=>{if("boolean"!=typeof e.context[y])throw TypeError("[StrictGetMethodPlugin] strict GET method context has been corrupted or modified by another plugin or interceptor");let t=(0,o.fallbackContractConfig)("defaultMethod",e.procedure["~orpc"].route.method);if(e.context[y]&&"GET"!==t)throw this.error;return e.next()})}}class b extends p{initRuntimeAdapter(e){for(let t of this.plugins)t.initRuntimeAdapter?.(e)}}class w{constructor(e,t={}){this.standardHandler=e,new b(t.plugins).initRuntimeAdapter(t),this.adapterInterceptors=(0,r.toArray)(t.adapterInterceptors),this.toFetchResponseOptions=t}toFetchResponseOptions;adapterInterceptors;async handle(e,...t){return(0,r.intercept)(this.adapterInterceptors,{...i((0,r.resolveMaybeOptionalOptions)(t)),request:e,toFetchResponseOptions:this.toFetchResponseOptions},async({request:e,toFetchResponseOptions:t,...r})=>{let i=(0,n.toStandardLazyRequest)(e),a=await this.standardHandler.handle(i,r);return a.matched?{matched:!0,response:(0,n.toFetchResponse)(a.response,t)}:a})}}class _ extends w{constructor(e,t={}){(t.strictGetMethodPluginEnabled??!0)&&(t.plugins??=[],t.plugins.push(new v)),super(new g(e,t),t)}}e.s(["FetchHandler",()=>w,"RPCHandler",()=>_],38090)},78758,29052,e=>{"use strict";var t=e.i(819);e.s(["StandardBracketNotationSerializer",()=>t.S],78758);var r=e.i(12420);e.s(["StandardOpenAPISerializer",()=>r.c],29052)},19018,819,15664,12420,85767,4862,68433,e=>{"use strict";var t=e.i(22802);class r{maxArrayIndex;constructor(e={}){this.maxArrayIndex=e.maxBracketNotationArrayIndex??9999}serialize(e,r=[],n=[]){if(Array.isArray(e))e.forEach((e,t)=>{this.serialize(e,[...r,t],n)});else if((0,t.isObject)(e))for(let t in e)this.serialize(e[t],[...r,t],n);else n.push([this.stringifyPath(r),e]);return n}deserialize(e){if(0===e.length)return{};let r=new WeakSet,o={value:[]};for(let[s,l]of e){let e=this.parsePath(s),u=o,c="value";e.forEach((o,s)=>{Array.isArray(u[c])||(0,t.isObject)(u[c])||(u[c]=[]),s!==e.length-1?Array.isArray(u[c])&&!n(o,this.maxArrayIndex)&&(r.has(u[c])?(r.delete(u[c]),u[c]=a(u[c])):u[c]=i(u[c])):Array.isArray(u[c])&&(""===o?u[c].length&&!r.has(u[c])&&(u[c]=i(u[c])):r.has(u[c])?(r.delete(u[c]),u[c]=a(u[c])):n(o,this.maxArrayIndex)||(u[c]=i(u[c]))),u=u[c],c=o}),Array.isArray(u)&&""===c?(r.add(u),u.push(l)):c in u?Array.isArray(u[c])?u[c].push(l):u[c]=[u[c],l]:u[c]=l}return o.value}stringifyPath(e){return e.map(e=>e.toString().replace(/[\\[\]]/g,e=>{switch(e){case"\\":return"\\\\";case"[":return"\\[";case"]":return"\\]";default:return e}})).reduce((e,t,r)=>0===r?t:`${e}[${t}]`,"")}parsePath(e){let t=[],r=!1,n="",i=0;for(let a=0;a<e.length;a++){let o=e[a],s=e[a+1];r&&"]"===o&&(void 0===s||"["===s)&&i%2==0?(void 0===s&&(r=!1),t.push(n),n="",a++):0===t.length&&"["===o&&i%2==0?(r=!0,t.push(n),n=""):"\\"===o?i++:(n+="\\".repeat(i/2)+o,i=0)}return r||0===t.length?[e]:t}}function n(e,t){return/^0$|^[1-9]\d*$/.test(e)&&Number(e)<=t}function i(e){let r=new t.NullProtoObj;return e.forEach((e,t)=>{r[t]=e}),r}function a(e){let r=new t.NullProtoObj;return r[""]=1===e.length?e[0]:e,r}e.s(["S",()=>r],819);e.i(14099);e.i(23780);var o=e.i(98195),o=o,s=e.i(50177),l=o;e.i(90732);var u=e.i(41384),c=e.i(74441),c=c,d=c;e.s(["createORPCErrorFromJson",()=>d.g],15664);var d=c,p=e.i(62372),f=e.i(5348),m=e.i(79075),h=e.i(33050),g=e.i(80895);class y{customSerializers;constructor(e={}){this.customSerializers=e.customJsonSerializers??[]}serialize(e,r={value:!1}){for(let t of this.customSerializers)if(t.condition(e))return this.serialize(t.serialize(e),r);if(e instanceof Blob)return r.value=!0,[e,r.value];if(e instanceof Set)return this.serialize(Array.from(e),r);if(e instanceof Map)return this.serialize(Array.from(e.entries()),r);if(Array.isArray(e))return[e.map(e=>void 0===e?null:this.serialize(e,r)[0]),r.value];if((0,t.isObject)(e)){let t={};for(let n in e)("toJSON"!==n||"function"!=typeof e[n])&&(t[n]=this.serialize(e[n],r)[0]);return[t,r.value]}return"bigint"==typeof e||e instanceof RegExp||e instanceof URL?[e.toString(),r.value]:e instanceof Date?[Number.isNaN(e.getTime())?null:e.toISOString(),r.value]:Number.isNaN(e)?[null,r.value]:[e,r.value]}}function v(e){return`/${e.replace(/\/{2,}/g,"/").replace(/^\/|\/$/g,"")}`}function b(e){return e?v(e).match(/\/\{[^}]+\}/g)?.map(e=>({raw:e,name:e.match(/\{\+?([^}]+)\}/)[1]})):void 0}class w{constructor(e,t){this.jsonSerializer=e,this.bracketNotation=t}serialize(e,r={}){return(0,t.isAsyncIteratorObject)(e)&&!r.outputFormat?(0,p.mapEventIterator)(e,{value:async e=>this.#eI(e,{outputFormat:"plain"}),error:async e=>new g.ErrorEvent({data:this.#eI((0,f.toORPCError)(e).toJSON(),{outputFormat:"plain"}),cause:e})}):this.#eI(e,r)}#eI(e,t){let[r,n]=this.jsonSerializer.serialize(e);if("plain"===t.outputFormat)return r;if("URLSearchParams"===t.outputFormat){let e=new URLSearchParams;for(let[t,n]of this.bracketNotation.serialize(r))("string"==typeof n||"number"==typeof n||"boolean"==typeof n)&&e.append(t,n.toString());return e}if(r instanceof Blob||void 0===r||!n)return r;let i=new FormData;for(let[e,t]of this.bracketNotation.serialize(r))"string"==typeof t||"number"==typeof t||"boolean"==typeof t?i.append(e,t.toString()):t instanceof Blob&&i.append(e,t);return i}deserialize(e){return e instanceof URLSearchParams||e instanceof FormData?this.bracketNotation.deserialize(Array.from(e.entries())):(0,t.isAsyncIteratorObject)(e)?(0,p.mapEventIterator)(e,{value:async e=>e,error:async e=>e instanceof g.ErrorEvent&&(0,c.e)(e.data)?(0,d.g)(e.data,{cause:e}):e}):e}}l.S,e.s(["S",()=>y,"c",()=>w,"g",()=>b,"s",()=>v],12420),e.s([],19018),e.s(["standardizeHTTPPath",()=>v],85767),e.s(["StandardOpenAPIJsonSerializer",()=>y],4862);var _=e.i(14861);e.s(["isProcedure",()=>_.i],68433)},70747,e=>{"use strict";let t;var r=e.i(38090);e.i(90732);var n=e.i(14099),i=e.i(22802);e.i(19018);var a=e.i(85767),o=e.i(4862),s=e.i(78758),l=e.i(29052),u=e.i(85836);e.i(59778),e.i(23780),e.i(80895);var c=e.i(14861),d=u,p=e.i(41384),f=e.i(50177);e.i(87349);var m=e.i(68433);let h=((t=function(){}).prototype=Object.create(null),Object.freeze(t.prototype),t);function g(e){let[t,...r]=e.split("/");return""===r[r.length-1]?r.slice(0,-1):r}function y(e,t="",r,n){t=t.toUpperCase(),47!==r.charCodeAt(0)&&(r=`/${r}`);let i=g(r),a=e.root,o=0,s=[],l=[];for(let e=0;e<i.length;e++){let t=i[e];if(t.startsWith("**")){a.wildcard||(a.wildcard={key:"**"}),a=a.wildcard,s.push([-e,t.split(":")[1]||"_",2===t.length]);break}if("*"===t||t.includes(":")){if(a.param||(a.param={key:"*"}),a=a.param,"*"===t)s.push([e,`_${o++}`,!0]);else if(t.includes(":",1)){let r=function(e){let t=e.replace(/:(\w+)/g,(e,t)=>`(?<${t}>[^/]+)`).replace(/\./g,"\\.");return RegExp(`^${t}$`)}(t);l[e]=r,a.hasRegexParam=!0,s.push([e,r,!1])}else s.push([e,t.slice(1),!1]);continue}let r=a.static?.[t];if(r)a=r;else{let e={key:t};a.static||(a.static=new h),a.static[t]=e,a=e}}let u=s.length>0;a.methods||(a.methods=new h),a.methods[t]??=[],a.methods[t].push({data:n||null,paramsRegexp:l,paramsMap:u?s:void 0}),u||(e.static[r]=a)}class v{constructor(e,t={}){this.serializer=e,this.customErrorResponseBodyEncoder=t.customErrorResponseBodyEncoder}customErrorResponseBodyEncoder;async decode(e,t,r){if("compact"===(0,n.fallbackContractConfig)("defaultInputStructure",r["~orpc"].route.inputStructure)){let r="GET"===e.method?this.serializer.deserialize(e.url.searchParams):this.serializer.deserialize(await e.body());return void 0===r?t:(0,i.isObject)(r)?{...t,...r}:r}let a=()=>this.serializer.deserialize(e.url.searchParams);return{params:t,get query(){let e=a();return Object.defineProperty(this,"query",{value:e,writable:!0}),e},set query(value){Object.defineProperty(this,"query",{value,writable:!0})},headers:e.headers,body:this.serializer.deserialize(await e.body())}}encode(e,t){let r=(0,n.fallbackContractConfig)("defaultSuccessStatus",t["~orpc"].route.successStatus);if("compact"===(0,n.fallbackContractConfig)("defaultOutputStructure",t["~orpc"].route.outputStructure))return{status:r,headers:{},body:this.serializer.serialize(e)};if(!this.#e$(e))throw Error(`
        Invalid "detailed" output structure:
        \u2022 Expected an object with optional properties:
          - status (number 200-399)
          - headers (Record<string, string | string[]>)
          - body (any)
        \u2022 No extra keys allowed.

        Actual value:
          ${(0,i.stringifyJSON)(e)}
      `);return{status:e.status??r,headers:e.headers??{},body:this.serializer.serialize(e.body)}}encodeError(e){let t=this.customErrorResponseBodyEncoder?.(e)??e.toJSON();return{status:e.status,headers:{},body:this.serializer.serialize(t,{outputFormat:"plain"})}}#e$(e){return!(!(0,i.isObject)(e)||e.headers&&!(0,i.isObject)(e.headers)||void 0!==e.status&&("number"!=typeof e.status||!Number.isInteger(e.status)||(0,p.isORPCErrorStatus)(e.status)))}}class b{filter;tree={root:{key:""},static:new h};pendingRouters=[];constructor(e={}){this.filter=e.filter??!0}init(e,t=[]){let r=(0,c.t)({router:e,path:t},t=>{var r;if(!(0,i.value)(this.filter,t))return;let{path:o,contract:s}=t,l=(0,n.fallbackContractConfig)("defaultMethod",s["~orpc"].route.method),u=(r=s["~orpc"].route.path??(0,f.toHttpPath)(o),(0,a.standardizeHTTPPath)(r).replace(/\/\{\+([^}]+)\}/g,"/**:$1").replace(/\/\{([^}]+)\}/g,"/:$1"));(0,m.isProcedure)(s)?y(this.tree,l,u,{path:o,contract:s,procedure:s,router:e}):y(this.tree,l,u,{path:o,contract:s,procedure:void 0,router:e})});this.pendingRouters.push(...r.map(e=>({...e,httpPathPrefix:(0,f.toHttpPath)(e.path),laziedPrefix:(0,c.j)(e.router).prefix})))}async match(e,t){if(this.pendingRouters.length){let e=[];for(let r of this.pendingRouters)if(!r.laziedPrefix||t.startsWith(r.laziedPrefix)||t.startsWith(r.httpPathPrefix)){let{default:e}=await (0,c.u)(r.router);this.init(e,r.path)}else e.push(r);this.pendingRouters=e}let r=function(e,t="",r,n){47===r.charCodeAt(r.length-1)&&(r=r.slice(0,-1));let i=e.static[r];if(i&&i.methods){let e=i.methods[t]||i.methods[""];if(void 0!==e)return e[0]}let a=g(r),o=function e(t,r,n,i,a){if(a===i.length){if(r.methods){let e=r.methods[n]||r.methods[""];if(e)return e}if(r.param&&r.param.methods){let e=r.param.methods[n]||r.param.methods[""];if(e){let t=e[0].paramsMap;if(t?.[t?.length-1]?.[2])return e}}if(r.wildcard&&r.wildcard.methods){let e=r.wildcard.methods[n]||r.wildcard.methods[""];if(e){let t=e[0].paramsMap;if(t?.[t?.length-1]?.[2])return e}}return}let o=i[a];if(r.static){let s=r.static[o];if(s){let r=e(t,s,n,i,a+1);if(r)return r}}if(r.param){let s=e(t,r.param,n,i,a+1);if(s){if(r.param.hasRegexParam){let e=s.find(e=>e.paramsRegexp[a]?.test(o))||s.find(e=>!e.paramsRegexp[a]);return e?[e]:void 0}return s}}if(r.wildcard&&r.wildcard.methods)return r.wildcard.methods[n]||r.wildcard.methods[""]}(e,e.root,t,a,0)?.[0];if(void 0!==o)return{data:o.data,params:o.paramsMap?function(e,t){let r=new h;for(let[n,i]of t){let t=n<0?e.slice(-1*n).join("/"):e[n];if("string"==typeof i)r[i]=t;else{let e=t.match(i);if(e)for(let t in e.groups)r[t]=e.groups[t]}}return r}(a,o.paramsMap):void 0}}(this.tree,e,t);if(r){if(!r.data.procedure){let{default:e}=await (0,c.u)((0,c.g)(r.data.router,r.data.path));if(!(0,m.isProcedure)(e))throw Error(`
          [Contract-First] Missing or invalid implementation for procedure at path: ${(0,f.toHttpPath)(r.data.path)}.
          Ensure that the procedure is correctly defined and matches the expected contract.
        `);r.data.procedure=(0,c.a)(e,r.data.contract)}return{path:r.data.path,procedure:r.data.procedure,params:r.params?Object.fromEntries(Object.entries(r.params).map(([e,t])=>[e,(0,i.tryDecodeURIComponent)(t)])):void 0}}}}class w extends d.S{constructor(e,t){const r=new o.StandardOpenAPIJsonSerializer(t),n=new s.StandardBracketNotationSerializer(t),i=new l.StandardOpenAPISerializer(r,n);super(e,new b(t),new v(i,t),t)}}class _ extends r.FetchHandler{constructor(e,t={}){super(new w(e,t),t)}}e.s(["OpenAPIHandler",()=>_],70747)},70092,2144,60357,e=>{"use strict";e.i(90732);var t,r,n,i,a,o,s=e.i(41384),l=e.i(21156),u=e.i(74441),u=u;e.i(23780);var c=e.i(50177),d=e.i(14099);e.i(19018);var p=e.i(85767),f=e.i(4862),m=e.i(12420),m=m;e.i(87349);var h=e.i(68433),g=e.i(14861),g=g,y=e.i(22802);(t=i||(i={}))["7bit"]="7bit",t["8bit"]="8bit",t.Base64="base64",t.Binary="binary",t.IETFToken="ietf-token",t.QuotedPrintable="quoted-printable",t.XToken="x-token",(r=a||(a={})).Date="date",r.DateTime="date-time",r.Duration="duration",r.Email="email",r.Hostname="hostname",r.IDNEmail="idn-email",r.IDNHostname="idn-hostname",r.IPv4="ipv4",r.IPv6="ipv6",r.IRI="iri",r.IRIReference="iri-reference",r.JSONPointer="json-pointer",r.JSONPointerURIFragment="json-pointer-uri-fragment",r.RegEx="regex",r.RelativeJSONPointer="relative-json-pointer",r.Time="time",r.URI="uri",r.URIReference="uri-reference",r.URITemplate="uri-template",r.UUID="uuid",(n=o||(o={})).Array="array",n.Boolean="boolean",n.Integer="integer",n.Null="null",n.Number="number",n.Object="object",n.String="string",e.s(["ContentEncoding",()=>i,"Format",()=>a,"TypeName",()=>o],2144),e.s([],60357);let v=Symbol("ORPC_OPERATION_EXTENDER");function b(e,t){return new Proxy(e,{get:(e,r,n)=>r===v?t:Reflect.get(e,r,n)})}let w=["$dynamicRef","$ref","additionalItems","additionalProperties","allOf","anyOf","const","contains","contentEncoding","contentMediaType","contentSchema","dependencies","dependentRequired","dependentSchemas","else","enum","exclusiveMaximum","exclusiveMinimum","format","if","items","maxContains","maximum","maxItems","maxLength","maxProperties","minContains","minimum","minItems","minLength","minProperties","multipleOf","not","oneOf","pattern","patternProperties","prefixItems","properties","propertyNames","required","then","type","unevaluatedItems","unevaluatedProperties","uniqueItems"];function _(e){return(0,y.isObject)(e)&&"string"===e.type&&"string"==typeof e.contentMediaType}function x(e){return(0,y.isObject)(e)&&"object"===e.type}function E(e,t){return e?t:{anyOf:[t,{not:{}}]}}function I(e){if("object"==typeof e){for(let t of["anyOf","oneOf"])if(e[t]&&Object.keys(e).every(e=>e===t||!w.includes(e)))return e[t].flatMap(e=>I(e))}return[e]}let S=new Set([o.String,o.Number,o.Integer,o.Boolean,o.Null]);function $(e){return I(e).every(e=>"boolean"!=typeof e&&(!!("string"==typeof e.type&&S.has(e.type))||void 0!==e.const))}function k(e){let t={},[r,n]=function e(t,r,n=[]){if(r(t))return n.push(t),[n,void 0];if((0,y.isObject)(t)){for(let i of["anyOf","oneOf"])if(t[i]&&Object.keys(t).every(e=>e===i||!w.includes(e))){let a=t[i].map(t=>e(t,r,n)[1]).filter(e=>!!e);if(1===a.length&&"object"==typeof a[0])return[n,{...t,[i]:void 0,...a[0]}];return[n,{...t,[i]:a}]}}return[n,t]}(e,_);for(let e of r)t[e.contentMediaType]={schema:R(e)};return void 0!==n&&(t["application/json"]={schema:R(n)},(0,y.findDeepMatches)(e=>(0,y.isObject)(e)&&_(e),n).values.length>0&&(t["multipart/form-data"]={schema:R(n)})),t}function A([e,t],[r,n]){return{"text/event-stream":{schema:R({oneOf:[{type:"object",properties:{event:{const:"message"},data:t,id:{type:"string"},retry:{type:"number"}},required:e?["event","data"]:["event"]},{type:"object",properties:{event:{const:"done"},data:n,id:{type:"string"},retry:{type:"number"}},required:r?["event","data"]:["event"]},{type:"object",properties:{event:{const:"error"},data:{},id:{type:"string"},retry:{type:"number"}},required:["event"]}]})}}}function T(e,t){let r=[];for(let n in e.properties){let i=e.properties[n],a=!0;if("query"!==t)a=!1;else if($(i))a=!1;else{let[e]=function(e){let t=I(e);if(2!==t.length)return;let r=t.find(e=>"object"==typeof e&&"array"===e.type&&Object.keys(e).filter(e=>w.includes(e)).every(e=>"type"===e||"items"===e));if(void 0===r)return;let n=r.items,i=t.find(e=>e!==r);if((0,y.stringifyJSON)(n)===(0,y.stringifyJSON)(i))return[i,r]}(i)??[];void 0!==e&&$(e)&&(a=!1)}r.push({name:n,in:t,required:e.required?.includes(n),schema:R(i),style:a?"deepObject":void 0,explode:!!a||void 0,allowEmptyValue:"query"===t||void 0,allowReserved:"query"===t||void 0})}return r}function O(e,t){let r=Object.keys(e.properties??{}),n=e.required??[];return!(r.length!==t.length||r.some(e=>!t.includes(e))||n.length!==t.length||n.some(e=>!t.includes(e)))}function R(e){return!0===e?{}:!1===e?{not:{}}:e}let N="#/components/schemas/";function P(e,t){if("object"!=typeof t||!t.$ref?.startsWith(N))return t;let r=t.$ref.slice(N.length);return e.components?.schemas?.[r]??t}function U(e,t){if(t&&(e=P(t,e)),"object"!=typeof e||!e.anyOf&&!e.oneOf&&!e.allOf)return e;let r=[...(0,y.toArray)(e.anyOf?.map(e=>U(e,t))),...(0,y.toArray)(e.oneOf?.map(e=>U(e,t)))],n=[];for(let t of r){if(!x(t))return e;n.push(t)}let i=new Map;for(let e of n)if(e.properties)for(let[t,r]of Object.entries(e.properties)){let e=i.get(t);e||(e={required:n.every(e=>e.required?.includes(t)),schemas:[]},i.set(t,e)),e.schemas.push(r)}let a=(0,y.toArray)(e.allOf?.map(e=>U(e,t))),o=[];for(let t of a){if(!x(t))return e;o.push(t)}x(e)&&o.push(e);let s=new Map;for(let e of o)if(e.properties)for(let[t,r]of Object.entries(e.properties)){let e=s.get(t);e||(e={required:o.some(e=>e.required?.includes(t)),schemas:[]},s.set(t,e)),e.schemas.push(r)}let l={type:"object",properties:{},required:[]},u=new Set([...i.keys(),...s.keys()]);if(0===u.size)return e;let c=e=>{let t=new Set,r=[];for(let n of e){let e=(0,y.stringifyJSON)(n);t.has(e)||(t.add(e),r.push(n))}return r};for(let e of u){let t=i.get(e),r=s.get(e);l.properties[e]=(()=>{let e=t?c(t.schemas):[],n=r?c(r.schemas):[];if(!e.length)return 1===n.length?n[0]:{allOf:n};if(!n.length)return 1===e.length?e[0]:{anyOf:e};let i=c([...n,1===e.length?e[0]:{anyOf:e}]);return 1===i.length?i[0]:{allOf:i}})(),(t?.required||r?.required)&&l.required.push(e)}return l}class D{converters;constructor(e){this.converters=e}async convert(e,t){for(let r of this.converters)if(await r.condition(e,t))return r.convert(e,t);return[!1,{}]}}class C extends Error{}class j{serializer;converter;constructor(e={}){this.serializer=new f.StandardOpenAPIJsonSerializer(e),this.converter=new D((0,y.toArray)(e.schemaConverters))}async generate(e,{customErrorResponseBodySchema:t,commonSchemas:r,filter:n,exclude:i,...a}={}){let o=n??(({contract:e,path:t})=>!i?.(e,t)),s={...(0,y.clone)(a),info:a.info??{title:"API Reference",version:"0.0.0"},openapi:"3.1.1"},{baseSchemaConvertOptions:l,undefinedErrorJsonSchema:u}=await this.#ek(s,r),f=[];await (0,g.v)({path:[],router:e},e=>{(0,y.value)(o,e)&&f.push(e)});let m=[];for(let{contract:e,path:r}of f){let n=r.join(".");try{var b;let i,a=e["~orpc"],o=(0,d.fallbackContractConfig)("defaultMethod",a.route.method).toLocaleLowerCase(),f=(b=a.route.path??(0,c.toHttpPath)(r),(0,p.standardizeHTTPPath)(b).replace(/\/\{\+([^}]+)\}/g,"/{$1}"));void 0!==a.route.spec&&"function"!=typeof a.route.spec?i=a.route.spec:(i={operationId:a.route.operationId??n,summary:a.route.summary,description:a.route.description,deprecated:a.route.deprecated,tags:a.route.tags?.map(e=>e)},await this.#Z(s,i,a,l),await this.#eA(s,i,a,l),await this.#eT(i,a,l,u,t)),"function"==typeof a.route.spec&&(i=a.route.spec(i)),s.paths??={},s.paths[f]??={},s.paths[f][o]=function(e,t){let r=[];for(let e of Object.values(t["~orpc"].errorMap)){let t=e?e[v]:void 0;t&&r.push(t)}if((0,h.isProcedure)(t))for(let e of t["~orpc"].middlewares){let t=e[v];t&&r.push(t)}let n=e;for(let e of r)n="function"==typeof e?e(n,t):{...n,...e};return n}(i,e)}catch(e){if(!(e instanceof C))throw e;m.push(`[OpenAPIGenerator] Error occurred while generating OpenAPI for procedure at path: ${n}
${e.message}`)}}if(m.length)throw new C(`Some error occurred during OpenAPI generation:

${m.join("\n\n")}`);return this.serializer.serialize(s)[0]}async #ek(e,t){let r={type:"object",properties:{defined:{const:!1},code:{type:"string"},status:{type:"number"},message:{type:"string"},data:{}},required:["defined","code","status","message"]},n={};if(t){for(let e in n.components=[],t){let r=t[e];if(void 0===r.schema)continue;let{schema:i,strategy:a="input"}=r,[o,s]=await this.converter.convert(i,{strategy:a}),l=[a];if("input"===a){let[e,t]=await this.converter.convert(i,{strategy:"output"});e===o&&(0,y.stringifyJSON)(t)===(0,y.stringifyJSON)(s)&&l.push("output")}else if("output"===a){let[e,t]=await this.converter.convert(i,{strategy:"input"});e===o&&(0,y.stringifyJSON)(t)===(0,y.stringifyJSON)(s)&&l.push("input")}n.components.push({schema:i,required:o,ref:`#/components/schemas/${e}`,allowedStrategies:l})}for(let i in e.components??={},e.components.schemas??={},t){let a=t[i];if(void 0===a.schema){"UndefinedError"===a.error&&(e.components.schemas[i]=R(r),r={$ref:`#/components/schemas/${i}`});continue}let{schema:o,strategy:s="input"}=a,[,l]=await this.converter.convert(o,{...n,strategy:s,minStructureDepthForRef:1});e.components.schemas[i]=R(l)}}return{baseSchemaConvertOptions:n,undefinedErrorJsonSchema:r}}async #Z(e,t,r,n){var i;let a=(0,d.fallbackContractConfig)("defaultMethod",r.route.method),o=(0,d.getEventIteratorSchemaDetails)(r.inputSchema);if(o){t.requestBody={required:!0,content:A(await this.converter.convert(o.yields,{...n,strategy:"input"}),await this.converter.convert(o.returns,{...n,strategy:"input"}))};return}let s=(0,m.g)(r.route.path)?.map(e=>e.name),l=(0,d.fallbackContractConfig)("defaultInputStructure",r.route.inputStructure),[u,c]=await this.converter.convert(r.inputSchema,{...n,strategy:"input"});if((!0===(i=c)||Object.keys(i).every(e=>!w.includes(e)))&&!s?.length)return;if(("detailed"===l||"compact"===l&&(s?.length||"GET"===a))&&(c=U(c,e)),"compact"===l){if(s?.length){let e=new C('When input structure is "compact", and path has dynamic params, input schema must be an object with all dynamic params as required.');if(!x(c))throw e;let[r,n]=function(e,t){if(Object.keys(e).some(t=>!["type","properties","required","additionalProperties"].includes(t)&&w.includes(t)&&void 0!==e[t]))return[{type:"object"},e];let r={...e},n={...e};return r.properties=t.reduce((t,r)=>{let n=e.properties?.[r]??e.additionalProperties;return void 0!==n&&(t[r]=n),t},{}),r.required=e.required?.filter(e=>t.includes(e)),r.examples=e.examples?.map(e=>(0,y.isObject)(e)?Object.entries(e).reduce((e,[r,n])=>(t.includes(r)&&(e[r]=n),e),{}):e),n.properties=e.properties&&Object.entries(e.properties).filter(([e])=>!t.includes(e)).reduce((e,[t,r])=>(e[t]=r,e),{}),n.required=e.required?.filter(e=>!t.includes(e)),n.examples=e.examples?.map(e=>(0,y.isObject)(e)?Object.entries(e).reduce((e,[r,n])=>(t.includes(r)||(e[r]=n),e),{}):e),[r,n]}(c,s);if(c=n,u=!!n.required&&0!==n.required.length,!O(r,s))throw e;t.parameters??=[],t.parameters.push(...T(r,"path"))}if("GET"===a){if(!x(c))throw new C('When method is "GET", input schema must satisfy: object | any | unknown');t.parameters??=[],t.parameters.push(...T(c,"query"))}else t.requestBody={required:u,content:k(c)};return}let p=new C('When input structure is "detailed", input schema must satisfy: { params?: Record<string, unknown>, query?: Record<string, unknown>, headers?: Record<string, unknown>, body?: unknown }');if(!x(c))throw p;let f=c.properties?.params!==void 0?U(c.properties.params,e):void 0;if(s?.length&&(void 0===f||!x(f)||!O(f,s)))throw new C('When input structure is "detailed" and path has dynamic params, the "params" schema must be an object with all dynamic params as required.');for(let r of["params","query","headers"]){let n=c.properties?.[r];if(void 0!==n){let i=U(n,e);if(!x(i))throw p;let a="params"===r?"path":"headers"===r?"header":"query";t.parameters??=[],t.parameters.push(...T(i,a))}}c.properties?.body!==void 0&&(t.requestBody={required:c.required?.includes("body"),content:k(c.properties.body)})}async #eA(e,t,r,n){let i=r.outputSchema,a=(0,d.fallbackContractConfig)("defaultSuccessStatus",r.route.successStatus),o=(0,d.fallbackContractConfig)("defaultSuccessDescription",r.route?.successDescription),l=(0,d.getEventIteratorSchemaDetails)(i),u=(0,d.fallbackContractConfig)("defaultOutputStructure",r.route.outputStructure);if(l){t.responses??={},t.responses[a]={description:o,content:A(await this.converter.convert(l.yields,{...n,strategy:"output"}),await this.converter.convert(l.returns,{...n,strategy:"output"}))};return}let[c,p]=await this.converter.convert(i,{...n,strategy:"output",minStructureDepthForRef:+("detailed"===u)});if("compact"===u){t.responses??={},t.responses[a]={description:o},t.responses[a].content=k(E(c,p));return}let f=new Set;for(let r of I(p)){let n,i,l=new C(`
        When output structure is "detailed", output schema must satisfy:
        { 
          status?: number, // must be a literal number and in the range of 200-399
          headers?: Record<string, unknown>, 
          body?: unknown 
        }
        
        But got: ${(0,y.stringifyJSON)(r)}
      `),u=U(r,e);if(!x(u))throw l;if(u.properties?.status!==void 0){let t=P(e,u.properties.status);if("object"!=typeof t||void 0===t.const||"number"!=typeof t.const||!Number.isInteger(t.const)||(0,s.isORPCErrorStatus)(t.const))throw l;n=t.const,i=t.description}let c=n??a,d=i??o;if(f.has(c))throw new C(`
          When output structure is "detailed", each success status must be unique.
          But got status: ${c} used more than once.
        `);if(f.add(c),t.responses??={},t.responses[c]={description:d},u.properties?.headers!==void 0){let r=U(u.properties.headers,e);if(!x(r))throw l;for(let e in r.properties){let n=r.properties[e];void 0!==n&&(t.responses[c].headers??={},t.responses[c].headers[e]={schema:R(n),required:u.required?.includes("headers")&&r.required?.includes(e)})}}u.properties?.body!==void 0&&(t.responses[c].content=k(E(u.required?.includes("body")??!1,u.properties.body)))}}async #eT(e,t,r,n,i){let a=t.errorMap,o={};for(let e in a){let t=a[e];if(!t)continue;let n=(0,l.fallbackORPCErrorStatus)(e,t.status),i=(0,u.b)(e,t.message);o[n]??={status:n,definedErrorDefinitions:[],errorSchemaVariants:[]};let[s,c]=await this.converter.convert(t.data,{...r,strategy:"output"});o[n].definedErrorDefinitions.push([e,i,s,c]),o[n].errorSchemaVariants.push({type:"object",properties:{defined:{const:!0},code:{const:e},status:{const:n},message:{type:"string",default:i},data:c},required:s?["defined","code","status","message","data"]:["defined","code","status","message"]})}for(let t in e.responses??={},o){let r=o[t],a=(0,y.value)(i,r.definedErrorDefinitions,r.status);e.responses[t]={description:t,content:k(a??{oneOf:[...r.errorSchemaVariants,n]})}}}}e.s(["C",()=>D,"O",()=>j,"c",()=>b],70092)},65407,e=>{"use strict";var t=e.i(22802),r=e.i(70092);e.i(90732),e.i(23780),e.i(14099),e.i(19018),e.i(87349),e.i(60357);class n{generator;specGenerateOptions;specPath;docsPath;docsTitle;docsHead;docsProvider;docsScriptUrl;docsCssUrl;docsConfig;renderDocsHtml;constructor(e={}){this.specGenerateOptions=e.specGenerateOptions,this.docsPath=e.docsPath??"/",this.docsTitle=e.docsTitle??"API Reference",this.docsConfig=e.docsConfig??void 0,this.docsProvider=e.docsProvider??"scalar",this.docsScriptUrl=e.docsScriptUrl??("swagger"===this.docsProvider?"https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js":"https://cdn.jsdelivr.net/npm/@scalar/api-reference"),this.docsCssUrl=e.docsCssUrl??("swagger"===this.docsProvider?"https://unpkg.com/swagger-ui-dist/swagger-ui.css":void 0),this.docsHead=e.docsHead??"",this.specPath=e.specPath??"/spec.json",this.generator=new r.O(e);const n=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;");this.renderDocsHtml=e.renderDocsHtml??((e,r,i,a,o,s,l,u)=>{let c;if("swagger"===l){let e={dom_id:"#app",spec:s,deepLinking:!0,presets:["SwaggerUIBundle.presets.apis","SwaggerUIBundle.presets.standalone"],plugins:["SwaggerUIBundle.plugins.DownloadUrl"],...o};c=`
        <body>
          <div id="app"></div>

          <script src="${n(a)}"></script>

          <script>
            window.onload = () => {
              window.ui = SwaggerUIBundle(${(0,t.stringifyJSON)(e).replace(/"(SwaggerUIBundle\.[^"]+)"/g,"$1")})
            }
          </script>
        </body>
        `}else{let e={content:(0,t.stringifyJSON)(s),...o};c=`
        <body>
          <div id="app" data-config="${n((0,t.stringifyJSON)(e))}"></div>

          <script src="${n(a)}"></script>

          <script>
            Scalar.createApiReference('#app', JSON.parse(document.getElementById('app').dataset.config))
          </script>
        </body>
        `}return`
        <!doctype html>
        <html>
          <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <title>${n(r)}</title>
            ${u?`<link rel="stylesheet" type="text/css" href="${n(u)}" />`:""}
            ${i}
          </head>
          ${c}
        </html>
        `})}init(e,r){e.interceptors??=[],e.interceptors.push(async e=>{let n=await e.next();if(n.matched||"GET"!==e.request.method)return n;let i=e.prefix??"",a=e.request.url.pathname.replace(/\/$/,"")||"/",o=new URL(`${i}${this.docsPath}`.replace(/\/$/,""),e.request.url.origin),s=new URL(`${i}${this.specPath}`.replace(/\/$/,""),e.request.url.origin),l=(0,t.once)(async()=>await this.generator.generate(r,{servers:[{url:new URL(i,e.request.url.origin).toString()}],...await (0,t.value)(this.specGenerateOptions,e)}));if(a===s.pathname){let e=await l();return{matched:!0,response:{status:200,headers:{},body:new File([(0,t.stringifyJSON)(e)],"spec.json",{type:"application/json"})}}}return a===o.pathname?{matched:!0,response:{status:200,headers:{},body:new File([this.renderDocsHtml(s.toString(),await (0,t.value)(this.docsTitle,e),await (0,t.value)(this.docsHead,e),await (0,t.value)(this.docsScriptUrl,e),await (0,t.value)(this.docsConfig,e),await l(),this.docsProvider,await (0,t.value)(this.docsCssUrl,e))],"api-reference.html",{type:"text/html"})}}:n})}}e.s(["OpenAPIReferencePlugin",()=>n])},53534,e=>{"use strict";var t,r=e.i(22802),n=e.i(70092);e.i(90732),e.i(15664),e.i(19018),e.i(29052),e.i(4862),e.i(78758),e.i(87349),e.i(33050),e.i(60357),e.i(23780),e.i(14099),n.c;var i=((t=i||{}).BigInt="bigint",t.RegExp="regexp",t.Date="date",t.Url="url",t.Set="set",t.Map="map",t),a=e.i(2144),a=a,o=a;e.i(4500);var s=e.i(18699);let l=(0,s.registry)(),u=(0,s.registry)(),c=(0,s.registry)();class d{maxLazyDepth;maxStructureDepth;anyJsonSchema;unsupportedJsonSchema;undefinedJsonSchema;interceptors;constructor(e={}){this.maxLazyDepth=e.maxLazyDepth??2,this.maxStructureDepth=e.maxStructureDepth??10,this.anyJsonSchema=e.anyJsonSchema??{},this.unsupportedJsonSchema=e.unsupportedJsonSchema??{not:{}},this.undefinedJsonSchema=e.undefinedJsonSchema??{not:{}},this.interceptors=e.interceptors??[]}condition(e){return void 0!==e&&"zod"===e["~standard"].vendor&&"_zod"in e}convert(e,t){return this.#eO(e,t,0,0)}#eO(e,t,n,o,s=!1){return(0,r.intercept)(this.interceptors,{schema:e,options:t,lazyDepth:n,isHandledCustomJSONSchema:s},({schema:e,options:t,lazyDepth:n,isHandledCustomJSONSchema:s})=>{if(o>this.maxStructureDepth)return[!1,this.anyJsonSchema];if(!t.minStructureDepthForRef||t.minStructureDepthForRef<=o){for(let n of(0,r.toArray)(t.components))if(n.schema===e&&n.allowedStrategies.includes(t.strategy))return[n.required,{$ref:n.ref}]}if(!s){let r=this.#eR(e,t);if(r){let[i,a]=this.#eO(e,t,n,o,!0);return[i,{...a,...r}]}}switch(e._zod.def.type){case"string":{let t={type:"string"},{minimum:r,maximum:n,format:i,patterns:a,contentEncoding:o}=e._zod.bag;if("number"==typeof r&&(t.minLength=r),"number"==typeof n&&(t.maxLength=n),"string"==typeof o&&(t.contentEncoding=this.#eN(o)),"string"==typeof i&&"regex"!==i&&void 0===t.contentEncoding&&(t.format=this.#eP(i)),a instanceof Set&&void 0===t.contentEncoding&&void 0===t.format)for(let e of a)void 0===t.pattern?t.pattern=e.source:(t.allOf??=[],t.allOf.push({pattern:e.source}));return"jwt"===i&&void 0===t.contentEncoding&&void 0===t.format&&void 0===t.pattern&&(t.pattern=/^[\w-]+\.[\w-]+\.[\w-]+$/.source),[!0,t]}case"number":{let t={type:"number"},{minimum:r,maximum:n,format:i,multipleOf:a,exclusiveMaximum:o,exclusiveMinimum:s}=e._zod.bag;return"string"==typeof i&&i?.includes("int")&&(t.type="integer"),"number"==typeof r&&(t.minimum=r),"number"==typeof n&&(t.maximum=n),"number"==typeof s&&(t.exclusiveMinimum=s),"number"==typeof o&&(t.exclusiveMaximum=o),"number"==typeof a&&(t.multipleOf=a),[!0,t]}case"boolean":case"success":return[!0,{type:"boolean"}];case"bigint":return[!0,{type:"string",pattern:"^-?[0-9]+$","x-native-type":i.BigInt}];case"date":return[!0,{type:"string",format:a.Format.DateTime,"x-native-type":i.Date}];case"null":return[!0,{type:"null"}];case"undefined":case"void":return[!1,this.undefinedJsonSchema];case"any":case"unknown":case"transform":return[!1,this.anyJsonSchema];case"never":return[!0,this.unsupportedJsonSchema];case"array":{let r={type:"array"},{minimum:i,maximum:a}=e._zod.bag;return"number"==typeof i&&(r.minItems=i),"number"==typeof a&&(r.maxItems=a),r.items=this.#eU(this.#eO(e._zod.def.element,t,n,o+1),t),[!0,r]}case"object":{let r={type:"object"};for(let[i,a]of Object.entries(e._zod.def.shape)){let[e,s]=this.#eO(a,t,n,o+1);r.properties??={},r.properties[i]=s,e&&(r.required??=[],r.required.push(i))}if(e._zod.def.catchall)if("never"===e._zod.def.catchall._zod.def.type)r.additionalProperties=!1;else{let[i,a]=this.#eO(e._zod.def.catchall,t,n,o+1);r.additionalProperties=a}return[!0,r]}case"union":{let r=[],i=!0;for(let a of e._zod.def.options){let[e,s]=this.#eO(a,t,n,o+1);e||(i=!1),"input"===t.strategy?s!==this.undefinedJsonSchema&&s!==this.unsupportedJsonSchema&&r.push(s):s!==this.undefinedJsonSchema&&r.push(s)}return[i,{anyOf:r}]}case"intersection":{let r={allOf:[]},i=!1;for(let a of[e._zod.def.left,e._zod.def.right]){let[e,s]=this.#eO(a,t,n,o+1);r.allOf.push(s),e&&(i=!0)}return[i,r]}case"tuple":{let r={type:"array",prefixItems:[]};for(let i of e._zod.def.items)r.prefixItems.push(this.#eU(this.#eO(i,t,n,o+1),t));e._zod.def.rest&&(r.items=this.#eU(this.#eO(e._zod.def.rest,t,n,o+1),t));let{minimum:i,maximum:a}=e._zod.bag;return"number"==typeof i&&(r.minItems=i),"number"==typeof a&&(r.maxItems=a),[!0,r]}case"record":{let r={type:"object"};return r.propertyNames=this.#eO(e._zod.def.keyType,t,n,o+1)[1],r.additionalProperties=this.#eO(e._zod.def.valueType,t,n,o+1)[1],[!0,r]}case"map":return[!0,{type:"array",items:{type:"array",prefixItems:[this.#eU(this.#eO(e._zod.def.keyType,t,n,o+1),t),this.#eU(this.#eO(e._zod.def.valueType,t,n,o+1),t)],maxItems:2,minItems:2},"x-native-type":i.Map}];case"set":return[!0,{type:"array",uniqueItems:!0,items:this.#eU(this.#eO(e._zod.def.valueType,t,n,o+1),t),"x-native-type":i.Set}];case"enum":return[!0,{enum:Object.values(e._zod.def.entries)}];case"literal":{let t=!0,r=new Set;for(let n of e._zod.def.values)void 0===n?t=!1:r.add("bigint"==typeof n?n.toString():n);return[t,0===r.size?this.undefinedJsonSchema:1===r.size?{const:r.values().next().value}:{enum:Array.from(r)}]}case"file":{let t=[],{mime:r}=e._zod.bag;if(void 0===r||Array.isArray(r)&&r.every(e=>"string"==typeof e))for(let e of r??["*/*"])t.push({type:"string",contentMediaType:e});return[!0,1===t.length?t[0]:{anyOf:t}]}case"nullable":{let[r,i]=this.#eO(e._zod.def.innerType,t,n,o);return[r,{anyOf:[i,{type:"null"}]}]}case"nonoptional":{let[,r]=this.#eO(e._zod.def.innerType,t,n,o);return[!0,r]}case"default":case"prefault":{let[,r]=this.#eO(e._zod.def.innerType,t,n,o);return[!1,{...r,default:e._zod.def.defaultValue}]}case"catch":return this.#eO(e._zod.def.innerType,t,n,o);case"nan":return[!0,"input"===t.strategy?this.unsupportedJsonSchema:{type:"null"}];case"pipe":return this.#eO("input"===t.strategy?e._zod.def.in:e._zod.def.out,t,n,o);case"readonly":{let[r,i]=this.#eO(e._zod.def.innerType,t,n,o);return[r,{...i,readOnly:!0}]}case"template_literal":return[!0,{type:"string",pattern:e._zod.pattern.source}];case"optional":{let[,r]=this.#eO(e._zod.def.innerType,t,n,o);return[!1,r]}case"lazy":{let r=n+1;if(r>this.maxLazyDepth)return[!1,this.anyJsonSchema];return this.#eO(e._zod.def.getter(),t,r,o)}default:return e._zod.def.type,[!0,this.unsupportedJsonSchema]}})}#eR(e,t){if("input"===t.strategy&&u.has(e))return u.get(e);if("output"===t.strategy&&c.has(e))return c.get(e);if(l.has(e))return l.get(e);let r=s.globalRegistry.get(e);if(r)return{title:r.title,description:r.description,examples:Array.isArray(r.examples)?r.examples:void 0}}#eU([e,t],r){return e||"input"===r.strategy||void 0!==t.default?t:t===this.undefinedJsonSchema?{type:"null"}:{anyOf:[t,{type:"null"}]}}#eP(e){return"guid"===e?a.Format.UUID:"url"===e?a.Format.URI:"datetime"===e?a.Format.DateTime:Object.values(a.Format).includes(e)?e:void 0}#eN(e){return Object.values(o.ContentEncoding).includes(e)?e:void 0}}e.s(["ZodToJsonSchemaConverter",()=>d],53534)},16554,e=>e.a(async(t,r)=>{try{var n=e.i(54116),i=e.i(64950),a=e.i(70747),o=e.i(65407);e.i(87349);var s=e.i(22802),l=e.i(38090),u=e.i(53534),c=t([n,i]);[n,i]=c.then?(await c)():c;let p=new l.RPCHandler(i.appRouter,{interceptors:[(0,s.onError)(e=>{console.error(e)})]}),f=new a.OpenAPIHandler(i.appRouter,{plugins:[new o.OpenAPIReferencePlugin({schemaConverters:[new u.ZodToJsonSchemaConverter],specGenerateOptions:{info:{title:"Dukkani API",version:"1.0.0",description:"API documentation and playground for Dukkani"}}})],interceptors:[(0,s.onError)(e=>{console.error(e)})]});async function d(e){let t=await p.handle(e,{prefix:"/api",context:await (0,n.createContext)(e.headers)});if(t.response)return t.response;let r=await f.handle(e,{prefix:"/api",context:await (0,n.createContext)(e.headers)});return r.response?r.response:new Response("Not found",{status:404})}e.s(["DELETE",0,d,"GET",0,d,"PATCH",0,d,"POST",0,d,"PUT",0,d]),r()}catch(e){r(e)}},!1),44331,e=>e.a(async(t,r)=>{try{var n=e.i(20495),i=e.i(67168),a=e.i(29905),o=e.i(84259),s=e.i(41632),l=e.i(20758),u=e.i(58615),c=e.i(65633),d=e.i(76917),p=e.i(75616),f=e.i(66038),m=e.i(95581),h=e.i(67906),g=e.i(73157),y=e.i(81032),v=e.i(98837),b=e.i(93695);e.i(29663);var w=e.i(94798),_=e.i(16554),x=t([_]);[_]=x.then?(await x)():x;let S=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/[[...rest]]/route",pathname:"/api/[[...rest]]",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/apps/api/src/app/api/[[...rest]]/route.ts",nextConfigOutput:"",userland:_}),{workAsyncStorage:$,workUnitAsyncStorage:k,serverHooks:A}=S;function E(){return(0,a.patchFetch)({workAsyncStorage:$,workUnitAsyncStorage:k})}async function I(e,t,r){S.isDev&&(0,o.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/[[...rest]]/route";n=n.replace(/\/index$/,"")||"/";let a=await S.prepare(e,t,{srcPage:n,multiZoneDraftMode:!1});if(!a)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:_,params:x,nextConfig:E,parsedUrl:I,isDraftMode:$,prerenderManifest:k,routerServerContext:A,isOnDemandRevalidate:T,revalidateOnlyGenerated:O,resolvedPathname:R,clientReferenceManifest:N,serverActionsManifest:P}=a,U=(0,c.normalizeAppPath)(n),D=!!(k.dynamicRoutes[U]||k.routes[R]),C=async()=>((null==A?void 0:A.render404)?await A.render404(e,t,I,!1):t.end("This page could not be found"),null);if(D&&!$){let e=!!k.routes[R],t=k.dynamicRoutes[U];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await C();throw new b.NoFallbackError}}let j=null;!D||S.isDev||$||(j=R,j="/index"===j?"/":j);let z=!0===S.isDev||!D,L=D&&!z;P&&N&&(0,l.setReferenceManifestsSingleton)({page:n,clientReferenceManifest:N,serverActionsManifest:P,serverModuleMap:(0,u.createServerModuleMap)({serverActionsManifest:P})});let Z=e.method||"GET",M=(0,s.getTracer)(),q=M.getActiveScopeSpan(),V={params:x,prerenderManifest:k,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:z,incrementalCache:(0,o.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>S.onRequestError(e,t,n,A)},sharedContext:{buildId:_}},B=new d.NodeNextRequest(e),F=new d.NodeNextResponse(t),W=p.NextRequestAdapter.fromNodeNextRequest(B,(0,p.signalFromNodeResponse)(t));try{let a=async e=>S.handle(W,V).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=M.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==f.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=r.get("next.route");if(i){let t=`${Z} ${i}`;e.setAttributes({"next.route":i,"http.route":i,"next.span_name":t}),e.updateName(t)}else e.updateName(`${Z} ${n}`)}),l=!!(0,o.getRequestMeta)(e,"minimalMode"),u=async o=>{var s,u;let c=async({previousCacheEntry:i})=>{try{if(!l&&T&&O&&!i)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await a(o);e.fetchMetrics=V.renderOpts.fetchMetrics;let s=V.renderOpts.pendingWaitUntil;s&&r.waitUntil&&(r.waitUntil(s),s=void 0);let u=V.renderOpts.collectedTags;if(!D)return await (0,h.sendResponse)(B,F,n,V.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,g.toNodeOutgoingHttpHeaders)(n.headers);u&&(t[v.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==V.renderOpts.collectedRevalidate&&!(V.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&V.renderOpts.collectedRevalidate,i=void 0===V.renderOpts.collectedExpire||V.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:V.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:i}}}}catch(t){throw(null==i?void 0:i.isStale)&&await S.onRequestError(e,t,{routerKind:"App Router",routePath:n,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:T})},A),t}},d=await S.handleResponse({req:e,nextConfig:E,cacheKey:j,routeKind:i.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:k,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:O,responseGenerator:c,waitUntil:r.waitUntil,isMinimalMode:l});if(!D)return null;if((null==d||null==(s=d.value)?void 0:s.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(u=d.value)?void 0:u.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",T?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),$&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,g.fromNodeOutgoingHttpHeaders)(d.value.headers);return l&&D||p.delete(v.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,y.getCacheControlHeader)(d.cacheControl)),await (0,h.sendResponse)(B,F,new Response(d.value.body,{headers:p,status:d.value.status||200})),null};q?await u(q):await M.withPropagatedContext(e.headers,()=>M.trace(f.BaseServerSpan.handleRequest,{spanName:`${Z} ${n}`,kind:s.SpanKind.SERVER,attributes:{"http.method":Z,"http.target":e.url}},u))}catch(t){if(t instanceof b.NoFallbackError||await S.onRequestError(e,t,{routerKind:"App Router",routePath:U,routeType:"route",revalidateReason:(0,m.getRevalidateReason)({isStaticGeneration:L,isOnDemandRevalidate:T})}),D)throw t;return await (0,h.sendResponse)(B,F,new Response(null,{status:500})),null}}e.s(["handler",()=>I,"patchFetch",()=>E,"routeModule",()=>S,"serverHooks",()=>A,"workAsyncStorage",()=>$,"workUnitAsyncStorage",()=>k]),r()}catch(e){r(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__bc5a6d87._.js.map