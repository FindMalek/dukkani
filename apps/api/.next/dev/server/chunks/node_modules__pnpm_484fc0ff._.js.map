{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-auth%2Butils%400.3.0/node_modules/%40better-auth/utils/dist/base64.mjs"],"sourcesContent":["function getAlphabet(urlSafe) {\n  return urlSafe ? \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\" : \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n}\nfunction base64Encode(data, alphabet, padding) {\n  let result = \"\";\n  let buffer = 0;\n  let shift = 0;\n  for (const byte of data) {\n    buffer = buffer << 8 | byte;\n    shift += 8;\n    while (shift >= 6) {\n      shift -= 6;\n      result += alphabet[buffer >> shift & 63];\n    }\n  }\n  if (shift > 0) {\n    result += alphabet[buffer << 6 - shift & 63];\n  }\n  if (padding) {\n    const padCount = (4 - result.length % 4) % 4;\n    result += \"=\".repeat(padCount);\n  }\n  return result;\n}\nfunction base64Decode(data, alphabet) {\n  const decodeMap = /* @__PURE__ */ new Map();\n  for (let i = 0; i < alphabet.length; i++) {\n    decodeMap.set(alphabet[i], i);\n  }\n  const result = [];\n  let buffer = 0;\n  let bitsCollected = 0;\n  for (const char of data) {\n    if (char === \"=\")\n      break;\n    const value = decodeMap.get(char);\n    if (value === void 0) {\n      throw new Error(`Invalid Base64 character: ${char}`);\n    }\n    buffer = buffer << 6 | value;\n    bitsCollected += 6;\n    if (bitsCollected >= 8) {\n      bitsCollected -= 8;\n      result.push(buffer >> bitsCollected & 255);\n    }\n  }\n  return Uint8Array.from(result);\n}\nconst base64 = {\n  encode(data, options = {}) {\n    const alphabet = getAlphabet(false);\n    const buffer = typeof data === \"string\" ? new TextEncoder().encode(data) : new Uint8Array(data);\n    return base64Encode(buffer, alphabet, options.padding ?? true);\n  },\n  decode(data) {\n    if (typeof data !== \"string\") {\n      data = new TextDecoder().decode(data);\n    }\n    const urlSafe = data.includes(\"-\") || data.includes(\"_\");\n    const alphabet = getAlphabet(urlSafe);\n    return base64Decode(data, alphabet);\n  }\n};\nconst base64Url = {\n  encode(data, options = {}) {\n    const alphabet = getAlphabet(true);\n    const buffer = typeof data === \"string\" ? new TextEncoder().encode(data) : new Uint8Array(data);\n    return base64Encode(buffer, alphabet, options.padding ?? true);\n  },\n  decode(data) {\n    const urlSafe = data.includes(\"-\") || data.includes(\"_\");\n    const alphabet = getAlphabet(urlSafe);\n    return base64Decode(data, alphabet);\n  }\n};\n\nexport { base64, base64Url };\n"],"names":[],"mappings":";;;;;;AAAA,SAAS,YAAY,OAAO;IAC1B,OAAO,UAAU,qEAAqE;AACxF;AACA,SAAS,aAAa,IAAI,EAAE,QAAQ,EAAE,OAAO;IAC3C,IAAI,SAAS;IACb,IAAI,SAAS;IACb,IAAI,QAAQ;IACZ,KAAK,MAAM,QAAQ,KAAM;QACvB,SAAS,UAAU,IAAI;QACvB,SAAS;QACT,MAAO,SAAS,EAAG;YACjB,SAAS;YACT,UAAU,QAAQ,CAAC,UAAU,QAAQ,GAAG;QAC1C;IACF;IACA,IAAI,QAAQ,GAAG;QACb,UAAU,QAAQ,CAAC,UAAU,IAAI,QAAQ,GAAG;IAC9C;IACA,IAAI,SAAS;QACX,MAAM,WAAW,CAAC,IAAI,OAAO,MAAM,GAAG,CAAC,IAAI;QAC3C,UAAU,IAAI,MAAM,CAAC;IACvB;IACA,OAAO;AACT;AACA,SAAS,aAAa,IAAI,EAAE,QAAQ;IAClC,MAAM,YAAY,aAAa,GAAG,IAAI;IACtC,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,EAAE,IAAK;QACxC,UAAU,GAAG,CAAC,QAAQ,CAAC,EAAE,EAAE;IAC7B;IACA,MAAM,SAAS,EAAE;IACjB,IAAI,SAAS;IACb,IAAI,gBAAgB;IACpB,KAAK,MAAM,QAAQ,KAAM;QACvB,IAAI,SAAS,KACX;QACF,MAAM,QAAQ,UAAU,GAAG,CAAC;QAC5B,IAAI,UAAU,KAAK,GAAG;YACpB,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,MAAM;QACrD;QACA,SAAS,UAAU,IAAI;QACvB,iBAAiB;QACjB,IAAI,iBAAiB,GAAG;YACtB,iBAAiB;YACjB,OAAO,IAAI,CAAC,UAAU,gBAAgB;QACxC;IACF;IACA,OAAO,WAAW,IAAI,CAAC;AACzB;AACA,MAAM,SAAS;IACb,QAAO,IAAI,EAAE,UAAU,CAAC,CAAC;QACvB,MAAM,WAAW,YAAY;QAC7B,MAAM,SAAS,OAAO,SAAS,WAAW,IAAI,cAAc,MAAM,CAAC,QAAQ,IAAI,WAAW;QAC1F,OAAO,aAAa,QAAQ,UAAU,QAAQ,OAAO,IAAI;IAC3D;IACA,QAAO,IAAI;QACT,IAAI,OAAO,SAAS,UAAU;YAC5B,OAAO,IAAI,cAAc,MAAM,CAAC;QAClC;QACA,MAAM,UAAU,KAAK,QAAQ,CAAC,QAAQ,KAAK,QAAQ,CAAC;QACpD,MAAM,WAAW,YAAY;QAC7B,OAAO,aAAa,MAAM;IAC5B;AACF;AACA,MAAM,YAAY;IAChB,QAAO,IAAI,EAAE,UAAU,CAAC,CAAC;QACvB,MAAM,WAAW,YAAY;QAC7B,MAAM,SAAS,OAAO,SAAS,WAAW,IAAI,cAAc,MAAM,CAAC,QAAQ,IAAI,WAAW;QAC1F,OAAO,aAAa,QAAQ,UAAU,QAAQ,OAAO,IAAI;IAC3D;IACA,QAAO,IAAI;QACT,MAAM,UAAU,KAAK,QAAQ,CAAC,QAAQ,KAAK,QAAQ,CAAC;QACpD,MAAM,WAAW,YAAY;QAC7B,OAAO,aAAa,MAAM;IAC5B;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-auth%2Butils%400.3.0/node_modules/%40better-auth/utils/dist/index.mjs"],"sourcesContent":["function getWebcryptoSubtle() {\n  const cr = typeof globalThis !== \"undefined\" && globalThis.crypto;\n  if (cr && typeof cr.subtle === \"object\" && cr.subtle != null)\n    return cr.subtle;\n  throw new Error(\"crypto.subtle must be defined\");\n}\n\nexport { getWebcryptoSubtle };\n"],"names":[],"mappings":";;;;AAAA,SAAS;IACP,MAAM,KAAK,OAAO,eAAe,eAAe,WAAW,MAAM;IACjE,IAAI,MAAM,OAAO,GAAG,MAAM,KAAK,YAAY,GAAG,MAAM,IAAI,MACtD,OAAO,GAAG,MAAM;IAClB,MAAM,IAAI,MAAM;AAClB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-auth%2Butils%400.3.0/node_modules/%40better-auth/utils/dist/hex.mjs"],"sourcesContent":["const hexadecimal = \"0123456789abcdef\";\nconst hex = {\n  encode: (data) => {\n    if (typeof data === \"string\") {\n      data = new TextEncoder().encode(data);\n    }\n    if (data.byteLength === 0) {\n      return \"\";\n    }\n    const buffer = new Uint8Array(data);\n    let result = \"\";\n    for (const byte of buffer) {\n      result += byte.toString(16).padStart(2, \"0\");\n    }\n    return result;\n  },\n  decode: (data) => {\n    if (!data) {\n      return \"\";\n    }\n    if (typeof data === \"string\") {\n      if (data.length % 2 !== 0) {\n        throw new Error(\"Invalid hexadecimal string\");\n      }\n      if (!new RegExp(`^[${hexadecimal}]+$`).test(data)) {\n        throw new Error(\"Invalid hexadecimal string\");\n      }\n      const result = new Uint8Array(data.length / 2);\n      for (let i = 0; i < data.length; i += 2) {\n        result[i / 2] = parseInt(data.slice(i, i + 2), 16);\n      }\n      return new TextDecoder().decode(result);\n    }\n    return new TextDecoder().decode(data);\n  }\n};\n\nexport { hex };\n"],"names":[],"mappings":";;;;AAAA,MAAM,cAAc;AACpB,MAAM,MAAM;IACV,QAAQ,CAAC;QACP,IAAI,OAAO,SAAS,UAAU;YAC5B,OAAO,IAAI,cAAc,MAAM,CAAC;QAClC;QACA,IAAI,KAAK,UAAU,KAAK,GAAG;YACzB,OAAO;QACT;QACA,MAAM,SAAS,IAAI,WAAW;QAC9B,IAAI,SAAS;QACb,KAAK,MAAM,QAAQ,OAAQ;YACzB,UAAU,KAAK,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG;QAC1C;QACA,OAAO;IACT;IACA,QAAQ,CAAC;QACP,IAAI,CAAC,MAAM;YACT,OAAO;QACT;QACA,IAAI,OAAO,SAAS,UAAU;YAC5B,IAAI,KAAK,MAAM,GAAG,MAAM,GAAG;gBACzB,MAAM,IAAI,MAAM;YAClB;YACA,IAAI,CAAC,IAAI,OAAO,CAAC,EAAE,EAAE,YAAY,GAAG,CAAC,EAAE,IAAI,CAAC,OAAO;gBACjD,MAAM,IAAI,MAAM;YAClB;YACA,MAAM,SAAS,IAAI,WAAW,KAAK,MAAM,GAAG;YAC5C,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,KAAK,EAAG;gBACvC,MAAM,CAAC,IAAI,EAAE,GAAG,SAAS,KAAK,KAAK,CAAC,GAAG,IAAI,IAAI;YACjD;YACA,OAAO,IAAI,cAAc,MAAM,CAAC;QAClC;QACA,OAAO,IAAI,cAAc,MAAM,CAAC;IAClC;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-auth%2Butils%400.3.0/node_modules/%40better-auth/utils/dist/hmac.mjs"],"sourcesContent":["import { hex } from './hex.mjs';\nimport { base64Url, base64 } from './base64.mjs';\nimport { getWebcryptoSubtle } from './index.mjs';\n\nconst createHMAC = (algorithm = \"SHA-256\", encoding = \"none\") => {\n  const hmac = {\n    importKey: async (key, keyUsage) => {\n      return getWebcryptoSubtle().importKey(\n        \"raw\",\n        typeof key === \"string\" ? new TextEncoder().encode(key) : key,\n        { name: \"HMAC\", hash: { name: algorithm } },\n        false,\n        [keyUsage]\n      );\n    },\n    sign: async (hmacKey, data) => {\n      if (typeof hmacKey === \"string\") {\n        hmacKey = await hmac.importKey(hmacKey, \"sign\");\n      }\n      const signature = await getWebcryptoSubtle().sign(\n        \"HMAC\",\n        hmacKey,\n        typeof data === \"string\" ? new TextEncoder().encode(data) : data\n      );\n      if (encoding === \"hex\") {\n        return hex.encode(signature);\n      }\n      if (encoding === \"base64\" || encoding === \"base64url\" || encoding === \"base64urlnopad\") {\n        return base64Url.encode(signature, {\n          padding: encoding !== \"base64urlnopad\"\n        });\n      }\n      return signature;\n    },\n    verify: async (hmacKey, data, signature) => {\n      if (typeof hmacKey === \"string\") {\n        hmacKey = await hmac.importKey(hmacKey, \"verify\");\n      }\n      if (encoding === \"hex\") {\n        signature = hex.decode(signature);\n      }\n      if (encoding === \"base64\" || encoding === \"base64url\" || encoding === \"base64urlnopad\") {\n        signature = await base64.decode(signature);\n      }\n      return getWebcryptoSubtle().verify(\n        \"HMAC\",\n        hmacKey,\n        typeof signature === \"string\" ? new TextEncoder().encode(signature) : signature,\n        typeof data === \"string\" ? new TextEncoder().encode(data) : data\n      );\n    }\n  };\n  return hmac;\n};\n\nexport { createHMAC };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,aAAa,CAAC,YAAY,SAAS,EAAE,WAAW,MAAM;IAC1D,MAAM,OAAO;QACX,WAAW,OAAO,KAAK;YACrB,OAAO,IAAA,yPAAkB,IAAG,SAAS,CACnC,OACA,OAAO,QAAQ,WAAW,IAAI,cAAc,MAAM,CAAC,OAAO,KAC1D;gBAAE,MAAM;gBAAQ,MAAM;oBAAE,MAAM;gBAAU;YAAE,GAC1C,OACA;gBAAC;aAAS;QAEd;QACA,MAAM,OAAO,SAAS;YACpB,IAAI,OAAO,YAAY,UAAU;gBAC/B,UAAU,MAAM,KAAK,SAAS,CAAC,SAAS;YAC1C;YACA,MAAM,YAAY,MAAM,IAAA,yPAAkB,IAAG,IAAI,CAC/C,QACA,SACA,OAAO,SAAS,WAAW,IAAI,cAAc,MAAM,CAAC,QAAQ;YAE9D,IAAI,aAAa,OAAO;gBACtB,OAAO,wOAAG,CAAC,MAAM,CAAC;YACpB;YACA,IAAI,aAAa,YAAY,aAAa,eAAe,aAAa,kBAAkB;gBACtF,OAAO,iPAAS,CAAC,MAAM,CAAC,WAAW;oBACjC,SAAS,aAAa;gBACxB;YACF;YACA,OAAO;QACT;QACA,QAAQ,OAAO,SAAS,MAAM;YAC5B,IAAI,OAAO,YAAY,UAAU;gBAC/B,UAAU,MAAM,KAAK,SAAS,CAAC,SAAS;YAC1C;YACA,IAAI,aAAa,OAAO;gBACtB,YAAY,wOAAG,CAAC,MAAM,CAAC;YACzB;YACA,IAAI,aAAa,YAAY,aAAa,eAAe,aAAa,kBAAkB;gBACtF,YAAY,MAAM,8OAAM,CAAC,MAAM,CAAC;YAClC;YACA,OAAO,IAAA,yPAAkB,IAAG,MAAM,CAChC,QACA,SACA,OAAO,cAAc,WAAW,IAAI,cAAc,MAAM,CAAC,aAAa,WACtE,OAAO,SAAS,WAAW,IAAI,cAAc,MAAM,CAAC,QAAQ;QAEhE;IACF;IACA,OAAO;AACT","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-auth%2Butils%400.3.0/node_modules/%40better-auth/utils/dist/binary.mjs"],"sourcesContent":["const decoders = /* @__PURE__ */ new Map();\nconst encoder = new TextEncoder();\nconst binary = {\n  decode: (data, encoding = \"utf-8\") => {\n    if (!decoders.has(encoding)) {\n      decoders.set(encoding, new TextDecoder(encoding));\n    }\n    const decoder = decoders.get(encoding);\n    return decoder.decode(data);\n  },\n  encode: encoder.encode\n};\n\nexport { binary };\n"],"names":[],"mappings":";;;;AAAA,MAAM,WAAW,aAAa,GAAG,IAAI;AACrC,MAAM,UAAU,IAAI;AACpB,MAAM,SAAS;IACb,QAAQ,CAAC,MAAM,WAAW,OAAO;QAC/B,IAAI,CAAC,SAAS,GAAG,CAAC,WAAW;YAC3B,SAAS,GAAG,CAAC,UAAU,IAAI,YAAY;QACzC;QACA,MAAM,UAAU,SAAS,GAAG,CAAC;QAC7B,OAAO,QAAQ,MAAM,CAAC;IACxB;IACA,QAAQ,QAAQ,MAAM;AACxB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-auth%2Butils%400.3.0/node_modules/%40better-auth/utils/dist/random.mjs"],"sourcesContent":["function expandAlphabet(alphabet) {\n  switch (alphabet) {\n    case \"a-z\":\n      return \"abcdefghijklmnopqrstuvwxyz\";\n    case \"A-Z\":\n      return \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    case \"0-9\":\n      return \"0123456789\";\n    case \"-_\":\n      return \"-_\";\n    default:\n      throw new Error(`Unsupported alphabet: ${alphabet}`);\n  }\n}\nfunction createRandomStringGenerator(...baseAlphabets) {\n  const baseCharSet = baseAlphabets.map(expandAlphabet).join(\"\");\n  if (baseCharSet.length === 0) {\n    throw new Error(\n      \"No valid characters provided for random string generation.\"\n    );\n  }\n  const baseCharSetLength = baseCharSet.length;\n  return (length, ...alphabets) => {\n    if (length <= 0) {\n      throw new Error(\"Length must be a positive integer.\");\n    }\n    let charSet = baseCharSet;\n    let charSetLength = baseCharSetLength;\n    if (alphabets.length > 0) {\n      charSet = alphabets.map(expandAlphabet).join(\"\");\n      charSetLength = charSet.length;\n    }\n    const maxValid = Math.floor(256 / charSetLength) * charSetLength;\n    const buf = new Uint8Array(length * 2);\n    const bufLength = buf.length;\n    let result = \"\";\n    let bufIndex = bufLength;\n    let rand;\n    while (result.length < length) {\n      if (bufIndex >= bufLength) {\n        crypto.getRandomValues(buf);\n        bufIndex = 0;\n      }\n      rand = buf[bufIndex++];\n      if (rand < maxValid) {\n        result += charSet[rand % charSetLength];\n      }\n    }\n    return result;\n  };\n}\n\nexport { createRandomStringGenerator };\n"],"names":[],"mappings":";;;;AAAA,SAAS,eAAe,QAAQ;IAC9B,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,UAAU;IACvD;AACF;AACA,SAAS,4BAA4B,GAAG,aAAa;IACnD,MAAM,cAAc,cAAc,GAAG,CAAC,gBAAgB,IAAI,CAAC;IAC3D,IAAI,YAAY,MAAM,KAAK,GAAG;QAC5B,MAAM,IAAI,MACR;IAEJ;IACA,MAAM,oBAAoB,YAAY,MAAM;IAC5C,OAAO,CAAC,QAAQ,GAAG;QACjB,IAAI,UAAU,GAAG;YACf,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,UAAU;QACd,IAAI,gBAAgB;QACpB,IAAI,UAAU,MAAM,GAAG,GAAG;YACxB,UAAU,UAAU,GAAG,CAAC,gBAAgB,IAAI,CAAC;YAC7C,gBAAgB,QAAQ,MAAM;QAChC;QACA,MAAM,WAAW,KAAK,KAAK,CAAC,MAAM,iBAAiB;QACnD,MAAM,MAAM,IAAI,WAAW,SAAS;QACpC,MAAM,YAAY,IAAI,MAAM;QAC5B,IAAI,SAAS;QACb,IAAI,WAAW;QACf,IAAI;QACJ,MAAO,OAAO,MAAM,GAAG,OAAQ;YAC7B,IAAI,YAAY,WAAW;gBACzB,OAAO,eAAe,CAAC;gBACvB,WAAW;YACb;YACA,OAAO,GAAG,CAAC,WAAW;YACtB,IAAI,OAAO,UAAU;gBACnB,UAAU,OAAO,CAAC,OAAO,cAAc;YACzC;QACF;QACA,OAAO;IACT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-auth%2Butils%400.3.0/node_modules/%40better-auth/utils/dist/hash.mjs"],"sourcesContent":["import { base64Url, base64 } from './base64.mjs';\nimport { getWebcryptoSubtle } from './index.mjs';\n\nfunction createHash(algorithm, encoding) {\n  return {\n    digest: async (input) => {\n      const encoder = new TextEncoder();\n      const data = typeof input === \"string\" ? encoder.encode(input) : input;\n      const hashBuffer = await getWebcryptoSubtle().digest(algorithm, data);\n      if (encoding === \"hex\") {\n        const hashArray = Array.from(new Uint8Array(hashBuffer));\n        const hashHex = hashArray.map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n        return hashHex;\n      }\n      if (encoding === \"base64\" || encoding === \"base64url\" || encoding === \"base64urlnopad\") {\n        if (encoding.includes(\"url\")) {\n          return base64Url.encode(hashBuffer, {\n            padding: encoding !== \"base64urlnopad\"\n          });\n        }\n        const hashBase64 = base64.encode(hashBuffer);\n        return hashBase64;\n      }\n      return hashBuffer;\n    }\n  };\n}\n\nexport { createHash };\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,SAAS,WAAW,SAAS,EAAE,QAAQ;IACrC,OAAO;QACL,QAAQ,OAAO;YACb,MAAM,UAAU,IAAI;YACpB,MAAM,OAAO,OAAO,UAAU,WAAW,QAAQ,MAAM,CAAC,SAAS;YACjE,MAAM,aAAa,MAAM,IAAA,yPAAkB,IAAG,MAAM,CAAC,WAAW;YAChE,IAAI,aAAa,OAAO;gBACtB,MAAM,YAAY,MAAM,IAAI,CAAC,IAAI,WAAW;gBAC5C,MAAM,UAAU,UAAU,GAAG,CAAC,CAAC,IAAM,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MAAM,IAAI,CAAC;gBAC3E,OAAO;YACT;YACA,IAAI,aAAa,YAAY,aAAa,eAAe,aAAa,kBAAkB;gBACtF,IAAI,SAAS,QAAQ,CAAC,QAAQ;oBAC5B,OAAO,iPAAS,CAAC,MAAM,CAAC,YAAY;wBAClC,SAAS,aAAa;oBACxB;gBACF;gBACA,MAAM,aAAa,8OAAM,CAAC,MAAM,CAAC;gBACjC,OAAO;YACT;YACA,OAAO;QACT;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 321, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-fetch%2Bfetch%401.1.18/node_modules/%40better-fetch/fetch/src/error.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-fetch%2Bfetch%401.1.18/node_modules/%40better-fetch/fetch/src/plugins.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-fetch%2Bfetch%401.1.18/node_modules/%40better-fetch/fetch/src/retry.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-fetch%2Bfetch%401.1.18/node_modules/%40better-fetch/fetch/src/auth.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-fetch%2Bfetch%401.1.18/node_modules/%40better-fetch/fetch/src/utils.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-fetch%2Bfetch%401.1.18/node_modules/%40better-fetch/fetch/src/create-fetch/schema.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-fetch%2Bfetch%401.1.18/node_modules/%40better-fetch/fetch/src/create-fetch/index.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-fetch%2Bfetch%401.1.18/node_modules/%40better-fetch/fetch/src/url.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-fetch%2Bfetch%401.1.18/node_modules/%40better-fetch/fetch/src/fetch.ts"],"sourcesContent":["export class BetterFetchError extends Error {\n\tconstructor(\n\t\tpublic status: number,\n\t\tpublic statusText: string,\n\t\tpublic error: any,\n\t) {\n\t\tsuper(statusText || status.toString(), {\n\t\t\tcause: error,\n\t\t});\n\t}\n}\n","import type { StandardSchemaV1 } from \"./standard-schema\";\nimport { Schema } from \"./create-fetch\";\nimport { BetterFetchError } from \"./error\";\nimport type { BetterFetchOption } from \"./types\";\n\nexport type RequestContext<T extends Record<string, any> = any> = {\n\turl: URL | string;\n\theaders: Headers;\n\tbody: any;\n\tmethod: string;\n\tsignal: AbortSignal;\n} & BetterFetchOption<any, any, any, T>;\nexport type ResponseContext = {\n\tresponse: Response;\n\trequest: RequestContext;\n};\nexport type SuccessContext<Res = any> = {\n\tdata: Res;\n\tresponse: Response;\n\trequest: RequestContext;\n};\nexport type ErrorContext = {\n\tresponse: Response;\n\trequest: RequestContext;\n\terror: BetterFetchError & Record<string, any>;\n};\nexport interface FetchHooks<Res = any> {\n\t/**\n\t * a callback function that will be called when a\n\t * request is made.\n\t *\n\t * The returned context object will be reassigned to\n\t * the original request context.\n\t */\n\tonRequest?: <T extends Record<string, any>>(\n\t\tcontext: RequestContext<T>,\n\t) => Promise<RequestContext | void> | RequestContext | void;\n\t/**\n\t * a callback function that will be called when\n\t * response is received. This will be called before\n\t * the response is parsed and returned.\n\t *\n\t * The returned response will be reassigned to the\n\t * original response if it's changed.\n\t */\n\tonResponse?: (\n\t\tcontext: ResponseContext,\n\t) =>\n\t\t| Promise<Response | void | ResponseContext>\n\t\t| Response\n\t\t| ResponseContext\n\t\t| void;\n\t/**\n\t * a callback function that will be called when a\n\t * response is successful.\n\t */\n\tonSuccess?: (context: SuccessContext<Res>) => Promise<void> | void;\n\t/**\n\t * a callback function that will be called when an\n\t * error occurs.\n\t */\n\tonError?: (context: ErrorContext) => Promise<void> | void;\n\t/**\n\t * a callback function that will be called when a\n\t * request is retried.\n\t */\n\tonRetry?: (response: ResponseContext) => Promise<void> | void;\n\t/**\n\t * Options for the hooks\n\t */\n\thookOptions?: {\n\t\t/**\n\t\t * Clone the response\n\t\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Response/clone\n\t\t */\n\t\tcloneResponse?: boolean;\n\t};\n}\n\n/**\n * A plugin that returns an id and hooks\n */\nexport type BetterFetchPlugin = {\n\t/**\n\t * A unique id for the plugin\n\t */\n\tid: string;\n\t/**\n\t * A name for the plugin\n\t */\n\tname: string;\n\t/**\n\t * A description for the plugin\n\t */\n\tdescription?: string;\n\t/**\n\t * A version for the plugin\n\t */\n\tversion?: string;\n\t/**\n\t * Hooks for the plugin\n\t */\n\thooks?: FetchHooks;\n\t/**\n\t * A function that will be called when the plugin is\n\t * initialized. This will be called before the any\n\t * of the other internal functions.\n\t *\n\t * The returned options will be merged with the\n\t * original options.\n\t */\n\tinit?: (\n\t\turl: string,\n\t\toptions?: BetterFetchOption,\n\t) =>\n\t\t| Promise<{\n\t\t\t\turl: string;\n\t\t\t\toptions?: BetterFetchOption;\n\t\t  }>\n\t\t| {\n\t\t\t\turl: string;\n\t\t\t\toptions?: BetterFetchOption;\n\t\t  };\n\t/**\n\t * A schema for the plugin\n\t */\n\tschema?: Schema;\n\t/**\n\t * Additional options that can be passed to the plugin\n\t */\n\tgetOptions?: () => StandardSchemaV1;\n};\n\nexport const initializePlugins = async (\n\turl: string,\n\toptions?: BetterFetchOption,\n) => {\n\tlet opts = options || {};\n\tconst hooks: {\n\t\tonRequest: Array<FetchHooks[\"onRequest\"]>;\n\t\tonResponse: Array<FetchHooks[\"onResponse\"]>;\n\t\tonSuccess: Array<FetchHooks[\"onSuccess\"]>;\n\t\tonError: Array<FetchHooks[\"onError\"]>;\n\t\tonRetry: Array<FetchHooks[\"onRetry\"]>;\n\t} = {\n\t\tonRequest: [options?.onRequest],\n\t\tonResponse: [options?.onResponse],\n\t\tonSuccess: [options?.onSuccess],\n\t\tonError: [options?.onError],\n\t\tonRetry: [options?.onRetry],\n\t};\n\tif (!options || !options?.plugins) {\n\t\treturn {\n\t\t\turl,\n\t\t\toptions: opts,\n\t\t\thooks,\n\t\t};\n\t}\n\tfor (const plugin of options?.plugins || []) {\n\t\tif (plugin.init) {\n\t\t\tconst pluginRes = await plugin.init?.(url.toString(), options);\n\t\t\topts = pluginRes.options || opts;\n\t\t\turl = pluginRes.url;\n\t\t}\n\t\thooks.onRequest.push(plugin.hooks?.onRequest);\n\t\thooks.onResponse.push(plugin.hooks?.onResponse);\n\t\thooks.onSuccess.push(plugin.hooks?.onSuccess);\n\t\thooks.onError.push(plugin.hooks?.onError);\n\t\thooks.onRetry.push(plugin.hooks?.onRetry);\n\t}\n\n\treturn {\n\t\turl,\n\t\toptions: opts,\n\t\thooks,\n\t};\n};\n","export type RetryCondition = (\n\tresponse: Response | null,\n) => boolean | Promise<boolean>;\n\nexport type LinearRetry = {\n\ttype: \"linear\";\n\tattempts: number;\n\tdelay: number;\n\tshouldRetry?: RetryCondition;\n};\n\nexport type ExponentialRetry = {\n\ttype: \"exponential\";\n\tattempts: number;\n\tbaseDelay: number;\n\tmaxDelay: number;\n\tshouldRetry?: RetryCondition;\n};\n\nexport type RetryOptions = LinearRetry | ExponentialRetry | number;\n\nexport interface RetryStrategy {\n\tshouldAttemptRetry(\n\t\tattempt: number,\n\t\tresponse: Response | null,\n\t): Promise<boolean>;\n\tgetDelay(attempt: number): number;\n}\n\nclass LinearRetryStrategy implements RetryStrategy {\n\tconstructor(private options: LinearRetry) {}\n\n\tshouldAttemptRetry(\n\t\tattempt: number,\n\t\tresponse: Response | null,\n\t): Promise<boolean> {\n\t\tif (this.options.shouldRetry) {\n\t\t\treturn Promise.resolve(\n\t\t\t\tattempt < this.options.attempts && this.options.shouldRetry(response),\n\t\t\t);\n\t\t}\n\t\treturn Promise.resolve(attempt < this.options.attempts);\n\t}\n\n\tgetDelay(): number {\n\t\treturn this.options.delay;\n\t}\n}\n\nclass ExponentialRetryStrategy implements RetryStrategy {\n\tconstructor(private options: ExponentialRetry) {}\n\n\tshouldAttemptRetry(\n\t\tattempt: number,\n\t\tresponse: Response | null,\n\t): Promise<boolean> {\n\t\tif (this.options.shouldRetry) {\n\t\t\treturn Promise.resolve(\n\t\t\t\tattempt < this.options.attempts && this.options.shouldRetry(response),\n\t\t\t);\n\t\t}\n\t\treturn Promise.resolve(attempt < this.options.attempts);\n\t}\n\n\tgetDelay(attempt: number): number {\n\t\tconst delay = Math.min(\n\t\t\tthis.options.maxDelay,\n\t\t\tthis.options.baseDelay * 2 ** attempt,\n\t\t);\n\t\treturn delay;\n\t}\n}\n\nexport function createRetryStrategy(options: RetryOptions): RetryStrategy {\n\tif (typeof options === \"number\") {\n\t\treturn new LinearRetryStrategy({\n\t\t\ttype: \"linear\",\n\t\t\tattempts: options,\n\t\t\tdelay: 1000,\n\t\t});\n\t}\n\n\tswitch (options.type) {\n\t\tcase \"linear\":\n\t\t\treturn new LinearRetryStrategy(options);\n\t\tcase \"exponential\":\n\t\t\treturn new ExponentialRetryStrategy(options);\n\t\tdefault:\n\t\t\tthrow new Error(\"Invalid retry strategy\");\n\t}\n}\n","import type { BetterFetchOption } from \"./types\";\n\nexport type typeOrTypeReturning<T> = T | (() => T);\n/**\n * Bearer token authentication\n *\n * the value of `token` will be added to a header as\n * `auth: Bearer token`,\n */\nexport type Bearer = {\n\ttype: \"Bearer\";\n\ttoken: typeOrTypeReturning<string | undefined | Promise<string | undefined>>;\n};\n\n/**\n * Basic auth\n */\nexport type Basic = {\n\ttype: \"Basic\";\n\tusername: typeOrTypeReturning<string | undefined>;\n\tpassword: typeOrTypeReturning<string | undefined>;\n};\n\n/**\n * Custom auth\n *\n * @param prefix - prefix of the header\n * @param value - value of the header\n *\n * @example\n * ```ts\n * {\n *  type: \"Custom\",\n *  prefix: \"Token\",\n *  value: \"token\"\n * }\n * ```\n */\nexport type Custom = {\n\ttype: \"Custom\";\n\tprefix: typeOrTypeReturning<string | undefined>;\n\tvalue: typeOrTypeReturning<string | undefined>;\n};\n\nexport type Auth = Bearer | Basic | Custom;\n\nexport const getAuthHeader = async (options?: BetterFetchOption) => {\n\tconst headers: Record<string, string> = {};\n\tconst getValue = async (\n\t\tvalue: typeOrTypeReturning<\n\t\t\tstring | undefined | Promise<string | undefined>\n\t\t>,\n\t) => (typeof value === \"function\" ? await value() : value);\n\tif (options?.auth) {\n\t\tif (options.auth.type === \"Bearer\") {\n\t\t\tconst token = await getValue(options.auth.token);\n\t\t\tif (!token) {\n\t\t\t\treturn headers;\n\t\t\t}\n\t\t\theaders[\"authorization\"] = `Bearer ${token}`;\n\t\t} else if (options.auth.type === \"Basic\") {\n\t\t\tconst username = getValue(options.auth.username);\n\t\t\tconst password = getValue(options.auth.password);\n\t\t\tif (!username || !password) {\n\t\t\t\treturn headers;\n\t\t\t}\n\t\t\theaders[\"authorization\"] = `Basic ${btoa(`${username}:${password}`)}`;\n\t\t} else if (options.auth.type === \"Custom\") {\n\t\t\tconst value = getValue(options.auth.value);\n\t\t\tif (!value) {\n\t\t\t\treturn headers;\n\t\t\t}\n\t\t\theaders[\"authorization\"] = `${getValue(options.auth.prefix)} ${value}`;\n\t\t}\n\t}\n\treturn headers;\n};\n","import type { StandardSchemaV1 } from \"./standard-schema\";\nimport { getAuthHeader } from \"./auth\";\nimport { methods } from \"./create-fetch\";\nimport type { BetterFetchOption, FetchEsque } from \"./types\";\n\nconst JSON_RE = /^application\\/(?:[\\w!#$%&*.^`~-]*\\+)?json(;.+)?$/i;\n\nexport type ResponseType = \"json\" | \"text\" | \"blob\";\nexport function detectResponseType(request: Response): ResponseType {\n\tconst _contentType = request.headers.get(\"content-type\");\n\tconst textTypes = new Set([\n\t\t\"image/svg\",\n\t\t\"application/xml\",\n\t\t\"application/xhtml\",\n\t\t\"application/html\",\n\t]);\n\tif (!_contentType) {\n\t\treturn \"json\";\n\t}\n\tconst contentType = _contentType.split(\";\").shift() || \"\";\n\tif (JSON_RE.test(contentType)) {\n\t\treturn \"json\";\n\t}\n\tif (textTypes.has(contentType) || contentType.startsWith(\"text/\")) {\n\t\treturn \"text\";\n\t}\n\treturn \"blob\";\n}\n\nexport function isJSONParsable(value: any) {\n\ttry {\n\t\tJSON.parse(value);\n\t\treturn true;\n\t} catch (error) {\n\t\treturn false;\n\t}\n}\n\n//https://github.com/unjs/ofetch/blob/main/src/utils.ts\nexport function isJSONSerializable(value: any) {\n\tif (value === undefined) {\n\t\treturn false;\n\t}\n\tconst t = typeof value;\n\tif (t === \"string\" || t === \"number\" || t === \"boolean\" || t === null) {\n\t\treturn true;\n\t}\n\tif (t !== \"object\") {\n\t\treturn false;\n\t}\n\tif (Array.isArray(value)) {\n\t\treturn true;\n\t}\n\tif (value.buffer) {\n\t\treturn false;\n\t}\n\treturn (\n\t\t(value.constructor && value.constructor.name === \"Object\") ||\n\t\ttypeof value.toJSON === \"function\"\n\t);\n}\n\nexport function jsonParse(text: string) {\n\ttry {\n\t\treturn JSON.parse(text);\n\t} catch (error) {\n\t\treturn text;\n\t}\n}\n\nexport function isFunction(value: any): value is () => any {\n\treturn typeof value === \"function\";\n}\n\nexport function getFetch(options?: BetterFetchOption): FetchEsque {\n\tif (options?.customFetchImpl) {\n\t\treturn options.customFetchImpl;\n\t}\n\tif (typeof globalThis !== \"undefined\" && isFunction(globalThis.fetch)) {\n\t\treturn globalThis.fetch;\n\t}\n\tif (typeof window !== \"undefined\" && isFunction(window.fetch)) {\n\t\treturn window.fetch;\n\t}\n\tthrow new Error(\"No fetch implementation found\");\n}\n\nexport function isPayloadMethod(method?: string) {\n\tif (!method) {\n\t\treturn false;\n\t}\n\tconst payloadMethod = [\"POST\", \"PUT\", \"PATCH\", \"DELETE\"];\n\treturn payloadMethod.includes(method.toUpperCase());\n}\n\nexport function isRouteMethod(method?: string) {\n\tconst routeMethod = [\"GET\", \"POST\", \"PUT\", \"PATCH\", \"DELETE\"];\n\tif (!method) {\n\t\treturn false;\n\t}\n\treturn routeMethod.includes(method.toUpperCase());\n}\n\nexport async function getHeaders(opts?: BetterFetchOption) {\n\tconst headers = new Headers(opts?.headers);\n\tconst authHeader = await getAuthHeader(opts);\n\tfor (const [key, value] of Object.entries(authHeader || {})) {\n\t\theaders.set(key, value);\n\t}\n\tif (!headers.has(\"content-type\")) {\n\t\tconst t = detectContentType(opts?.body);\n\t\tif (t) {\n\t\t\theaders.set(\"content-type\", t);\n\t\t}\n\t}\n\n\treturn headers;\n}\n\nexport function getURL(url: string, options?: BetterFetchOption) {\n\tif (url.startsWith(\"@\")) {\n\t\tconst m = url.toString().split(\"@\")[1].split(\"/\")[0];\n\t\tif (methods.includes(m)) {\n\t\t\turl = url.replace(`@${m}/`, \"/\");\n\t\t}\n\t}\n\tlet _url: string | URL;\n\ttry {\n\t\tif (url.startsWith(\"http\")) {\n\t\t\t_url = url;\n\t\t} else {\n\t\t\tlet baseURL = options?.baseURL;\n\t\t\tif (baseURL && !baseURL?.endsWith(\"/\")) {\n\t\t\t\tbaseURL = baseURL + \"/\";\n\t\t\t}\n\t\t\tif (url.startsWith(\"/\")) {\n\t\t\t\t_url = new URL(url.substring(1), baseURL);\n\t\t\t} else {\n\t\t\t\t_url = new URL(url, options?.baseURL);\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tif (e instanceof TypeError) {\n\t\t\tif (!options?.baseURL) {\n\t\t\t\tthrow TypeError(\n\t\t\t\t\t`Invalid URL ${url}. Are you passing in a relative url but not setting the baseURL?`,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow TypeError(\n\t\t\t\t`Invalid URL ${url}. Please validate that you are passing the correct input.`,\n\t\t\t);\n\t\t}\n\t\tthrow e;\n\t}\n\n\t/**\n\t * Dynamic Parameters.\n\t */\n\tif (options?.params) {\n\t\tif (Array.isArray(options?.params)) {\n\t\t\tconst params = options?.params\n\t\t\t\t? Array.isArray(options.params)\n\t\t\t\t\t? `/${options.params.join(\"/\")}`\n\t\t\t\t\t: `/${Object.values(options.params).join(\"/\")}`\n\t\t\t\t: \"\";\n\t\t\t_url = _url.toString().split(\"/:\")[0];\n\t\t\t_url = `${_url.toString()}${params}`;\n\t\t} else {\n\t\t\tfor (const [key, value] of Object.entries(options?.params)) {\n\t\t\t\t_url = _url.toString().replace(`:${key}`, String(value));\n\t\t\t}\n\t\t}\n\t}\n\tconst __url = new URL(_url);\n\t/**\n\t * Query Parameters\n\t */\n\tconst queryParams = options?.query;\n\tif (queryParams) {\n\t\tfor (const [key, value] of Object.entries(queryParams)) {\n\t\t\t__url.searchParams.append(key, String(value));\n\t\t}\n\t}\n\treturn __url;\n}\n\nexport function detectContentType(body: any) {\n\tif (isJSONSerializable(body)) {\n\t\treturn \"application/json\";\n\t}\n\n\treturn null;\n}\n\nexport function getBody(options?: BetterFetchOption) {\n\tif (!options?.body) {\n\t\treturn null;\n\t}\n\tconst headers = new Headers(options?.headers);\n\tif (isJSONSerializable(options.body) && !headers.has(\"content-type\")) {\n\t\tfor (const [key, value] of Object.entries(options?.body)) {\n\t\t\tif (value instanceof Date) {\n\t\t\t\toptions.body[key] = value.toISOString();\n\t\t\t}\n\t\t}\n\t\treturn JSON.stringify(options.body);\n\t}\n\n\treturn options.body;\n}\n\nexport function getMethod(url: string, options?: BetterFetchOption) {\n\tif (options?.method) {\n\t\treturn options.method.toUpperCase();\n\t}\n\tif (url.startsWith(\"@\")) {\n\t\tconst pMethod = url.split(\"@\")[1]?.split(\"/\")[0];\n\t\tif (!methods.includes(pMethod)) {\n\t\t\treturn options?.body ? \"POST\" : \"GET\";\n\t\t}\n\t\treturn pMethod.toUpperCase();\n\t}\n\treturn options?.body ? \"POST\" : \"GET\";\n}\n\nexport function getTimeout(\n\toptions?: BetterFetchOption,\n\tcontroller?: AbortController,\n) {\n\tlet abortTimeout: ReturnType<typeof setTimeout> | undefined;\n\tif (!options?.signal && options?.timeout) {\n\t\tabortTimeout = setTimeout(() => controller?.abort(), options?.timeout);\n\t}\n\treturn {\n\t\tabortTimeout,\n\t\tclearTimeout: () => {\n\t\t\tif (abortTimeout) {\n\t\t\t\tclearTimeout(abortTimeout);\n\t\t\t}\n\t\t},\n\t};\n}\n\nexport function bodyParser(data: any, responseType: ResponseType) {\n\tif (responseType === \"json\") {\n\t\treturn JSON.parse(data);\n\t}\n\treturn data;\n}\n\nexport class ValidationError extends Error {\n\tpublic readonly issues: ReadonlyArray<StandardSchemaV1.Issue>;\n\n\tconstructor(issues: ReadonlyArray<StandardSchemaV1.Issue>, message?: string) {\n\t\t// Default message fallback in case one isn't supplied.\n\t\tsuper(message || JSON.stringify(issues, null, 2));\n\t\tthis.issues = issues;\n\n\t\t// Set the prototype explicitly to ensure that instanceof works correctly.\n\t\tObject.setPrototypeOf(this, ValidationError.prototype);\n\t}\n}\n\nexport async function parseStandardSchema<TSchema extends StandardSchemaV1>(\n\tschema: TSchema,\n\tinput: StandardSchemaV1.InferInput<TSchema>,\n): Promise<StandardSchemaV1.InferOutput<TSchema>> {\n\tlet result = await schema[\"~standard\"].validate(input);\n\n\tif (result.issues) {\n\t\tthrow new ValidationError(result.issues);\n\t}\n\treturn result.value;\n}\n","import type { StandardSchemaV1 } from \"../standard-schema\";\nimport type { StringLiteralUnion } from \"../type-utils\";\n\nexport type FetchSchema = {\n\tinput?: StandardSchemaV1;\n\toutput?: StandardSchemaV1;\n\tquery?: StandardSchemaV1;\n\tparams?: StandardSchemaV1<Record<string, unknown>> | undefined;\n\tmethod?: Methods;\n};\n\nexport type Methods = \"get\" | \"post\" | \"put\" | \"patch\" | \"delete\";\n\nexport const methods = [\"get\", \"post\", \"put\", \"patch\", \"delete\"];\n\ntype RouteKey = StringLiteralUnion<`@${Methods}/`>;\n\nexport type FetchSchemaRoutes = {\n\t[key in RouteKey]?: FetchSchema;\n};\n\nexport const createSchema = <\n\tF extends FetchSchemaRoutes,\n\tS extends SchemaConfig,\n>(\n\tschema: F,\n\tconfig?: S,\n) => {\n\treturn {\n\t\tschema: schema as F,\n\t\tconfig: config as S,\n\t};\n};\n\nexport type SchemaConfig = {\n\tstrict?: boolean;\n\t/**\n\t * A prefix that will be prepended when it's\n\t * calling the schema.\n\t *\n\t * NOTE: Make sure to handle converting\n\t * the prefix to the baseURL in the init\n\t * function if you you are defining for a\n\t * plugin.\n\t */\n\tprefix?: \"\" | (string & Record<never, never>);\n\t/**\n\t * The base url of the schema. By default it's the baseURL of the fetch instance.\n\t */\n\tbaseURL?: \"\" | (string & Record<never, never>);\n};\n\nexport type Schema = {\n\tschema: FetchSchemaRoutes;\n\tconfig: SchemaConfig;\n};\n","import { betterFetch } from \"../fetch\";\nimport { BetterFetchPlugin } from \"../plugins\";\nimport type { BetterFetchOption } from \"../types\";\nimport { parseStandardSchema } from \"../utils\";\nimport type { BetterFetch, CreateFetchOption } from \"./types\";\n\nexport const applySchemaPlugin = (config: CreateFetchOption) =>\n\t({\n\t\tid: \"apply-schema\",\n\t\tname: \"Apply Schema\",\n\t\tversion: \"1.0.0\",\n\t\tasync init(url, options) {\n\t\t\tconst schema =\n\t\t\t\tconfig.plugins?.find((plugin) =>\n\t\t\t\t\tplugin.schema?.config\n\t\t\t\t\t\t? url.startsWith(plugin.schema.config.baseURL || \"\") ||\n\t\t\t\t\t\t\turl.startsWith(plugin.schema.config.prefix || \"\")\n\t\t\t\t\t\t: false,\n\t\t\t\t)?.schema || config.schema;\n\t\t\tif (schema) {\n\t\t\t\tlet urlKey = url;\n\t\t\t\tif (schema.config?.prefix) {\n\t\t\t\t\tif (urlKey.startsWith(schema.config.prefix)) {\n\t\t\t\t\t\turlKey = urlKey.replace(schema.config.prefix, \"\");\n\t\t\t\t\t\tif (schema.config.baseURL) {\n\t\t\t\t\t\t\turl = url.replace(schema.config.prefix, schema.config.baseURL);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (schema.config?.baseURL) {\n\t\t\t\t\tif (urlKey.startsWith(schema.config.baseURL)) {\n\t\t\t\t\t\turlKey = urlKey.replace(schema.config.baseURL, \"\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst keySchema = schema.schema[urlKey];\n\t\t\t\tif (keySchema) {\n\t\t\t\t\tlet opts = {\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\tmethod: keySchema.method,\n\t\t\t\t\t\toutput: keySchema.output,\n\t\t\t\t\t};\n\t\t\t\t\tif (!options?.disableValidation) {\n\t\t\t\t\t\topts = {\n\t\t\t\t\t\t\t...opts,\n\t\t\t\t\t\t\tbody: keySchema.input\n\t\t\t\t\t\t\t\t? await parseStandardSchema(keySchema.input, options?.body)\n\t\t\t\t\t\t\t\t: options?.body,\n\t\t\t\t\t\t\tparams: keySchema.params\n\t\t\t\t\t\t\t\t? await parseStandardSchema(keySchema.params, options?.params)\n\t\t\t\t\t\t\t\t: options?.params,\n\t\t\t\t\t\t\tquery: keySchema.query\n\t\t\t\t\t\t\t\t? await parseStandardSchema(keySchema.query, options?.query)\n\t\t\t\t\t\t\t\t: options?.query,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\turl,\n\t\t\t\t\t\toptions: opts,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\turl,\n\t\t\t\toptions,\n\t\t\t};\n\t\t},\n\t}) satisfies BetterFetchPlugin;\n\nexport const createFetch = <Option extends CreateFetchOption>(\n\tconfig?: Option,\n) => {\n\tasync function $fetch(url: string, options?: BetterFetchOption) {\n\t\tconst opts = {\n\t\t\t...config,\n\t\t\t...options,\n\t\t\tplugins: [...(config?.plugins || []), applySchemaPlugin(config || {})],\n\t\t} as BetterFetchOption;\n\n\t\tif (config?.catchAllError) {\n\t\t\ttry {\n\t\t\t\treturn await betterFetch(url, opts);\n\t\t\t} catch (error) {\n\t\t\t\treturn {\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: {\n\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\tstatusText: \"Fetch Error\",\n\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\"Fetch related error. Captured by catchAllError option. See error property for more details.\",\n\t\t\t\t\t\terror,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn await betterFetch(url, opts);\n\t}\n\treturn $fetch as BetterFetch<Option>;\n};\n\nexport * from \"./schema\";\nexport * from \"./types\";\n","import { methods } from \"./create-fetch\";\nimport { BetterFetchOption } from \"./types\";\n\n/**\n * Normalize URL\n */\nexport function getURL(url: string, option?: BetterFetchOption) {\n\tlet { baseURL, params, query } = option || {\n\t\tquery: {},\n\t\tparams: {},\n\t\tbaseURL: \"\",\n\t};\n\tlet basePath = url.startsWith(\"http\")\n\t\t? url.split(\"/\").slice(0, 3).join(\"/\")\n\t\t: baseURL || \"\";\n\n\t/**\n\t * Remove method modifiers\n\t */\n\tif (url.startsWith(\"@\")) {\n\t\tconst m = url.toString().split(\"@\")[1].split(\"/\")[0];\n\t\tif (methods.includes(m)) {\n\t\t\turl = url.replace(`@${m}/`, \"/\");\n\t\t}\n\t}\n\n\tif (!basePath.endsWith(\"/\")) basePath += \"/\";\n\tlet [path, urlQuery] = url.replace(basePath, \"\").split(\"?\");\n\tconst queryParams = new URLSearchParams(urlQuery);\n\tfor (const [key, value] of Object.entries(query || {})) {\n\t\tif (value == null) continue;\n\t\tqueryParams.set(key, String(value));\n\t}\n\tif (params) {\n\t\tif (Array.isArray(params)) {\n\t\t\tconst paramPaths = path.split(\"/\").filter((p) => p.startsWith(\":\"));\n\t\t\tfor (const [index, key] of paramPaths.entries()) {\n\t\t\t\tconst value = params[index];\n\t\t\t\tpath = path.replace(key, value);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const [key, value] of Object.entries(params)) {\n\t\t\t\tpath = path.replace(`:${key}`, String(value));\n\t\t\t}\n\t\t}\n\t}\n\n\tpath = path.split(\"/\").map(encodeURIComponent).join(\"/\");\n\tif (path.startsWith(\"/\")) path = path.slice(1);\n\tlet queryParamString = queryParams.toString();\n\tqueryParamString =\n\t\tqueryParamString.length > 0 ? `?${queryParamString}`.replace(/\\+/g, \"%20\") : \"\";\n\tif (!basePath.startsWith(\"http\")) {\n\t\treturn `${basePath}${path}${queryParamString}`;\n\t}\n\tconst _url = new URL(`${path}${queryParamString}`, basePath);\n\treturn _url;\n}\n","import type { StandardSchemaV1 } from \"./standard-schema\";\nimport { BetterFetchError } from \"./error\";\nimport { initializePlugins } from \"./plugins\";\nimport { createRetryStrategy } from \"./retry\";\nimport type { BetterFetchOption, BetterFetchResponse } from \"./types\";\nimport { getURL } from \"./url\";\nimport {\n\tdetectResponseType,\n\tgetBody,\n\tgetFetch,\n\tgetHeaders,\n\tgetMethod,\n\tgetTimeout,\n\tisJSONParsable,\n\tjsonParse,\n\tparseStandardSchema,\n} from \"./utils\";\n\nexport const betterFetch = async <\n\tTRes extends Option[\"output\"] extends StandardSchemaV1\n\t\t? StandardSchemaV1.InferOutput<Option[\"output\"]>\n\t\t: unknown,\n\tTErr = unknown,\n\tOption extends BetterFetchOption = BetterFetchOption<any, any, any, TRes>,\n>(\n\turl: string,\n\toptions?: Option,\n): Promise<\n\tBetterFetchResponse<\n\t\tTRes,\n\t\tTErr,\n\t\tOption[\"throw\"] extends true ? true : TErr extends false ? true : false\n\t>\n> => {\n\tconst {\n\t\thooks,\n\t\turl: __url,\n\t\toptions: opts,\n\t} = await initializePlugins(url, options);\n\tconst fetch = getFetch(opts);\n\tconst controller = new AbortController();\n\tconst signal = opts.signal ?? controller.signal;\n\tconst _url = getURL(__url, opts);\n\tconst body = getBody(opts);\n\tconst headers = await getHeaders(opts);\n\tconst method = getMethod(__url, opts);\n\tlet context = {\n\t\t...opts,\n\t\turl: _url,\n\t\theaders,\n\t\tbody,\n\t\tmethod,\n\t\tsignal,\n\t};\n\t/**\n\t * Run all on request hooks\n\t */\n\tfor (const onRequest of hooks.onRequest) {\n\t\tif (onRequest) {\n\t\t\tconst res = await onRequest(context);\n\t\t\tif (res instanceof Object) {\n\t\t\t\tcontext = res;\n\t\t\t}\n\t\t}\n\t}\n\tif (\n\t\t(\"pipeTo\" in (context as any) &&\n\t\t\ttypeof (context as any).pipeTo === \"function\") ||\n\t\ttypeof options?.body?.pipe === \"function\"\n\t) {\n\t\tif (!(\"duplex\" in context)) {\n\t\t\tcontext.duplex = \"half\";\n\t\t}\n\t}\n\n\tconst { clearTimeout } = getTimeout(opts, controller);\n\tlet response = await fetch(context.url, context);\n\tclearTimeout();\n\n\tconst responseContext = {\n\t\tresponse,\n\t\trequest: context,\n\t};\n\n\tfor (const onResponse of hooks.onResponse) {\n\t\tif (onResponse) {\n\t\t\tconst r = await onResponse({\n\t\t\t\t...responseContext,\n\t\t\t\tresponse: options?.hookOptions?.cloneResponse\n\t\t\t\t\t? response.clone()\n\t\t\t\t\t: response,\n\t\t\t});\n\t\t\tif (r instanceof Response) {\n\t\t\t\tresponse = r;\n\t\t\t} else if (r instanceof Object) {\n\t\t\t\tresponse = r.response;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * OK Branch\n\t */\n\tif (response.ok) {\n\t\tconst hasBody = context.method !== \"HEAD\";\n\t\tif (!hasBody) {\n\t\t\treturn {\n\t\t\t\tdata: \"\" as any,\n\t\t\t\terror: null,\n\t\t\t} as any;\n\t\t}\n\t\tconst responseType = detectResponseType(response);\n\t\tconst successContext = {\n\t\t\tdata: \"\" as any,\n\t\t\tresponse,\n\t\t\trequest: context,\n\t\t};\n\t\tif (responseType === \"json\" || responseType === \"text\") {\n\t\t\tconst text = await response.text();\n\t\t\tconst parser = context.jsonParser ?? jsonParse;\n\t\t\tconst data = await parser(text);\n\t\t\tsuccessContext.data = data;\n\t\t} else {\n\t\t\tsuccessContext.data = await response[responseType]();\n\t\t}\n\n\t\t/**\n\t\t * Parse the data if the output schema is defined\n\t\t */\n\t\tif (context?.output) {\n\t\t\tif (context.output && !context.disableValidation) {\n\t\t\t\tsuccessContext.data = await parseStandardSchema(\n\t\t\t\t\tcontext.output as StandardSchemaV1,\n\t\t\t\t\tsuccessContext.data,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tfor (const onSuccess of hooks.onSuccess) {\n\t\t\tif (onSuccess) {\n\t\t\t\tawait onSuccess({\n\t\t\t\t\t...successContext,\n\t\t\t\t\tresponse: options?.hookOptions?.cloneResponse\n\t\t\t\t\t\t? response.clone()\n\t\t\t\t\t\t: response,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (options?.throw) {\n\t\t\treturn successContext.data as any;\n\t\t}\n\n\t\treturn {\n\t\t\tdata: successContext.data,\n\t\t\terror: null,\n\t\t} as any;\n\t}\n\tconst parser = options?.jsonParser ?? jsonParse;\n\tconst responseText = await response.text();\n\tconst isJSONResponse = isJSONParsable(responseText);\n\tconst errorObject = isJSONResponse ? await parser(responseText) : null;\n\t/**\n\t * Error Branch\n\t */\n\tconst errorContext = {\n\t\tresponse,\n\t\tresponseText,\n\t\trequest: context,\n\t\terror: {\n\t\t\t...errorObject,\n\t\t\tstatus: response.status,\n\t\t\tstatusText: response.statusText,\n\t\t},\n\t};\n\tfor (const onError of hooks.onError) {\n\t\tif (onError) {\n\t\t\tawait onError({\n\t\t\t\t...errorContext,\n\t\t\t\tresponse: options?.hookOptions?.cloneResponse\n\t\t\t\t\t? response.clone()\n\t\t\t\t\t: response,\n\t\t\t});\n\t\t}\n\t}\n\n\tif (options?.retry) {\n\t\tconst retryStrategy = createRetryStrategy(options.retry);\n\t\tconst _retryAttempt = options.retryAttempt ?? 0;\n\t\tif (await retryStrategy.shouldAttemptRetry(_retryAttempt, response)) {\n\t\t\tfor (const onRetry of hooks.onRetry) {\n\t\t\t\tif (onRetry) {\n\t\t\t\t\tawait onRetry(responseContext);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst delay = retryStrategy.getDelay(_retryAttempt);\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, delay));\n\t\t\treturn await betterFetch(url, {\n\t\t\t\t...options,\n\t\t\t\tretryAttempt: _retryAttempt + 1,\n\t\t\t});\n\t\t}\n\t}\n\n\tif (options?.throw) {\n\t\tthrow new BetterFetchError(\n\t\t\tresponse.status,\n\t\t\tresponse.statusText,\n\t\t\tisJSONResponse ? errorObject : responseText,\n\t\t);\n\t}\n\treturn {\n\t\tdata: null,\n\t\terror: {\n\t\t\t...errorObject,\n\t\t\tstatus: response.status,\n\t\t\tstatusText: response.statusText,\n\t\t},\n\t} as any;\n};\n"],"names":["_a","getURL","getURL","clearTimeout","parser"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,IAAM,mBAAN,cAA+B,MAAM;IAC3C,YACQ,MAAA,EACA,UAAA,EACA,KAAA,CACN;QACD,KAAA,CAAM,cAAc,OAAO,QAAA,CAAS,GAAG;YACtC,OAAO;QACR,CAAC;QANM,IAAA,CAAA,MAAA,GAAA;QACA,IAAA,CAAA,UAAA,GAAA;QACA,IAAA,CAAA,KAAA,GAAA;IAKR;AACD;;AC2HO,IAAM,oBAAoB,OAChC,KACA,YACI;IAxIL,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA;IAyIC,IAAI,OAAO,WAAW,CAAC;IACvB,MAAM,QAMF;QACH,WAAW;YAAC,WAAA,OAAA,KAAA,IAAA,QAAS,SAAS;SAAA;QAC9B,YAAY;YAAC,WAAA,OAAA,KAAA,IAAA,QAAS,UAAU;SAAA;QAChC,WAAW;YAAC,WAAA,OAAA,KAAA,IAAA,QAAS,SAAS;SAAA;QAC9B,SAAS;YAAC,WAAA,OAAA,KAAA,IAAA,QAAS,OAAO;SAAA;QAC1B,SAAS;YAAC,WAAA,OAAA,KAAA,IAAA,QAAS,OAAO;SAAA;IAC3B;IACA,IAAI,CAAC,WAAW,CAAA,CAAC,WAAA,OAAA,KAAA,IAAA,QAAS,OAAA,GAAS;QAClC,OAAO;YACN;YACA,SAAS;YACT;QACD;IACD;IACA,KAAA,MAAW,UAAA,CAAU,WAAA,OAAA,KAAA,IAAA,QAAS,OAAA,KAAW,CAAC,CAAA,CAAG;QAC5C,IAAI,OAAO,IAAA,EAAM;YAChB,MAAM,YAAY,MAAA,CAAA,CAAM,KAAA,OAAO,IAAA,KAAP,OAAA,KAAA,IAAA,GAAA,IAAA,CAAA,QAAc,IAAI,QAAA,CAAS,GAAG,QAAA;YACtD,OAAO,UAAU,OAAA,IAAW;YAC5B,MAAM,UAAU,GAAA;QACjB;QACA,MAAM,SAAA,CAAU,IAAA,CAAA,CAAK,KAAA,OAAO,KAAA,KAAP,OAAA,KAAA,IAAA,GAAc,SAAS;QAC5C,MAAM,UAAA,CAAW,IAAA,CAAA,CAAK,KAAA,OAAO,KAAA,KAAP,OAAA,KAAA,IAAA,GAAc,UAAU;QAC9C,MAAM,SAAA,CAAU,IAAA,CAAA,CAAK,KAAA,OAAO,KAAA,KAAP,OAAA,KAAA,IAAA,GAAc,SAAS;QAC5C,MAAM,OAAA,CAAQ,IAAA,CAAA,CAAK,KAAA,OAAO,KAAA,KAAP,OAAA,KAAA,IAAA,GAAc,OAAO;QACxC,MAAM,OAAA,CAAQ,IAAA,CAAA,CAAK,KAAA,OAAO,KAAA,KAAP,OAAA,KAAA,IAAA,GAAc,OAAO;IACzC;IAEA,OAAO;QACN;QACA,SAAS;QACT;IACD;AACD;;ACnJA,IAAM,sBAAN,MAAmD;IAClD,YAAoB,OAAA,CAAsB;QAAtB,IAAA,CAAA,OAAA,GAAA;IAAuB;IAE3C,mBACC,OAAA,EACA,QAAA,EACmB;QACnB,IAAI,IAAA,CAAK,OAAA,CAAQ,WAAA,EAAa;YAC7B,OAAO,QAAQ,OAAA,CACd,UAAU,IAAA,CAAK,OAAA,CAAQ,QAAA,IAAY,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,QAAQ;QAEtE;QACA,OAAO,QAAQ,OAAA,CAAQ,UAAU,IAAA,CAAK,OAAA,CAAQ,QAAQ;IACvD;IAEA,WAAmB;QAClB,OAAO,IAAA,CAAK,OAAA,CAAQ,KAAA;IACrB;AACD;AAEA,IAAM,2BAAN,MAAwD;IACvD,YAAoB,OAAA,CAA2B;QAA3B,IAAA,CAAA,OAAA,GAAA;IAA4B;IAEhD,mBACC,OAAA,EACA,QAAA,EACmB;QACnB,IAAI,IAAA,CAAK,OAAA,CAAQ,WAAA,EAAa;YAC7B,OAAO,QAAQ,OAAA,CACd,UAAU,IAAA,CAAK,OAAA,CAAQ,QAAA,IAAY,IAAA,CAAK,OAAA,CAAQ,WAAA,CAAY,QAAQ;QAEtE;QACA,OAAO,QAAQ,OAAA,CAAQ,UAAU,IAAA,CAAK,OAAA,CAAQ,QAAQ;IACvD;IAEA,SAAS,OAAA,EAAyB;QACjC,MAAM,QAAQ,KAAK,GAAA,CAClB,IAAA,CAAK,OAAA,CAAQ,QAAA,EACb,IAAA,CAAK,OAAA,CAAQ,SAAA,GAAY,KAAK;QAE/B,OAAO;IACR;AACD;AAEO,SAAS,oBAAoB,OAAA,EAAsC;IACzE,IAAI,OAAO,YAAY,UAAU;QAChC,OAAO,IAAI,oBAAoB;YAC9B,MAAM;YACN,UAAU;YACV,OAAO;QACR,CAAC;IACF;IAEA,OAAQ,QAAQ,IAAA,EAAM;QACrB,KAAK;YACJ,OAAO,IAAI,oBAAoB,OAAO;QACvC,KAAK;YACJ,OAAO,IAAI,yBAAyB,OAAO;QAC5C;YACC,MAAM,IAAI,MAAM,wBAAwB;IAC1C;AACD;;AC5CO,IAAM,gBAAgB,OAAO,YAAgC;IACnE,MAAM,UAAkC,CAAC;IACzC,MAAM,WAAW,OAChB,QAGK,OAAO,UAAU,aAAa,MAAM,MAAM,IAAI;IACpD,IAAI,WAAA,OAAA,KAAA,IAAA,QAAS,IAAA,EAAM;QAClB,IAAI,QAAQ,IAAA,CAAK,IAAA,KAAS,UAAU;YACnC,MAAM,QAAQ,MAAM,SAAS,QAAQ,IAAA,CAAK,KAAK;YAC/C,IAAI,CAAC,OAAO;gBACX,OAAO;YACR;YACA,OAAA,CAAQ,eAAe,CAAA,GAAI,CAAA,OAAA,EAAU,KAAK,EAAA;QAC3C,OAAA,IAAW,QAAQ,IAAA,CAAK,IAAA,KAAS,SAAS;YACzC,MAAM,WAAW,SAAS,QAAQ,IAAA,CAAK,QAAQ;YAC/C,MAAM,WAAW,SAAS,QAAQ,IAAA,CAAK,QAAQ;YAC/C,IAAI,CAAC,YAAY,CAAC,UAAU;gBAC3B,OAAO;YACR;YACA,OAAA,CAAQ,eAAe,CAAA,GAAI,CAAA,MAAA,EAAS,KAAK,GAAG,QAAQ,CAAA,CAAA,EAAI,QAAQ,EAAE,CAAC,EAAA;QACpE,OAAA,IAAW,QAAQ,IAAA,CAAK,IAAA,KAAS,UAAU;YAC1C,MAAM,QAAQ,SAAS,QAAQ,IAAA,CAAK,KAAK;YACzC,IAAI,CAAC,OAAO;gBACX,OAAO;YACR;YACA,OAAA,CAAQ,eAAe,CAAA,GAAI,GAAG,SAAS,QAAQ,IAAA,CAAK,MAAM,CAAC,CAAA,CAAA,EAAI,KAAK,EAAA;QACrE;IACD;IACA,OAAO;AACR;;ACvEA,IAAM,UAAU;AAGT,SAAS,mBAAmB,OAAA,EAAiC;IACnE,MAAM,eAAe,QAAQ,OAAA,CAAQ,GAAA,CAAI,cAAc;IACvD,MAAM,YAAY,aAAA,GAAA,IAAI,IAAI;QACzB;QACA;QACA;QACA;KACA;IACD,IAAI,CAAC,cAAc;QAClB,OAAO;IACR;IACA,MAAM,cAAc,aAAa,KAAA,CAAM,GAAG,EAAE,KAAA,CAAM,KAAK;IACvD,IAAI,QAAQ,IAAA,CAAK,WAAW,GAAG;QAC9B,OAAO;IACR;IACA,IAAI,UAAU,GAAA,CAAI,WAAW,KAAK,YAAY,UAAA,CAAW,OAAO,GAAG;QAClE,OAAO;IACR;IACA,OAAO;AACR;AAEO,SAAS,eAAe,KAAA,EAAY;IAC1C,IAAI;QACH,KAAK,KAAA,CAAM,KAAK;QAChB,OAAO;IACR,EAAA,OAAS,OAAO;QACf,OAAO;IACR;AACD;AAGO,SAAS,mBAAmB,KAAA,EAAY;IAC9C,IAAI,UAAU,KAAA,GAAW;QACxB,OAAO;IACR;IACA,MAAM,IAAI,OAAO;IACjB,IAAI,MAAM,YAAY,MAAM,YAAY,MAAM,aAAa,MAAM,MAAM;QACtE,OAAO;IACR;IACA,IAAI,MAAM,UAAU;QACnB,OAAO;IACR;IACA,IAAI,MAAM,OAAA,CAAQ,KAAK,GAAG;QACzB,OAAO;IACR;IACA,IAAI,MAAM,MAAA,EAAQ;QACjB,OAAO;IACR;IACA,OACE,MAAM,WAAA,IAAe,MAAM,WAAA,CAAY,IAAA,KAAS,YACjD,OAAO,MAAM,MAAA,KAAW;AAE1B;AAEO,SAAS,UAAU,IAAA,EAAc;IACvC,IAAI;QACH,OAAO,KAAK,KAAA,CAAM,IAAI;IACvB,EAAA,OAAS,OAAO;QACf,OAAO;IACR;AACD;AAEO,SAAS,WAAW,KAAA,EAAgC;IAC1D,OAAO,OAAO,UAAU;AACzB;AAEO,SAAS,SAAS,OAAA,EAAyC;IACjE,IAAI,WAAA,OAAA,KAAA,IAAA,QAAS,eAAA,EAAiB;QAC7B,OAAO,QAAQ,eAAA;IAChB;IACA,IAAI,OAAO,eAAe,eAAe,WAAW,WAAW,KAAK,GAAG;QACtE,OAAO,WAAW,KAAA;IACnB;IACA,IAAI,OAAO,2CAAW,eAAe,WAAW,OAAO,KAAK,GAAG;;IAG/D,MAAM,IAAI,MAAM,+BAA+B;AAChD;AAEO,SAAS,gBAAgB,MAAA,EAAiB;IAChD,IAAI,CAAC,QAAQ;QACZ,OAAO;IACR;IACA,MAAM,gBAAgB;QAAC;QAAQ;QAAO;QAAS,QAAQ;KAAA;IACvD,OAAO,cAAc,QAAA,CAAS,OAAO,WAAA,CAAY,CAAC;AACnD;AAEO,SAAS,cAAc,MAAA,EAAiB;IAC9C,MAAM,cAAc;QAAC;QAAO;QAAQ;QAAO;QAAS,QAAQ;KAAA;IAC5D,IAAI,CAAC,QAAQ;QACZ,OAAO;IACR;IACA,OAAO,YAAY,QAAA,CAAS,OAAO,WAAA,CAAY,CAAC;AACjD;AAEA,eAAsB,WAAW,IAAA,EAA0B;IAC1D,MAAM,UAAU,IAAI,QAAQ,QAAA,OAAA,KAAA,IAAA,KAAM,OAAO;IACzC,MAAM,aAAa,MAAM,cAAc,IAAI;IAC3C,KAAA,MAAW,CAAC,KAAK,KAAK,CAAA,IAAK,OAAO,OAAA,CAAQ,cAAc,CAAC,CAAC,EAAG;QAC5D,QAAQ,GAAA,CAAI,KAAK,KAAK;IACvB;IACA,IAAI,CAAC,QAAQ,GAAA,CAAI,cAAc,GAAG;QACjC,MAAM,IAAI,kBAAkB,QAAA,OAAA,KAAA,IAAA,KAAM,IAAI;QACtC,IAAI,GAAG;YACN,QAAQ,GAAA,CAAI,gBAAgB,CAAC;QAC9B;IACD;IAEA,OAAO;AACR;AAEO,SAAS,OAAO,GAAA,EAAa,OAAA,EAA6B;IAChE,IAAI,IAAI,UAAA,CAAW,GAAG,GAAG;QACxB,MAAM,IAAI,IAAI,QAAA,CAAS,EAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA;QACnD,IAAI,QAAQ,QAAA,CAAS,CAAC,GAAG;YACxB,MAAM,IAAI,OAAA,CAAQ,CAAA,CAAA,EAAI,CAAC,CAAA,CAAA,CAAA,EAAK,GAAG;QAChC;IACD;IACA,IAAI;IACJ,IAAI;QACH,IAAI,IAAI,UAAA,CAAW,MAAM,GAAG;YAC3B,OAAO;QACR,OAAO;YACN,IAAI,UAAU,WAAA,OAAA,KAAA,IAAA,QAAS,OAAA;YACvB,IAAI,WAAW,CAAA,CAAC,WAAA,OAAA,KAAA,IAAA,QAAS,QAAA,CAAS,IAAA,GAAM;gBACvC,UAAU,UAAU;YACrB;YACA,IAAI,IAAI,UAAA,CAAW,GAAG,GAAG;gBACxB,OAAO,IAAI,IAAI,IAAI,SAAA,CAAU,CAAC,GAAG,OAAO;YACzC,OAAO;gBACN,OAAO,IAAI,IAAI,KAAK,WAAA,OAAA,KAAA,IAAA,QAAS,OAAO;YACrC;QACD;IACD,EAAA,OAAS,GAAG;QACX,IAAI,aAAa,WAAW;YAC3B,IAAI,CAAA,CAAC,WAAA,OAAA,KAAA,IAAA,QAAS,OAAA,GAAS;gBACtB,MAAM,UACL,CAAA,YAAA,EAAe,GAAG,CAAA,gEAAA,CAAA;YAEpB;YACA,MAAM,UACL,CAAA,YAAA,EAAe,GAAG,CAAA,yDAAA,CAAA;QAEpB;QACA,MAAM;IACP;IAKA,IAAI,WAAA,OAAA,KAAA,IAAA,QAAS,MAAA,EAAQ;QACpB,IAAI,MAAM,OAAA,CAAQ,WAAA,OAAA,KAAA,IAAA,QAAS,MAAM,GAAG;YACnC,MAAM,SAAA,CAAS,WAAA,OAAA,KAAA,IAAA,QAAS,MAAA,IACrB,MAAM,OAAA,CAAQ,QAAQ,MAAM,IAC3B,CAAA,CAAA,EAAI,QAAQ,MAAA,CAAO,IAAA,CAAK,GAAG,CAAC,EAAA,GAC5B,CAAA,CAAA,EAAI,OAAO,MAAA,CAAO,QAAQ,MAAM,EAAE,IAAA,CAAK,GAAG,CAAC,EAAA,GAC5C;YACH,OAAO,KAAK,QAAA,CAAS,EAAE,KAAA,CAAM,IAAI,CAAA,CAAE,CAAC,CAAA;YACpC,OAAO,GAAG,KAAK,QAAA,CAAS,CAAC,GAAG,MAAM,EAAA;QACnC,OAAO;YACN,KAAA,MAAW,CAAC,KAAK,KAAK,CAAA,IAAK,OAAO,OAAA,CAAQ,WAAA,OAAA,KAAA,IAAA,QAAS,MAAM,EAAG;gBAC3D,OAAO,KAAK,QAAA,CAAS,EAAE,OAAA,CAAQ,CAAA,CAAA,EAAI,GAAG,EAAA,EAAI,OAAO,KAAK,CAAC;YACxD;QACD;IACD;IACA,MAAM,QAAQ,IAAI,IAAI,IAAI;IAI1B,MAAM,cAAc,WAAA,OAAA,KAAA,IAAA,QAAS,KAAA;IAC7B,IAAI,aAAa;QAChB,KAAA,MAAW,CAAC,KAAK,KAAK,CAAA,IAAK,OAAO,OAAA,CAAQ,WAAW,EAAG;YACvD,MAAM,YAAA,CAAa,MAAA,CAAO,KAAK,OAAO,KAAK,CAAC;QAC7C;IACD;IACA,OAAO;AACR;AAEO,SAAS,kBAAkB,IAAA,EAAW;IAC5C,IAAI,mBAAmB,IAAI,GAAG;QAC7B,OAAO;IACR;IAEA,OAAO;AACR;AAEO,SAAS,QAAQ,OAAA,EAA6B;IACpD,IAAI,CAAA,CAAC,WAAA,OAAA,KAAA,IAAA,QAAS,IAAA,GAAM;QACnB,OAAO;IACR;IACA,MAAM,UAAU,IAAI,QAAQ,WAAA,OAAA,KAAA,IAAA,QAAS,OAAO;IAC5C,IAAI,mBAAmB,QAAQ,IAAI,KAAK,CAAC,QAAQ,GAAA,CAAI,cAAc,GAAG;QACrE,KAAA,MAAW,CAAC,KAAK,KAAK,CAAA,IAAK,OAAO,OAAA,CAAQ,WAAA,OAAA,KAAA,IAAA,QAAS,IAAI,EAAG;YACzD,IAAI,iBAAiB,MAAM;gBAC1B,QAAQ,IAAA,CAAK,GAAG,CAAA,GAAI,MAAM,WAAA,CAAY;YACvC;QACD;QACA,OAAO,KAAK,SAAA,CAAU,QAAQ,IAAI;IACnC;IAEA,OAAO,QAAQ,IAAA;AAChB;AAEO,SAAS,UAAU,GAAA,EAAa,OAAA,EAA6B;IAnNpE,IAAA;IAoNC,IAAI,WAAA,OAAA,KAAA,IAAA,QAAS,MAAA,EAAQ;QACpB,OAAO,QAAQ,MAAA,CAAO,WAAA,CAAY;IACnC;IACA,IAAI,IAAI,UAAA,CAAW,GAAG,GAAG;QACxB,MAAM,UAAA,CAAU,KAAA,IAAI,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,KAAhB,OAAA,KAAA,IAAA,GAAmB,KAAA,CAAM,IAAA,CAAK,EAAA;QAC9C,IAAI,CAAC,QAAQ,QAAA,CAAS,OAAO,GAAG;YAC/B,OAAA,CAAO,WAAA,OAAA,KAAA,IAAA,QAAS,IAAA,IAAO,SAAS;QACjC;QACA,OAAO,QAAQ,WAAA,CAAY;IAC5B;IACA,OAAA,CAAO,WAAA,OAAA,KAAA,IAAA,QAAS,IAAA,IAAO,SAAS;AACjC;AAEO,SAAS,WACf,OAAA,EACA,UAAA,EACC;IACD,IAAI;IACJ,IAAI,CAAA,CAAC,WAAA,OAAA,KAAA,IAAA,QAAS,MAAA,KAAA,CAAU,WAAA,OAAA,KAAA,IAAA,QAAS,OAAA,GAAS;QACzC,eAAe,WAAW,IAAM,cAAA,OAAA,KAAA,IAAA,WAAY,KAAA,IAAS,WAAA,OAAA,KAAA,IAAA,QAAS,OAAO;IACtE;IACA,OAAO;QACN;QACA,cAAc,MAAM;YACnB,IAAI,cAAc;gBACjB,aAAa,YAAY;YAC1B;QACD;IACD;AACD;AAEO,SAAS,WAAW,IAAA,EAAW,YAAA,EAA4B;IACjE,IAAI,iBAAiB,QAAQ;QAC5B,OAAO,KAAK,KAAA,CAAM,IAAI;IACvB;IACA,OAAO;AACR;AAEO,IAAM,kBAAN,MAAM,yBAAwB,MAAM;IAG1C,YAAY,MAAA,EAA+C,OAAA,CAAkB;QAE5E,KAAA,CAAM,WAAW,KAAK,SAAA,CAAU,QAAQ,MAAM,CAAC,CAAC;QAChD,IAAA,CAAK,MAAA,GAAS;QAGd,OAAO,cAAA,CAAe,IAAA,EAAM,iBAAgB,SAAS;IACtD;AACD;AAEA,eAAsB,oBACrB,MAAA,EACA,KAAA,EACiD;IACjD,IAAI,SAAS,MAAM,MAAA,CAAO,WAAW,CAAA,CAAE,QAAA,CAAS,KAAK;IAErD,IAAI,OAAO,MAAA,EAAQ;QAClB,MAAM,IAAI,gBAAgB,OAAO,MAAM;IACxC;IACA,OAAO,OAAO,KAAA;AACf;;ACpQO,IAAM,UAAU;IAAC;IAAO;IAAQ;IAAO;IAAS,QAAQ;CAAA;AAQxD,IAAM,eAAe,CAI3B,QACA,WACI;IACJ,OAAO;QACN;QACA;IACD;AACD;;AC1BO,IAAM,oBAAoB,CAAC,SAAA,CAChC;QACA,IAAI;QACJ,MAAM;QACN,SAAS;QACT,MAAM,MAAK,GAAA,EAAK,OAAA,EAAS;YAX3B,IAAA,IAAA,IAAA,IAAA;YAYG,MAAM,SAAA,CAAA,CACL,KAAA,CAAA,KAAA,OAAO,OAAA,KAAP,OAAA,KAAA,IAAA,GAAgB,IAAA,CAAK,CAAC,WAAQ;gBAblC,IAAAA;gBAcK,OAAA,CAAA,CAAAA,MAAA,OAAO,MAAA,KAAP,OAAA,KAAA,IAAAA,IAAe,MAAA,IACZ,IAAI,UAAA,CAAW,OAAO,MAAA,CAAO,MAAA,CAAO,OAAA,IAAW,EAAE,KAClD,IAAI,UAAA,CAAW,OAAO,MAAA,CAAO,MAAA,CAAO,MAAA,IAAU,EAAE,IAC/C;YAAA,EAAA,KAJJ,OAAA,KAAA,IAAA,GAKG,MAAA,KAAU,OAAO,MAAA;YACrB,IAAI,QAAQ;gBACX,IAAI,SAAS;gBACb,IAAA,CAAI,KAAA,OAAO,MAAA,KAAP,OAAA,KAAA,IAAA,GAAe,MAAA,EAAQ;oBAC1B,IAAI,OAAO,UAAA,CAAW,OAAO,MAAA,CAAO,MAAM,GAAG;wBAC5C,SAAS,OAAO,OAAA,CAAQ,OAAO,MAAA,CAAO,MAAA,EAAQ,EAAE;wBAChD,IAAI,OAAO,MAAA,CAAO,OAAA,EAAS;4BAC1B,MAAM,IAAI,OAAA,CAAQ,OAAO,MAAA,CAAO,MAAA,EAAQ,OAAO,MAAA,CAAO,OAAO;wBAC9D;oBACD;gBACD;gBACA,IAAA,CAAI,KAAA,OAAO,MAAA,KAAP,OAAA,KAAA,IAAA,GAAe,OAAA,EAAS;oBAC3B,IAAI,OAAO,UAAA,CAAW,OAAO,MAAA,CAAO,OAAO,GAAG;wBAC7C,SAAS,OAAO,OAAA,CAAQ,OAAO,MAAA,CAAO,OAAA,EAAS,EAAE;oBAClD;gBACD;gBACA,MAAM,YAAY,OAAO,MAAA,CAAO,MAAM,CAAA;gBACtC,IAAI,WAAW;oBACd,IAAI,OAAO,cAAA,eAAA,CAAA,GACP,UADO;wBAEV,QAAQ,UAAU,MAAA;wBAClB,QAAQ,UAAU,MAAA;oBACnB;oBACA,IAAI,CAAA,CAAC,WAAA,OAAA,KAAA,IAAA,QAAS,iBAAA,GAAmB;wBAChC,OAAO,cAAA,eAAA,CAAA,GACH,OADG;4BAEN,MAAM,UAAU,KAAA,GACb,MAAM,oBAAoB,UAAU,KAAA,EAAO,WAAA,OAAA,KAAA,IAAA,QAAS,IAAI,IACxD,WAAA,OAAA,KAAA,IAAA,QAAS,IAAA;4BACZ,QAAQ,UAAU,MAAA,GACf,MAAM,oBAAoB,UAAU,MAAA,EAAQ,WAAA,OAAA,KAAA,IAAA,QAAS,MAAM,IAC3D,WAAA,OAAA,KAAA,IAAA,QAAS,MAAA;4BACZ,OAAO,UAAU,KAAA,GACd,MAAM,oBAAoB,UAAU,KAAA,EAAO,WAAA,OAAA,KAAA,IAAA,QAAS,KAAK,IACzD,WAAA,OAAA,KAAA,IAAA,QAAS,KAAA;wBACb;oBACD;oBACA,OAAO;wBACN;wBACA,SAAS;oBACV;gBACD;YACD;YACA,OAAO;gBACN;gBACA;YACD;QACD;IACD,CAAA;AAEM,IAAM,cAAc,CAC1B,WACI;IACJ,eAAe,OAAO,GAAA,EAAa,OAAA,EAA6B;QAC/D,MAAM,OAAO,cAAA,eAAA,eAAA,CAAA,GACT,SACA,UAFS;YAGZ,SAAS,CAAC;mBAAA,CAAI,UAAA,OAAA,KAAA,IAAA,OAAQ,OAAA,KAAW,CAAC,CAAA;gBAAI,kBAAkB,UAAU,CAAC,CAAC,CAAC;aAAA;QACtE;QAEA,IAAI,UAAA,OAAA,KAAA,IAAA,OAAQ,aAAA,EAAe;YAC1B,IAAI;gBACH,OAAO,MAAM,YAAY,KAAK,IAAI;YACnC,EAAA,OAAS,OAAO;gBACf,OAAO;oBACN,MAAM;oBACN,OAAO;wBACN,QAAQ;wBACR,YAAY;wBACZ,SACC;wBACD;oBACD;gBACD;YACD;QACD;QACA,OAAO,MAAM,YAAY,KAAK,IAAI;IACnC;IACA,OAAO;AACR;;AC3FO,SAASC,QAAO,GAAA,EAAa,MAAA,EAA4B;IAC/D,IAAI,EAAE,OAAA,EAAS,MAAA,EAAQ,KAAA,CAAM,CAAA,GAAI,UAAU;QAC1C,OAAO,CAAC;QACR,QAAQ,CAAC;QACT,SAAS;IACV;IACA,IAAI,WAAW,IAAI,UAAA,CAAW,MAAM,IACjC,IAAI,KAAA,CAAM,GAAG,EAAE,KAAA,CAAM,GAAG,CAAC,EAAE,IAAA,CAAK,GAAG,IACnC,WAAW;IAKd,IAAI,IAAI,UAAA,CAAW,GAAG,GAAG;QACxB,MAAM,IAAI,IAAI,QAAA,CAAS,EAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA;QACnD,IAAI,QAAQ,QAAA,CAAS,CAAC,GAAG;YACxB,MAAM,IAAI,OAAA,CAAQ,CAAA,CAAA,EAAI,CAAC,CAAA,CAAA,CAAA,EAAK,GAAG;QAChC;IACD;IAEA,IAAI,CAAC,SAAS,QAAA,CAAS,GAAG,EAAG,CAAA,YAAY;IACzC,IAAI,CAAC,MAAM,QAAQ,CAAA,GAAI,IAAI,OAAA,CAAQ,UAAU,EAAE,EAAE,KAAA,CAAM,GAAG;IAC1D,MAAM,cAAc,IAAI,gBAAgB,QAAQ;IAChD,KAAA,MAAW,CAAC,KAAK,KAAK,CAAA,IAAK,OAAO,OAAA,CAAQ,SAAS,CAAC,CAAC,EAAG;QACvD,IAAI,SAAS,KAAM,CAAA;QACnB,YAAY,GAAA,CAAI,KAAK,OAAO,KAAK,CAAC;IACnC;IACA,IAAI,QAAQ;QACX,IAAI,MAAM,OAAA,CAAQ,MAAM,GAAG;YAC1B,MAAM,aAAa,KAAK,KAAA,CAAM,GAAG,EAAE,MAAA,CAAO,CAAC,IAAM,EAAE,UAAA,CAAW,GAAG,CAAC;YAClE,KAAA,MAAW,CAAC,OAAO,GAAG,CAAA,IAAK,WAAW,OAAA,CAAQ,EAAG;gBAChD,MAAM,QAAQ,MAAA,CAAO,KAAK,CAAA;gBAC1B,OAAO,KAAK,OAAA,CAAQ,KAAK,KAAK;YAC/B;QACD,OAAO;YACN,KAAA,MAAW,CAAC,KAAK,KAAK,CAAA,IAAK,OAAO,OAAA,CAAQ,MAAM,EAAG;gBAClD,OAAO,KAAK,OAAA,CAAQ,CAAA,CAAA,EAAI,GAAG,EAAA,EAAI,OAAO,KAAK,CAAC;YAC7C;QACD;IACD;IAEA,OAAO,KAAK,KAAA,CAAM,GAAG,EAAE,GAAA,CAAI,kBAAkB,EAAE,IAAA,CAAK,GAAG;IACvD,IAAI,KAAK,UAAA,CAAW,GAAG,EAAG,CAAA,OAAO,KAAK,KAAA,CAAM,CAAC;IAC7C,IAAI,mBAAmB,YAAY,QAAA,CAAS;IAC5C,mBACC,iBAAiB,MAAA,GAAS,IAAI,CAAA,CAAA,EAAI,gBAAgB,EAAA,CAAG,OAAA,CAAQ,OAAO,KAAK,IAAI;IAC9E,IAAI,CAAC,SAAS,UAAA,CAAW,MAAM,GAAG;QACjC,OAAO,GAAG,QAAQ,GAAG,IAAI,GAAG,gBAAgB,EAAA;IAC7C;IACA,MAAM,OAAO,IAAI,IAAI,GAAG,IAAI,GAAG,gBAAgB,EAAA,EAAI,QAAQ;IAC3D,OAAO;AACR;;ACvCO,IAAM,cAAc,OAO1B,KACA,YAOI;IAjCL,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA;IAkCC,MAAM,EACL,KAAA,EACA,KAAK,KAAA,EACL,SAAS,IAAA,EACV,GAAI,MAAM,kBAAkB,KAAK,OAAO;IACxC,MAAM,QAAQ,SAAS,IAAI;IAC3B,MAAM,aAAa,IAAI,gBAAgB;IACvC,MAAM,SAAA,CAAS,KAAA,KAAK,MAAA,KAAL,OAAA,KAAe,WAAW,MAAA;IACzC,MAAM,OAAOC,QAAO,OAAO,IAAI;IAC/B,MAAM,OAAO,QAAQ,IAAI;IACzB,MAAM,UAAU,MAAM,WAAW,IAAI;IACrC,MAAM,SAAS,UAAU,OAAO,IAAI;IACpC,IAAI,UAAU,cAAA,eAAA,CAAA,GACV,OADU;QAEb,KAAK;QACL;QACA;QACA;QACA;IACD;IAIA,KAAA,MAAW,aAAa,MAAM,SAAA,CAAW;QACxC,IAAI,WAAW;YACd,MAAM,MAAM,MAAM,UAAU,OAAO;YACnC,IAAI,eAAe,QAAQ;gBAC1B,UAAU;YACX;QACD;IACD;IACA,IACE,YAAa,WACb,OAAQ,QAAgB,MAAA,KAAW,cACpC,OAAA,CAAA,CAAO,KAAA,WAAA,OAAA,KAAA,IAAA,QAAS,IAAA,KAAT,OAAA,KAAA,IAAA,GAAe,IAAA,MAAS,YAC9B;QACD,IAAI,CAAA,CAAE,YAAY,OAAA,GAAU;YAC3B,QAAQ,MAAA,GAAS;QAClB;IACD;IAEA,MAAM,EAAE,cAAAC,aAAAA,CAAa,CAAA,GAAI,WAAW,MAAM,UAAU;IACpD,IAAI,WAAW,MAAM,MAAM,QAAQ,GAAA,EAAK,OAAO;IAC/CA,cAAa;IAEb,MAAM,kBAAkB;QACvB;QACA,SAAS;IACV;IAEA,KAAA,MAAW,cAAc,MAAM,UAAA,CAAY;QAC1C,IAAI,YAAY;YACf,MAAM,IAAI,MAAM,WAAW,cAAA,eAAA,CAAA,GACvB,kBADuB;gBAE1B,UAAA,CAAA,CAAU,KAAA,WAAA,OAAA,KAAA,IAAA,QAAS,WAAA,KAAT,OAAA,KAAA,IAAA,GAAsB,aAAA,IAC7B,SAAS,KAAA,CAAM,IACf;YACJ,EAAC;YACD,IAAI,aAAa,UAAU;gBAC1B,WAAW;YACZ,OAAA,IAAW,aAAa,QAAQ;gBAC/B,WAAW,EAAE,QAAA;YACd;QACD;IACD;IAKA,IAAI,SAAS,EAAA,EAAI;QAChB,MAAM,UAAU,QAAQ,MAAA,KAAW;QACnC,IAAI,CAAC,SAAS;YACb,OAAO;gBACN,MAAM;gBACN,OAAO;YACR;QACD;QACA,MAAM,eAAe,mBAAmB,QAAQ;QAChD,MAAM,iBAAiB;YACtB,MAAM;YACN;YACA,SAAS;QACV;QACA,IAAI,iBAAiB,UAAU,iBAAiB,QAAQ;YACvD,MAAM,OAAO,MAAM,SAAS,IAAA,CAAK;YACjC,MAAMC,UAAAA,CAAS,KAAA,QAAQ,UAAA,KAAR,OAAA,KAAsB;YACrC,MAAM,OAAO,MAAMA,QAAO,IAAI;YAC9B,eAAe,IAAA,GAAO;QACvB,OAAO;YACN,eAAe,IAAA,GAAO,MAAM,QAAA,CAAS,YAAY,CAAA,CAAE;QACpD;QAKA,IAAI,WAAA,OAAA,KAAA,IAAA,QAAS,MAAA,EAAQ;YACpB,IAAI,QAAQ,MAAA,IAAU,CAAC,QAAQ,iBAAA,EAAmB;gBACjD,eAAe,IAAA,GAAO,MAAM,oBAC3B,QAAQ,MAAA,EACR,eAAe,IAAA;YAEjB;QACD;QAEA,KAAA,MAAW,aAAa,MAAM,SAAA,CAAW;YACxC,IAAI,WAAW;gBACd,MAAM,UAAU,cAAA,eAAA,CAAA,GACZ,iBADY;oBAEf,UAAA,CAAA,CAAU,KAAA,WAAA,OAAA,KAAA,IAAA,QAAS,WAAA,KAAT,OAAA,KAAA,IAAA,GAAsB,aAAA,IAC7B,SAAS,KAAA,CAAM,IACf;gBACJ,EAAC;YACF;QACD;QAEA,IAAI,WAAA,OAAA,KAAA,IAAA,QAAS,KAAA,EAAO;YACnB,OAAO,eAAe,IAAA;QACvB;QAEA,OAAO;YACN,MAAM,eAAe,IAAA;YACrB,OAAO;QACR;IACD;IACA,MAAM,SAAA,CAAS,KAAA,WAAA,OAAA,KAAA,IAAA,QAAS,UAAA,KAAT,OAAA,KAAuB;IACtC,MAAM,eAAe,MAAM,SAAS,IAAA,CAAK;IACzC,MAAM,iBAAiB,eAAe,YAAY;IAClD,MAAM,cAAc,iBAAiB,MAAM,OAAO,YAAY,IAAI;IAIlE,MAAM,eAAe;QACpB;QACA;QACA,SAAS;QACT,OAAO,cAAA,eAAA,CAAA,GACH,cADG;YAEN,QAAQ,SAAS,MAAA;YACjB,YAAY,SAAS,UAAA;QACtB;IACD;IACA,KAAA,MAAW,WAAW,MAAM,OAAA,CAAS;QACpC,IAAI,SAAS;YACZ,MAAM,QAAQ,cAAA,eAAA,CAAA,GACV,eADU;gBAEb,UAAA,CAAA,CAAU,KAAA,WAAA,OAAA,KAAA,IAAA,QAAS,WAAA,KAAT,OAAA,KAAA,IAAA,GAAsB,aAAA,IAC7B,SAAS,KAAA,CAAM,IACf;YACJ,EAAC;QACF;IACD;IAEA,IAAI,WAAA,OAAA,KAAA,IAAA,QAAS,KAAA,EAAO;QACnB,MAAM,gBAAgB,oBAAoB,QAAQ,KAAK;QACvD,MAAM,gBAAA,CAAgB,KAAA,QAAQ,YAAA,KAAR,OAAA,KAAwB;QAC9C,IAAI,MAAM,cAAc,kBAAA,CAAmB,eAAe,QAAQ,GAAG;YACpE,KAAA,MAAW,WAAW,MAAM,OAAA,CAAS;gBACpC,IAAI,SAAS;oBACZ,MAAM,QAAQ,eAAe;gBAC9B;YACD;YACA,MAAM,QAAQ,cAAc,QAAA,CAAS,aAAa;YAClD,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS,KAAK,CAAC;YACzD,OAAO,MAAM,YAAY,KAAK,cAAA,eAAA,CAAA,GAC1B,UAD0B;gBAE7B,cAAc,gBAAgB;YAC/B,EAAC;QACF;IACD;IAEA,IAAI,WAAA,OAAA,KAAA,IAAA,QAAS,KAAA,EAAO;QACnB,MAAM,IAAI,iBACT,SAAS,MAAA,EACT,SAAS,UAAA,EACT,iBAAiB,cAAc;IAEjC;IACA,OAAO;QACN,MAAM;QACN,OAAO,cAAA,eAAA,CAAA,GACH,cADG;YAEN,QAAQ,SAAS,MAAA;YACjB,YAAY,SAAS,UAAA;QACtB;IACD;AACD","debugId":null}},
    {"offset": {"line": 1035, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/rou3%400.5.1/node_modules/rou3/dist/index.mjs"],"sourcesContent":["const EmptyObject = /* @__PURE__ */ (() => {\n  const C = function() {\n  };\n  C.prototype = /* @__PURE__ */ Object.create(null);\n  return C;\n})();\n\nfunction createRouter() {\n  const ctx = {\n    root: { key: \"\" },\n    static: new EmptyObject()\n  };\n  return ctx;\n}\n\nfunction splitPath(path) {\n  return path.split(\"/\").filter(Boolean);\n}\nfunction getMatchParams(segments, paramsMap) {\n  const params = new EmptyObject();\n  for (const [index, name] of paramsMap) {\n    const segment = index < 0 ? segments.slice(-1 * index).join(\"/\") : segments[index];\n    if (typeof name === \"string\") {\n      params[name] = segment;\n    } else {\n      const match = segment.match(name);\n      if (match) {\n        for (const key in match.groups) {\n          params[key] = match.groups[key];\n        }\n      }\n    }\n  }\n  return params;\n}\n\nfunction addRoute(ctx, method = \"\", path, data) {\n  const segments = splitPath(path);\n  let node = ctx.root;\n  let _unnamedParamIndex = 0;\n  const paramsMap = [];\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    if (segment.startsWith(\"**\")) {\n      if (!node.wildcard) {\n        node.wildcard = { key: \"**\" };\n      }\n      node = node.wildcard;\n      paramsMap.push([\n        -i,\n        segment.split(\":\")[1] || \"_\",\n        segment.length === 2\n      ]);\n      break;\n    }\n    if (segment === \"*\" || segment.includes(\":\")) {\n      if (!node.param) {\n        node.param = { key: \"*\" };\n      }\n      node = node.param;\n      const isOptional = segment === \"*\";\n      paramsMap.push([\n        i,\n        isOptional ? `_${_unnamedParamIndex++}` : _getParamMatcher(segment),\n        isOptional\n      ]);\n      continue;\n    }\n    const child = node.static?.[segment];\n    if (child) {\n      node = child;\n    } else {\n      const staticNode = { key: segment };\n      if (!node.static) {\n        node.static = new EmptyObject();\n      }\n      node.static[segment] = staticNode;\n      node = staticNode;\n    }\n  }\n  const hasParams = paramsMap.length > 0;\n  if (!node.methods) {\n    node.methods = new EmptyObject();\n  }\n  if (!node.methods[method]) {\n    node.methods[method] = [];\n  }\n  node.methods[method].push({\n    data: data || null,\n    paramsMap: hasParams ? paramsMap : void 0\n  });\n  if (!hasParams) {\n    ctx.static[path] = node;\n  }\n}\nfunction _getParamMatcher(segment) {\n  if (!segment.includes(\":\", 1)) {\n    return segment.slice(1);\n  }\n  const regex = segment.replace(/:(\\w+)/g, (_, id) => `(?<${id}>\\\\w+)`);\n  return new RegExp(`^${regex}$`);\n}\n\nfunction findRoute(ctx, method = \"\", path, opts) {\n  if (path[path.length - 1] === \"/\") {\n    path = path.slice(0, -1);\n  }\n  const staticNode = ctx.static[path];\n  if (staticNode && staticNode.methods) {\n    const staticMatch = staticNode.methods[method] || staticNode.methods[\"\"];\n    if (staticMatch !== void 0) {\n      return staticMatch[0];\n    }\n  }\n  const segments = splitPath(path);\n  const match = _lookupTree(ctx, ctx.root, method, segments, 0)?.[0];\n  if (match === void 0) {\n    return;\n  }\n  if (opts?.params === false) {\n    return match;\n  }\n  return {\n    data: match.data,\n    params: match.paramsMap ? getMatchParams(segments, match.paramsMap) : void 0\n  };\n}\nfunction _lookupTree(ctx, node, method, segments, index) {\n  if (index === segments.length) {\n    if (node.methods) {\n      const match = node.methods[method] || node.methods[\"\"];\n      if (match) {\n        return match;\n      }\n    }\n    if (node.param && node.param.methods) {\n      const match = node.param.methods[method] || node.param.methods[\"\"];\n      if (match) {\n        const pMap = match[0].paramsMap;\n        if (pMap?.[pMap?.length - 1]?.[2]) {\n          return match;\n        }\n      }\n    }\n    if (node.wildcard && node.wildcard.methods) {\n      const match = node.wildcard.methods[method] || node.wildcard.methods[\"\"];\n      if (match) {\n        const pMap = match[0].paramsMap;\n        if (pMap?.[pMap?.length - 1]?.[2]) {\n          return match;\n        }\n      }\n    }\n    return void 0;\n  }\n  const segment = segments[index];\n  if (node.static) {\n    const staticChild = node.static[segment];\n    if (staticChild) {\n      const match = _lookupTree(ctx, staticChild, method, segments, index + 1);\n      if (match) {\n        return match;\n      }\n    }\n  }\n  if (node.param) {\n    const match = _lookupTree(ctx, node.param, method, segments, index + 1);\n    if (match) {\n      return match;\n    }\n  }\n  if (node.wildcard && node.wildcard.methods) {\n    return node.wildcard.methods[method] || node.wildcard.methods[\"\"];\n  }\n  return;\n}\n\nfunction removeRoute(ctx, method, path) {\n  const segments = splitPath(path);\n  return _remove(ctx.root, method || \"\", segments, 0);\n}\nfunction _remove(node, method, segments, index) {\n  if (index === segments.length) {\n    if (node.methods && method in node.methods) {\n      delete node.methods[method];\n      if (Object.keys(node.methods).length === 0) {\n        node.methods = void 0;\n      }\n    }\n    return;\n  }\n  const segment = segments[index];\n  if (segment === \"*\") {\n    if (node.param) {\n      _remove(node.param, method, segments, index + 1);\n      if (_isEmptyNode(node.param)) {\n        node.param = void 0;\n      }\n    }\n    return;\n  }\n  if (segment === \"**\") {\n    if (node.wildcard) {\n      _remove(node.wildcard, method, segments, index + 1);\n      if (_isEmptyNode(node.wildcard)) {\n        node.wildcard = void 0;\n      }\n    }\n    return;\n  }\n  const childNode = node.static?.[segment];\n  if (childNode) {\n    _remove(childNode, method, segments, index + 1);\n    if (_isEmptyNode(childNode)) {\n      delete node.static[segment];\n      if (Object.keys(node.static).length === 0) {\n        node.static = void 0;\n      }\n    }\n  }\n}\nfunction _isEmptyNode(node) {\n  return node.methods === void 0 && node.static === void 0 && node.param === void 0 && node.wildcard === void 0;\n}\n\nfunction findAllRoutes(ctx, method = \"\", path, opts) {\n  if (path[path.length - 1] === \"/\") {\n    path = path.slice(0, -1);\n  }\n  const segments = splitPath(path);\n  const matches = _findAll(ctx, ctx.root, method, segments, 0);\n  if (opts?.params === false) {\n    return matches;\n  }\n  return matches.map((m) => {\n    return {\n      data: m.data,\n      params: m.paramsMap ? getMatchParams(segments, m.paramsMap) : void 0\n    };\n  });\n}\nfunction _findAll(ctx, node, method, segments, index, matches = []) {\n  const segment = segments[index];\n  if (node.wildcard && node.wildcard.methods) {\n    const match = node.wildcard.methods[method] || node.wildcard.methods[\"\"];\n    if (match) {\n      matches.push(...match);\n    }\n  }\n  if (node.param) {\n    _findAll(ctx, node.param, method, segments, index + 1, matches);\n    if (index === segments.length && node.param.methods) {\n      const match = node.param.methods[method] || node.param.methods[\"\"];\n      if (match) {\n        matches.push(...match);\n      }\n    }\n  }\n  const staticChild = node.static?.[segment];\n  if (staticChild) {\n    _findAll(ctx, staticChild, method, segments, index + 1, matches);\n  }\n  if (index === segments.length && node.methods) {\n    const match = node.methods[method] || node.methods[\"\"];\n    if (match) {\n      matches.push(...match);\n    }\n  }\n  return matches;\n}\n\nexport { addRoute, createRouter, findAllRoutes, findRoute, removeRoute };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1323, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/rou3%400.7.10/node_modules/rou3/dist/index.mjs"],"sourcesContent":["const NullProtoObj = /* @__PURE__ */ (() => {\n\tconst e = function() {};\n\treturn e.prototype = Object.create(null), Object.freeze(e.prototype), e;\n})();\n\n/**\n* Create a new router context.\n*/\nfunction createRouter() {\n\treturn {\n\t\troot: { key: \"\" },\n\t\tstatic: new NullProtoObj()\n\t};\n}\n\nfunction splitPath(path) {\n\tconst [_, ...s] = path.split(\"/\");\n\treturn s[s.length - 1] === \"\" ? s.slice(0, -1) : s;\n}\nfunction getMatchParams(segments, paramsMap) {\n\tconst params = new NullProtoObj();\n\tfor (const [index, name] of paramsMap) {\n\t\tconst segment = index < 0 ? segments.slice(-1 * index).join(\"/\") : segments[index];\n\t\tif (typeof name === \"string\") params[name] = segment;\n\t\telse {\n\t\t\tconst match = segment.match(name);\n\t\t\tif (match) for (const key in match.groups) params[key] = match.groups[key];\n\t\t}\n\t}\n\treturn params;\n}\n\n/**\n* Add a route to the router context.\n*/\nfunction addRoute(ctx, method = \"\", path, data) {\n\tmethod = method.toUpperCase();\n\tif (path.charCodeAt(0) !== 47) path = `/${path}`;\n\tconst segments = splitPath(path);\n\tlet node = ctx.root;\n\tlet _unnamedParamIndex = 0;\n\tconst paramsMap = [];\n\tconst paramsRegexp = [];\n\tfor (let i = 0; i < segments.length; i++) {\n\t\tconst segment = segments[i];\n\t\tif (segment.startsWith(\"**\")) {\n\t\t\tif (!node.wildcard) node.wildcard = { key: \"**\" };\n\t\t\tnode = node.wildcard;\n\t\t\tparamsMap.push([\n\t\t\t\t-i,\n\t\t\t\tsegment.split(\":\")[1] || \"_\",\n\t\t\t\tsegment.length === 2\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tif (segment === \"*\" || segment.includes(\":\")) {\n\t\t\tif (!node.param) node.param = { key: \"*\" };\n\t\t\tnode = node.param;\n\t\t\tif (segment === \"*\") paramsMap.push([\n\t\t\t\ti,\n\t\t\t\t`_${_unnamedParamIndex++}`,\n\t\t\t\ttrue\n\t\t\t]);\n\t\t\telse if (segment.includes(\":\", 1)) {\n\t\t\t\tconst regexp = getParamRegexp(segment);\n\t\t\t\tparamsRegexp[i] = regexp;\n\t\t\t\tnode.hasRegexParam = true;\n\t\t\t\tparamsMap.push([\n\t\t\t\t\ti,\n\t\t\t\t\tregexp,\n\t\t\t\t\tfalse\n\t\t\t\t]);\n\t\t\t} else paramsMap.push([\n\t\t\t\ti,\n\t\t\t\tsegment.slice(1),\n\t\t\t\tfalse\n\t\t\t]);\n\t\t\tcontinue;\n\t\t}\n\t\tconst child = node.static?.[segment];\n\t\tif (child) node = child;\n\t\telse {\n\t\t\tconst staticNode = { key: segment };\n\t\t\tif (!node.static) node.static = new NullProtoObj();\n\t\t\tnode.static[segment] = staticNode;\n\t\t\tnode = staticNode;\n\t\t}\n\t}\n\tconst hasParams = paramsMap.length > 0;\n\tif (!node.methods) node.methods = new NullProtoObj();\n\tnode.methods[method] ??= [];\n\tnode.methods[method].push({\n\t\tdata: data || null,\n\t\tparamsRegexp,\n\t\tparamsMap: hasParams ? paramsMap : void 0\n\t});\n\tif (!hasParams) ctx.static[path] = node;\n}\nfunction getParamRegexp(segment) {\n\tconst regex = segment.replace(/:(\\w+)/g, (_, id) => `(?<${id}>[^/]+)`).replace(/\\./g, \"\\\\.\");\n\treturn /* @__PURE__ */ new RegExp(`^${regex}$`);\n}\n\n/**\n* Find a route by path.\n*/\nfunction findRoute(ctx, method = \"\", path, opts) {\n\tif (path.charCodeAt(path.length - 1) === 47) path = path.slice(0, -1);\n\tconst staticNode = ctx.static[path];\n\tif (staticNode && staticNode.methods) {\n\t\tconst staticMatch = staticNode.methods[method] || staticNode.methods[\"\"];\n\t\tif (staticMatch !== void 0) return staticMatch[0];\n\t}\n\tconst segments = splitPath(path);\n\tconst match = _lookupTree(ctx, ctx.root, method, segments, 0)?.[0];\n\tif (match === void 0) return;\n\tif (opts?.params === false) return match;\n\treturn {\n\t\tdata: match.data,\n\t\tparams: match.paramsMap ? getMatchParams(segments, match.paramsMap) : void 0\n\t};\n}\nfunction _lookupTree(ctx, node, method, segments, index) {\n\tif (index === segments.length) {\n\t\tif (node.methods) {\n\t\t\tconst match = node.methods[method] || node.methods[\"\"];\n\t\t\tif (match) return match;\n\t\t}\n\t\tif (node.param && node.param.methods) {\n\t\t\tconst match = node.param.methods[method] || node.param.methods[\"\"];\n\t\t\tif (match) {\n\t\t\t\tconst pMap = match[0].paramsMap;\n\t\t\t\tif (pMap?.[pMap?.length - 1]?.[2]) return match;\n\t\t\t}\n\t\t}\n\t\tif (node.wildcard && node.wildcard.methods) {\n\t\t\tconst match = node.wildcard.methods[method] || node.wildcard.methods[\"\"];\n\t\t\tif (match) {\n\t\t\t\tconst pMap = match[0].paramsMap;\n\t\t\t\tif (pMap?.[pMap?.length - 1]?.[2]) return match;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\tconst segment = segments[index];\n\tif (node.static) {\n\t\tconst staticChild = node.static[segment];\n\t\tif (staticChild) {\n\t\t\tconst match = _lookupTree(ctx, staticChild, method, segments, index + 1);\n\t\t\tif (match) return match;\n\t\t}\n\t}\n\tif (node.param) {\n\t\tconst match = _lookupTree(ctx, node.param, method, segments, index + 1);\n\t\tif (match) {\n\t\t\tif (node.param.hasRegexParam) {\n\t\t\t\tconst exactMatch = match.find((m) => m.paramsRegexp[index]?.test(segment)) || match.find((m) => !m.paramsRegexp[index]);\n\t\t\t\treturn exactMatch ? [exactMatch] : void 0;\n\t\t\t}\n\t\t\treturn match;\n\t\t}\n\t}\n\tif (node.wildcard && node.wildcard.methods) return node.wildcard.methods[method] || node.wildcard.methods[\"\"];\n}\n\n/**\n* Remove a route from the router context.\n*/\nfunction removeRoute(ctx, method, path) {\n\tconst segments = splitPath(path);\n\treturn _remove(ctx.root, method || \"\", segments, 0);\n}\nfunction _remove(node, method, segments, index) {\n\tif (index === segments.length) {\n\t\tif (node.methods && method in node.methods) {\n\t\t\tdelete node.methods[method];\n\t\t\tif (Object.keys(node.methods).length === 0) node.methods = void 0;\n\t\t}\n\t\treturn;\n\t}\n\tconst segment = segments[index];\n\tif (segment === \"*\") {\n\t\tif (node.param) {\n\t\t\t_remove(node.param, method, segments, index + 1);\n\t\t\tif (_isEmptyNode(node.param)) node.param = void 0;\n\t\t}\n\t\treturn;\n\t}\n\tif (segment.startsWith(\"**\")) {\n\t\tif (node.wildcard) {\n\t\t\t_remove(node.wildcard, method, segments, index + 1);\n\t\t\tif (_isEmptyNode(node.wildcard)) node.wildcard = void 0;\n\t\t}\n\t\treturn;\n\t}\n\tconst childNode = node.static?.[segment];\n\tif (childNode) {\n\t\t_remove(childNode, method, segments, index + 1);\n\t\tif (_isEmptyNode(childNode)) {\n\t\t\tdelete node.static[segment];\n\t\t\tif (Object.keys(node.static).length === 0) node.static = void 0;\n\t\t}\n\t}\n}\nfunction _isEmptyNode(node) {\n\treturn node.methods === void 0 && node.static === void 0 && node.param === void 0 && node.wildcard === void 0;\n}\n\n/**\n* Find all route patterns that match the given path.\n*/\nfunction findAllRoutes(ctx, method = \"\", path, opts) {\n\tif (path.charCodeAt(path.length - 1) === 47) path = path.slice(0, -1);\n\tconst segments = splitPath(path);\n\tconst matches = _findAll(ctx, ctx.root, method, segments, 0);\n\tif (opts?.params === false) return matches;\n\treturn matches.map((m) => {\n\t\treturn {\n\t\t\tdata: m.data,\n\t\t\tparams: m.paramsMap ? getMatchParams(segments, m.paramsMap) : void 0\n\t\t};\n\t});\n}\nfunction _findAll(ctx, node, method, segments, index, matches = []) {\n\tconst segment = segments[index];\n\tif (node.wildcard && node.wildcard.methods) {\n\t\tconst match = node.wildcard.methods[method] || node.wildcard.methods[\"\"];\n\t\tif (match) matches.push(...match);\n\t}\n\tif (node.param) {\n\t\t_findAll(ctx, node.param, method, segments, index + 1, matches);\n\t\tif (index === segments.length && node.param.methods) {\n\t\t\tconst match = node.param.methods[method] || node.param.methods[\"\"];\n\t\t\tif (match) {\n\t\t\t\tconst pMap = match[0].paramsMap;\n\t\t\t\tif (pMap?.[pMap?.length - 1]?.[2]) matches.push(...match);\n\t\t\t}\n\t\t}\n\t}\n\tconst staticChild = node.static?.[segment];\n\tif (staticChild) _findAll(ctx, staticChild, method, segments, index + 1, matches);\n\tif (index === segments.length && node.methods) {\n\t\tconst match = node.methods[method] || node.methods[\"\"];\n\t\tif (match) matches.push(...match);\n\t}\n\treturn matches;\n}\n\nfunction routeToRegExp(route = \"/\") {\n\tconst reSegments = [];\n\tlet idCtr = 0;\n\tfor (const segment of route.split(\"/\")) {\n\t\tif (!segment) continue;\n\t\tif (segment === \"*\") reSegments.push(`(?<_${idCtr++}>[^/]*)`);\n\t\telse if (segment.startsWith(\"**\")) reSegments.push(segment === \"**\" ? \"?(?<_>.*)\" : `?(?<${segment.slice(3)}>.+)`);\n\t\telse if (segment.includes(\":\")) reSegments.push(segment.replace(/:(\\w+)/g, (_, id) => `(?<${id}>[^/]+)`).replace(/\\./g, \"\\\\.\"));\n\t\telse reSegments.push(segment);\n\t}\n\treturn /* @__PURE__ */ new RegExp(`^/${reSegments.join(\"/\")}/?$`);\n}\n\nexport { NullProtoObj, addRoute, createRouter, findAllRoutes, findRoute, removeRoute, routeToRegExp };"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1602, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/error.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/utils.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/to-response.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/validator.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/crypto.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/cookies.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/context.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/middleware.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/endpoint.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/router.ts","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/core.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/util.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/errors.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/parse.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/checks.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/doc.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/versions.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/schemas.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/registries.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/core/api.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/classic/errors.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/classic/parse.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/node_modules/.pnpm/zod%404.0.1/node_modules/zod/v4/classic/schemas.js","file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/better-call%401.0.19/node_modules/better-call/src/openapi.ts"],"sourcesContent":["// https://github.com/nodejs/node/blob/360f7cc7867b43344aac00564286b895e15f21d7/lib/internal/errors.js#L246C1-L261C2\nfunction isErrorStackTraceLimitWritable() {\n\tconst desc = Object.getOwnPropertyDescriptor(Error, \"stackTraceLimit\");\n\tif (desc === undefined) {\n\t\treturn Object.isExtensible(Error);\n\t}\n\n\treturn Object.prototype.hasOwnProperty.call(desc, \"writable\")\n\t\t? desc.writable\n\t\t: desc.set !== undefined;\n}\n\n/**\n * Hide internal stack frames from the error stack trace.\n */\nexport function hideInternalStackFrames(stack: string): string {\n\tconst lines = stack.split(\"\\n    at \");\n\tif (lines.length <= 1) {\n\t\treturn stack;\n\t}\n\tlines.splice(1, 1);\n\treturn lines.join(\"\\n    at \");\n}\n\n// https://github.com/nodejs/node/blob/360f7cc7867b43344aac00564286b895e15f21d7/lib/internal/errors.js#L411-L432\n/**\n * Creates a custom error class that hides stack frames.\n */\nexport function makeErrorForHideStackFrame<B extends new (...args: any[]) => Error>(\n\tBase: B,\n\tclazz: any,\n): {\n\tnew (...args: ConstructorParameters<B>): InstanceType<B> & { errorStack: string | undefined };\n} {\n\tclass HideStackFramesError extends Base {\n\t\t#hiddenStack: string | undefined;\n\n\t\tconstructor(...args: any[]) {\n\t\t\tif (isErrorStackTraceLimitWritable()) {\n\t\t\t\tconst limit = Error.stackTraceLimit;\n\t\t\t\tError.stackTraceLimit = 0;\n\t\t\t\tsuper(...args);\n\t\t\t\tError.stackTraceLimit = limit;\n\t\t\t} else {\n\t\t\t\tsuper(...args);\n\t\t\t}\n\t\t\tconst stack = new Error().stack;\n\t\t\tif (stack) {\n\t\t\t\tthis.#hiddenStack = hideInternalStackFrames(stack.replace(/^Error/, this.name));\n\t\t\t}\n\t\t}\n\n\t\t// use `getter` here to avoid the stack trace being captured by loggers\n\t\tget errorStack() {\n\t\t\treturn this.#hiddenStack;\n\t\t}\n\t}\n\n\t// This is a workaround for wpt tests that expect that the error\n\t// constructor has a `name` property of the base class.\n\tObject.defineProperty(HideStackFramesError.prototype, \"constructor\", {\n\t\tget() {\n\t\t\treturn clazz;\n\t\t},\n\t\tenumerable: false,\n\t\tconfigurable: true,\n\t});\n\n\treturn HideStackFramesError as any;\n}\n\nexport const _statusCode = {\n\tOK: 200,\n\tCREATED: 201,\n\tACCEPTED: 202,\n\tNO_CONTENT: 204,\n\tMULTIPLE_CHOICES: 300,\n\tMOVED_PERMANENTLY: 301,\n\tFOUND: 302,\n\tSEE_OTHER: 303,\n\tNOT_MODIFIED: 304,\n\tTEMPORARY_REDIRECT: 307,\n\tBAD_REQUEST: 400,\n\tUNAUTHORIZED: 401,\n\tPAYMENT_REQUIRED: 402,\n\tFORBIDDEN: 403,\n\tNOT_FOUND: 404,\n\tMETHOD_NOT_ALLOWED: 405,\n\tNOT_ACCEPTABLE: 406,\n\tPROXY_AUTHENTICATION_REQUIRED: 407,\n\tREQUEST_TIMEOUT: 408,\n\tCONFLICT: 409,\n\tGONE: 410,\n\tLENGTH_REQUIRED: 411,\n\tPRECONDITION_FAILED: 412,\n\tPAYLOAD_TOO_LARGE: 413,\n\tURI_TOO_LONG: 414,\n\tUNSUPPORTED_MEDIA_TYPE: 415,\n\tRANGE_NOT_SATISFIABLE: 416,\n\tEXPECTATION_FAILED: 417,\n\t\"I'M_A_TEAPOT\": 418,\n\tMISDIRECTED_REQUEST: 421,\n\tUNPROCESSABLE_ENTITY: 422,\n\tLOCKED: 423,\n\tFAILED_DEPENDENCY: 424,\n\tTOO_EARLY: 425,\n\tUPGRADE_REQUIRED: 426,\n\tPRECONDITION_REQUIRED: 428,\n\tTOO_MANY_REQUESTS: 429,\n\tREQUEST_HEADER_FIELDS_TOO_LARGE: 431,\n\tUNAVAILABLE_FOR_LEGAL_REASONS: 451,\n\tINTERNAL_SERVER_ERROR: 500,\n\tNOT_IMPLEMENTED: 501,\n\tBAD_GATEWAY: 502,\n\tSERVICE_UNAVAILABLE: 503,\n\tGATEWAY_TIMEOUT: 504,\n\tHTTP_VERSION_NOT_SUPPORTED: 505,\n\tVARIANT_ALSO_NEGOTIATES: 506,\n\tINSUFFICIENT_STORAGE: 507,\n\tLOOP_DETECTED: 508,\n\tNOT_EXTENDED: 510,\n\tNETWORK_AUTHENTICATION_REQUIRED: 511,\n};\n\nexport type Status =\n\t| 100\n\t| 101\n\t| 102\n\t| 103\n\t| 200\n\t| 201\n\t| 202\n\t| 203\n\t| 204\n\t| 205\n\t| 206\n\t| 207\n\t| 208\n\t| 226\n\t| 300\n\t| 301\n\t| 302\n\t| 303\n\t| 304\n\t| 305\n\t| 306\n\t| 307\n\t| 308\n\t| 400\n\t| 401\n\t| 402\n\t| 403\n\t| 404\n\t| 405\n\t| 406\n\t| 407\n\t| 408\n\t| 409\n\t| 410\n\t| 411\n\t| 412\n\t| 413\n\t| 414\n\t| 415\n\t| 416\n\t| 417\n\t| 418\n\t| 421\n\t| 422\n\t| 423\n\t| 424\n\t| 425\n\t| 426\n\t| 428\n\t| 429\n\t| 431\n\t| 451\n\t| 500\n\t| 501\n\t| 502\n\t| 503\n\t| 504\n\t| 505\n\t| 506\n\t| 507\n\t| 508\n\t| 510\n\t| 511;\n\nclass InternalAPIError extends Error {\n\tconstructor(\n\t\tpublic status: keyof typeof _statusCode | Status = \"INTERNAL_SERVER_ERROR\",\n\t\tpublic body:\n\t\t\t| ({\n\t\t\t\t\tmessage?: string;\n\t\t\t\t\tcode?: string;\n\t\t\t\t\tcause?: unknown;\n\t\t\t  } & Record<string, any>)\n\t\t\t| undefined = undefined,\n\t\tpublic headers: HeadersInit = {},\n\t\tpublic statusCode = typeof status === \"number\" ? status : _statusCode[status],\n\t) {\n\t\tsuper(\n\t\t\tbody?.message,\n\t\t\tbody?.cause\n\t\t\t\t? {\n\t\t\t\t\t\tcause: body.cause,\n\t\t\t\t\t}\n\t\t\t\t: undefined,\n\t\t);\n\t\tthis.name = \"APIError\";\n\t\tthis.status = status;\n\t\tthis.headers = headers;\n\t\tthis.statusCode = statusCode;\n\t\tthis.body = body\n\t\t\t? {\n\t\t\t\t\tcode: body?.message\n\t\t\t\t\t\t?.toUpperCase()\n\t\t\t\t\t\t.replace(/ /g, \"_\")\n\t\t\t\t\t\t.replace(/[^A-Z0-9_]/g, \"\"),\n\t\t\t\t\t...body,\n\t\t\t\t}\n\t\t\t: undefined;\n\t}\n}\n\nexport type APIError = InstanceType<typeof InternalAPIError>;\nexport const APIError = makeErrorForHideStackFrame(InternalAPIError, Error);\n","import { APIError } from \"./error\";\n\nexport async function getBody(request: Request) {\n\tconst contentType = request.headers.get(\"content-type\") || \"\";\n\n\tif (!request.body) {\n\t\treturn undefined;\n\t}\n\n\tif (contentType.includes(\"application/json\")) {\n\t\treturn await request.json();\n\t}\n\n\tif (contentType.includes(\"application/x-www-form-urlencoded\")) {\n\t\tconst formData = await request.formData();\n\t\tconst result: Record<string, string> = {};\n\t\tformData.forEach((value, key) => {\n\t\t\tresult[key] = value.toString();\n\t\t});\n\t\treturn result;\n\t}\n\n\tif (contentType.includes(\"multipart/form-data\")) {\n\t\tconst formData = await request.formData();\n\t\tconst result: Record<string, any> = {};\n\t\tformData.forEach((value, key) => {\n\t\t\tresult[key] = value;\n\t\t});\n\t\treturn result;\n\t}\n\n\tif (contentType.includes(\"text/plain\")) {\n\t\treturn await request.text();\n\t}\n\n\tif (contentType.includes(\"application/octet-stream\")) {\n\t\treturn await request.arrayBuffer();\n\t}\n\n\tif (\n\t\tcontentType.includes(\"application/pdf\") ||\n\t\tcontentType.includes(\"image/\") ||\n\t\tcontentType.includes(\"video/\")\n\t) {\n\t\tconst blob = await request.blob();\n\t\treturn blob;\n\t}\n\n\tif (contentType.includes(\"application/stream\") || request.body instanceof ReadableStream) {\n\t\treturn request.body;\n\t}\n\n\treturn await request.text();\n}\n\nexport function isAPIError(error: any): error is APIError {\n\treturn error instanceof APIError || error?.name === \"APIError\";\n}\n\nexport function tryDecode(str: string) {\n\ttry {\n\t\treturn str.includes(\"%\") ? decodeURIComponent(str) : str;\n\t} catch {\n\t\treturn str;\n\t}\n}\n","import { APIError } from \"./error\";\nimport { isAPIError } from \"./utils\";\n\nfunction isJSONSerializable(value: any) {\n\tif (value === undefined) {\n\t\treturn false;\n\t}\n\tconst t = typeof value;\n\tif (t === \"string\" || t === \"number\" || t === \"boolean\" || t === null) {\n\t\treturn true;\n\t}\n\tif (t !== \"object\") {\n\t\treturn false;\n\t}\n\tif (Array.isArray(value)) {\n\t\treturn true;\n\t}\n\tif (value.buffer) {\n\t\treturn false;\n\t}\n\treturn (\n\t\t(value.constructor && value.constructor.name === \"Object\") ||\n\t\ttypeof value.toJSON === \"function\"\n\t);\n}\n\nfunction safeStringify(\n\tobj: any,\n\treplacer?: (key: string, value: any) => any,\n\tspace?: string | number,\n): string {\n\tlet id = 0;\n\tconst seen = new WeakMap<object, number>(); // ref -> counter\n\n\tconst safeReplacer = (key: string, value: any) => {\n\t\t// Handle bigint first\n\t\tif (typeof value === \"bigint\") {\n\t\t\treturn value.toString();\n\t\t}\n\n\t\t// Then handle circular references\n\t\tif (typeof value === \"object\" && value !== null) {\n\t\t\tif (seen.has(value)) {\n\t\t\t\treturn `[Circular ref-${seen.get(value)}]`;\n\t\t\t}\n\t\t\tseen.set(value, id++);\n\t\t}\n\n\t\t// Finally apply any custom replacer\n\t\tif (replacer) {\n\t\t\treturn replacer(key, value);\n\t\t}\n\n\t\treturn value;\n\t};\n\n\treturn JSON.stringify(obj, safeReplacer, space);\n}\n\nexport type JSONResponse = {\n\tbody: Record<string, any>;\n\trouterResponse: ResponseInit | undefined;\n\tstatus?: number;\n\theaders?: Record<string, string> | Headers;\n\t_flag: \"json\";\n};\n\nfunction isJSONResponse(value: any): value is JSONResponse {\n\tif (!value || typeof value !== \"object\") {\n\t\treturn false;\n\t}\n\treturn \"_flag\" in value && value._flag === \"json\";\n}\n\nexport function toResponse(data?: any, init?: ResponseInit): Response {\n\tif (data instanceof Response) {\n\t\tif (init?.headers instanceof Headers) {\n\t\t\tinit.headers.forEach((value, key) => {\n\t\t\t\tdata.headers.set(key, value);\n\t\t\t});\n\t\t}\n\t\treturn data;\n\t}\n\tconst isJSON = isJSONResponse(data);\n\tif (isJSON) {\n\t\tconst body = data.body;\n\t\tconst routerResponse = data.routerResponse;\n\t\tif (routerResponse instanceof Response) {\n\t\t\treturn routerResponse;\n\t\t}\n\t\tconst headers = new Headers({\n\t\t\t...routerResponse?.headers,\n\t\t\t...data.headers,\n\t\t\t...init?.headers,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t});\n\t\treturn new Response(JSON.stringify(body), {\n\t\t\t...routerResponse,\n\t\t\theaders,\n\t\t\tstatus: data.status ?? init?.status ?? routerResponse?.status,\n\t\t\tstatusText: init?.statusText ?? routerResponse?.statusText,\n\t\t});\n\t}\n\tif (isAPIError(data)) {\n\t\treturn toResponse(data.body, {\n\t\t\tstatus: init?.status ?? data.statusCode,\n\t\t\tstatusText: data.status.toString(),\n\t\t\theaders: init?.headers || data.headers,\n\t\t});\n\t}\n\tlet body = data;\n\tlet headers = new Headers(init?.headers);\n\tif (!data) {\n\t\tif (data === null) {\n\t\t\tbody = JSON.stringify(null);\n\t\t}\n\t\theaders.set(\"content-type\", \"application/json\");\n\t} else if (typeof data === \"string\") {\n\t\tbody = data;\n\t\theaders.set(\"Content-Type\", \"text/plain\");\n\t} else if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n\t\tbody = data;\n\t\theaders.set(\"Content-Type\", \"application/octet-stream\");\n\t} else if (data instanceof Blob) {\n\t\tbody = data;\n\t\theaders.set(\"Content-Type\", data.type || \"application/octet-stream\");\n\t} else if (data instanceof FormData) {\n\t\tbody = data;\n\t} else if (data instanceof URLSearchParams) {\n\t\tbody = data;\n\t\theaders.set(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t} else if (data instanceof ReadableStream) {\n\t\tbody = data;\n\t\theaders.set(\"Content-Type\", \"application/octet-stream\");\n\t} else if (isJSONSerializable(data)) {\n\t\tbody = safeStringify(data);\n\t\theaders.set(\"Content-Type\", \"application/json\");\n\t}\n\n\treturn new Response(body, {\n\t\t...init,\n\t\theaders,\n\t});\n}\n","import type { EndpointOptions } from \"./endpoint\";\nimport type { InputContext } from \"./context\";\nimport type { StandardSchemaV1 } from \"./standard-schema\";\n\ntype ValidationResponse =\n\t| {\n\t\t\tdata: {\n\t\t\t\tbody: any;\n\t\t\t\tquery: any;\n\t\t\t};\n\t\t\terror: null;\n\t  }\n\t| {\n\t\t\tdata: null;\n\t\t\terror: {\n\t\t\t\tmessage: string;\n\t\t\t};\n\t  };\n\n/**\n * Runs validation on body and query\n * @returns error and data object\n */\nexport async function runValidation(\n\toptions: EndpointOptions,\n\tcontext: InputContext<any, any> = {},\n): Promise<ValidationResponse> {\n\tlet request = {\n\t\tbody: context.body,\n\t\tquery: context.query,\n\t} as {\n\t\tbody: any;\n\t\tquery: any;\n\t};\n\tif (options.body) {\n\t\tconst result = await options.body[\"~standard\"].validate(context.body);\n\t\tif (result.issues) {\n\t\t\treturn {\n\t\t\t\tdata: null,\n\t\t\t\terror: fromError(result.issues, \"body\"),\n\t\t\t};\n\t\t}\n\t\trequest.body = result.value;\n\t}\n\n\tif (options.query) {\n\t\tconst result = await options.query[\"~standard\"].validate(context.query);\n\t\tif (result.issues) {\n\t\t\treturn {\n\t\t\t\tdata: null,\n\t\t\t\terror: fromError(result.issues, \"query\"),\n\t\t\t};\n\t\t}\n\t\trequest.query = result.value;\n\t}\n\tif (options.requireHeaders && !context.headers) {\n\t\treturn {\n\t\t\tdata: null,\n\t\t\terror: { message: \"Headers is required\" },\n\t\t};\n\t}\n\tif (options.requireRequest && !context.request) {\n\t\treturn {\n\t\t\tdata: null,\n\t\t\terror: { message: \"Request is required\" },\n\t\t};\n\t}\n\treturn {\n\t\tdata: request,\n\t\terror: null,\n\t};\n}\n\nexport function fromError(error: readonly StandardSchemaV1.Issue[], validating: string) {\n\tconst errorMessages: string[] = [];\n\n\tfor (const issue of error) {\n\t\tconst message = issue.message;\n\t\terrorMessages.push(message);\n\t}\n\treturn {\n\t\tmessage: `Invalid ${validating} parameters`,\n\t};\n}\n","import { getWebcryptoSubtle } from \"@better-auth/utils\";\nconst algorithm = { name: \"HMAC\", hash: \"SHA-256\" };\n\nexport const getCryptoKey = async (secret: string | BufferSource) => {\n\tconst secretBuf = typeof secret === \"string\" ? new TextEncoder().encode(secret) : secret;\n\treturn await getWebcryptoSubtle().importKey(\"raw\", secretBuf, algorithm, false, [\n\t\t\"sign\",\n\t\t\"verify\",\n\t]);\n};\n\nexport const verifySignature = async (\n\tbase64Signature: string,\n\tvalue: string,\n\tsecret: CryptoKey,\n): Promise<boolean> => {\n\ttry {\n\t\tconst signatureBinStr = atob(base64Signature);\n\t\tconst signature = new Uint8Array(signatureBinStr.length);\n\t\tfor (let i = 0, len = signatureBinStr.length; i < len; i++) {\n\t\t\tsignature[i] = signatureBinStr.charCodeAt(i);\n\t\t}\n\t\treturn await getWebcryptoSubtle().verify(\n\t\t\talgorithm,\n\t\t\tsecret,\n\t\t\tsignature,\n\t\t\tnew TextEncoder().encode(value),\n\t\t);\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nconst makeSignature = async (value: string, secret: string | BufferSource): Promise<string> => {\n\tconst key = await getCryptoKey(secret);\n\tconst signature = await getWebcryptoSubtle().sign(\n\t\talgorithm.name,\n\t\tkey,\n\t\tnew TextEncoder().encode(value),\n\t);\n\t// the returned base64 encoded signature will always be 44 characters long and end with one or two equal signs\n\treturn btoa(String.fromCharCode(...new Uint8Array(signature)));\n};\n\nexport const signCookieValue = async (value: string, secret: string | BufferSource) => {\n\tconst signature = await makeSignature(value, secret);\n\tvalue = `${value}.${signature}`;\n\tvalue = encodeURIComponent(value);\n\treturn value;\n};\n","import { signCookieValue } from \"./crypto\";\nimport { tryDecode } from \"./utils\";\n\nexport type CookiePrefixOptions = \"host\" | \"secure\";\n\nexport type CookieOptions = {\n\t/**\n\t * Domain of the cookie\n\t *\n\t * The Domain attribute specifies which server can receive a cookie. If specified, cookies are\n\t * available on the specified server and its subdomains. If the it is not\n\t * specified, the cookies are available on the server that sets it but not on\n\t * its subdomains.\n\t *\n\t * @example\n\t * `domain: \"example.com\"`\n\t */\n\tdomain?: string;\n\t/**\n\t * A lifetime of a cookie. Permanent cookies are deleted after the date specified in the\n\t * Expires attribute:\n\t *\n\t * Expires has been available for longer than Max-Age, however Max-Age is less error-prone, and\n\t * takes precedence when both are set. The rationale behind this is that when you set an\n\t * Expires date and time, they're relative to the client the cookie is being set on. If the\n\t * server is set to a different time, this could cause errors\n\t */\n\texpires?: Date;\n\t/**\n\t * Forbids JavaScript from accessing the cookie, for example, through the Document.cookie\n\t * property. Note that a cookie that has been created with HttpOnly will still be sent with\n\t * JavaScript-initiated requests, for example, when calling XMLHttpRequest.send() or fetch().\n\t * This mitigates attacks against cross-site scripting\n\t */\n\thttpOnly?: boolean;\n\t/**\n\t * Indicates the number of seconds until the cookie expires. A zero or negative number will\n\t * expire the cookie immediately. If both Expires and Max-Age are set, Max-Age has precedence.\n\t *\n\t * @example 604800 - 7 days\n\t */\n\tmaxAge?: number;\n\t/**\n\t * Indicates the path that must exist in the requested URL for the browser to send the Cookie\n\t * header.\n\t *\n\t * @example\n\t * \"/docs\"\n\t * // -> the request paths /docs, /docs/, /docs/Web/, and /docs/Web/HTTP will all match. the request paths /, /fr/docs will not match.\n\t */\n\tpath?: string;\n\t/**\n\t * Indicates that the cookie is sent to the server only when a request is made with the https:\n\t * scheme (except on localhost), and therefore, is more resistant to man-in-the-middle attacks.\n\t */\n\tsecure?: boolean;\n\t/**\n\t * Controls whether or not a cookie is sent with cross-site requests, providing some protection\n\t * against cross-site request forgery attacks (CSRF).\n\t *\n\t * Strict -  Means that the browser sends the cookie only for same-site requests, that is,\n\t * requests originating from the same site that set the cookie. If a request originates from a\n\t * different domain or scheme (even with the same domain), no cookies with the SameSite=Strict\n\t * attribute are sent.\n\t *\n\t * Lax - Means that the cookie is not sent on cross-site requests, such as on requests to load\n\t * images or frames, but is sent when a user is navigating to the origin site from an external\n\t * site (for example, when following a link). This is the default behavior if the SameSite\n\t * attribute is not specified.\n\t *\n\t * None - Means that the browser sends the cookie with both cross-site and same-site requests.\n\t * The Secure attribute must also be set when setting this value.\n\t */\n\tsameSite?: \"Strict\" | \"Lax\" | \"None\" | \"strict\" | \"lax\" | \"none\";\n\t/**\n\t * Indicates that the cookie should be stored using partitioned storage. Note that if this is\n\t * set, the Secure directive must also be set.\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/Privacy/Privacy_sandbox/Partitioned_cookies\n\t */\n\tpartitioned?: boolean;\n\t/**\n\t * Cooke Prefix\n\t *\n\t * - secure: `__Secure-` -> `__Secure-cookie-name`\n\t * - host: `__Host-` -> `__Host-cookie-name`\n\t *\n\t * `secure` must be set to true to use prefixes\n\t */\n\tprefix?: CookiePrefixOptions;\n};\n\nexport const getCookieKey = (key: string, prefix?: CookiePrefixOptions) => {\n\tlet finalKey = key;\n\tif (prefix) {\n\t\tif (prefix === \"secure\") {\n\t\t\tfinalKey = \"__Secure-\" + key;\n\t\t} else if (prefix === \"host\") {\n\t\t\tfinalKey = \"__Host-\" + key;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\treturn finalKey;\n};\n\n/**\n * Parse an HTTP Cookie header string and returning an object of all cookie\n * name-value pairs.\n *\n * Inspired by https://github.com/unjs/cookie-es/blob/main/src/cookie/parse.ts\n *\n * @param str the string representing a `Cookie` header value\n */\nexport function parseCookies(str: string) {\n\tif (typeof str !== \"string\") {\n\t\tthrow new TypeError(\"argument str must be a string\");\n\t}\n\n\tconst cookies: Map<string, string> = new Map();\n\n\tlet index = 0;\n\twhile (index < str.length) {\n\t\tconst eqIdx = str.indexOf(\"=\", index);\n\n\t\tif (eqIdx === -1) {\n\t\t\tbreak;\n\t\t}\n\n\t\tlet endIdx = str.indexOf(\";\", index);\n\n\t\tif (endIdx === -1) {\n\t\t\tendIdx = str.length;\n\t\t} else if (endIdx < eqIdx) {\n\t\t\tindex = str.lastIndexOf(\";\", eqIdx - 1) + 1;\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst key = str.slice(index, eqIdx).trim();\n\t\tif (!cookies.has(key)) {\n\t\t\tlet val = str.slice(eqIdx + 1, endIdx).trim();\n\t\t\tif (val.codePointAt(0) === 0x22) {\n\t\t\t\tval = val.slice(1, -1);\n\t\t\t}\n\t\t\tcookies.set(key, tryDecode(val));\n\t\t}\n\n\t\tindex = endIdx + 1;\n\t}\n\n\treturn cookies;\n}\n\nconst _serialize = (key: string, value: string, opt: CookieOptions = {}) => {\n\tlet cookie: string;\n\n\tif (opt?.prefix === \"secure\") {\n\t\tcookie = `${`__Secure-${key}`}=${value}`;\n\t} else if (opt?.prefix === \"host\") {\n\t\tcookie = `${`__Host-${key}`}=${value}`;\n\t} else {\n\t\tcookie = `${key}=${value}`;\n\t}\n\n\tif (key.startsWith(\"__Secure-\") && !opt.secure) {\n\t\topt.secure = true;\n\t}\n\n\tif (key.startsWith(\"__Host-\")) {\n\t\tif (!opt.secure) {\n\t\t\topt.secure = true;\n\t\t}\n\n\t\tif (opt.path !== \"/\") {\n\t\t\topt.path = \"/\";\n\t\t}\n\n\t\tif (opt.domain) {\n\t\t\topt.domain = undefined;\n\t\t}\n\t}\n\n\tif (opt && typeof opt.maxAge === \"number\" && opt.maxAge >= 0) {\n\t\tif (opt.maxAge > 34560000) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.\",\n\t\t\t);\n\t\t}\n\t\tcookie += `; Max-Age=${Math.floor(opt.maxAge)}`;\n\t}\n\n\tif (opt.domain && opt.prefix !== \"host\") {\n\t\tcookie += `; Domain=${opt.domain}`;\n\t}\n\n\tif (opt.path) {\n\t\tcookie += `; Path=${opt.path}`;\n\t}\n\n\tif (opt.expires) {\n\t\tif (opt.expires.getTime() - Date.now() > 34560000_000) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.\",\n\t\t\t);\n\t\t}\n\t\tcookie += `; Expires=${opt.expires.toUTCString()}`;\n\t}\n\n\tif (opt.httpOnly) {\n\t\tcookie += \"; HttpOnly\";\n\t}\n\n\tif (opt.secure) {\n\t\tcookie += \"; Secure\";\n\t}\n\n\tif (opt.sameSite) {\n\t\tcookie += `; SameSite=${opt.sameSite.charAt(0).toUpperCase() + opt.sameSite.slice(1)}`;\n\t}\n\n\tif (opt.partitioned) {\n\t\tif (!opt.secure) {\n\t\t\topt.secure = true;\n\t\t}\n\t\tcookie += \"; Partitioned\";\n\t}\n\n\treturn cookie;\n};\n\nexport const serializeCookie = (key: string, value: string, opt?: CookieOptions) => {\n\tvalue = encodeURIComponent(value);\n\treturn _serialize(key, value, opt);\n};\n\nexport const serializeSignedCookie = async (\n\tkey: string,\n\tvalue: string,\n\tsecret: string,\n\topt?: CookieOptions,\n) => {\n\tvalue = await signCookieValue(value, secret);\n\treturn _serialize(key, value, opt);\n};\n","import type { EndpointOptions } from \"./endpoint\";\nimport { _statusCode, APIError, type Status } from \"./error\";\nimport type {\n\tInferParamPath,\n\tInferParamWildCard,\n\tIsEmptyObject,\n\tPrettify,\n\tUnionToIntersection,\n} from \"./helper\";\nimport type { Middleware, MiddlewareContext, MiddlewareOptions } from \"./middleware\";\nimport { runValidation } from \"./validator\";\nimport {\n\tgetCookieKey,\n\tparseCookies,\n\tserializeCookie,\n\tserializeSignedCookie,\n\ttype CookieOptions,\n\ttype CookiePrefixOptions,\n} from \"./cookies\";\nimport { getCryptoKey, verifySignature } from \"./crypto\";\nimport type { StandardSchemaV1 } from \"./standard-schema\";\n\nexport type HTTPMethod = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\" | \"PATCH\";\nexport type Method = HTTPMethod | \"*\";\n\nexport type InferBodyInput<\n\tOptions extends EndpointOptions | MiddlewareOptions,\n\tBody = Options[\"metadata\"] extends {\n\t\t$Infer: {\n\t\t\tbody: infer B;\n\t\t};\n\t}\n\t\t? B\n\t\t: Options[\"body\"] extends StandardSchemaV1\n\t\t\t? StandardSchemaV1.InferInput<Options[\"body\"]>\n\t\t\t: undefined,\n> = undefined extends Body\n\t? {\n\t\t\tbody?: Body;\n\t\t}\n\t: {\n\t\t\tbody: Body;\n\t\t};\n\nexport type InferBody<Options extends EndpointOptions | MiddlewareOptions> =\n\tOptions[\"metadata\"] extends {\n\t\t$Infer: {\n\t\t\tbody: infer Body;\n\t\t};\n\t}\n\t\t? Body\n\t\t: Options[\"body\"] extends StandardSchemaV1\n\t\t\t? StandardSchemaV1.InferOutput<Options[\"body\"]>\n\t\t\t: any;\n\nexport type InferQueryInput<\n\tOptions extends EndpointOptions | MiddlewareOptions,\n\tQuery = Options[\"metadata\"] extends {\n\t\t$Infer: {\n\t\t\tquery: infer Query;\n\t\t};\n\t}\n\t\t? Query\n\t\t: Options[\"query\"] extends StandardSchemaV1\n\t\t\t? StandardSchemaV1.InferInput<Options[\"query\"]>\n\t\t\t: Record<string, any> | undefined,\n> = undefined extends Query\n\t? {\n\t\t\tquery?: Query;\n\t\t}\n\t: {\n\t\t\tquery: Query;\n\t\t};\n\nexport type InferQuery<Options extends EndpointOptions | MiddlewareOptions> =\n\tOptions[\"metadata\"] extends {\n\t\t$Infer: {\n\t\t\tquery: infer Query;\n\t\t};\n\t}\n\t\t? Query\n\t\t: Options[\"query\"] extends StandardSchemaV1\n\t\t\t? StandardSchemaV1.InferOutput<Options[\"query\"]>\n\t\t\t: Record<string, any> | undefined;\n\nexport type InferMethod<Options extends EndpointOptions> = Options[\"method\"] extends Array<Method>\n\t? Options[\"method\"][number]\n\t: Options[\"method\"] extends \"*\"\n\t\t? HTTPMethod\n\t\t: Options[\"method\"];\n\nexport type InferInputMethod<\n\tOptions extends EndpointOptions,\n\tMethod = Options[\"method\"] extends Array<any>\n\t\t? Options[\"method\"][number]\n\t\t: Options[\"method\"] extends \"*\"\n\t\t\t? HTTPMethod\n\t\t\t: Options[\"method\"] | undefined,\n> = undefined extends Method\n\t? {\n\t\t\tmethod?: Method;\n\t\t}\n\t: {\n\t\t\tmethod: Method;\n\t\t};\n\nexport type InferParam<Path extends string> = IsEmptyObject<\n\tInferParamPath<Path> & InferParamWildCard<Path>\n> extends true\n\t? Record<string, any> | undefined\n\t: Prettify<InferParamPath<Path> & InferParamWildCard<Path>>;\n\nexport type InferParamInput<Path extends string> = IsEmptyObject<\n\tInferParamPath<Path> & InferParamWildCard<Path>\n> extends true\n\t? {\n\t\t\tparams?: Record<string, any>;\n\t\t}\n\t: {\n\t\t\tparams: Prettify<InferParamPath<Path> & InferParamWildCard<Path>>;\n\t\t};\n\nexport type InferRequest<Option extends EndpointOptions | MiddlewareOptions> =\n\tOption[\"requireRequest\"] extends true ? Request : Request | undefined;\n\nexport type InferRequestInput<Option extends EndpointOptions | MiddlewareOptions> =\n\tOption[\"requireRequest\"] extends true\n\t\t? {\n\t\t\t\trequest: Request;\n\t\t\t}\n\t\t: {\n\t\t\t\trequest?: Request;\n\t\t\t};\n\nexport type InferHeaders<Option extends EndpointOptions | MiddlewareOptions> =\n\tOption[\"requireHeaders\"] extends true ? Headers : Headers | undefined;\n\nexport type InferHeadersInput<Option extends EndpointOptions | MiddlewareOptions> =\n\tOption[\"requireHeaders\"] extends true\n\t\t? {\n\t\t\t\theaders: HeadersInit;\n\t\t\t}\n\t\t: {\n\t\t\t\theaders?: HeadersInit;\n\t\t\t};\n\nexport type InferUse<Opts extends EndpointOptions[\"use\"]> = Opts extends Middleware[]\n\t? UnionToIntersection<Awaited<ReturnType<Opts[number]>>>\n\t: {};\n\nexport type InferMiddlewareBody<Options extends MiddlewareOptions> =\n\tOptions[\"body\"] extends StandardSchemaV1<infer T> ? T : any;\n\nexport type InferMiddlewareQuery<Options extends MiddlewareOptions> =\n\tOptions[\"query\"] extends StandardSchemaV1<infer T> ? T : Record<string, any> | undefined;\n\ntype StrictKeys<T, U extends T = T> = Exclude<keyof U, keyof T> extends never ? U : never;\nexport type InputContext<\n\tPath extends string,\n\tOptions extends EndpointOptions,\n> = InferBodyInput<Options> &\n\tInferInputMethod<Options> &\n\tInferQueryInput<Options> &\n\tInferParamInput<Path> &\n\tInferRequestInput<Options> &\n\tInferHeadersInput<Options> & {\n\t\tasResponse?: boolean;\n\t\treturnHeaders?: boolean;\n\t\tuse?: Middleware[];\n\t\tpath?: string;\n\t};\n\nexport const createInternalContext = async (\n\tcontext: InputContext<any, any>,\n\t{\n\t\toptions,\n\t\tpath,\n\t}: {\n\t\toptions: EndpointOptions;\n\t\tpath: string;\n\t},\n) => {\n\tconst headers = new Headers();\n\tconst { data, error } = await runValidation(options, context);\n\tif (error) {\n\t\tthrow new APIError(400, {\n\t\t\tmessage: error.message,\n\t\t\tcode: \"VALIDATION_ERROR\",\n\t\t});\n\t}\n\tconst requestHeaders: Headers | null =\n\t\t\"headers\" in context\n\t\t\t? context.headers instanceof Headers\n\t\t\t\t? context.headers\n\t\t\t\t: new Headers(context.headers)\n\t\t\t: \"request\" in context && context.request instanceof Request\n\t\t\t\t? context.request.headers\n\t\t\t\t: null;\n\tconst requestCookies = requestHeaders?.get(\"cookie\");\n\tconst parsedCookies = requestCookies ? parseCookies(requestCookies) : undefined;\n\tconst internalContext = {\n\t\t...context,\n\t\tbody: data.body,\n\t\tquery: data.query,\n\t\tpath: context.path || path,\n\t\tcontext: \"context\" in context && context.context ? context.context : {},\n\t\treturned: undefined as any,\n\t\theaders: context?.headers,\n\t\trequest: context?.request,\n\t\tparams: \"params\" in context ? context.params : undefined,\n\t\tmethod: context.method,\n\t\tsetHeader: (key: string, value: string) => {\n\t\t\theaders.set(key, value);\n\t\t},\n\t\tgetHeader: (key: string) => {\n\t\t\tif (!requestHeaders) return null;\n\t\t\treturn requestHeaders.get(key);\n\t\t},\n\t\tgetCookie: (key: string, prefix?: CookiePrefixOptions) => {\n\t\t\tconst finalKey = getCookieKey(key, prefix);\n\t\t\tif (!finalKey) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn parsedCookies?.get(finalKey) || null;\n\t\t},\n\t\tgetSignedCookie: async (key: string, secret: string, prefix?: CookiePrefixOptions) => {\n\t\t\tconst finalKey = getCookieKey(key, prefix);\n\t\t\tif (!finalKey) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst value = parsedCookies?.get(finalKey);\n\t\t\tif (!value) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst signatureStartPos = value.lastIndexOf(\".\");\n\t\t\tif (signatureStartPos < 1) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst signedValue = value.substring(0, signatureStartPos);\n\t\t\tconst signature = value.substring(signatureStartPos + 1);\n\t\t\tif (signature.length !== 44 || !signature.endsWith(\"=\")) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst secretKey = await getCryptoKey(secret);\n\t\t\tconst isVerified = await verifySignature(signature, signedValue, secretKey);\n\t\t\treturn isVerified ? signedValue : false;\n\t\t},\n\t\tsetCookie: (key: string, value: string, options?: CookieOptions) => {\n\t\t\tconst cookie = serializeCookie(key, value, options);\n\t\t\theaders.append(\"set-cookie\", cookie);\n\t\t\treturn cookie;\n\t\t},\n\t\tsetSignedCookie: async (\n\t\t\tkey: string,\n\t\t\tvalue: string,\n\t\t\tsecret: string,\n\t\t\toptions?: CookieOptions,\n\t\t) => {\n\t\t\tconst cookie = await serializeSignedCookie(key, value, secret, options);\n\t\t\theaders.append(\"set-cookie\", cookie);\n\t\t\treturn cookie;\n\t\t},\n\t\tredirect: (url: string) => {\n\t\t\theaders.set(\"location\", url);\n\t\t\treturn new APIError(\"FOUND\", undefined, headers);\n\t\t},\n\t\terror: (\n\t\t\tstatus: keyof typeof _statusCode | Status,\n\t\t\tbody?:\n\t\t\t\t| {\n\t\t\t\t\t\tmessage?: string;\n\t\t\t\t\t\tcode?: string;\n\t\t\t\t  }\n\t\t\t\t| undefined,\n\t\t\theaders?: HeadersInit,\n\t\t) => {\n\t\t\treturn new APIError(status, body, headers);\n\t\t},\n\t\tjson: (\n\t\t\tjson: Record<string, any>,\n\t\t\trouterResponse?:\n\t\t\t\t| {\n\t\t\t\t\t\tstatus?: number;\n\t\t\t\t\t\theaders?: Record<string, string>;\n\t\t\t\t\t\tresponse?: Response;\n\t\t\t\t\t\tbody?: Record<string, any>;\n\t\t\t\t  }\n\t\t\t\t| Response,\n\t\t) => {\n\t\t\tif (!context.asResponse) {\n\t\t\t\treturn json;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tbody: routerResponse?.body || json,\n\t\t\t\trouterResponse,\n\t\t\t\t_flag: \"json\",\n\t\t\t};\n\t\t},\n\t\tresponseHeaders: headers,\n\t};\n\t//if context was shimmed through the input we want to apply it\n\tfor (const middleware of options.use || []) {\n\t\tconst response = (await middleware({\n\t\t\t...internalContext,\n\t\t\treturnHeaders: true,\n\t\t\tasResponse: false,\n\t\t})) as {\n\t\t\tresponse?: any;\n\t\t\theaders?: Headers;\n\t\t};\n\t\tif (response.response) {\n\t\t\tObject.assign(internalContext.context, response.response);\n\t\t}\n\t\t/**\n\t\t * Apply headers from the middleware to the endpoint headers\n\t\t */\n\t\tif (response.headers) {\n\t\t\tresponse.headers.forEach((value, key) => {\n\t\t\t\tinternalContext.responseHeaders.set(key, value);\n\t\t\t});\n\t\t}\n\t}\n\treturn internalContext;\n};\n","import {\n\tcreateEndpoint,\n\ttype Endpoint,\n\ttype EndpointContext,\n\ttype EndpointOptions,\n} from \"./endpoint\";\nimport {\n\tcreateInternalContext,\n\ttype InferBody,\n\ttype InferBodyInput,\n\ttype InferHeaders,\n\ttype InferHeadersInput,\n\ttype InferMiddlewareBody,\n\ttype InferMiddlewareQuery,\n\ttype InferQuery,\n\ttype InferQueryInput,\n\ttype InferRequest,\n\ttype InferRequestInput,\n\ttype InferUse,\n\ttype InputContext,\n} from \"./context\";\nimport type { Prettify } from \"./helper\";\n\nexport interface MiddlewareOptions extends Omit<EndpointOptions, \"method\"> {}\n\nexport type MiddlewareResponse = null | void | undefined | Record<string, any>;\n\nexport type MiddlewareContext<Options extends MiddlewareOptions, Context = {}> = EndpointContext<\n\tstring,\n\tOptions & {\n\t\tmethod: \"*\";\n\t}\n> & {\n\t/**\n\t * Method\n\t *\n\t * The request method\n\t */\n\tmethod: string;\n\t/**\n\t * Path\n\t *\n\t * The path of the endpoint\n\t */\n\tpath: string;\n\t/**\n\t * Body\n\t *\n\t * The body object will be the parsed JSON from the request and validated\n\t * against the body schema if it exists\n\t */\n\tbody: InferMiddlewareBody<Options>;\n\t/**\n\t * Query\n\t *\n\t * The query object will be the parsed query string from the request\n\t * and validated against the query schema if it exists\n\t */\n\tquery: InferMiddlewareQuery<Options>;\n\t/**\n\t * Params\n\t *\n\t * If the path is `/user/:id` and the request is `/user/1` then the\n\t * params will\n\t * be `{ id: \"1\" }` and if the path includes a wildcard like `/user/*`\n\t * then the\n\t * params will be `{ _: \"1\" }` where `_` is the wildcard key. If the\n\t * wildcard\n\t * is named like `/user/**:name` then the params will be `{ name: string }`\n\t */\n\tparams: string;\n\t/**\n\t * Request object\n\t *\n\t * If `requireRequest` is set to true in the endpoint options this will be\n\t * required\n\t */\n\trequest: InferRequest<Options>;\n\t/**\n\t * Headers\n\t *\n\t * If `requireHeaders` is set to true in the endpoint options this will be\n\t * required\n\t */\n\theaders: InferHeaders<Options>;\n\t/**\n\t * Set header\n\t *\n\t * If it's called outside of a request it will just be ignored.\n\t */\n\tsetHeader: (key: string, value: string) => void;\n\t/**\n\t * Get header\n\t *\n\t * If it's called outside of a request it will just return null\n\t *\n\t * @param key  - The key of the header\n\t * @returns\n\t */\n\tgetHeader: (key: string) => string | null;\n\t/**\n\t * JSON\n\t *\n\t * a helper function to create a JSON response with\n\t * the correct headers\n\t * and status code. If `asResponse` is set to true in\n\t * the context then\n\t * it will return a Response object instead of the\n\t * JSON object.\n\t *\n\t * @param json - The JSON object to return\n\t * @param routerResponse - The response object to\n\t * return if `asResponse` is\n\t * true in the context this will take precedence\n\t */\n\tjson: <R extends Record<string, any> | null>(\n\t\tjson: R,\n\t\trouterResponse?:\n\t\t\t| {\n\t\t\t\t\tstatus?: number;\n\t\t\t\t\theaders?: Record<string, string>;\n\t\t\t\t\tresponse?: Response;\n\t\t\t  }\n\t\t\t| Response,\n\t) => Promise<R>;\n\t/**\n\t * Middleware context\n\t */\n\tcontext: Prettify<Context>;\n};\n\nexport function createMiddleware<Options extends MiddlewareOptions, R>(\n\toptions: Options,\n\thandler: (context: MiddlewareContext<Options>) => Promise<R>,\n): <InputCtx extends MiddlewareInputContext<Options>>(inputContext: InputCtx) => Promise<R>;\nexport function createMiddleware<Options extends MiddlewareOptions, R>(\n\thandler: (context: MiddlewareContext<Options>) => Promise<R>,\n): <InputCtx extends MiddlewareInputContext<Options>>(inputContext: InputCtx) => Promise<R>;\nexport function createMiddleware(optionsOrHandler: any, handler?: any) {\n\tconst internalHandler = async (inputCtx: InputContext<any, any>) => {\n\t\tconst context = inputCtx as InputContext<any, any>;\n\t\tconst _handler = typeof optionsOrHandler === \"function\" ? optionsOrHandler : handler;\n\t\tconst options = typeof optionsOrHandler === \"function\" ? {} : optionsOrHandler;\n\t\tconst internalContext = await createInternalContext(context, {\n\t\t\toptions,\n\t\t\tpath: \"/\",\n\t\t});\n\n\t\tif (!_handler) {\n\t\t\tthrow new Error(\"handler must be defined\");\n\t\t}\n\t\tconst response = await _handler(internalContext as any);\n\t\tconst headers = internalContext.responseHeaders;\n\t\treturn context.returnHeaders\n\t\t\t? {\n\t\t\t\t\theaders,\n\t\t\t\t\tresponse,\n\t\t\t\t}\n\t\t\t: response;\n\t};\n\tinternalHandler.options = typeof optionsOrHandler === \"function\" ? {} : optionsOrHandler;\n\treturn internalHandler;\n}\n\nexport type MiddlewareInputContext<Options extends MiddlewareOptions> = InferBodyInput<Options> &\n\tInferQueryInput<Options> &\n\tInferRequestInput<Options> &\n\tInferHeadersInput<Options> & {\n\t\tasResponse?: boolean;\n\t\treturnHeaders?: boolean;\n\t\tuse?: Middleware[];\n\t};\n\nexport type Middleware<\n\tOptions extends MiddlewareOptions = MiddlewareOptions,\n\tHandler extends (inputCtx: any) => Promise<any> = any,\n> = Handler & {\n\toptions: Options;\n};\n\ncreateMiddleware.create = <\n\tE extends {\n\t\tuse?: Middleware[];\n\t},\n>(\n\topts?: E,\n) => {\n\ttype InferredContext = InferUse<E[\"use\"]>;\n\tfunction fn<Options extends MiddlewareOptions, R>(\n\t\toptions: Options,\n\t\thandler: (ctx: MiddlewareContext<Options, InferredContext>) => Promise<R>,\n\t): (inputContext: MiddlewareInputContext<Options>) => Promise<R>;\n\tfunction fn<Options extends MiddlewareOptions, R>(\n\t\thandler: (ctx: MiddlewareContext<Options, InferredContext>) => Promise<R>,\n\t): (inputContext: MiddlewareInputContext<Options>) => Promise<R>;\n\tfunction fn(optionsOrHandler: any, handler?: any) {\n\t\tif (typeof optionsOrHandler === \"function\") {\n\t\t\treturn createMiddleware(\n\t\t\t\t{\n\t\t\t\t\tuse: opts?.use,\n\t\t\t\t},\n\t\t\t\toptionsOrHandler,\n\t\t\t);\n\t\t}\n\t\tif (!handler) {\n\t\t\tthrow new Error(\"Middleware handler is required\");\n\t\t}\n\t\tconst middleware = createMiddleware(\n\t\t\t{\n\t\t\t\t...optionsOrHandler,\n\t\t\t\tmethod: \"*\",\n\t\t\t\tuse: [...(opts?.use || []), ...(optionsOrHandler.use || [])],\n\t\t\t},\n\t\t\thandler,\n\t\t);\n\t\treturn middleware as any;\n\t}\n\treturn fn;\n};\n","import type { HasRequiredKeys, Prettify } from \"./helper\";\nimport { toResponse } from \"./to-response\";\nimport { type Middleware } from \"./middleware\";\nimport {\n\tcreateInternalContext,\n\ttype InferBody,\n\ttype InferHeaders,\n\ttype InferMethod,\n\ttype InferParam,\n\ttype InferQuery,\n\ttype InferRequest,\n\ttype InferUse,\n\ttype InputContext,\n\ttype Method,\n} from \"./context\";\nimport type { CookieOptions, CookiePrefixOptions } from \"./cookies\";\nimport { APIError, type _statusCode, type Status } from \"./error\";\nimport type { OpenAPIParameter, OpenAPISchemaType } from \"./openapi\";\nimport type { StandardSchemaV1 } from \"./standard-schema\";\nimport { isAPIError } from \"./utils\";\n\nexport interface EndpointOptions {\n\t/**\n\t * Request Method\n\t */\n\tmethod: Method | Method[];\n\t/**\n\t * Body Schema\n\t */\n\tbody?: StandardSchemaV1;\n\t/**\n\t * Query Schema\n\t */\n\tquery?: StandardSchemaV1;\n\t/**\n\t * Error Schema\n\t */\n\terror?: StandardSchemaV1;\n\t/**\n\t * If true headers will be required to be passed in the context\n\t */\n\trequireHeaders?: boolean;\n\t/**\n\t * If true request object will be required\n\t */\n\trequireRequest?: boolean;\n\t/**\n\t * Clone the request object from the router\n\t */\n\tcloneRequest?: boolean;\n\t/**\n\t * If true the body will be undefined\n\t */\n\tdisableBody?: boolean;\n\t/**\n\t * Endpoint metadata\n\t */\n\tmetadata?: {\n\t\t/**\n\t\t * Open API definition\n\t\t */\n\t\topenapi?: {\n\t\t\tsummary?: string;\n\t\t\tdescription?: string;\n\t\t\ttags?: string[];\n\t\t\toperationId?: string;\n\t\t\tparameters?: OpenAPIParameter[];\n\t\t\trequestBody?: {\n\t\t\t\tcontent: {\n\t\t\t\t\t\"application/json\": {\n\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\ttype?: OpenAPISchemaType;\n\t\t\t\t\t\t\tproperties?: Record<string, any>;\n\t\t\t\t\t\t\trequired?: string[];\n\t\t\t\t\t\t\t$ref?: string;\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t\tresponses?: {\n\t\t\t\t[status: string]: {\n\t\t\t\t\tdescription: string;\n\t\t\t\t\tcontent?: {\n\t\t\t\t\t\t\"application/json\"?: {\n\t\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t\ttype?: OpenAPISchemaType;\n\t\t\t\t\t\t\t\tproperties?: Record<string, any>;\n\t\t\t\t\t\t\t\trequired?: string[];\n\t\t\t\t\t\t\t\t$ref?: string;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\"text/plain\"?: {\n\t\t\t\t\t\t\tschema?: {\n\t\t\t\t\t\t\t\ttype?: OpenAPISchemaType;\n\t\t\t\t\t\t\t\tproperties?: Record<string, any>;\n\t\t\t\t\t\t\t\trequired?: string[];\n\t\t\t\t\t\t\t\t$ref?: string;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\"text/html\"?: {\n\t\t\t\t\t\t\tschema?: {\n\t\t\t\t\t\t\t\ttype?: OpenAPISchemaType;\n\t\t\t\t\t\t\t\tproperties?: Record<string, any>;\n\t\t\t\t\t\t\t\trequired?: string[];\n\t\t\t\t\t\t\t\t$ref?: string;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\t/**\n\t\t * Infer body and query type from ts interface\n\t\t *\n\t\t * useful for generic and dynamic types\n\t\t *\n\t\t * @example\n\t\t * ```ts\n\t\t * const endpoint = createEndpoint(\"/path\", {\n\t\t * \t\tmethod: \"POST\",\n\t\t * \t\tbody: z.record(z.string()),\n\t\t * \t\t$Infer: {\n\t\t * \t\t\tbody: {} as {\n\t\t * \t\t\t\ttype: InferTypeFromOptions<Option> // custom type inference\n\t\t * \t\t\t}\n\t\t * \t\t}\n\t\t * \t}, async(ctx)=>{\n\t\t * \t\tconst body = ctx.body\n\t\t * \t})\n\t\t * ```\n\t\t */\n\t\t$Infer?: {\n\t\t\t/**\n\t\t\t * Body\n\t\t\t */\n\t\t\tbody?: any;\n\t\t\t/**\n\t\t\t * Query\n\t\t\t */\n\t\t\tquery?: Record<string, any>;\n\t\t};\n\t\t/**\n\t\t * If enabled, endpoint won't be exposed over a router\n\t\t */\n\t\tSERVER_ONLY?: boolean;\n\t\t/**\n\t\t * Extra metadata\n\t\t */\n\t\t[key: string]: any;\n\t};\n\t/**\n\t * List of middlewares to use\n\t */\n\tuse?: Middleware[];\n\t/**\n\t * A callback to run before any API error is throw or returned\n\t *\n\t * @param e - The API error\n\t * @returns - The response to return\n\t */\n\tonAPIError?: (e: APIError) => void | Promise<void>;\n}\n\nexport type EndpointContext<Path extends string, Options extends EndpointOptions, Context = {}> = {\n\t/**\n\t * Method\n\t *\n\t * The request method\n\t */\n\tmethod: InferMethod<Options>;\n\t/**\n\t * Path\n\t *\n\t * The path of the endpoint\n\t */\n\tpath: Path;\n\t/**\n\t * Body\n\t *\n\t * The body object will be the parsed JSON from the request and validated\n\t * against the body schema if it exists.\n\t */\n\tbody: InferBody<Options>;\n\t/**\n\t * Query\n\t *\n\t * The query object will be the parsed query string from the request\n\t * and validated against the query schema if it exists\n\t */\n\tquery: InferQuery<Options>;\n\t/**\n\t * Params\n\t *\n\t * If the path is `/user/:id` and the request is `/user/1` then the params will\n\t * be `{ id: \"1\" }` and if the path includes a wildcard like `/user/*` then the\n\t * params will be `{ _: \"1\" }` where `_` is the wildcard key. If the wildcard\n\t * is named like `/user/**:name` then the params will be `{ name: string }`\n\t */\n\tparams: InferParam<Path>;\n\t/**\n\t * Request object\n\t *\n\t * If `requireRequest` is set to true in the endpoint options this will be\n\t * required\n\t */\n\trequest: InferRequest<Options>;\n\t/**\n\t * Headers\n\t *\n\t * If `requireHeaders` is set to true in the endpoint options this will be\n\t * required\n\t */\n\theaders: InferHeaders<Options>;\n\t/**\n\t * Set header\n\t *\n\t * If it's called outside of a request it will just be ignored.\n\t */\n\tsetHeader: (key: string, value: string) => void;\n\t/**\n\t * Get header\n\t *\n\t * If it's called outside of a request it will just return null\n\t *\n\t * @param key  - The key of the header\n\t * @returns\n\t */\n\tgetHeader: (key: string) => string | null;\n\t/**\n\t * Get a cookie value from the request\n\t *\n\t * @param key - The key of the cookie\n\t * @param prefix - The prefix of the cookie between `__Secure-` and `__Host-`\n\t * @returns - The value of the cookie\n\t */\n\tgetCookie: (key: string, prefix?: CookiePrefixOptions) => string | null;\n\t/**\n\t * Get a signed cookie value from the request\n\t *\n\t * @param key - The key of the cookie\n\t * @param secret - The secret of the signed cookie\n\t * @param prefix - The prefix of the cookie between `__Secure-` and `__Host-`\n\t * @returns\n\t */\n\tgetSignedCookie: (\n\t\tkey: string,\n\t\tsecret: string,\n\t\tprefix?: CookiePrefixOptions,\n\t) => Promise<string | null>;\n\t/**\n\t * Set a cookie value in the response\n\t *\n\t * @param key - The key of the cookie\n\t * @param value - The value to set\n\t * @param options - The options of the cookie\n\t * @returns - The cookie string\n\t */\n\tsetCookie: (key: string, value: string, options?: CookieOptions) => string;\n\t/**\n\t * Set signed cookie\n\t *\n\t * @param key - The key of the cookie\n\t * @param value  - The value to set\n\t * @param secret - The secret to sign the cookie with\n\t * @param options - The options of the cookie\n\t * @returns - The cookie string\n\t */\n\tsetSignedCookie: (\n\t\tkey: string,\n\t\tvalue: string,\n\t\tsecret: string,\n\t\toptions?: CookieOptions,\n\t) => Promise<string>;\n\t/**\n\t * JSON\n\t *\n\t * a helper function to create a JSON response with\n\t * the correct headers\n\t * and status code. If `asResponse` is set to true in\n\t * the context then\n\t * it will return a Response object instead of the\n\t * JSON object.\n\t *\n\t * @param json - The JSON object to return\n\t * @param routerResponse - The response object to\n\t * return if `asResponse` is\n\t * true in the context this will take precedence\n\t */\n\tjson: <R extends Record<string, any> | null>(\n\t\tjson: R,\n\t\trouterResponse?:\n\t\t\t| {\n\t\t\t\t\tstatus?: number;\n\t\t\t\t\theaders?: Record<string, string>;\n\t\t\t\t\tresponse?: Response;\n\t\t\t\t\tbody?: Record<string, string>;\n\t\t\t  }\n\t\t\t| Response,\n\t) => Promise<R>;\n\t/**\n\t * Middleware context\n\t */\n\tcontext: Prettify<Context & InferUse<Options[\"use\"]>>;\n\t/**\n\t * Redirect to a new URL\n\t */\n\tredirect: (url: string) => APIError;\n\t/**\n\t * Return error\n\t */\n\terror: (\n\t\tstatus: keyof typeof _statusCode | Status,\n\t\tbody?: {\n\t\t\tmessage?: string;\n\t\t\tcode?: string;\n\t\t} & Record<string, any>,\n\t\theaders?: HeadersInit,\n\t) => APIError;\n};\n\nexport const createEndpoint = <Path extends string, Options extends EndpointOptions, R>(\n\tpath: Path,\n\toptions: Options,\n\thandler: (context: EndpointContext<Path, Options>) => Promise<R>,\n) => {\n\ttype Context = InputContext<Path, Options>;\n\tconst internalHandler = async <\n\t\tAsResponse extends boolean = false,\n\t\tReturnHeaders extends boolean = false,\n\t>(\n\t\t...inputCtx: HasRequiredKeys<Context> extends true\n\t\t\t? [Context & { asResponse?: AsResponse; returnHeaders?: ReturnHeaders }]\n\t\t\t: [(Context & { asResponse?: AsResponse; returnHeaders?: ReturnHeaders })?]\n\t) => {\n\t\tconst context = (inputCtx[0] || {}) as InputContext<any, any>;\n\t\tconst internalContext = await createInternalContext(context, {\n\t\t\toptions,\n\t\t\tpath,\n\t\t});\n\t\tconst response = await handler(internalContext as any).catch(async (e) => {\n\t\t\tif (isAPIError(e)) {\n\t\t\t\tconst onAPIError = options.onAPIError;\n\t\t\t\tif (onAPIError) {\n\t\t\t\t\tawait onAPIError(e);\n\t\t\t\t}\n\t\t\t\tif (context.asResponse) {\n\t\t\t\t\treturn e;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow e;\n\t\t});\n\t\tconst headers = internalContext.responseHeaders;\n\t\ttype ResultType = [AsResponse] extends [true]\n\t\t\t? Response\n\t\t\t: [ReturnHeaders] extends [true]\n\t\t\t\t? { headers: Headers; response: R }\n\t\t\t\t: R;\n\n\t\treturn (\n\t\t\tcontext.asResponse\n\t\t\t\t? toResponse(response, {\n\t\t\t\t\t\theaders,\n\t\t\t\t\t})\n\t\t\t\t: context.returnHeaders\n\t\t\t\t\t? {\n\t\t\t\t\t\t\theaders,\n\t\t\t\t\t\t\tresponse,\n\t\t\t\t\t\t}\n\t\t\t\t\t: response\n\t\t) as ResultType;\n\t};\n\tinternalHandler.options = options;\n\tinternalHandler.path = path;\n\treturn internalHandler;\n};\n\ncreateEndpoint.create = <E extends { use?: Middleware[] }>(opts?: E) => {\n\treturn <Path extends string, Opts extends EndpointOptions, R>(\n\t\tpath: Path,\n\t\toptions: Opts,\n\t\thandler: (ctx: EndpointContext<Path, Opts, InferUse<E[\"use\"]>>) => Promise<R>,\n\t) => {\n\t\treturn createEndpoint(\n\t\t\tpath,\n\t\t\t{\n\t\t\t\t...options,\n\t\t\t\tuse: [...(options?.use || []), ...(opts?.use || [])],\n\t\t\t},\n\t\t\thandler,\n\t\t);\n\t};\n};\n\nexport type Endpoint<\n\tPath extends string = string,\n\tOptions extends EndpointOptions = EndpointOptions,\n\tHandler extends (inputCtx: any) => Promise<any> = (inputCtx: any) => Promise<any>,\n> = Handler & {\n\toptions: Options;\n\tpath: Path;\n};\n","import { addRoute, createRouter as createRou3Router, findAllRoutes, findRoute } from \"rou3\";\nimport { type Endpoint, createEndpoint } from \"./endpoint\";\nimport type { Middleware } from \"./middleware\";\nimport { generator, getHTML } from \"./openapi\";\nimport { toResponse } from \"./to-response\";\nimport { getBody, isAPIError } from \"./utils\";\n\nexport interface RouterConfig {\n\tthrowError?: boolean;\n\tonError?: (e: unknown) => void | Promise<void> | Response | Promise<Response>;\n\tbasePath?: string;\n\trouterMiddleware?: Array<{\n\t\tpath: string;\n\t\tmiddleware: Middleware;\n\t}>;\n\t/**\n\t * additional Context that needs to passed to endpoints\n\t *\n\t * this will be available on `ctx.context` on endpoints\n\t */\n\trouterContext?: Record<string, any>;\n\t/**\n\t * A callback to run before any response\n\t */\n\tonResponse?: (res: Response) => any | Promise<any>;\n\t/**\n\t * A callback to run before any request\n\t */\n\tonRequest?: (req: Request) => any | Promise<any>;\n\t/**\n\t * Open API route configuration\n\t */\n\topenapi?: {\n\t\t/**\n\t\t * Disable openapi route\n\t\t *\n\t\t * @default false\n\t\t */\n\t\tdisabled?: boolean;\n\t\t/**\n\t\t * A path to display open api using scalar\n\t\t *\n\t\t * @default \"/api/reference\"\n\t\t */\n\t\tpath?: string;\n\t\t/**\n\t\t * Scalar Configuration\n\t\t */\n\t\tscalar?: {\n\t\t\t/**\n\t\t\t * Title\n\t\t\t * @default \"Open API Reference\"\n\t\t\t */\n\t\t\ttitle?: string;\n\t\t\t/**\n\t\t\t * Description\n\t\t\t *\n\t\t\t * @default \"Better Call Open API Reference\"\n\t\t\t */\n\t\t\tdescription?: string;\n\t\t\t/**\n\t\t\t * Logo URL\n\t\t\t */\n\t\t\tlogo?: string;\n\t\t\t/**\n\t\t\t * Scalar theme\n\t\t\t * @default \"saturn\"\n\t\t\t */\n\t\t\ttheme?: string;\n\t\t};\n\t};\n}\n\nexport const createRouter = <E extends Record<string, Endpoint>, Config extends RouterConfig>(\n\tendpoints: E,\n\tconfig?: Config,\n) => {\n\tif (!config?.openapi?.disabled) {\n\t\tconst openapi = {\n\t\t\tpath: \"/api/reference\",\n\t\t\t...config?.openapi,\n\t\t};\n\t\t//@ts-expect-error\n\t\tendpoints[\"openapi\"] = createEndpoint(\n\t\t\topenapi.path,\n\t\t\t{\n\t\t\t\tmethod: \"GET\",\n\t\t\t},\n\t\t\tasync (c) => {\n\t\t\t\tconst schema = await generator(endpoints);\n\t\t\t\treturn new Response(getHTML(schema, openapi.scalar), {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"text/html\",\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t);\n\t}\n\tconst router = createRou3Router();\n\tconst middlewareRouter = createRou3Router();\n\n\tfor (const endpoint of Object.values(endpoints)) {\n\t\tif (!endpoint.options) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (endpoint.options?.metadata?.SERVER_ONLY) continue;\n\n\t\tconst methods = Array.isArray(endpoint.options?.method)\n\t\t\t? endpoint.options.method\n\t\t\t: [endpoint.options?.method];\n\n\t\tfor (const method of methods) {\n\t\t\taddRoute(router, method, endpoint.path, endpoint);\n\t\t}\n\t}\n\n\tif (config?.routerMiddleware?.length) {\n\t\tfor (const { path, middleware } of config.routerMiddleware) {\n\t\t\taddRoute(middlewareRouter, \"*\", path, middleware);\n\t\t}\n\t}\n\n\tconst processRequest = async (request: Request) => {\n\t\tconst url = new URL(request.url);\n\t\tconst path = config?.basePath\n\t\t\t? url.pathname\n\t\t\t\t\t.split(config.basePath)\n\t\t\t\t\t.reduce((acc, curr, index) => {\n\t\t\t\t\t\tif (index !== 0) {\n\t\t\t\t\t\t\tif (index > 1) {\n\t\t\t\t\t\t\t\tacc.push(`${config.basePath}${curr}`);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tacc.push(curr);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}, [] as string[])\n\t\t\t\t\t.join(\"\")\n\t\t\t: url.pathname;\n\n\t\tif (!path?.length) {\n\t\t\treturn new Response(null, { status: 404, statusText: \"Not Found\" });\n\t\t}\n\n\t\tconst route = findRoute(router, request.method, path);\n\t\tif (!route?.data) {\n\t\t\treturn new Response(null, { status: 404, statusText: \"Not Found\" });\n\t\t}\n\n\t\tconst query: Record<string, string | string[]> = {};\n\t\turl.searchParams.forEach((value, key) => {\n\t\t\tif (key in query) {\n\t\t\t\tif (Array.isArray(query[key])) {\n\t\t\t\t\t(query[key] as string[]).push(value);\n\t\t\t\t} else {\n\t\t\t\t\tquery[key] = [query[key] as string, value];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tquery[key] = value;\n\t\t\t}\n\t\t});\n\n\t\tconst handler = route.data as Endpoint;\n\t\tconst context = {\n\t\t\tpath,\n\t\t\tmethod: request.method as \"GET\",\n\t\t\theaders: request.headers,\n\t\t\tparams: route.params ? (JSON.parse(JSON.stringify(route.params)) as any) : {},\n\t\t\trequest: request,\n\t\t\tbody: handler.options.disableBody\n\t\t\t\t? undefined\n\t\t\t\t: await getBody(handler.options.cloneRequest ? request.clone() : request),\n\t\t\tquery,\n\t\t\t_flag: \"router\" as const,\n\t\t\tasResponse: true,\n\t\t\tcontext: config?.routerContext,\n\t\t};\n\n\t\ttry {\n\t\t\tconst middlewareRoutes = findAllRoutes(middlewareRouter, \"*\", path);\n\t\t\tif (middlewareRoutes?.length) {\n\t\t\t\tfor (const { data: middleware, params } of middlewareRoutes) {\n\t\t\t\t\tconst res = await (middleware as Endpoint)({\n\t\t\t\t\t\t...context,\n\t\t\t\t\t\tparams,\n\t\t\t\t\t\tasResponse: false,\n\t\t\t\t\t});\n\n\t\t\t\t\tif (res instanceof Response) return res;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst response = (await handler(context)) as Response;\n\t\t\treturn response;\n\t\t} catch (error) {\n\t\t\tif (config?.onError) {\n\t\t\t\ttry {\n\t\t\t\t\tconst errorResponse = await config.onError(error);\n\n\t\t\t\t\tif (errorResponse instanceof Response) {\n\t\t\t\t\t\treturn toResponse(errorResponse);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (isAPIError(error)) {\n\t\t\t\t\t\treturn toResponse(error);\n\t\t\t\t\t}\n\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (config?.throwError) {\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tif (isAPIError(error)) {\n\t\t\t\treturn toResponse(error);\n\t\t\t}\n\n\t\t\tconsole.error(`# SERVER_ERROR: `, error);\n\t\t\treturn new Response(null, {\n\t\t\t\tstatus: 500,\n\t\t\t\tstatusText: \"Internal Server Error\",\n\t\t\t});\n\t\t}\n\t};\n\n\treturn {\n\t\thandler: async (request: Request) => {\n\t\t\tconst onReq = await config?.onRequest?.(request);\n\t\t\tif (onReq instanceof Response) {\n\t\t\t\treturn onReq;\n\t\t\t}\n\t\t\tconst req = onReq instanceof Request ? onReq : request;\n\t\t\tconst res = await processRequest(req);\n\t\t\tconst onRes = await config?.onResponse?.(res);\n\t\t\tif (onRes instanceof Response) {\n\t\t\t\treturn onRes;\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t\tendpoints,\n\t};\n};\n\nexport type Router = ReturnType<typeof createRouter>;\n","/** A special constant with type `never` */\nexport const NEVER = Object.freeze({\n    status: \"aborted\",\n});\nexport /*@__NO_SIDE_EFFECTS__*/ function $constructor(name, initializer, params) {\n    function init(inst, def) {\n        var _a;\n        Object.defineProperty(inst, \"_zod\", {\n            value: inst._zod ?? {},\n            enumerable: false,\n        });\n        (_a = inst._zod).traits ?? (_a.traits = new Set());\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        for (const k in _.prototype) {\n            if (!(k in inst))\n                Object.defineProperty(inst, k, { value: _.prototype[k].bind(inst) });\n        }\n        inst._zod.constr = _;\n        inst._zod.def = def;\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nexport const $brand = Symbol(\"zod_brand\");\nexport class $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nexport const globalConfig = {};\nexport function config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n","// functions\nexport function assertEqual(val) {\n    return val;\n}\nexport function assertNotEqual(val) {\n    return val;\n}\nexport function assertIs(_arg) { }\nexport function assertNever(_x) {\n    throw new Error();\n}\nexport function assert(_) { }\nexport function getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nexport function joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nexport function jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nexport function cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nexport function nullish(input) {\n    return input === null || input === undefined;\n}\nexport function cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nexport function floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport function defineLazy(object, key, getter) {\n    const set = false;\n    Object.defineProperty(object, key, {\n        get() {\n            if (!set) {\n                const value = getter();\n                object[key] = value;\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nexport function assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nexport function getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nexport function promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nexport function randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nexport function esc(str) {\n    return JSON.stringify(str);\n}\nexport const captureStackTrace = Error.captureStackTrace\n    ? Error.captureStackTrace\n    : (..._args) => { };\nexport function isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nexport const allowsEval = cached(() => {\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nexport function isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nexport function numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nexport const propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nexport const primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nexport function escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nexport function clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nexport function normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nexport function createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nexport function stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nexport function optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nexport const NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nexport const BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nexport function pick(schema, mask) {\n    const newShape = {};\n    const currDef = schema._zod.def; //.shape;\n    for (const key in mask) {\n        if (!(key in currDef.shape)) {\n            throw new Error(`Unrecognized key: \"${key}\"`);\n        }\n        if (!mask[key])\n            continue;\n        // pick key\n        newShape[key] = currDef.shape[key];\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape: newShape,\n        checks: [],\n    });\n}\nexport function omit(schema, mask) {\n    const newShape = { ...schema._zod.def.shape };\n    const currDef = schema._zod.def; //.shape;\n    for (const key in mask) {\n        if (!(key in currDef.shape)) {\n            throw new Error(`Unrecognized key: \"${key}\"`);\n        }\n        if (!mask[key])\n            continue;\n        delete newShape[key];\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape: newShape,\n        checks: [],\n    });\n}\nexport function extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const def = {\n        ...schema._zod.def,\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: [], // delete existing checks\n    };\n    return clone(schema, def);\n}\nexport function merge(a, b) {\n    return clone(a, {\n        ...a._zod.def,\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        catchall: b._zod.def.catchall,\n        checks: [], // delete existing checks\n    });\n}\nexport function partial(Class, schema, mask) {\n    const oldShape = schema._zod.def.shape;\n    const shape = { ...oldShape };\n    if (mask) {\n        for (const key in mask) {\n            if (!(key in oldShape)) {\n                throw new Error(`Unrecognized key: \"${key}\"`);\n            }\n            if (!mask[key])\n                continue;\n            // if (oldShape[key]!._zod.optin === \"optional\") continue;\n            shape[key] = Class\n                ? new Class({\n                    type: \"optional\",\n                    innerType: oldShape[key],\n                })\n                : oldShape[key];\n        }\n    }\n    else {\n        for (const key in oldShape) {\n            // if (oldShape[key]!._zod.optin === \"optional\") continue;\n            shape[key] = Class\n                ? new Class({\n                    type: \"optional\",\n                    innerType: oldShape[key],\n                })\n                : oldShape[key];\n        }\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape,\n        checks: [],\n    });\n}\nexport function required(Class, schema, mask) {\n    const oldShape = schema._zod.def.shape;\n    const shape = { ...oldShape };\n    if (mask) {\n        for (const key in mask) {\n            if (!(key in shape)) {\n                throw new Error(`Unrecognized key: \"${key}\"`);\n            }\n            if (!mask[key])\n                continue;\n            // overwrite with non-optional\n            shape[key] = new Class({\n                type: \"nonoptional\",\n                innerType: oldShape[key],\n            });\n        }\n    }\n    else {\n        for (const key in oldShape) {\n            // overwrite with non-optional\n            shape[key] = new Class({\n                type: \"nonoptional\",\n                innerType: oldShape[key],\n            });\n        }\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape,\n        // optional: [],\n        checks: [],\n    });\n}\nexport function aborted(x, startIndex = 0) {\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true)\n            return true;\n    }\n    return false;\n}\nexport function prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nexport function unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nexport function finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nexport function getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nexport function getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nexport function issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nexport function cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// instanceof\nexport class Class {\n    constructor(..._args) { }\n}\n","import { $constructor } from \"./core.js\";\nimport * as util from \"./util.js\";\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"message\", {\n        get() {\n            return JSON.stringify(def, util.jsonStringifyReplacer, 2);\n        },\n        enumerable: true,\n        // configurable: false,\n    });\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nexport const $ZodError = $constructor(\"$ZodError\", initializer);\nexport const $ZodRealError = $constructor(\"$ZodError\", initializer, { Parent: Error });\nexport function flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nexport function formatError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nexport function treeifyError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *    Expected number, received string at \"username\n * favoriteNumbers[0]\n *    Invalid input: expected number\n * ```\n */\nexport function toDotPath(path) {\n    const segs = [];\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nexport function prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => a.path.length - b.path.length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(` ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`   at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n","import * as core from \"./core.js\";\nimport * as errors from \"./errors.js\";\nimport * as util from \"./util.js\";\nexport const _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parse = /* @__PURE__*/ _parse(errors.$ZodRealError);\nexport const _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parseAsync = /* @__PURE__*/ _parseAsync(errors.$ZodRealError);\nexport const _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? errors.$ZodError)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParse = /* @__PURE__*/ _safeParse(errors.$ZodRealError);\nexport const _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParseAsync = /* @__PURE__*/ _safeParseAsync(errors.$ZodRealError);\n","// import { $ZodType } from \"./schemas.js\";\nimport * as core from \"./core.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nexport const $ZodCheck = /*@__PURE__*/ core.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nexport const $ZodCheckLessThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckGreaterThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMultipleOf = \n/*@__PURE__*/ core.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : util.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = util.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = regexes.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = util.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckMaxSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckSizeEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMaxLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLengthEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nexport const $ZodCheckRegex = /*@__PURE__*/ core.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLowerCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckUpperCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckIncludes = /*@__PURE__*/ core.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = util.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStartsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${util.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckEndsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${util.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(...util.prefixIssues(property, result.issues));\n    }\n}\nexport const $ZodCheckProperty = /*@__PURE__*/ core.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nexport const $ZodCheckMimeType = /*@__PURE__*/ core.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n        });\n    };\n});\nexport const $ZodCheckOverwrite = /*@__PURE__*/ core.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n","export class Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n","export const version = {\n    major: 4,\n    minor: 0,\n    patch: 0,\n};\n","import * as checks from \"./checks.js\";\nimport * as core from \"./core.js\";\nimport { Doc } from \"./doc.js\";\nimport { safeParse, safeParseAsync } from \"./parse.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nimport { version } from \"./versions.js\";\nexport const $ZodType = /*@__PURE__*/ core.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    //\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = util.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new core.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = util.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = util.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        inst._zod.run = (payload, ctx) => {\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    inst[\"~standard\"] = {\n        validate: (value) => {\n            try {\n                const r = safeParse(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return safeParseAsync(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    };\n});\nexport { clone } from \"./util.js\";\nexport const $ZodString = /*@__PURE__*/ core.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? regexes.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    checks.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nexport const $ZodGUID = /*@__PURE__*/ core.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.guid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodUUID = /*@__PURE__*/ core.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = regexes.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = regexes.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodEmail = /*@__PURE__*/ core.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.email);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodURL = /*@__PURE__*/ core.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            const orig = payload.value;\n            const url = new URL(orig);\n            const href = url.href;\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: regexes.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // payload.value = url.href;\n            if (!orig.endsWith(\"/\") && href.endsWith(\"/\")) {\n                payload.value = href.slice(0, -1);\n            }\n            else {\n                payload.value = href;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodEmoji = /*@__PURE__*/ core.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodNanoID = /*@__PURE__*/ core.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID = /*@__PURE__*/ core.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID2 = /*@__PURE__*/ core.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodULID = /*@__PURE__*/ core.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodXID = /*@__PURE__*/ core.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.xid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodKSUID = /*@__PURE__*/ core.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.date);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.duration);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodIPv4 = /*@__PURE__*/ core.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv4`;\n    });\n});\nexport const $ZodIPv6 = /*@__PURE__*/ core.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv6`;\n    });\n    inst._zod.check = (payload) => {\n        try {\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const [address, prefix] = payload.value.split(\"/\");\n        try {\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodBase64 = /*@__PURE__*/ core.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64URL(data) {\n    if (!regexes.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nexport const $ZodBase64URL = /*@__PURE__*/ core.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64url\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodE164 = /*@__PURE__*/ core.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nexport function isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodJWT = /*@__PURE__*/ core.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodNumber = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? regexes.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nexport const $ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    checks.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checksp\n});\nexport const $ZodBoolean = /*@__PURE__*/ core.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigInt = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    checks.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nexport const $ZodSymbol = /*@__PURE__*/ core.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodUndefined = /*@__PURE__*/ core.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodNull = /*@__PURE__*/ core.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.null;\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodAny = /*@__PURE__*/ core.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodUnknown = /*@__PURE__*/ core.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodNever = /*@__PURE__*/ core.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodVoid = /*@__PURE__*/ core.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodDate = /*@__PURE__*/ core.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodArray = /*@__PURE__*/ core.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handleObjectResult(result, final, key) {\n    // if(isOptional)\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(key, result.issues));\n    }\n    final.value[key] = result.value;\n}\nfunction handleOptionalObjectResult(result, final, key, input) {\n    if (result.issues.length) {\n        // validation failed against value schema\n        if (input[key] === undefined) {\n            // if input was undefined, ignore the error\n            if (key in input) {\n                final.value[key] = undefined;\n            }\n            else {\n                final.value[key] = result.value;\n            }\n        }\n        else {\n            final.issues.push(...util.prefixIssues(key, result.issues));\n        }\n    }\n    else if (result.value === undefined) {\n        // validation returned `undefined`\n        if (key in input)\n            final.value[key] = undefined;\n    }\n    else {\n        // non-undefined value\n        final.value[key] = result.value;\n    }\n}\nexport const $ZodObject = /*@__PURE__*/ core.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    const _normalized = util.cached(() => {\n        const keys = Object.keys(def.shape);\n        for (const k of keys) {\n            if (!(def.shape[k] instanceof $ZodType)) {\n                throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n            }\n        }\n        const okeys = util.optionalKeys(def.shape);\n        return {\n            shape: def.shape,\n            keys,\n            keySet: new Set(keys),\n            numKeys: keys.length,\n            optionalKeys: new Set(okeys),\n        };\n    });\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const generateFastpass = (shape) => {\n        const doc = new Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = util.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {}`);\n        for (const key of normalized.keys) {\n            if (normalized.optionalKeys.has(key)) {\n                const id = ids[key];\n                doc.write(`const ${id} = ${parseStr(key)};`);\n                const k = util.esc(key);\n                doc.write(`\n        if (${id}.issues.length) {\n          if (input[${k}] === undefined) {\n            if (${k} in input) {\n              newResult[${k}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${id}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${k}, ...iss.path] : [${k}],\n              }))\n            );\n          }\n        } else if (${id}.value === undefined) {\n          if (${k} in input) newResult[${k}] = undefined;\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n        `);\n            }\n            else {\n                const id = ids[key];\n                //  const id = ids[key];\n                doc.write(`const ${id} = ${parseStr(key)};`);\n                doc.write(`\n          if (${id}.issues.length) payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${util.esc(key)}, ...iss.path] : [${util.esc(key)}]\n          })));`);\n                doc.write(`newResult[${util.esc(key)}] = ${id}.value`);\n            }\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = util.isObject;\n    const jit = !core.globalConfig.jitless;\n    const allowsEval = util.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n        }\n        else {\n            payload.value = {};\n            const shape = value.shape;\n            for (const key of value.keys) {\n                const el = shape[key];\n                // do not add omitted optional keys\n                // if (!(key in input)) {\n                //   if (optionalKeys.has(key)) continue;\n                //   payload.issues.push({\n                //     code: \"invalid_type\",\n                //     path: [key],\n                //     expected: \"nonoptional\",\n                //     note: `Missing required key: \"${key}\"`,\n                //     input,\n                //     inst,\n                //   });\n                // }\n                const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n                const isOptional = el._zod.optin === \"optional\" && el._zod.optout === \"optional\";\n                if (r instanceof Promise) {\n                    proms.push(r.then((r) => isOptional ? handleOptionalObjectResult(r, payload, key, input) : handleObjectResult(r, payload, key)));\n                }\n                else if (isOptional) {\n                    handleOptionalObjectResult(r, payload, key, input);\n                }\n                else {\n                    handleObjectResult(r, payload, key);\n                }\n            }\n        }\n        if (!catchall) {\n            // return payload;\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        const unrecognized = [];\n        // iterate over input keys\n        const keySet = value.keySet;\n        const _catchall = catchall._zod;\n        const t = _catchall.def.type;\n        for (const key of Object.keys(input)) {\n            if (keySet.has(key))\n                continue;\n            if (t === \"never\") {\n                unrecognized.push(key);\n                continue;\n            }\n            const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handleObjectResult(r, payload, key)));\n            }\n            else {\n                handleObjectResult(r, payload, key);\n            }\n        }\n        if (unrecognized.length) {\n            payload.issues.push({\n                code: \"unrecognized_keys\",\n                keys: unrecognized,\n                input,\n                inst,\n            });\n        }\n        if (!proms.length)\n            return payload;\n        return Promise.all(proms).then(() => {\n            return payload;\n        });\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n    });\n    return final;\n}\nexport const $ZodUnion = /*@__PURE__*/ core.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => util.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nexport const $ZodDiscriminatedUnion = \n/*@__PURE__*/\ncore.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = util.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodIntersection = /*@__PURE__*/ core.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (util.isPlainObject(a) && util.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    if (left.issues.length) {\n        result.issues.push(...left.issues);\n    }\n    if (right.issues.length) {\n        result.issues.push(...right.issues);\n    }\n    if (util.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nexport const $ZodTuple = /*@__PURE__*/ core.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    const optStart = items.length - [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    input,\n                    inst,\n                    origin: \"array\",\n                    ...(tooBig ? { code: \"too_big\", maximum: items.length } : { code: \"too_small\", minimum: items.length }),\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodRecord = /*@__PURE__*/ core.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (def.keyType._zod.values) {\n            const values = def.keyType._zod.values;\n            payload.value = {};\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(...util.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!values.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                if (keyResult.issues.length) {\n                    payload.issues.push({\n                        origin: \"record\",\n                        code: \"invalid_key\",\n                        issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        input: key,\n                        path: [key],\n                        inst,\n                    });\n                    payload.value[keyResult.value] = keyResult.value;\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(...util.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nexport const $ZodMap = /*@__PURE__*/ core.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_key\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nexport const $ZodSet = /*@__PURE__*/ core.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nexport const $ZodEnum = /*@__PURE__*/ core.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = util.getEnumValues(def.entries);\n    inst._zod.values = new Set(values);\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => util.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodLiteral = /*@__PURE__*/ core.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.values = new Set(def.values);\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o ? o.toString() : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodFile = /*@__PURE__*/ core.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodTransform = /*@__PURE__*/ core.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const _out = def.transform(payload.value, payload);\n        if (_ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new core.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nexport const $ZodOptional = /*@__PURE__*/ core.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNullable = /*@__PURE__*/ core.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodDefault = /*@__PURE__*/ core.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault always returns the default value immediately.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nexport const $ZodPrefault = /*@__PURE__*/ core.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNonOptional = /*@__PURE__*/ core.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nexport const $ZodSuccess = /*@__PURE__*/ core.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nexport const $ZodCatch = /*@__PURE__*/ core.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nexport const $ZodNaN = /*@__PURE__*/ core.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPipe = /*@__PURE__*/ core.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def, ctx));\n        }\n        return handlePipeResult(left, def, ctx);\n    };\n});\nfunction handlePipeResult(left, def, ctx) {\n    if (util.aborted(left)) {\n        return left;\n    }\n    return def.out._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nexport const $ZodReadonly = /*@__PURE__*/ core.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nexport const $ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (part instanceof $ZodType) {\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || util.primitiveTypes.has(typeof part)) {\n            regexParts.push(util.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"template_literal\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: def.format ?? \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPromise = /*@__PURE__*/ core.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nexport const $ZodLazy = /*@__PURE__*/ core.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    util.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType._zod.pattern);\n    util.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nexport const $ZodCustom = /*@__PURE__*/ core.$constructor(\"$ZodCustom\", (inst, def) => {\n    checks.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(util.issue(_iss));\n    }\n}\n","export const $output = Symbol(\"ZodOutput\");\nexport const $input = Symbol(\"ZodInput\");\nexport class $ZodRegistry {\n    constructor() {\n        this._map = new Map();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            if (this._idmap.has(meta.id)) {\n                throw new Error(`ID ${meta.id} already exists in the registry`);\n            }\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new Map();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            return { ...pm, ...this._map.get(schema) };\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nexport function registry() {\n    return new $ZodRegistry();\n}\nexport const globalRegistry = /*@__PURE__*/ registry();\n","import * as checks from \"./checks.js\";\nimport * as schemas from \"./schemas.js\";\nimport * as util from \"./util.js\";\nexport function _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\nexport function _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\nexport function _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\nexport function _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lt(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _lte(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.lte()` instead. */\n_lte as _max, };\nexport function _gt(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _gte(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.gte()` instead. */\n_gte as _min, };\nexport function _positive(params) {\n    return _gt(0, params);\n}\n// negative\nexport function _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\nexport function _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\nexport function _nonnegative(params) {\n    return _gte(0, params);\n}\nexport function _multipleOf(value, params) {\n    return new checks.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ...util.normalizeParams(params),\n        value,\n    });\n}\nexport function _maxSize(maximum, params) {\n    return new checks.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n}\nexport function _minSize(minimum, params) {\n    return new checks.$ZodCheckMinSize({\n        check: \"min_size\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _size(size, params) {\n    return new checks.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ...util.normalizeParams(params),\n        size,\n    });\n}\nexport function _maxLength(maximum, params) {\n    const ch = new checks.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\nexport function _minLength(minimum, params) {\n    return new checks.$ZodCheckMinLength({\n        check: \"min_length\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _length(length, params) {\n    return new checks.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ...util.normalizeParams(params),\n        length,\n    });\n}\nexport function _regex(pattern, params) {\n    return new checks.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ...util.normalizeParams(params),\n        pattern,\n    });\n}\nexport function _lowercase(params) {\n    return new checks.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uppercase(params) {\n    return new checks.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _includes(includes, params) {\n    return new checks.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ...util.normalizeParams(params),\n        includes,\n    });\n}\nexport function _startsWith(prefix, params) {\n    return new checks.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ...util.normalizeParams(params),\n        prefix,\n    });\n}\nexport function _endsWith(suffix, params) {\n    return new checks.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ...util.normalizeParams(params),\n        suffix,\n    });\n}\nexport function _property(property, schema, params) {\n    return new checks.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _mime(types, params) {\n    return new checks.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _overwrite(tx) {\n    return new checks.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\nexport function _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\nexport function _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\nexport function _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\nexport function _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\nexport function _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ...util.normalizeParams(params),\n    });\n}\nexport function _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\nexport function _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof schemas.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport function _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\nexport function _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\nexport function _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport function _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\nexport function _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport function _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\nexport function _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\nexport function _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\nexport function _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\nexport function _custom(Class, fn, _params) {\n    const norm = util.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// export function _refine<T>(\n//   Class: util.SchemaClass<schemas.$ZodCustom>,\n//   fn: (arg: NoInfer<T>) => util.MaybeAsync<unknown>,\n//   _params: string | $ZodCustomParams = {}\n// ): checks.$ZodCheck<T> {\n//   return _custom(Class, fn, _params);\n// }\n// same as _custom but defaults to abort:false\nexport function _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...util.normalizeParams(_params),\n    });\n    return schema;\n}\nexport function _stringbool(Classes, _params) {\n    const params = util.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Pipe = Classes.Pipe ?? schemas.$ZodPipe;\n    const _Boolean = Classes.Boolean ?? schemas.$ZodBoolean;\n    const _String = Classes.String ?? schemas.$ZodString;\n    const _Transform = Classes.Transform ?? schemas.$ZodTransform;\n    const tx = new _Transform({\n        type: \"transform\",\n        transform: (input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: tx,\n                });\n                return {};\n            }\n        },\n        error: params.error,\n    });\n    // params.error;\n    const innerPipe = new _Pipe({\n        type: \"pipe\",\n        in: new _String({ type: \"string\", error: params.error }),\n        out: tx,\n        error: params.error,\n    });\n    const outerPipe = new _Pipe({\n        type: \"pipe\",\n        in: innerPipe,\n        out: new _Boolean({\n            type: \"boolean\",\n            error: params.error,\n        }),\n        error: params.error,\n    });\n    return outerPipe;\n}\nexport function _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = util.normalizeParams(_params);\n    const def = {\n        ...util.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n","import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => inst.issues.push(issue),\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => inst.issues.push(...issues),\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n","import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n","import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone({\n            ...def,\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }\n        // { parent: true }\n        );\n    };\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return literal(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObject.init(inst, def);\n    ZodType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => def.shape);\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    // inst.nonstrict = () => inst.clone({ ...inst._zod.def, catchall: api.unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType: union([keyType, never()]),\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                _issue.continue ?? (_issue.continue = true);\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    const ch = check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort);\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Pipe: ZodPipe,\n    Boolean: ZodBoolean,\n    String: ZodString,\n    Transform: ZodTransform,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n","import { ZodObject, ZodOptional, ZodType } from \"zod\";\nimport type { Endpoint, EndpointOptions } from \"./endpoint\";\n\nexport type OpenAPISchemaType = \"string\" | \"number\" | \"integer\" | \"boolean\" | \"array\" | \"object\";\n\nexport interface OpenAPIParameter {\n\tin: \"query\" | \"path\" | \"header\" | \"cookie\";\n\tname?: string;\n\tdescription?: string;\n\trequired?: boolean;\n\tschema?: {\n\t\ttype: OpenAPISchemaType;\n\t\tformat?: string;\n\t\titems?: {\n\t\t\ttype: OpenAPISchemaType;\n\t\t};\n\t\tenum?: string[];\n\t\tminLength?: number;\n\t\tdescription?: string;\n\t\tdefault?: string;\n\t\texample?: string;\n\t};\n}\n\nexport interface Path {\n\tget?: {\n\t\ttags?: string[];\n\t\toperationId?: string;\n\t\tdescription?: string;\n\t\tsecurity?: [{ bearerAuth: string[] }];\n\t\tparameters?: OpenAPIParameter[];\n\t\tresponses?: {\n\t\t\t[key in string]: {\n\t\t\t\tdescription?: string;\n\t\t\t\tcontent: {\n\t\t\t\t\t\"application/json\": {\n\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\ttype?: OpenAPISchemaType;\n\t\t\t\t\t\t\tproperties?: Record<string, any>;\n\t\t\t\t\t\t\trequired?: string[];\n\t\t\t\t\t\t\t$ref?: string;\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t};\n\tpost?: {\n\t\ttags?: string[];\n\t\toperationId?: string;\n\t\tdescription?: string;\n\t\tsecurity?: [{ bearerAuth: string[] }];\n\t\tparameters?: OpenAPIParameter[];\n\t\trequestBody?: {\n\t\t\tcontent: {\n\t\t\t\t\"application/json\": {\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype?: OpenAPISchemaType;\n\t\t\t\t\t\tproperties?: Record<string, any>;\n\t\t\t\t\t\trequired?: string[];\n\t\t\t\t\t\t$ref?: string;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\tresponses?: {\n\t\t\t[key in string]: {\n\t\t\t\tdescription?: string;\n\t\t\t\tcontent: {\n\t\t\t\t\t\"application/json\": {\n\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\ttype?: OpenAPISchemaType;\n\t\t\t\t\t\t\tproperties?: Record<string, any>;\n\t\t\t\t\t\t\trequired?: string[];\n\t\t\t\t\t\t\t$ref?: string;\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t};\n}\nconst paths: Record<string, Path> = {};\n\nfunction getTypeFromZodType(zodType: ZodType<any>) {\n\tswitch (zodType.constructor.name) {\n\t\tcase \"ZodString\":\n\t\t\treturn \"string\";\n\t\tcase \"ZodNumber\":\n\t\t\treturn \"number\";\n\t\tcase \"ZodBoolean\":\n\t\t\treturn \"boolean\";\n\t\tcase \"ZodObject\":\n\t\t\treturn \"object\";\n\t\tcase \"ZodArray\":\n\t\t\treturn \"array\";\n\t\tdefault:\n\t\t\treturn \"string\";\n\t}\n}\n\nfunction getParameters(options: EndpointOptions) {\n\tconst parameters: OpenAPIParameter[] = [];\n\tif (options.metadata?.openapi?.parameters) {\n\t\tparameters.push(...options.metadata.openapi.parameters);\n\t\treturn parameters;\n\t}\n\tif (options.query instanceof ZodObject) {\n\t\tObject.entries(options.query.shape).forEach(([key, value]) => {\n\t\t\tif (value instanceof ZodObject) {\n\t\t\t\tparameters.push({\n\t\t\t\t\tname: key,\n\t\t\t\t\tin: \"query\",\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: getTypeFromZodType(value),\n\t\t\t\t\t\t...(\"minLength\" in value && value.minLength\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\tminLength: value.minLength as number,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t: {}),\n\t\t\t\t\t\tdescription: value.description,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn parameters;\n}\n\nfunction getRequestBody(options: EndpointOptions): any {\n\tif (options.metadata?.openapi?.requestBody) {\n\t\treturn options.metadata.openapi.requestBody;\n\t}\n\tif (!options.body) return undefined;\n\tif (options.body instanceof ZodObject || options.body instanceof ZodOptional) {\n\t\t// @ts-ignore\n\t\tconst shape = options.body.shape;\n\t\tif (!shape) return undefined;\n\t\tconst properties: Record<string, any> = {};\n\t\tconst required: string[] = [];\n\t\tObject.entries(shape).forEach(([key, value]) => {\n\t\t\tif (value instanceof ZodObject) {\n\t\t\t\tproperties[key] = {\n\t\t\t\t\ttype: getTypeFromZodType(value),\n\t\t\t\t\tdescription: value.description,\n\t\t\t\t};\n\t\t\t\tif (!(value instanceof ZodOptional)) {\n\t\t\t\t\trequired.push(key);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn {\n\t\t\trequired: options.body instanceof ZodOptional ? false : options.body ? true : false,\n\t\t\tcontent: {\n\t\t\t\t\"application/json\": {\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties,\n\t\t\t\t\t\trequired,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\treturn undefined;\n}\n\nfunction getResponse(responses?: Record<string, any>) {\n\treturn {\n\t\t\"400\": {\n\t\t\tcontent: {\n\t\t\t\t\"application/json\": {\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"message\"],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tdescription: \"Bad Request. Usually due to missing parameters, or invalid parameters.\",\n\t\t},\n\t\t\"401\": {\n\t\t\tcontent: {\n\t\t\t\t\"application/json\": {\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"message\"],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tdescription: \"Unauthorized. Due to missing or invalid authentication.\",\n\t\t},\n\t\t\"403\": {\n\t\t\tcontent: {\n\t\t\t\t\"application/json\": {\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tdescription:\n\t\t\t\t\"Forbidden. You do not have permission to access this resource or to perform this action.\",\n\t\t},\n\t\t\"404\": {\n\t\t\tcontent: {\n\t\t\t\t\"application/json\": {\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tdescription: \"Not Found. The requested resource was not found.\",\n\t\t},\n\t\t\"429\": {\n\t\t\tcontent: {\n\t\t\t\t\"application/json\": {\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tdescription: \"Too Many Requests. You have exceeded the rate limit. Try again later.\",\n\t\t},\n\t\t\"500\": {\n\t\t\tcontent: {\n\t\t\t\t\"application/json\": {\n\t\t\t\t\tschema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tdescription:\n\t\t\t\t\"Internal Server Error. This is a problem with the server that you cannot fix.\",\n\t\t},\n\t\t...responses,\n\t} as any;\n}\n\nexport async function generator(\n\tendpoints: Record<string, Endpoint>,\n\tconfig?: {\n\t\turl: string;\n\t},\n) {\n\tconst components = {\n\t\tschemas: {},\n\t};\n\n\tObject.entries(endpoints).forEach(([_, value]) => {\n\t\tconst options = value.options as EndpointOptions;\n\t\tif (options.metadata?.SERVER_ONLY) return;\n\t\tif (options.method === \"GET\") {\n\t\t\tpaths[value.path] = {\n\t\t\t\tget: {\n\t\t\t\t\ttags: [\"Default\", ...(options.metadata?.openapi?.tags || [])],\n\t\t\t\t\tdescription: options.metadata?.openapi?.description,\n\t\t\t\t\toperationId: options.metadata?.openapi?.operationId,\n\t\t\t\t\tsecurity: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbearerAuth: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tparameters: getParameters(options),\n\t\t\t\t\tresponses: getResponse(options.metadata?.openapi?.responses),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tif (options.method === \"POST\") {\n\t\t\tconst body = getRequestBody(options);\n\t\t\tpaths[value.path] = {\n\t\t\t\tpost: {\n\t\t\t\t\ttags: [\"Default\", ...(options.metadata?.openapi?.tags || [])],\n\t\t\t\t\tdescription: options.metadata?.openapi?.description,\n\t\t\t\t\toperationId: options.metadata?.openapi?.operationId,\n\t\t\t\t\tsecurity: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbearerAuth: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tparameters: getParameters(options),\n\t\t\t\t\t...(body\n\t\t\t\t\t\t? { requestBody: body }\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\trequestBody: {\n\t\t\t\t\t\t\t\t\t//set body none\n\t\t\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\t\t\t\"application/json\": {\n\t\t\t\t\t\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\tresponses: getResponse(options.metadata?.openapi?.responses),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t});\n\n\tconst res = {\n\t\topenapi: \"3.1.1\",\n\t\tinfo: {\n\t\t\ttitle: \"Better Auth\",\n\t\t\tdescription: \"API Reference for your Better Auth Instance\",\n\t\t\tversion: \"1.1.0\",\n\t\t},\n\t\tcomponents,\n\t\tsecurity: [\n\t\t\t{\n\t\t\t\tapiKeyCookie: [],\n\t\t\t},\n\t\t],\n\t\tservers: [\n\t\t\t{\n\t\t\t\turl: config?.url,\n\t\t\t},\n\t\t],\n\t\ttags: [\n\t\t\t{\n\t\t\t\tname: \"Default\",\n\t\t\t\tdescription:\n\t\t\t\t\t\"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin.\",\n\t\t\t},\n\t\t],\n\t\tpaths,\n\t};\n\treturn res;\n}\n\nexport const getHTML = (\n\tapiReference: Record<string, any>,\n\tconfig?: {\n\t\tlogo?: string;\n\t\ttheme?: string;\n\t\ttitle?: string;\n\t\tdescription?: string;\n\t},\n) => `<!doctype html>\n<html>\n  <head>\n    <title>Scalar API Reference</title>\n    <meta charset=\"utf-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1\" />\n  </head>\n  <body>\n    <script\n      id=\"api-reference\"\n      type=\"application/json\">\n    ${JSON.stringify(apiReference)}\n    </script>\n\t <script>\n      var configuration = {\n\t  \tfavicon: ${config?.logo ? `data:image/svg+xml;utf8,${encodeURIComponent(config.logo)}` : undefined} ,\n\t   \ttheme: ${config?.theme || \"saturn\"},\n        metaData: {\n\t\t\ttitle: ${config?.title || \"Open API Reference\"},\n\t\t\tdescription: ${config?.description || \"Better Call Open API\"},\n\t\t}\n      }\n      document.getElementById('api-reference').dataset.configuration =\n        JSON.stringify(configuration)\n    </script>\n\t  <script src=\"https://cdn.jsdelivr.net/npm/@scalar/api-reference\"></script>\n  </body>\n</html>`;\n"],"names":["body","headers","issue","options","headers","createEndpoint","initializer","array","Class","config","issue","error","inst","checks","result","result","isObject","allowsEval","r","results","left","right","output","result","result","left","r","Class","Class","Class","initializer","issue","issues","safeParse","safeParseAsync","def","safeParse","safeParseAsync","check","issue","output","issue","required","config","config","createEndpoint","error"],"mappings":"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","debugId":null}},
    {"offset": {"line": 4992, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/defu%406.1.4/node_modules/defu/dist/defu.mjs"],"sourcesContent":["function isPlainObject(value) {\n  if (value === null || typeof value !== \"object\") {\n    return false;\n  }\n  const prototype = Object.getPrototypeOf(value);\n  if (prototype !== null && prototype !== Object.prototype && Object.getPrototypeOf(prototype) !== null) {\n    return false;\n  }\n  if (Symbol.iterator in value) {\n    return false;\n  }\n  if (Symbol.toStringTag in value) {\n    return Object.prototype.toString.call(value) === \"[object Module]\";\n  }\n  return true;\n}\n\nfunction _defu(baseObject, defaults, namespace = \".\", merger) {\n  if (!isPlainObject(defaults)) {\n    return _defu(baseObject, {}, namespace, merger);\n  }\n  const object = Object.assign({}, defaults);\n  for (const key in baseObject) {\n    if (key === \"__proto__\" || key === \"constructor\") {\n      continue;\n    }\n    const value = baseObject[key];\n    if (value === null || value === void 0) {\n      continue;\n    }\n    if (merger && merger(object, key, value, namespace)) {\n      continue;\n    }\n    if (Array.isArray(value) && Array.isArray(object[key])) {\n      object[key] = [...value, ...object[key]];\n    } else if (isPlainObject(value) && isPlainObject(object[key])) {\n      object[key] = _defu(\n        value,\n        object[key],\n        (namespace ? `${namespace}.` : \"\") + key.toString(),\n        merger\n      );\n    } else {\n      object[key] = value;\n    }\n  }\n  return object;\n}\nfunction createDefu(merger) {\n  return (...arguments_) => (\n    // eslint-disable-next-line unicorn/no-array-reduce\n    arguments_.reduce((p, c) => _defu(p, c, \"\", merger), {})\n  );\n}\nconst defu = createDefu();\nconst defuFn = createDefu((object, key, currentValue) => {\n  if (object[key] !== void 0 && typeof currentValue === \"function\") {\n    object[key] = currentValue(object[key]);\n    return true;\n  }\n});\nconst defuArrayFn = createDefu((object, key, currentValue) => {\n  if (Array.isArray(object[key]) && typeof currentValue === \"function\") {\n    object[key] = currentValue(object[key]);\n    return true;\n  }\n});\n\nexport { createDefu, defu as default, defu, defuArrayFn, defuFn };\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA,SAAS,cAAc,KAAK;IAC1B,IAAI,UAAU,QAAQ,OAAO,UAAU,UAAU;QAC/C,OAAO;IACT;IACA,MAAM,YAAY,OAAO,cAAc,CAAC;IACxC,IAAI,cAAc,QAAQ,cAAc,OAAO,SAAS,IAAI,OAAO,cAAc,CAAC,eAAe,MAAM;QACrG,OAAO;IACT;IACA,IAAI,OAAO,QAAQ,IAAI,OAAO;QAC5B,OAAO;IACT;IACA,IAAI,OAAO,WAAW,IAAI,OAAO;QAC/B,OAAO,OAAO,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW;IACnD;IACA,OAAO;AACT;AAEA,SAAS,MAAM,UAAU,EAAE,QAAQ,EAAE,YAAY,GAAG,EAAE,MAAM;IAC1D,IAAI,CAAC,cAAc,WAAW;QAC5B,OAAO,MAAM,YAAY,CAAC,GAAG,WAAW;IAC1C;IACA,MAAM,SAAS,OAAO,MAAM,CAAC,CAAC,GAAG;IACjC,IAAK,MAAM,OAAO,WAAY;QAC5B,IAAI,QAAQ,eAAe,QAAQ,eAAe;YAChD;QACF;QACA,MAAM,QAAQ,UAAU,CAAC,IAAI;QAC7B,IAAI,UAAU,QAAQ,UAAU,KAAK,GAAG;YACtC;QACF;QACA,IAAI,UAAU,OAAO,QAAQ,KAAK,OAAO,YAAY;YACnD;QACF;QACA,IAAI,MAAM,OAAO,CAAC,UAAU,MAAM,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG;YACtD,MAAM,CAAC,IAAI,GAAG;mBAAI;mBAAU,MAAM,CAAC,IAAI;aAAC;QAC1C,OAAO,IAAI,cAAc,UAAU,cAAc,MAAM,CAAC,IAAI,GAAG;YAC7D,MAAM,CAAC,IAAI,GAAG,MACZ,OACA,MAAM,CAAC,IAAI,EACX,CAAC,YAAY,GAAG,UAAU,CAAC,CAAC,GAAG,EAAE,IAAI,IAAI,QAAQ,IACjD;QAEJ,OAAO;YACL,MAAM,CAAC,IAAI,GAAG;QAChB;IACF;IACA,OAAO;AACT;AACA,SAAS,WAAW,MAAM;IACxB,OAAO,CAAC,GAAG,aACT,mDAAmD;QACnD,WAAW,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM,GAAG,GAAG,IAAI,SAAS,CAAC;AAE1D;AACA,MAAM,OAAO;AACb,MAAM,SAAS,WAAW,CAAC,QAAQ,KAAK;IACtC,IAAI,MAAM,CAAC,IAAI,KAAK,KAAK,KAAK,OAAO,iBAAiB,YAAY;QAChE,MAAM,CAAC,IAAI,GAAG,aAAa,MAAM,CAAC,IAAI;QACtC,OAAO;IACT;AACF;AACA,MAAM,cAAc,WAAW,CAAC,QAAQ,KAAK;IAC3C,IAAI,MAAM,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,OAAO,iBAAiB,YAAY;QACpE,MAAM,CAAC,IAAI,GAAG,aAAa,MAAM,CAAC,IAAI;QACtC,OAAO;IACT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5071, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+ciphers@2.0.1/node_modules/@noble/ciphers/utils.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bciphers%402.0.1/node_modules/%40noble/ciphers/src/utils.ts"],"sourcesContent":["/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */\n\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n\n/** Asserts something is boolean. */\nexport function abool(b: boolean): void {\n  if (typeof b !== 'boolean') throw new Error(`boolean expected, not ${b}`);\n}\n\n/** Asserts something is positive integer. */\nexport function anumber(n: number): void {\n  if (!Number.isSafeInteger(n) || n < 0) throw new Error('positive integer expected, got ' + n);\n}\n\n/** Asserts something is Uint8Array. */\nexport function abytes(value: Uint8Array, length?: number, title: string = ''): Uint8Array {\n  const bytes = isBytes(value);\n  const len = value?.length;\n  const needsLen = length !== undefined;\n  if (!bytes || (needsLen && len !== length)) {\n    const prefix = title && `\"${title}\" `;\n    const ofLen = needsLen ? ` of length ${length}` : '';\n    const got = bytes ? `length=${len}` : `type=${typeof value}`;\n    throw new Error(prefix + 'expected Uint8Array' + ofLen + ', got ' + got);\n  }\n  return value;\n}\n\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance: any, checkFinished = true): void {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\n\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out: any, instance: any): void {\n  abytes(out, undefined, 'output');\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error('digestInto() expects output buffer of length at least ' + min);\n  }\n}\n\nexport type IHash = {\n  (data: string | Uint8Array): Uint8Array;\n  blockLen: number;\n  outputLen: number;\n  create: any;\n};\n\n/** Generic type encompassing 8/16/32-byte arrays - but not 64-byte. */\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr: TypedArray): Uint8Array {\n  return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr: TypedArray): Uint32Array {\n  return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays: TypedArray[]): void {\n  for (let i = 0; i < arrays.length; i++) {\n    arrays[i].fill(0);\n  }\n}\n\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr: TypedArray): DataView {\n  return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE: boolean = /* @__PURE__ */ (() =>\n  new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin: boolean = /* @__PURE__ */ (() =>\n  // @ts-ignore\n  typeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  abytes(bytes);\n  // @ts-ignore\n  if (hasHexBuiltin) return bytes.toHex();\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 } as const;\nfunction asciiToBase16(ch: number): number | undefined {\n  if (ch >= asciis._0 && ch <= asciis._9) return ch - asciis._0; // '2' => 50-48\n  if (ch >= asciis.A && ch <= asciis.F) return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n  if (ch >= asciis.a && ch <= asciis.f) return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n  return;\n}\n\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  // @ts-ignore\n  if (hasHexBuiltin) return Uint8Array.fromHex(hex);\n  const hl = hex.length;\n  const al = hl / 2;\n  if (hl % 2) throw new Error('hex string expected, got unpadded hex of length ' + hl);\n  const array = new Uint8Array(al);\n  for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n    const n1 = asciiToBase16(hex.charCodeAt(hi));\n    const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n    if (n1 === undefined || n2 === undefined) {\n      const char = hex[hi] + hex[hi + 1];\n      throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n    }\n    array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n  }\n  return array;\n}\n\n// Used in micro\nexport function hexToNumber(hex: string): bigint {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  return BigInt(hex === '' ? '0' : '0x' + hex); // Big Endian\n}\n\n// Used in ff1\n// BE: Big Endian, LE: Little Endian\nexport function bytesToNumberBE(bytes: Uint8Array): bigint {\n  return hexToNumber(bytesToHex(bytes));\n}\n\n// Used in micro, ff1\nexport function numberToBytesBE(n: number | bigint, len: number): Uint8Array {\n  return hexToBytes(n.toString(16).padStart(len * 2, '0'));\n}\n\n// Global symbols, but ts doesn't see them: https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts string to bytes using UTF8 encoding.\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error('string expected');\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\n/**\n * Converts bytes to string using UTF8 encoding.\n * @example bytesToUtf8(new Uint8Array([97, 98, 99])) // 'abc'\n */\nexport function bytesToUtf8(bytes: Uint8Array): string {\n  return new TextDecoder().decode(bytes);\n}\n\n/**\n * Checks if two U8A use same underlying buffer and overlaps.\n * This is invalid and can corrupt data.\n */\nexport function overlapBytes(a: Uint8Array, b: Uint8Array): boolean {\n  return (\n    a.buffer === b.buffer && // best we can do, may fail with an obscure Proxy\n    a.byteOffset < b.byteOffset + b.byteLength && // a starts before b end\n    b.byteOffset < a.byteOffset + a.byteLength // b starts before a end\n  );\n}\n\n/**\n * If input and output overlap and input starts before output, we will overwrite end of input before\n * we start processing it, so this is not supported for most ciphers (except chacha/salse, which designed with this)\n */\nexport function complexOverlapBytes(input: Uint8Array, output: Uint8Array): void {\n  // This is very cursed. It works somehow, but I'm completely unsure,\n  // reasoning about overlapping aligned windows is very hard.\n  if (overlapBytes(input, output) && input.byteOffset < output.byteOffset)\n    throw new Error('complex overlap of input and output is not supported');\n}\n\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  let sum = 0;\n  for (let i = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    abytes(a);\n    sum += a.length;\n  }\n  const res = new Uint8Array(sum);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    res.set(a, pad);\n    pad += a.length;\n  }\n  return res;\n}\n\n// Used in ARX only\ntype EmptyObj = {};\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts: T2\n): T1 & T2 {\n  if (opts == null || typeof opts !== 'object') throw new Error('options must be defined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\n/** Compares 2 uint8array-s in kinda constant time. */\nexport function equalBytes(a: Uint8Array, b: Uint8Array): boolean {\n  if (a.length !== b.length) return false;\n  let diff = 0;\n  for (let i = 0; i < a.length; i++) diff |= a[i] ^ b[i];\n  return diff === 0;\n}\n\n// TODO: remove\nexport interface IHash2 {\n  blockLen: number; // Bytes per block\n  outputLen: number; // Bytes in output\n  update(buf: string | Uint8Array): this;\n  // Writes digest into buf\n  digestInto(buf: Uint8Array): void;\n  digest(): Uint8Array;\n  /**\n   * Resets internal state. Makes Hash instance unusable.\n   * Reset is impossible for keyed hashes if key is consumed into state. If digest is not consumed\n   * by user, they will need to manually call `destroy()` when zeroing is necessary.\n   */\n  destroy(): void;\n}\n\n// This will allow to re-use with composable things like packed & base encoders\n// Also, we probably can make tags composable\n\n/** Sync cipher: takes byte array and returns byte array. */\nexport type Cipher = {\n  encrypt(plaintext: Uint8Array): Uint8Array;\n  decrypt(ciphertext: Uint8Array): Uint8Array;\n};\n\n/** Async cipher e.g. from built-in WebCrypto. */\nexport type AsyncCipher = {\n  encrypt(plaintext: Uint8Array): Promise<Uint8Array>;\n  decrypt(ciphertext: Uint8Array): Promise<Uint8Array>;\n};\n\n/** Cipher with `output` argument which can optimize by doing 1 less allocation. */\nexport type CipherWithOutput = Cipher & {\n  encrypt(plaintext: Uint8Array, output?: Uint8Array): Uint8Array;\n  decrypt(ciphertext: Uint8Array, output?: Uint8Array): Uint8Array;\n};\n\n/**\n * Params are outside of return type, so it is accessible before calling constructor.\n * If function support multiple nonceLength's, we return the best one.\n */\nexport type CipherParams = {\n  blockSize: number;\n  nonceLength?: number;\n  tagLength?: number;\n  varSizeNonce?: boolean;\n};\n/** ARX cipher, like salsa or chacha. */\nexport type ARXCipher = ((\n  key: Uint8Array,\n  nonce: Uint8Array,\n  AAD?: Uint8Array\n) => CipherWithOutput) & {\n  blockSize: number;\n  nonceLength: number;\n  tagLength: number;\n};\nexport type CipherCons<T extends any[]> = (key: Uint8Array, ...args: T) => Cipher;\n/**\n * Wraps a cipher: validates args, ensures encrypt() can only be called once.\n * @__NO_SIDE_EFFECTS__\n */\nexport const wrapCipher = <C extends CipherCons<any>, P extends CipherParams>(\n  params: P,\n  constructor: C\n): C & P => {\n  function wrappedCipher(key: Uint8Array, ...args: any[]): CipherWithOutput {\n    // Validate key\n    abytes(key, undefined, 'key');\n\n    // Big-Endian hardware is rare. Just in case someone still decides to run ciphers:\n    if (!isLE) throw new Error('Non little-endian hardware is not yet supported');\n\n    // Validate nonce if nonceLength is present\n    if (params.nonceLength !== undefined) {\n      const nonce = args[0];\n      abytes(nonce, params.varSizeNonce ? undefined : params.nonceLength, 'nonce');\n    }\n\n    // Validate AAD if tagLength present\n    const tagl = params.tagLength;\n    if (tagl && args[1] !== undefined) abytes(args[1], undefined, 'AAD');\n\n    const cipher = constructor(key, ...args);\n    const checkOutput = (fnLength: number, output?: Uint8Array) => {\n      if (output !== undefined) {\n        if (fnLength !== 2) throw new Error('cipher output not supported');\n        abytes(output, undefined, 'output');\n      }\n    };\n    // Create wrapped cipher with validation and single-use encryption\n    let called = false;\n    const wrCipher = {\n      encrypt(data: Uint8Array, output?: Uint8Array) {\n        if (called) throw new Error('cannot encrypt() twice with same key + nonce');\n        called = true;\n        abytes(data);\n        checkOutput(cipher.encrypt.length, output);\n        return (cipher as CipherWithOutput).encrypt(data, output);\n      },\n      decrypt(data: Uint8Array, output?: Uint8Array) {\n        abytes(data);\n        if (tagl && data.length < tagl)\n          throw new Error('\"ciphertext\" expected length bigger than tagLength=' + tagl);\n        checkOutput(cipher.decrypt.length, output);\n        return (cipher as CipherWithOutput).decrypt(data, output);\n      },\n    };\n\n    return wrCipher;\n  }\n\n  Object.assign(wrappedCipher, params);\n  return wrappedCipher as C & P;\n};\n\n/** Represents salsa / chacha stream. */\nexport type XorStream = (\n  key: Uint8Array,\n  nonce: Uint8Array,\n  data: Uint8Array,\n  output?: Uint8Array,\n  counter?: number\n) => Uint8Array;\n\n/**\n * By default, returns u8a of length.\n * When out is available, it checks it for validity and uses it.\n */\nexport function getOutput(\n  expectedLength: number,\n  out?: Uint8Array,\n  onlyAligned = true\n): Uint8Array {\n  if (out === undefined) return new Uint8Array(expectedLength);\n  if (out.length !== expectedLength)\n    throw new Error(\n      '\"output\" expected Uint8Array of length ' + expectedLength + ', got: ' + out.length\n    );\n  if (onlyAligned && !isAligned32(out)) throw new Error('invalid output, must be aligned');\n  return out;\n}\n\nexport function u64Lengths(dataLength: number, aadLength: number, isLE: boolean): Uint8Array {\n  abool(isLE);\n  const num = new Uint8Array(16);\n  const view = createView(num);\n  view.setBigUint64(0, BigInt(aadLength), isLE);\n  view.setBigUint64(8, BigInt(dataLength), isLE);\n  return num;\n}\n\n// Is byte array aligned to 4 byte offset (u32)?\nexport function isAligned32(bytes: Uint8Array): boolean {\n  return bytes.byteOffset % 4 === 0;\n}\n\n// copy bytes to new u8a (aligned). Because Buffer.slice is broken.\nexport function copyBytes(bytes: Uint8Array): Uint8Array {\n  return Uint8Array.from(bytes);\n}\n\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  const cr = typeof globalThis === 'object' ? (globalThis as any).crypto : null;\n  if (typeof cr?.getRandomValues !== 'function')\n    throw new Error('crypto.getRandomValues must be defined');\n  return cr.getRandomValues(new Uint8Array(bytesLength));\n}\n\n/**\n * The pseudorandom number generator doesn't wipe current state:\n * instead, it generates new one based on previous state + entropy.\n * Not reseed/rekey, since AES CTR DRBG does rekey on each randomBytes,\n * which is in fact `reseed`, since it changes counter too.\n */\nexport interface PRG {\n  addEntropy(seed: Uint8Array): void;\n  randomBytes(length: number): Uint8Array;\n  clean(): void;\n}\n\ntype RemoveNonceInner<T extends any[], Ret> = ((...args: T) => Ret) extends (\n  arg0: any,\n  arg1: any,\n  ...rest: infer R\n) => any\n  ? (key: Uint8Array, ...args: R) => Ret\n  : never;\n\nexport type RemoveNonce<T extends (...args: any) => any> = RemoveNonceInner<\n  Parameters<T>,\n  ReturnType<T>\n>;\nexport type CipherWithNonce = ((\n  key: Uint8Array,\n  nonce: Uint8Array,\n  ...args: any[]\n) => Cipher | AsyncCipher) & {\n  nonceLength: number;\n};\n\n/**\n * Uses CSPRG for nonce, nonce injected in ciphertext.\n * For `encrypt`, a `nonceBytes`-length buffer is fetched from CSPRNG and\n * prepended to encrypted ciphertext. For `decrypt`, first `nonceBytes` of ciphertext\n * are treated as nonce.\n *\n * NOTE: Under the same key, using random nonces (e.g. `managedNonce`) with AES-GCM and ChaCha\n * should be limited to `2**23` (8M) messages to get a collision chance of `2**-50`. Stretching to  * `2**32` (4B) messages, chance would become `2**-33` - still negligible, but creeping up.\n * @example\n * const gcm = managedNonce(aes.gcm);\n * const ciphr = gcm(key).encrypt(data);\n * const plain = gcm(key).decrypt(ciph);\n */\nexport function managedNonce<T extends CipherWithNonce>(\n  fn: T,\n  randomBytes_: typeof randomBytes = randomBytes\n): RemoveNonce<T> {\n  const { nonceLength } = fn;\n  anumber(nonceLength);\n  const addNonce = (nonce: Uint8Array, ciphertext: Uint8Array) => {\n    const out = concatBytes(nonce, ciphertext);\n    ciphertext.fill(0);\n    return out;\n  };\n  // NOTE: we cannot support DST here, it would be mistake:\n  // - we don't know how much dst length cipher requires\n  // - nonce may unalign dst and break everything\n  // - we create new u8a anyway (concatBytes)\n  // - previously we passed all args to cipher, but that was mistake!\n  return ((key: Uint8Array, ...args: any[]): any => ({\n    encrypt(plaintext: Uint8Array) {\n      abytes(plaintext);\n      const nonce = randomBytes_(nonceLength);\n      const encrypted = fn(key, nonce, ...args).encrypt(plaintext);\n      // @ts-ignore\n      if (encrypted instanceof Promise) return encrypted.then((ct) => addNonce(nonce, ct));\n      return addNonce(nonce, encrypted);\n    },\n    decrypt(ciphertext: Uint8Array) {\n      abytes(ciphertext);\n      const nonce = ciphertext.subarray(0, nonceLength);\n      const decrypted = ciphertext.subarray(nonceLength);\n      return fn(key, nonce, ...args).decrypt(decrypted);\n    },\n  })) as RemoveNonce<T>;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5393, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+ciphers@2.0.1/node_modules/@noble/ciphers/_arx.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bciphers%402.0.1/node_modules/%40noble/ciphers/src/_arx.ts"],"sourcesContent":["/**\n * Basic utils for ARX (add-rotate-xor) salsa and chacha ciphers.\n\nRFC8439 requires multi-step cipher stream, where\nauthKey starts with counter: 0, actual msg with counter: 1.\n\nFor this, we need a way to re-use nonce / counter:\n\n    const counter = new Uint8Array(4);\n    chacha(..., counter, ...); // counter is now 1\n    chacha(..., counter, ...); // counter is now 2\n\nThis is complicated:\n\n- 32-bit counters are enough, no need for 64-bit: max ArrayBuffer size in JS is 4GB\n- Original papers don't allow mutating counters\n- Counter overflow is undefined [^1]\n- Idea A: allow providing (nonce | counter) instead of just nonce, re-use it\n- Caveat: Cannot be re-used through all cases:\n- * chacha has (counter | nonce)\n- * xchacha has (nonce16 | counter | nonce16)\n- Idea B: separate nonce / counter and provide separate API for counter re-use\n- Caveat: there are different counter sizes depending on an algorithm.\n- salsa & chacha also differ in structures of key & sigma:\n  salsa20:      s[0] | k(4) | s[1] | nonce(2) | cnt(2) | s[2] | k(4) | s[3]\n  chacha:       s(4) | k(8) | cnt(1) | nonce(3)\n  chacha20orig: s(4) | k(8) | cnt(2) | nonce(2)\n- Idea C: helper method such as `setSalsaState(key, nonce, sigma, data)`\n- Caveat: we can't re-use counter array\n\nxchacha [^2] uses the subkey and remaining 8 byte nonce with ChaCha20 as normal\n(prefixed by 4 NUL bytes, since [RFC8439] specifies a 12-byte nonce).\n\n[^1]: https://mailarchive.ietf.org/arch/msg/cfrg/gsOnTJzcbgG6OqD8Sc0GO5aR_tU/\n[^2]: https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-xchacha#appendix-A.2\n\n * @module\n */\nimport {\n  type PRG,\n  type XorStream,\n  abool,\n  abytes,\n  anumber,\n  checkOpts,\n  clean,\n  copyBytes,\n  randomBytes,\n  u32,\n} from './utils.ts';\n\n// Replaces `TextEncoder`, which is not available in all environments\nconst encodeStr = (str: string) => Uint8Array.from(str.split(''), (c) => c.charCodeAt(0));\nconst sigma16 = encodeStr('expand 16-byte k');\nconst sigma32 = encodeStr('expand 32-byte k');\nconst sigma16_32 = u32(sigma16);\nconst sigma32_32 = u32(sigma32);\n\n/** Rotate left. */\nexport function rotl(a: number, b: number): number {\n  return (a << b) | (a >>> (32 - b));\n}\n\n/** Ciphers must use u32 for efficiency. */\nexport type CipherCoreFn = (\n  sigma: Uint32Array,\n  key: Uint32Array,\n  nonce: Uint32Array,\n  output: Uint32Array,\n  counter: number,\n  rounds?: number\n) => void;\n\n/** Method which extends key + short nonce into larger nonce / diff key. */\nexport type ExtendNonceFn = (\n  sigma: Uint32Array,\n  key: Uint32Array,\n  input: Uint32Array,\n  output: Uint32Array\n) => void;\n\n/** ARX cipher options.\n * * `allowShortKeys` for 16-byte keys\n * * `counterLength` in bytes\n * * `counterRight`: right: `nonce|counter`; left: `counter|nonce`\n * */\nexport type CipherOpts = {\n  allowShortKeys?: boolean; // Original salsa / chacha allow 16-byte keys\n  extendNonceFn?: ExtendNonceFn;\n  counterLength?: number;\n  counterRight?: boolean;\n  rounds?: number;\n};\n\n// Is byte array aligned to 4 byte offset (u32)?\nfunction isAligned32(b: Uint8Array) {\n  return b.byteOffset % 4 === 0;\n}\n\n// Salsa and Chacha block length is always 512-bit\nconst BLOCK_LEN = 64;\nconst BLOCK_LEN32 = 16;\n\n// new Uint32Array([2**32])   // => Uint32Array(1) [ 0 ]\n// new Uint32Array([2**32-1]) // => Uint32Array(1) [ 4294967295 ]\nconst MAX_COUNTER = 2 ** 32 - 1;\n\nconst U32_EMPTY = Uint32Array.of();\nfunction runCipher(\n  core: CipherCoreFn,\n  sigma: Uint32Array,\n  key: Uint32Array,\n  nonce: Uint32Array,\n  data: Uint8Array,\n  output: Uint8Array,\n  counter: number,\n  rounds: number\n): void {\n  const len = data.length;\n  const block = new Uint8Array(BLOCK_LEN);\n  const b32 = u32(block);\n  // Make sure that buffers aligned to 4 bytes\n  const isAligned = isAligned32(data) && isAligned32(output);\n  const d32 = isAligned ? u32(data) : U32_EMPTY;\n  const o32 = isAligned ? u32(output) : U32_EMPTY;\n  for (let pos = 0; pos < len; counter++) {\n    core(sigma, key, nonce, b32, counter, rounds);\n    if (counter >= MAX_COUNTER) throw new Error('arx: counter overflow');\n    const take = Math.min(BLOCK_LEN, len - pos);\n    // aligned to 4 bytes\n    if (isAligned && take === BLOCK_LEN) {\n      const pos32 = pos / 4;\n      if (pos % 4 !== 0) throw new Error('arx: invalid block position');\n      for (let j = 0, posj: number; j < BLOCK_LEN32; j++) {\n        posj = pos32 + j;\n        o32[posj] = d32[posj] ^ b32[j];\n      }\n      pos += BLOCK_LEN;\n      continue;\n    }\n    for (let j = 0, posj; j < take; j++) {\n      posj = pos + j;\n      output[posj] = data[posj] ^ block[j];\n    }\n    pos += take;\n  }\n}\n\n/** Creates ARX-like (ChaCha, Salsa) cipher stream from core function. */\nexport function createCipher(core: CipherCoreFn, opts: CipherOpts): XorStream {\n  const { allowShortKeys, extendNonceFn, counterLength, counterRight, rounds } = checkOpts(\n    { allowShortKeys: false, counterLength: 8, counterRight: false, rounds: 20 },\n    opts\n  );\n  if (typeof core !== 'function') throw new Error('core must be a function');\n  anumber(counterLength);\n  anumber(rounds);\n  abool(counterRight);\n  abool(allowShortKeys);\n  return (\n    key: Uint8Array,\n    nonce: Uint8Array,\n    data: Uint8Array,\n    output?: Uint8Array,\n    counter = 0\n  ): Uint8Array => {\n    abytes(key, undefined, 'key');\n    abytes(nonce, undefined, 'nonce');\n    abytes(data, undefined, 'data');\n    const len = data.length;\n    if (output === undefined) output = new Uint8Array(len);\n    abytes(output, undefined, 'output');\n    anumber(counter);\n    if (counter < 0 || counter >= MAX_COUNTER) throw new Error('arx: counter overflow');\n    if (output.length < len)\n      throw new Error(`arx: output (${output.length}) is shorter than data (${len})`);\n    const toClean = [];\n\n    // Key & sigma\n    // key=16 -> sigma16, k=key|key\n    // key=32 -> sigma32, k=key\n    let l = key.length;\n    let k: Uint8Array;\n    let sigma: Uint32Array;\n    if (l === 32) {\n      toClean.push((k = copyBytes(key)));\n      sigma = sigma32_32;\n    } else if (l === 16 && allowShortKeys) {\n      k = new Uint8Array(32);\n      k.set(key);\n      k.set(key, 16);\n      sigma = sigma16_32;\n      toClean.push(k);\n    } else {\n      abytes(key, 32, 'arx key');\n      throw new Error('invalid key size');\n      // throw new Error(`\"arx key\" expected Uint8Array of length 32, got length=${l}`);\n    }\n\n    // Nonce\n    // salsa20:      8   (8-byte counter)\n    // chacha20orig: 8   (8-byte counter)\n    // chacha20:     12  (4-byte counter)\n    // xsalsa20:     24  (16 -> hsalsa,  8 -> old nonce)\n    // xchacha20:    24  (16 -> hchacha, 8 -> old nonce)\n    // Align nonce to 4 bytes\n    if (!isAligned32(nonce)) toClean.push((nonce = copyBytes(nonce)));\n\n    const k32 = u32(k);\n    // hsalsa & hchacha: handle extended nonce\n    if (extendNonceFn) {\n      if (nonce.length !== 24) throw new Error(`arx: extended nonce must be 24 bytes`);\n      extendNonceFn(sigma, k32, u32(nonce.subarray(0, 16)), k32);\n      nonce = nonce.subarray(16);\n    }\n\n    // Handle nonce counter\n    const nonceNcLen = 16 - counterLength;\n    if (nonceNcLen !== nonce.length)\n      throw new Error(`arx: nonce must be ${nonceNcLen} or 16 bytes`);\n\n    // Pad counter when nonce is 64 bit\n    if (nonceNcLen !== 12) {\n      const nc = new Uint8Array(12);\n      nc.set(nonce, counterRight ? 0 : 12 - nonce.length);\n      nonce = nc;\n      toClean.push(nonce);\n    }\n    const n32 = u32(nonce);\n    runCipher(core, sigma, k32, n32, data, output, counter, rounds);\n    clean(...toClean);\n    return output;\n  };\n}\n\n/** Internal class which wraps chacha20 or chacha8 to create CSPRNG. */\nexport class _XorStreamPRG implements PRG {\n  readonly blockLen: number;\n  readonly keyLen: number;\n  readonly nonceLen: number;\n  private state: Uint8Array;\n  private buf: Uint8Array;\n  private key: Uint8Array;\n  private nonce: Uint8Array;\n  private pos: number;\n  private ctr: number;\n  private cipher: XorStream;\n  constructor(\n    cipher: XorStream,\n    blockLen: number,\n    keyLen: number,\n    nonceLen: number,\n    seed: Uint8Array\n  ) {\n    this.cipher = cipher;\n    this.blockLen = blockLen;\n    this.keyLen = keyLen;\n    this.nonceLen = nonceLen;\n    this.state = new Uint8Array(this.keyLen + this.nonceLen);\n    this.reseed(seed);\n    this.ctr = 0;\n    this.pos = this.blockLen;\n    this.buf = new Uint8Array(this.blockLen);\n    this.key = this.state.subarray(0, this.keyLen);\n    this.nonce = this.state.subarray(this.keyLen);\n  }\n  private reseed(seed: Uint8Array) {\n    abytes(seed);\n    if (!seed || seed.length === 0) throw new Error('entropy required');\n    for (let i = 0; i < seed.length; i++) this.state[i % this.state.length] ^= seed[i];\n    this.ctr = 0;\n    this.pos = this.blockLen;\n  }\n  addEntropy(seed: Uint8Array): void {\n    this.state.set(this.randomBytes(this.state.length));\n    this.reseed(seed);\n  }\n  randomBytes(len: number): Uint8Array {\n    anumber(len);\n    if (len === 0) return new Uint8Array(0);\n    const out = new Uint8Array(len);\n    let outPos = 0;\n    // Leftovers\n    if (this.pos < this.blockLen) {\n      const take = Math.min(len, this.blockLen - this.pos);\n      out.set(this.buf.subarray(this.pos, this.pos + take), 0);\n      this.pos += take;\n      outPos += take;\n      if (outPos === len) return out; // fast path\n    }\n    // Full blocks directly to out\n    const blocks = Math.floor((len - outPos) / this.blockLen);\n    if (blocks > 0) {\n      const blockBytes = blocks * this.blockLen;\n      const b = out.subarray(outPos, outPos + blockBytes);\n      this.cipher(this.key, this.nonce, b, b, this.ctr);\n      this.ctr += blocks;\n      outPos += blockBytes;\n    }\n    // Save leftovers\n    const left = len - outPos;\n    if (left > 0) {\n      this.buf.fill(0);\n      // NOTE: cipher will handle overflow\n      this.cipher(this.key, this.nonce, this.buf, this.buf, this.ctr++);\n      out.set(this.buf.subarray(0, left), outPos);\n      this.pos = left;\n    }\n    return out;\n  }\n  clone(): _XorStreamPRG {\n    return new _XorStreamPRG(\n      this.cipher,\n      this.blockLen,\n      this.keyLen,\n      this.nonceLen,\n      this.randomBytes(this.state.length)\n    );\n  }\n  clean(): void {\n    this.pos = 0;\n    this.ctr = 0;\n    this.buf.fill(0);\n    this.state.fill(0);\n  }\n}\n\nexport type XorPRG = (seed?: Uint8Array) => _XorStreamPRG;\n\nexport const createPRG = (\n  cipher: XorStream,\n  blockLen: number,\n  keyLen: number,\n  nonceLen: number\n): XorPRG => {\n  return (seed: Uint8Array = randomBytes(32)): _XorStreamPRG =>\n    new _XorStreamPRG(cipher, blockLen, keyLen, nonceLen, seed);\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5651, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+ciphers@2.0.1/node_modules/@noble/ciphers/_poly1305.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bciphers%402.0.1/node_modules/%40noble/ciphers/src/_poly1305.ts"],"sourcesContent":["/**\n * Poly1305 ([PDF](https://cr.yp.to/mac/poly1305-20050329.pdf),\n * [wiki](https://en.wikipedia.org/wiki/Poly1305))\n * is a fast and parallel secret-key message-authentication code suitable for\n * a wide variety of applications. It was standardized in\n * [RFC 8439](https://www.rfc-editor.org/rfc/rfc8439) and is now used in TLS 1.3.\n *\n * Polynomial MACs are not perfect for every situation:\n * they lack Random Key Robustness: the MAC can be forged, and can't be used in PAKE schemes.\n * See [invisible salamanders attack](https://keymaterial.net/2020/09/07/invisible-salamanders-in-aes-gcm-siv/).\n * To combat invisible salamanders, `hash(key)` can be included in ciphertext,\n * however, this would violate ciphertext indistinguishability:\n * an attacker would know which key was used - so `HKDF(key, i)`\n * could be used instead.\n *\n * Check out [original website](https://cr.yp.to/mac.html).\n * Based on Public Domain [poly1305-donna](https://github.com/floodyberry/poly1305-donna).\n * @module\n */\n// prettier-ignore\nimport {\n  abytes, aexists, aoutput, bytesToHex,\n  clean, concatBytes, copyBytes, hexToNumber, numberToBytesBE,\n  type IHash2\n} from './utils.ts';\n\nfunction u8to16(a: Uint8Array, i: number) {\n  return (a[i++] & 0xff) | ((a[i++] & 0xff) << 8);\n}\n\nfunction bytesToNumberLE(bytes: Uint8Array): bigint {\n  return hexToNumber(bytesToHex(Uint8Array.from(bytes).reverse()));\n}\n\n/** Small version of `poly1305` without loop unrolling. Unused, provided for auditability. */\nfunction poly1305_small(msg: Uint8Array, key: Uint8Array): Uint8Array {\n  abytes(msg);\n  abytes(key, 32, 'key');\n  const POW_2_130_5 = BigInt(2) ** BigInt(130) - BigInt(5); // 2^130-5\n  const POW_2_128_1 = BigInt(2) ** BigInt(128) - BigInt(1); // 2^128-1\n  const CLAMP_R = BigInt('0x0ffffffc0ffffffc0ffffffc0fffffff');\n  const r = bytesToNumberLE(key.subarray(0, 16)) & CLAMP_R;\n  const s = bytesToNumberLE(key.subarray(16));\n  // Process by 16 byte chunks\n  let acc = BigInt(0);\n  for (let i = 0; i < msg.length; i += 16) {\n    const m = msg.subarray(i, i + 16);\n    const n = bytesToNumberLE(m) | (BigInt(1) << BigInt(8 * m.length));\n    acc = ((acc + n) * r) % POW_2_130_5;\n  }\n  const res = (acc + s) & POW_2_128_1;\n  return numberToBytesBE(res, 16).reverse(); // LE\n}\n\n// Can be used to replace `computeTag` in chacha.ts. Unused, provided for auditability.\n// @ts-expect-error\nfunction poly1305_computeTag_small(\n  authKey: Uint8Array,\n  lengths: Uint8Array,\n  ciphertext: Uint8Array,\n  AAD?: Uint8Array\n): Uint8Array {\n  const res = [];\n  const updatePadded2 = (msg: Uint8Array) => {\n    res.push(msg);\n    const leftover = msg.length % 16;\n    if (leftover) res.push(new Uint8Array(16).slice(leftover));\n  };\n  if (AAD) updatePadded2(AAD);\n  updatePadded2(ciphertext);\n  res.push(lengths);\n  return poly1305_small(concatBytes(...res), authKey);\n}\n\n/** Poly1305 class. Prefer poly1305() function instead. */\nexport class Poly1305 implements IHash2 {\n  readonly blockLen = 16;\n  readonly outputLen = 16;\n  private buffer = new Uint8Array(16);\n  private r = new Uint16Array(10); // Allocating 1 array with .subarray() here is slower than 3\n  private h = new Uint16Array(10);\n  private pad = new Uint16Array(8);\n  private pos = 0;\n  protected finished = false;\n\n  // Can be speed-up using BigUint64Array, at the cost of complexity\n  constructor(key: Uint8Array) {\n    key = copyBytes(abytes(key, 32, 'key'));\n    const t0 = u8to16(key, 0);\n    const t1 = u8to16(key, 2);\n    const t2 = u8to16(key, 4);\n    const t3 = u8to16(key, 6);\n    const t4 = u8to16(key, 8);\n    const t5 = u8to16(key, 10);\n    const t6 = u8to16(key, 12);\n    const t7 = u8to16(key, 14);\n\n    // https://github.com/floodyberry/poly1305-donna/blob/e6ad6e091d30d7f4ec2d4f978be1fcfcbce72781/poly1305-donna-16.h#L47\n    this.r[0] = t0 & 0x1fff;\n    this.r[1] = ((t0 >>> 13) | (t1 << 3)) & 0x1fff;\n    this.r[2] = ((t1 >>> 10) | (t2 << 6)) & 0x1f03;\n    this.r[3] = ((t2 >>> 7) | (t3 << 9)) & 0x1fff;\n    this.r[4] = ((t3 >>> 4) | (t4 << 12)) & 0x00ff;\n    this.r[5] = (t4 >>> 1) & 0x1ffe;\n    this.r[6] = ((t4 >>> 14) | (t5 << 2)) & 0x1fff;\n    this.r[7] = ((t5 >>> 11) | (t6 << 5)) & 0x1f81;\n    this.r[8] = ((t6 >>> 8) | (t7 << 8)) & 0x1fff;\n    this.r[9] = (t7 >>> 5) & 0x007f;\n    for (let i = 0; i < 8; i++) this.pad[i] = u8to16(key, 16 + 2 * i);\n  }\n\n  private process(data: Uint8Array, offset: number, isLast = false) {\n    const hibit = isLast ? 0 : 1 << 11;\n    const { h, r } = this;\n    const r0 = r[0];\n    const r1 = r[1];\n    const r2 = r[2];\n    const r3 = r[3];\n    const r4 = r[4];\n    const r5 = r[5];\n    const r6 = r[6];\n    const r7 = r[7];\n    const r8 = r[8];\n    const r9 = r[9];\n\n    const t0 = u8to16(data, offset + 0);\n    const t1 = u8to16(data, offset + 2);\n    const t2 = u8to16(data, offset + 4);\n    const t3 = u8to16(data, offset + 6);\n    const t4 = u8to16(data, offset + 8);\n    const t5 = u8to16(data, offset + 10);\n    const t6 = u8to16(data, offset + 12);\n    const t7 = u8to16(data, offset + 14);\n\n    let h0 = h[0] + (t0 & 0x1fff);\n    let h1 = h[1] + (((t0 >>> 13) | (t1 << 3)) & 0x1fff);\n    let h2 = h[2] + (((t1 >>> 10) | (t2 << 6)) & 0x1fff);\n    let h3 = h[3] + (((t2 >>> 7) | (t3 << 9)) & 0x1fff);\n    let h4 = h[4] + (((t3 >>> 4) | (t4 << 12)) & 0x1fff);\n    let h5 = h[5] + ((t4 >>> 1) & 0x1fff);\n    let h6 = h[6] + (((t4 >>> 14) | (t5 << 2)) & 0x1fff);\n    let h7 = h[7] + (((t5 >>> 11) | (t6 << 5)) & 0x1fff);\n    let h8 = h[8] + (((t6 >>> 8) | (t7 << 8)) & 0x1fff);\n    let h9 = h[9] + ((t7 >>> 5) | hibit);\n\n    let c = 0;\n\n    let d0 = c + h0 * r0 + h1 * (5 * r9) + h2 * (5 * r8) + h3 * (5 * r7) + h4 * (5 * r6);\n    c = d0 >>> 13;\n    d0 &= 0x1fff;\n    d0 += h5 * (5 * r5) + h6 * (5 * r4) + h7 * (5 * r3) + h8 * (5 * r2) + h9 * (5 * r1);\n    c += d0 >>> 13;\n    d0 &= 0x1fff;\n\n    let d1 = c + h0 * r1 + h1 * r0 + h2 * (5 * r9) + h3 * (5 * r8) + h4 * (5 * r7);\n    c = d1 >>> 13;\n    d1 &= 0x1fff;\n    d1 += h5 * (5 * r6) + h6 * (5 * r5) + h7 * (5 * r4) + h8 * (5 * r3) + h9 * (5 * r2);\n    c += d1 >>> 13;\n    d1 &= 0x1fff;\n\n    let d2 = c + h0 * r2 + h1 * r1 + h2 * r0 + h3 * (5 * r9) + h4 * (5 * r8);\n    c = d2 >>> 13;\n    d2 &= 0x1fff;\n    d2 += h5 * (5 * r7) + h6 * (5 * r6) + h7 * (5 * r5) + h8 * (5 * r4) + h9 * (5 * r3);\n    c += d2 >>> 13;\n    d2 &= 0x1fff;\n\n    let d3 = c + h0 * r3 + h1 * r2 + h2 * r1 + h3 * r0 + h4 * (5 * r9);\n    c = d3 >>> 13;\n    d3 &= 0x1fff;\n    d3 += h5 * (5 * r8) + h6 * (5 * r7) + h7 * (5 * r6) + h8 * (5 * r5) + h9 * (5 * r4);\n    c += d3 >>> 13;\n    d3 &= 0x1fff;\n\n    let d4 = c + h0 * r4 + h1 * r3 + h2 * r2 + h3 * r1 + h4 * r0;\n    c = d4 >>> 13;\n    d4 &= 0x1fff;\n    d4 += h5 * (5 * r9) + h6 * (5 * r8) + h7 * (5 * r7) + h8 * (5 * r6) + h9 * (5 * r5);\n    c += d4 >>> 13;\n    d4 &= 0x1fff;\n\n    let d5 = c + h0 * r5 + h1 * r4 + h2 * r3 + h3 * r2 + h4 * r1;\n    c = d5 >>> 13;\n    d5 &= 0x1fff;\n    d5 += h5 * r0 + h6 * (5 * r9) + h7 * (5 * r8) + h8 * (5 * r7) + h9 * (5 * r6);\n    c += d5 >>> 13;\n    d5 &= 0x1fff;\n\n    let d6 = c + h0 * r6 + h1 * r5 + h2 * r4 + h3 * r3 + h4 * r2;\n    c = d6 >>> 13;\n    d6 &= 0x1fff;\n    d6 += h5 * r1 + h6 * r0 + h7 * (5 * r9) + h8 * (5 * r8) + h9 * (5 * r7);\n    c += d6 >>> 13;\n    d6 &= 0x1fff;\n\n    let d7 = c + h0 * r7 + h1 * r6 + h2 * r5 + h3 * r4 + h4 * r3;\n    c = d7 >>> 13;\n    d7 &= 0x1fff;\n    d7 += h5 * r2 + h6 * r1 + h7 * r0 + h8 * (5 * r9) + h9 * (5 * r8);\n    c += d7 >>> 13;\n    d7 &= 0x1fff;\n\n    let d8 = c + h0 * r8 + h1 * r7 + h2 * r6 + h3 * r5 + h4 * r4;\n    c = d8 >>> 13;\n    d8 &= 0x1fff;\n    d8 += h5 * r3 + h6 * r2 + h7 * r1 + h8 * r0 + h9 * (5 * r9);\n    c += d8 >>> 13;\n    d8 &= 0x1fff;\n\n    let d9 = c + h0 * r9 + h1 * r8 + h2 * r7 + h3 * r6 + h4 * r5;\n    c = d9 >>> 13;\n    d9 &= 0x1fff;\n    d9 += h5 * r4 + h6 * r3 + h7 * r2 + h8 * r1 + h9 * r0;\n    c += d9 >>> 13;\n    d9 &= 0x1fff;\n\n    c = ((c << 2) + c) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = c >>> 13;\n    d1 += c;\n\n    h[0] = d0;\n    h[1] = d1;\n    h[2] = d2;\n    h[3] = d3;\n    h[4] = d4;\n    h[5] = d5;\n    h[6] = d6;\n    h[7] = d7;\n    h[8] = d8;\n    h[9] = d9;\n  }\n\n  private finalize() {\n    const { h, pad } = this;\n    const g = new Uint16Array(10);\n    let c = h[1] >>> 13;\n    h[1] &= 0x1fff;\n    for (let i = 2; i < 10; i++) {\n      h[i] += c;\n      c = h[i] >>> 13;\n      h[i] &= 0x1fff;\n    }\n    h[0] += c * 5;\n    c = h[0] >>> 13;\n    h[0] &= 0x1fff;\n    h[1] += c;\n    c = h[1] >>> 13;\n    h[1] &= 0x1fff;\n    h[2] += c;\n\n    g[0] = h[0] + 5;\n    c = g[0] >>> 13;\n    g[0] &= 0x1fff;\n    for (let i = 1; i < 10; i++) {\n      g[i] = h[i] + c;\n      c = g[i] >>> 13;\n      g[i] &= 0x1fff;\n    }\n    g[9] -= 1 << 13;\n\n    let mask = (c ^ 1) - 1;\n    for (let i = 0; i < 10; i++) g[i] &= mask;\n    mask = ~mask;\n    for (let i = 0; i < 10; i++) h[i] = (h[i] & mask) | g[i];\n    h[0] = (h[0] | (h[1] << 13)) & 0xffff;\n    h[1] = ((h[1] >>> 3) | (h[2] << 10)) & 0xffff;\n    h[2] = ((h[2] >>> 6) | (h[3] << 7)) & 0xffff;\n    h[3] = ((h[3] >>> 9) | (h[4] << 4)) & 0xffff;\n    h[4] = ((h[4] >>> 12) | (h[5] << 1) | (h[6] << 14)) & 0xffff;\n    h[5] = ((h[6] >>> 2) | (h[7] << 11)) & 0xffff;\n    h[6] = ((h[7] >>> 5) | (h[8] << 8)) & 0xffff;\n    h[7] = ((h[8] >>> 8) | (h[9] << 5)) & 0xffff;\n\n    let f = h[0] + pad[0];\n    h[0] = f & 0xffff;\n    for (let i = 1; i < 8; i++) {\n      f = (((h[i] + pad[i]) | 0) + (f >>> 16)) | 0;\n      h[i] = f & 0xffff;\n    }\n    clean(g);\n  }\n  update(data: Uint8Array): this {\n    aexists(this);\n    abytes(data);\n    data = copyBytes(data);\n    const { buffer, blockLen } = this;\n    const len = data.length;\n\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input\n      if (take === blockLen) {\n        for (; blockLen <= len - pos; pos += blockLen) this.process(data, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(buffer, 0, false);\n        this.pos = 0;\n      }\n    }\n    return this;\n  }\n  destroy(): void {\n    clean(this.h, this.r, this.buffer, this.pad);\n  }\n  digestInto(out: Uint8Array): Uint8Array {\n    aexists(this);\n    aoutput(out, this);\n    this.finished = true;\n    const { buffer, h } = this;\n    let { pos } = this;\n    if (pos) {\n      buffer[pos++] = 1;\n      for (; pos < 16; pos++) buffer[pos] = 0;\n      this.process(buffer, 0, true);\n    }\n    this.finalize();\n    let opos = 0;\n    for (let i = 0; i < 8; i++) {\n      out[opos++] = h[i] >>> 0;\n      out[opos++] = h[i] >>> 8;\n    }\n    return out;\n  }\n  digest(): Uint8Array {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n}\n\nexport type CHash = ReturnType<typeof wrapConstructorWithKey>;\nexport function wrapConstructorWithKey<H extends IHash2>(\n  hashCons: (key: Uint8Array) => H\n): {\n  (msg: Uint8Array, key: Uint8Array): Uint8Array;\n  outputLen: number;\n  blockLen: number;\n  create(key: Uint8Array): H;\n} {\n  const hashC = (msg: Uint8Array, key: Uint8Array): Uint8Array =>\n    hashCons(key).update(msg).digest();\n  const tmp = hashCons(new Uint8Array(32)); // tmp array, used just once below\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (key: Uint8Array) => hashCons(key);\n  return hashC;\n}\n\n/** Poly1305 MAC from RFC 8439. */\nexport const poly1305: CHash = /** @__PURE__ */ (() =>\n  wrapConstructorWithKey((key) => new Poly1305(key)))();\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;GAkBG,CACH,kBAAkB;;;;;;;;;AAClB,OAAO,EACL,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,EACpC,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,eAAe,EAE5D,MAAM,YAAY,CAAC;;AAEpB,SAAS,MAAM,CAAC,CAAa,EAAE,CAAS;IACtC,OAAO,AAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAI,CAAD,AAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAClD,CAAC;AAED,SAAS,eAAe,CAAC,KAAiB;IACxC,WAAO,2NAAW,MAAC,0NAAU,EAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AACnE,CAAC;AAED,2FAAA,EAA6F,CAC7F,SAAS,cAAc,CAAC,GAAe,EAAE,GAAe;QACtD,sNAAM,EAAC,GAAG,CAAC,CAAC;QACZ,sNAAM,EAAC,GAAG,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC;IACvB,MAAM,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU;IACpE,MAAM,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU;IACpE,MAAM,OAAO,GAAG,MAAM,CAAC,oCAAoC,CAAC,CAAC;IAC7D,MAAM,CAAC,GAAG,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,OAAO,CAAC;IACzD,MAAM,CAAC,GAAG,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5C,4BAA4B;IAC5B,IAAI,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;IACpB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAE,CAAC;QACxC,MAAM,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;QAClC,MAAM,CAAC,GAAG,eAAe,CAAC,CAAC,CAAC,GAAG,AAAC,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACnE,GAAG,GAAG,AAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,EAAG,WAAW,CAAC;IACtC,CAAC;IACD,MAAM,GAAG,GAAG,AAAC,GAAG,GAAG,CAAC,CAAC,EAAG,WAAW,CAAC;IACpC,WAAO,+NAAe,EAAC,GAAG,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,KAAK;AAClD,CAAC;AAED,uFAAuF;AACvF,mBAAmB;AACnB,SAAS,yBAAyB,CAChC,OAAmB,EACnB,OAAmB,EACnB,UAAsB,EACtB,GAAgB;IAEhB,MAAM,GAAG,GAAG,EAAE,CAAC;IACf,MAAM,aAAa,GAAG,CAAC,GAAe,EAAE,EAAE;QACxC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACd,MAAM,QAAQ,GAAG,GAAG,CAAC,MAAM,GAAG,EAAE,CAAC;QACjC,IAAI,QAAQ,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC7D,CAAC,CAAC;IACF,IAAI,GAAG,EAAE,aAAa,CAAC,GAAG,CAAC,CAAC;IAC5B,aAAa,CAAC,UAAU,CAAC,CAAC;IAC1B,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAClB,OAAO,cAAc,KAAC,2NAAW,CAAC,IAAG,GAAG,CAAC,EAAE,OAAO,CAAC,CAAC;AACtD,CAAC;AAGK,MAAO,QAAQ;IACV,QAAQ,GAAG,EAAE,CAAC;IACd,SAAS,GAAG,EAAE,CAAC;IAChB,MAAM,GAAG,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC;IAC5B,CAAC,GAAG,IAAI,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,4DAA4D;IACrF,CAAC,GAAG,IAAI,WAAW,CAAC,EAAE,CAAC,CAAC;IACxB,GAAG,GAAG,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC;IACzB,GAAG,GAAG,CAAC,CAAC;IACN,QAAQ,GAAG,KAAK,CAAC;IAE3B,kEAAkE;IAClE,YAAY,GAAe,CAAA;QACzB,GAAG,OAAG,yNAAS,MAAC,sNAAM,EAAC,GAAG,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC;QACxC,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAC1B,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAC1B,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAC1B,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAC1B,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAC1B,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAC3B,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAC3B,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAE3B,sHAAsH;QACtH,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,MAAM,CAAC;QACxB,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,EAAE,KAAK,EAAE,CAAC,EAAI,CAAD,CAAG,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC;QAC/C,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,EAAE,KAAK,EAAE,CAAC,EAAI,CAAD,CAAG,IAAI,CAAE,AAAD,CAAE,GAAG,MAAM,CAAC;QAC/C,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,EAAE,KAAK,CAAC,CAAC,EAAI,CAAD,CAAG,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC;QAC9C,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,EAAE,KAAK,CAAC,CAAC,EAAI,CAAD,CAAG,IAAI,EAAE,AAAC,CAAC,GAAG,MAAM,CAAC;QAC/C,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,AAAC,EAAE,KAAK,CAAC,CAAC,EAAG,MAAM,CAAC;QAChC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,EAAE,KAAK,EAAE,CAAC,EAAI,CAAD,CAAG,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC;QAC/C,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,EAAE,KAAK,EAAE,CAAC,EAAI,CAAD,CAAG,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC;QAC/C,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAE,AAAD,EAAG,KAAK,CAAC,CAAC,EAAI,CAAD,CAAG,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC;QAC9C,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,AAAC,EAAE,KAAK,CAAC,CAAC,EAAG,MAAM,CAAC;QAChC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,EAAE,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACpE,CAAC;IAEO,OAAO,CAAC,IAAgB,EAAE,MAAc,EAAE,MAAM,GAAG,KAAK,EAAA;QAC9D,MAAM,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;QACnC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC;QACtB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAEhB,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;QACpC,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;QACpC,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;QACpC,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;QACpC,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;QACpC,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC;QACrC,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC;QACrC,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,MAAM,GAAG,EAAE,CAAC,CAAC;QAErC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,MAAM,CAAC,CAAC;QAC9B,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,AAAC,EAAE,KAAK,EAAE,CAAC,EAAI,CAAD,CAAG,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC,CAAC;QACrD,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,AAAC,EAAE,KAAK,EAAE,CAAC,EAAI,CAAD,CAAG,IAAI,CAAE,AAAD,CAAE,GAAG,MAAM,CAAC,CAAC;QACrD,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,AAAC,EAAE,KAAK,CAAC,CAAC,EAAI,CAAD,CAAG,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC,CAAC;QACpD,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,AAAC,EAAE,KAAK,CAAC,CAAC,EAAI,CAAD,CAAG,IAAI,EAAG,AAAD,CAAE,GAAG,MAAM,CAAC,CAAC;QACrD,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAE,AAAD,EAAG,KAAK,CAAC,CAAC,EAAG,MAAM,CAAC,CAAC;QACtC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,AAAC,EAAE,KAAK,EAAE,CAAC,EAAI,CAAD,CAAG,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC,CAAC;QACrD,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAE,AAAD,EAAG,KAAK,EAAE,CAAC,EAAI,CAAD,CAAG,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC,CAAC;QACrD,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,AAAC,EAAE,KAAK,CAAC,CAAC,EAAI,CAAD,CAAG,IAAI,CAAE,AAAD,CAAE,GAAG,MAAM,CAAC,CAAC;QACpD,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,EAAE,KAAK,CAAC,CAAC,EAAG,KAAK,CAAC,CAAC;QAErC,IAAI,CAAC,GAAG,CAAC,CAAC;QAEV,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACrF,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACpF,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC/E,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACpF,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACzE,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACpF,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACnE,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACpF,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QAC7D,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACpF,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QAC7D,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC9E,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QAC7D,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACxE,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QAC7D,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAClE,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QAC7D,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC5D,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,IAAI,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QAC7D,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;QACd,EAAE,IAAI,MAAM,CAAC;QACb,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QACtD,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;QACf,EAAE,IAAI,MAAM,CAAC;QAEb,CAAC,GAAG,AAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAG,CAAC,CAAC;QACvB,CAAC,GAAG,AAAC,CAAC,GAAG,EAAE,CAAC,EAAG,CAAC,CAAC;QACjB,EAAE,GAAG,CAAC,GAAG,MAAM,CAAC;QAChB,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;QACb,EAAE,IAAI,CAAC,CAAC;QAER,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;IACZ,CAAC;IAEO,QAAQ,GAAA;QACd,MAAM,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;QACxB,MAAM,CAAC,GAAG,IAAI,WAAW,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC;QACf,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAE,CAAC;YAC5B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YACV,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;YAChB,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC;QACjB,CAAC;QACD,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACd,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC;QACf,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACV,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC;QACf,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAEV,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAChB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC;QACf,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAE,CAAC;YAC5B,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;YAChB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;YAChB,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC;QACjB,CAAC;QACD,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;QAEhB,IAAI,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACvB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;QAC1C,IAAI,GAAG,CAAC,IAAI,CAAC;QACb,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAE,CAAC,CAAC,CAAC,CAAC,GAAG,AAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,EAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACzD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,AAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,AAAC,CAAC,GAAG,MAAM,CAAC;QACtC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAI,CAAD,AAAE,CAAC,CAAC,CAAC,IAAI,EAAE,AAAC,CAAC,GAAG,MAAM,CAAC;QAC9C,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAI,CAAD,AAAE,CAAC,CAAC,CAAC,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC;QAC7C,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAI,CAAD,AAAE,CAAC,CAAC,CAAC,IAAI,CAAE,AAAD,CAAE,GAAG,MAAM,CAAC;QAC7C,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,EAAI,CAAD,AAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAI,CAAD,AAAE,CAAC,CAAC,CAAC,IAAI,EAAE,AAAC,CAAC,GAAG,MAAM,CAAC;QAC7D,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAI,CAAD,AAAE,CAAC,CAAC,CAAC,IAAI,EAAE,AAAC,CAAC,GAAG,MAAM,CAAC;QAC9C,CAAC,CAAC,CAAC,CAAC,GAAG,CAAE,AAAD,CAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAI,CAAD,AAAE,CAAC,CAAC,CAAC,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC;QAC7C,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,AAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAI,CAAD,AAAE,CAAC,CAAC,CAAC,IAAI,CAAC,AAAC,CAAC,GAAG,MAAM,CAAC;QAE7C,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QACtB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;QAClB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAE,CAAC;YAC3B,CAAC,GAAG,AAAC,CAAC,AAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,EAAG,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAG,CAAC,CAAC;YAC7C,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;QACpB,CAAC;YACD,qNAAK,EAAC,CAAC,CAAC,CAAC;IACX,CAAC;IACD,MAAM,CAAC,IAAgB,EAAA;YACrB,uNAAO,EAAC,IAAI,CAAC,CAAC;YACd,sNAAM,EAAC,IAAI,CAAC,CAAC;QACb,IAAI,OAAG,yNAAS,EAAC,IAAI,CAAC,CAAC;QACvB,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;QAClC,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC;QAExB,IAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,EAAI,CAAC;YAC9B,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC;YACtD,iDAAiD;YACjD,IAAI,IAAI,KAAK,QAAQ,EAAE,CAAC;gBACtB,MAAO,QAAQ,IAAI,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,QAAQ,CAAE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;gBACvE,SAAS;YACX,CAAC;YACD,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;YACrD,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC;YACjB,GAAG,IAAI,IAAI,CAAC;YACZ,IAAI,IAAI,CAAC,GAAG,KAAK,QAAQ,EAAE,CAAC;gBAC1B,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;gBAC/B,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;YACf,CAAC;QACH,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IACD,OAAO,GAAA;YACL,qNAAK,EAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IAC/C,CAAC;IACD,UAAU,CAAC,GAAe,EAAA;YACxB,uNAAO,EAAC,IAAI,CAAC,CAAC;YACd,uNAAO,EAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC;QAC3B,IAAI,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;QACnB,IAAI,GAAG,EAAE,CAAC;YACR,MAAM,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC;YAClB,MAAO,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,CAAE,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACxC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAChC,CAAC;QACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,IAAI,GAAG,CAAC,CAAC;QACb,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAE,CAAC;YAC3B,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;YACzB,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QAC3B,CAAC;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IACD,MAAM,GAAA;QACJ,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC;QACnC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QACxB,MAAM,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,OAAO,GAAG,CAAC;IACb,CAAC;CACF;AAGK,SAAU,sBAAsB,CACpC,QAAgC;IAOhC,MAAM,KAAK,GAAG,CAAC,GAAe,EAAE,GAAe,EAAc,CAC3D,CAD6D,OACrD,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;IACrC,MAAM,GAAG,GAAG,QAAQ,CAAC,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,kCAAkC;IAC5E,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC,SAAS,CAAC;IAChC,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;IAC9B,KAAK,CAAC,MAAM,GAAG,CAAC,GAAe,EAAE,CAAG,CAAD,OAAS,CAAC,GAAG,CAAC,CAAC;IAClD,OAAO,KAAK,CAAC;AACf,CAAC;AAGM,MAAM,QAAQ,GAAU,cAAA,EAAgB,CAAC,CAAC,GAAG,CAClD,CADoD,qBAC9B,CAAC,CAAC,GAAG,EAAE,CAAG,CAAD,GAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC","debugId":null}},
    {"offset": {"line": 5971, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+ciphers@2.0.1/node_modules/@noble/ciphers/chacha.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bciphers%402.0.1/node_modules/%40noble/ciphers/src/chacha.ts"],"sourcesContent":["/**\n * ChaCha stream cipher, released\n * in 2008. Developed after Salsa20, ChaCha aims to increase diffusion per round.\n * It was standardized in [RFC 8439](https://www.rfc-editor.org/rfc/rfc8439) and\n * is now used in TLS 1.3.\n *\n * [XChaCha20](https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-xchacha)\n * extended-nonce variant is also provided. Similar to XSalsa, it's safe to use with\n * randomly-generated nonces.\n *\n * Check out [PDF](http://cr.yp.to/chacha/chacha-20080128.pdf) and\n * [wiki](https://en.wikipedia.org/wiki/Salsa20) and\n * [website](https://cr.yp.to/chacha.html).\n *\n * @module\n */\nimport { type XorPRG, createCipher, createPRG, rotl } from './_arx.ts';\nimport { poly1305 } from './_poly1305.ts';\nimport {\n  type ARXCipher,\n  type CipherWithOutput,\n  type XorStream,\n  abytes,\n  clean,\n  equalBytes,\n  getOutput,\n  u64Lengths,\n  wrapCipher,\n} from './utils.ts';\n\n/**\n * ChaCha core function. It is implemented twice:\n * 1. Simple loop (chachaCore_small, hchacha_small)\n * 2. Unrolled loop (chachaCore, hchacha) - 4x faster, but larger & harder to read\n * The specific implementation is selected in `createCipher` below.\n */\n\n/** quarter-round */\n// prettier-ignore\nfunction chachaQR(x: Uint32Array, a: number, b: number, c: number, d: number) {\n  x[a] = (x[a] + x[b]) | 0; x[d] = rotl(x[d] ^ x[a], 16);\n  x[c] = (x[c] + x[d]) | 0; x[b] = rotl(x[b] ^ x[c], 12);\n  x[a] = (x[a] + x[b]) | 0; x[d] = rotl(x[d] ^ x[a], 8);\n  x[c] = (x[c] + x[d]) | 0; x[b] = rotl(x[b] ^ x[c], 7);\n}\n\n/** single round */\nfunction chachaRound(x: Uint32Array, rounds = 20) {\n  for (let r = 0; r < rounds; r += 2) {\n    chachaQR(x, 0, 4, 8, 12);\n    chachaQR(x, 1, 5, 9, 13);\n    chachaQR(x, 2, 6, 10, 14);\n    chachaQR(x, 3, 7, 11, 15);\n    chachaQR(x, 0, 5, 10, 15);\n    chachaQR(x, 1, 6, 11, 12);\n    chachaQR(x, 2, 7, 8, 13);\n    chachaQR(x, 3, 4, 9, 14);\n  }\n}\n\nconst ctmp = /* @__PURE__ */ new Uint32Array(16);\n\n/** Small version of chacha without loop unrolling. Unused, provided for auditability. */\n// prettier-ignore\nfunction chacha(\n  s: Uint32Array, k: Uint32Array, i: Uint32Array, out: Uint32Array,\n  isHChacha: boolean = true, rounds: number = 20\n): void {\n  // Create initial array using common pattern\n  const y = Uint32Array.from([\n    s[0], s[1], s[2], s[3], // \"expa\"   \"nd 3\"  \"2-by\"  \"te k\"\n    k[0], k[1], k[2], k[3], // Key      Key     Key     Key\n    k[4], k[5], k[6], k[7], // Key      Key     Key     Key\n    i[0], i[1], i[2], i[3], // Counter  Counter Nonce   Nonce\n  ]);\n  const x = ctmp;\n  x.set(y);\n  chachaRound(x, rounds);\n\n  // hchacha extracts 8 specific bytes, chacha adds orig to result\n  if (isHChacha) {\n    const xindexes = [0, 1, 2, 3, 12, 13, 14, 15];\n    for (let i = 0; i < 8; i++) out[i] = x[xindexes[i]];\n  } else {\n    for (let i = 0; i < 16; i++) out[i] = (y[i] + x[i]) | 0;\n  }\n}\n\n/** Identical to `chachaCore`. Unused. */\n// @ts-ignore\nconst chachaCore_small: typeof chachaCore = (s, k, n, out, cnt, rounds) =>\n  chacha(s, k, Uint32Array.from([n[0], n[1], cnt, 0]), out, false, rounds);\n/** Identical to `hchacha`. Unused. */\n// @ts-ignore\nconst hchacha_small: typeof hchacha = chacha;\n\n/** Identical to `chachaCore_small`. Unused. */\n// prettier-ignore\nfunction chachaCore(\n  s: Uint32Array, k: Uint32Array, n: Uint32Array, out: Uint32Array, cnt: number, rounds = 20\n): void {\n  let y00 = s[0], y01 = s[1], y02 = s[2], y03 = s[3], // \"expa\"   \"nd 3\"  \"2-by\"  \"te k\"\n      y04 = k[0], y05 = k[1], y06 = k[2], y07 = k[3], // Key      Key     Key     Key\n      y08 = k[4], y09 = k[5], y10 = k[6], y11 = k[7], // Key      Key     Key     Key\n      y12 = cnt,  y13 = n[0], y14 = n[1], y15 = n[2];  // Counter  Counter\tNonce   Nonce\n  // Save state to temporary variables\n  let x00 = y00, x01 = y01, x02 = y02, x03 = y03,\n      x04 = y04, x05 = y05, x06 = y06, x07 = y07,\n      x08 = y08, x09 = y09, x10 = y10, x11 = y11,\n      x12 = y12, x13 = y13, x14 = y14, x15 = y15;\n  for (let r = 0; r < rounds; r += 2) {\n    x00 = (x00 + x04) | 0; x12 = rotl(x12 ^ x00, 16);\n    x08 = (x08 + x12) | 0; x04 = rotl(x04 ^ x08, 12);\n    x00 = (x00 + x04) | 0; x12 = rotl(x12 ^ x00, 8);\n    x08 = (x08 + x12) | 0; x04 = rotl(x04 ^ x08, 7);\n\n    x01 = (x01 + x05) | 0; x13 = rotl(x13 ^ x01, 16);\n    x09 = (x09 + x13) | 0; x05 = rotl(x05 ^ x09, 12);\n    x01 = (x01 + x05) | 0; x13 = rotl(x13 ^ x01, 8);\n    x09 = (x09 + x13) | 0; x05 = rotl(x05 ^ x09, 7);\n\n    x02 = (x02 + x06) | 0; x14 = rotl(x14 ^ x02, 16);\n    x10 = (x10 + x14) | 0; x06 = rotl(x06 ^ x10, 12);\n    x02 = (x02 + x06) | 0; x14 = rotl(x14 ^ x02, 8);\n    x10 = (x10 + x14) | 0; x06 = rotl(x06 ^ x10, 7);\n\n    x03 = (x03 + x07) | 0; x15 = rotl(x15 ^ x03, 16);\n    x11 = (x11 + x15) | 0; x07 = rotl(x07 ^ x11, 12);\n    x03 = (x03 + x07) | 0; x15 = rotl(x15 ^ x03, 8)\n    x11 = (x11 + x15) | 0; x07 = rotl(x07 ^ x11, 7);\n\n    x00 = (x00 + x05) | 0; x15 = rotl(x15 ^ x00, 16);\n    x10 = (x10 + x15) | 0; x05 = rotl(x05 ^ x10, 12);\n    x00 = (x00 + x05) | 0; x15 = rotl(x15 ^ x00, 8);\n    x10 = (x10 + x15) | 0; x05 = rotl(x05 ^ x10, 7);\n\n    x01 = (x01 + x06) | 0; x12 = rotl(x12 ^ x01, 16);\n    x11 = (x11 + x12) | 0; x06 = rotl(x06 ^ x11, 12);\n    x01 = (x01 + x06) | 0; x12 = rotl(x12 ^ x01, 8);\n    x11 = (x11 + x12) | 0; x06 = rotl(x06 ^ x11, 7);\n\n    x02 = (x02 + x07) | 0; x13 = rotl(x13 ^ x02, 16);\n    x08 = (x08 + x13) | 0; x07 = rotl(x07 ^ x08, 12);\n    x02 = (x02 + x07) | 0; x13 = rotl(x13 ^ x02, 8);\n    x08 = (x08 + x13) | 0; x07 = rotl(x07 ^ x08, 7);\n\n    x03 = (x03 + x04) | 0; x14 = rotl(x14 ^ x03, 16)\n    x09 = (x09 + x14) | 0; x04 = rotl(x04 ^ x09, 12);\n    x03 = (x03 + x04) | 0; x14 = rotl(x14 ^ x03, 8);\n    x09 = (x09 + x14) | 0; x04 = rotl(x04 ^ x09, 7);\n  }\n  // Write output\n  let oi = 0;\n  out[oi++] = (y00 + x00) | 0; out[oi++] = (y01 + x01) | 0;\n  out[oi++] = (y02 + x02) | 0; out[oi++] = (y03 + x03) | 0;\n  out[oi++] = (y04 + x04) | 0; out[oi++] = (y05 + x05) | 0;\n  out[oi++] = (y06 + x06) | 0; out[oi++] = (y07 + x07) | 0;\n  out[oi++] = (y08 + x08) | 0; out[oi++] = (y09 + x09) | 0;\n  out[oi++] = (y10 + x10) | 0; out[oi++] = (y11 + x11) | 0;\n  out[oi++] = (y12 + x12) | 0; out[oi++] = (y13 + x13) | 0;\n  out[oi++] = (y14 + x14) | 0; out[oi++] = (y15 + x15) | 0;\n}\n/**\n * hchacha hashes key and nonce into key' and nonce' for xchacha20.\n * Identical to `hchacha_small`.\n * Need to find a way to merge it with `chachaCore` without 25% performance hit.\n */\n// prettier-ignore\nexport function hchacha(\n  s: Uint32Array, k: Uint32Array, i: Uint32Array, out: Uint32Array\n): void {\n  let x00 = s[0], x01 = s[1], x02 = s[2], x03 = s[3],\n      x04 = k[0], x05 = k[1], x06 = k[2], x07 = k[3],\n      x08 = k[4], x09 = k[5], x10 = k[6], x11 = k[7],\n      x12 = i[0], x13 = i[1], x14 = i[2], x15 = i[3];\n  for (let r = 0; r < 20; r += 2) {\n    x00 = (x00 + x04) | 0; x12 = rotl(x12 ^ x00, 16);\n    x08 = (x08 + x12) | 0; x04 = rotl(x04 ^ x08, 12);\n    x00 = (x00 + x04) | 0; x12 = rotl(x12 ^ x00, 8);\n    x08 = (x08 + x12) | 0; x04 = rotl(x04 ^ x08, 7);\n\n    x01 = (x01 + x05) | 0; x13 = rotl(x13 ^ x01, 16);\n    x09 = (x09 + x13) | 0; x05 = rotl(x05 ^ x09, 12);\n    x01 = (x01 + x05) | 0; x13 = rotl(x13 ^ x01, 8);\n    x09 = (x09 + x13) | 0; x05 = rotl(x05 ^ x09, 7);\n\n    x02 = (x02 + x06) | 0; x14 = rotl(x14 ^ x02, 16);\n    x10 = (x10 + x14) | 0; x06 = rotl(x06 ^ x10, 12);\n    x02 = (x02 + x06) | 0; x14 = rotl(x14 ^ x02, 8);\n    x10 = (x10 + x14) | 0; x06 = rotl(x06 ^ x10, 7);\n\n    x03 = (x03 + x07) | 0; x15 = rotl(x15 ^ x03, 16);\n    x11 = (x11 + x15) | 0; x07 = rotl(x07 ^ x11, 12);\n    x03 = (x03 + x07) | 0; x15 = rotl(x15 ^ x03, 8)\n    x11 = (x11 + x15) | 0; x07 = rotl(x07 ^ x11, 7);\n\n    x00 = (x00 + x05) | 0; x15 = rotl(x15 ^ x00, 16);\n    x10 = (x10 + x15) | 0; x05 = rotl(x05 ^ x10, 12);\n    x00 = (x00 + x05) | 0; x15 = rotl(x15 ^ x00, 8);\n    x10 = (x10 + x15) | 0; x05 = rotl(x05 ^ x10, 7);\n\n    x01 = (x01 + x06) | 0; x12 = rotl(x12 ^ x01, 16);\n    x11 = (x11 + x12) | 0; x06 = rotl(x06 ^ x11, 12);\n    x01 = (x01 + x06) | 0; x12 = rotl(x12 ^ x01, 8);\n    x11 = (x11 + x12) | 0; x06 = rotl(x06 ^ x11, 7);\n\n    x02 = (x02 + x07) | 0; x13 = rotl(x13 ^ x02, 16);\n    x08 = (x08 + x13) | 0; x07 = rotl(x07 ^ x08, 12);\n    x02 = (x02 + x07) | 0; x13 = rotl(x13 ^ x02, 8);\n    x08 = (x08 + x13) | 0; x07 = rotl(x07 ^ x08, 7);\n\n    x03 = (x03 + x04) | 0; x14 = rotl(x14 ^ x03, 16)\n    x09 = (x09 + x14) | 0; x04 = rotl(x04 ^ x09, 12);\n    x03 = (x03 + x04) | 0; x14 = rotl(x14 ^ x03, 8);\n    x09 = (x09 + x14) | 0; x04 = rotl(x04 ^ x09, 7);\n  }\n  let oi = 0;\n  out[oi++] = x00; out[oi++] = x01;\n  out[oi++] = x02; out[oi++] = x03;\n  out[oi++] = x12; out[oi++] = x13;\n  out[oi++] = x14; out[oi++] = x15;\n}\n\n/** Original, non-RFC chacha20 from DJB. 8-byte nonce, 8-byte counter. */\nexport const chacha20orig: XorStream = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 8,\n  allowShortKeys: true,\n});\n/**\n * ChaCha stream cipher. Conforms to RFC 8439 (IETF, TLS). 12-byte nonce, 4-byte counter.\n * With smaller nonce, it's not safe to make it random (CSPRNG), due to collision chance.\n */\nexport const chacha20: XorStream = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 4,\n  allowShortKeys: false,\n});\n\n/**\n * XChaCha eXtended-nonce ChaCha. With 24-byte nonce, it's safe to make it random (CSPRNG).\n * See [IRTF draft](https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-xchacha).\n */\nexport const xchacha20: XorStream = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 8,\n  extendNonceFn: hchacha,\n  allowShortKeys: false,\n});\n\n/** Reduced 8-round chacha, described in original paper. */\nexport const chacha8: XorStream = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 4,\n  rounds: 8,\n});\n\n/** Reduced 12-round chacha, described in original paper. */\nexport const chacha12: XorStream = /* @__PURE__ */ createCipher(chachaCore, {\n  counterRight: false,\n  counterLength: 4,\n  rounds: 12,\n});\n\nconst ZEROS16 = /* @__PURE__ */ new Uint8Array(16);\n// Pad to digest size with zeros\nconst updatePadded = (h: ReturnType<typeof poly1305.create>, msg: Uint8Array) => {\n  h.update(msg);\n  const leftover = msg.length % 16;\n  if (leftover) h.update(ZEROS16.subarray(leftover));\n};\n\nconst ZEROS32 = /* @__PURE__ */ new Uint8Array(32);\nfunction computeTag(\n  fn: XorStream,\n  key: Uint8Array,\n  nonce: Uint8Array,\n  ciphertext: Uint8Array,\n  AAD?: Uint8Array\n): Uint8Array {\n  if (AAD !== undefined) abytes(AAD, undefined, 'AAD');\n  const authKey = fn(key, nonce, ZEROS32);\n  const lengths = u64Lengths(ciphertext.length, AAD ? AAD.length : 0, true);\n\n  // Methods below can be replaced with\n  // return poly1305_computeTag_small(authKey, lengths, ciphertext, AAD)\n  const h = poly1305.create(authKey);\n  if (AAD) updatePadded(h, AAD);\n  updatePadded(h, ciphertext);\n  h.update(lengths);\n  const res = h.digest();\n  clean(authKey, lengths);\n  return res;\n}\n\n/**\n * AEAD algorithm from RFC 8439.\n * Salsa20 and chacha (RFC 8439) use poly1305 differently.\n * We could have composed them, but it's hard because of authKey:\n * In salsa20, authKey changes position in salsa stream.\n * In chacha, authKey can't be computed inside computeTag, it modifies the counter.\n */\nexport const _poly1305_aead =\n  (xorStream: XorStream) =>\n  (key: Uint8Array, nonce: Uint8Array, AAD?: Uint8Array): CipherWithOutput => {\n    const tagLength = 16;\n    return {\n      encrypt(plaintext: Uint8Array, output?: Uint8Array) {\n        const plength = plaintext.length;\n        output = getOutput(plength + tagLength, output, false);\n        output.set(plaintext);\n        const oPlain = output.subarray(0, -tagLength);\n        // Actual encryption\n        xorStream(key, nonce, oPlain, oPlain, 1);\n        const tag = computeTag(xorStream, key, nonce, oPlain, AAD);\n        output.set(tag, plength); // append tag\n        clean(tag);\n        return output;\n      },\n      decrypt(ciphertext: Uint8Array, output?: Uint8Array) {\n        output = getOutput(ciphertext.length - tagLength, output, false);\n        const data = ciphertext.subarray(0, -tagLength);\n        const passedTag = ciphertext.subarray(-tagLength);\n        const tag = computeTag(xorStream, key, nonce, data, AAD);\n        if (!equalBytes(passedTag, tag)) throw new Error('invalid tag');\n        output.set(ciphertext.subarray(0, -tagLength));\n        // Actual decryption\n        xorStream(key, nonce, output, output, 1); // start stream with i=1\n        clean(tag);\n        return output;\n      },\n    };\n  };\n\n/**\n * ChaCha20-Poly1305 from RFC 8439.\n *\n * Unsafe to use random nonces under the same key, due to collision chance.\n * Prefer XChaCha instead.\n */\nexport const chacha20poly1305: ARXCipher = /* @__PURE__ */ wrapCipher(\n  { blockSize: 64, nonceLength: 12, tagLength: 16 },\n  _poly1305_aead(chacha20)\n);\n/**\n * XChaCha20-Poly1305 extended-nonce chacha.\n *\n * Can be safely used with random nonces (CSPRNG).\n * See [IRTF draft](https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-xchacha).\n */\nexport const xchacha20poly1305: ARXCipher = /* @__PURE__ */ wrapCipher(\n  { blockSize: 64, nonceLength: 24, tagLength: 16 },\n  _poly1305_aead(xchacha20)\n);\n\n/**\n * Chacha20 CSPRNG (cryptographically secure pseudorandom number generator).\n * It's best to limit usage to non-production, non-critical cases: for example, test-only.\n * Compatible with libtomcrypt. It does not have a specification, so unclear how secure it is.\n */\nexport const rngChacha20: XorPRG = /* @__PURE__ */ createPRG(chacha20orig, 64, 32, 8);\n/**\n * Chacha20/8 CSPRNG (cryptographically secure pseudorandom number generator).\n * It's best to limit usage to non-production, non-critical cases: for example, test-only.\n * Faster than `rngChacha20`.\n */\nexport const rngChacha8: XorPRG = /* @__PURE__ */ createPRG(chacha8, 64, 32, 12);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6356, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/utils.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bhashes%402.0.1/node_modules/%40noble/hashes/src/utils.ts"],"sourcesContent":["/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n\n/** Asserts something is positive integer. */\nexport function anumber(n: number, title: string = ''): void {\n  if (!Number.isSafeInteger(n) || n < 0) {\n    const prefix = title && `\"${title}\" `;\n    throw new Error(`${prefix}expected integer >= 0, got ${n}`);\n  }\n}\n\n/** Asserts something is Uint8Array. */\nexport function abytes(value: Uint8Array, length?: number, title: string = ''): Uint8Array {\n  const bytes = isBytes(value);\n  const len = value?.length;\n  const needsLen = length !== undefined;\n  if (!bytes || (needsLen && len !== length)) {\n    const prefix = title && `\"${title}\" `;\n    const ofLen = needsLen ? ` of length ${length}` : '';\n    const got = bytes ? `length=${len}` : `type=${typeof value}`;\n    throw new Error(prefix + 'expected Uint8Array' + ofLen + ', got ' + got);\n  }\n  return value;\n}\n\n/** Asserts something is hash */\nexport function ahash(h: CHash): void {\n  if (typeof h !== 'function' || typeof h.create !== 'function')\n    throw new Error('Hash must wrapped by utils.createHasher');\n  anumber(h.outputLen);\n  anumber(h.blockLen);\n}\n\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance: any, checkFinished = true): void {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\n\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out: any, instance: any): void {\n  abytes(out, undefined, 'digestInto() output');\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error('\"digestInto() output\" expected to be of length >=' + min);\n  }\n}\n\n/** Generic type encompassing 8/16/32-byte arrays - but not 64-byte. */\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr: TypedArray): Uint8Array {\n  return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr: TypedArray): Uint32Array {\n  return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays: TypedArray[]): void {\n  for (let i = 0; i < arrays.length; i++) {\n    arrays[i].fill(0);\n  }\n}\n\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr: TypedArray): DataView {\n  return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word: number, shift: number): number {\n  return (word << (32 - shift)) | (word >>> shift);\n}\n\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word: number, shift: number): number {\n  return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE: boolean = /* @__PURE__ */ (() =>\n  new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n\n/** The byte swap operation for uint32 */\nexport function byteSwap(word: number): number {\n  return (\n    ((word << 24) & 0xff000000) |\n    ((word << 8) & 0xff0000) |\n    ((word >>> 8) & 0xff00) |\n    ((word >>> 24) & 0xff)\n  );\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const swap8IfBE: (n: number) => number = isLE\n  ? (n: number) => n\n  : (n: number) => byteSwap(n);\n\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr: Uint32Array): Uint32Array {\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = byteSwap(arr[i]);\n  }\n  return arr;\n}\n\nexport const swap32IfBE: (u: Uint32Array) => Uint32Array = isLE\n  ? (u: Uint32Array) => u\n  : byteSwap32;\n\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin: boolean = /* @__PURE__ */ (() =>\n  // @ts-ignore\n  typeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  abytes(bytes);\n  // @ts-ignore\n  if (hasHexBuiltin) return bytes.toHex();\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 } as const;\nfunction asciiToBase16(ch: number): number | undefined {\n  if (ch >= asciis._0 && ch <= asciis._9) return ch - asciis._0; // '2' => 50-48\n  if (ch >= asciis.A && ch <= asciis.F) return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n  if (ch >= asciis.a && ch <= asciis.f) return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n  return;\n}\n\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  // @ts-ignore\n  if (hasHexBuiltin) return Uint8Array.fromHex(hex);\n  const hl = hex.length;\n  const al = hl / 2;\n  if (hl % 2) throw new Error('hex string expected, got unpadded hex of length ' + hl);\n  const array = new Uint8Array(al);\n  for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n    const n1 = asciiToBase16(hex.charCodeAt(hi));\n    const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n    if (n1 === undefined || n2 === undefined) {\n      const char = hex[hi] + hex[hi + 1];\n      throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n    }\n    array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n  }\n  return array;\n}\n\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async (): Promise<void> => {};\n\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(\n  iters: number,\n  tick: number,\n  cb: (i: number) => void\n): Promise<void> {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols, but ts doesn't see them: https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\n\n/**\n * Converts string to bytes using UTF8 encoding.\n * Built-in doesn't validate input to be string: we do the check.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error('string expected');\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\n/** KDFs can accept string or Uint8Array for user convenience. */\nexport type KDFInput = string | Uint8Array;\n\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nexport function kdfInputToBytes(data: KDFInput, errorTitle = ''): Uint8Array {\n  if (typeof data === 'string') return utf8ToBytes(data);\n  return abytes(data, undefined, errorTitle);\n}\n\n/** Copies several Uint8Arrays into one. */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  let sum = 0;\n  for (let i = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    abytes(a);\n    sum += a.length;\n  }\n  const res = new Uint8Array(sum);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    res.set(a, pad);\n    pad += a.length;\n  }\n  return res;\n}\n\ntype EmptyObj = {};\n/** Merges default options and passed options. */\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n    throw new Error('options must be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\n/** Common interface for all hashes. */\nexport interface Hash<T> {\n  blockLen: number; // Bytes per block\n  outputLen: number; // Bytes in output\n  update(buf: Uint8Array): this;\n  digestInto(buf: Uint8Array): void;\n  digest(): Uint8Array;\n  destroy(): void;\n  _cloneInto(to?: T): T;\n  clone(): T;\n}\n\n/** PseudoRandom (number) Generator */\nexport interface PRG {\n  addEntropy(seed: Uint8Array): void;\n  randomBytes(length: number): Uint8Array;\n  clean(): void;\n}\n\n/**\n * XOF: streaming API to read digest in chunks.\n * Same as 'squeeze' in keccak/k12 and 'seek' in blake3, but more generic name.\n * When hash used in XOF mode it is up to user to call '.destroy' afterwards, since we cannot\n * destroy state, next call can require more bytes.\n */\nexport type HashXOF<T extends Hash<T>> = Hash<T> & {\n  xof(bytes: number): Uint8Array; // Read 'bytes' bytes from digest stream\n  xofInto(buf: Uint8Array): Uint8Array; // read buf.length bytes from digest stream into buf\n};\n\n/** Hash constructor */\nexport type HasherCons<T, Opts = undefined> = Opts extends undefined ? () => T : (opts?: Opts) => T;\n/** Optional hash params. */\nexport type HashInfo = {\n  oid?: Uint8Array; // DER encoded OID in bytes\n};\n/** Hash function */\nexport type CHash<T extends Hash<T> = Hash<any>, Opts = undefined> = {\n  outputLen: number;\n  blockLen: number;\n} & HashInfo &\n  (Opts extends undefined\n    ? {\n        (msg: Uint8Array): Uint8Array;\n        create(): T;\n      }\n    : {\n        (msg: Uint8Array, opts?: Opts): Uint8Array;\n        create(opts?: Opts): T;\n      });\n/** XOF with output */\nexport type CHashXOF<T extends HashXOF<T> = HashXOF<any>, Opts = undefined> = CHash<T, Opts>;\n\n/** Creates function with outputLen, blockLen, create properties from a class constructor. */\nexport function createHasher<T extends Hash<T>, Opts = undefined>(\n  hashCons: HasherCons<T, Opts>,\n  info: HashInfo = {}\n): CHash<T, Opts> {\n  const hashC: any = (msg: Uint8Array, opts?: Opts) => hashCons(opts).update(msg).digest();\n  const tmp = hashCons(undefined);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts?: Opts) => hashCons(opts);\n  Object.assign(hashC, info);\n  return Object.freeze(hashC);\n}\n\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  const cr = typeof globalThis === 'object' ? (globalThis as any).crypto : null;\n  if (typeof cr?.getRandomValues !== 'function')\n    throw new Error('crypto.getRandomValues must be defined');\n  return cr.getRandomValues(new Uint8Array(bytesLength));\n}\n\n/** Creates OID opts for NIST hashes, with prefix 06 09 60 86 48 01 65 03 04 02. */\nexport const oidNist = (suffix: number): Required<HashInfo> => ({\n  oid: Uint8Array.from([0x06, 0x09, 0x60, 0x86, 0x48, 0x01, 0x65, 0x03, 0x04, 0x02, suffix]),\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6613, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/hmac.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bhashes%402.0.1/node_modules/%40noble/hashes/src/hmac.ts"],"sourcesContent":["/**\n * HMAC: RFC2104 message authentication code.\n * @module\n */\nimport { abytes, aexists, ahash, clean, type CHash, type Hash } from './utils.ts';\n\n/** Internal class for HMAC. */\nexport class _HMAC<T extends Hash<T>> implements Hash<_HMAC<T>> {\n  oHash: T;\n  iHash: T;\n  blockLen: number;\n  outputLen: number;\n  private finished = false;\n  private destroyed = false;\n\n  constructor(hash: CHash, key: Uint8Array) {\n    ahash(hash);\n    abytes(key, undefined, 'key');\n    this.iHash = hash.create() as T;\n    if (typeof this.iHash.update !== 'function')\n      throw new Error('Expected instance of class which extends utils.Hash');\n    this.blockLen = this.iHash.blockLen;\n    this.outputLen = this.iHash.outputLen;\n    const blockLen = this.blockLen;\n    const pad = new Uint8Array(blockLen);\n    // blockLen can be bigger than outputLen\n    pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36;\n    this.iHash.update(pad);\n    // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n    this.oHash = hash.create() as T;\n    // Undo internal XOR && apply outer XOR\n    for (let i = 0; i < pad.length; i++) pad[i] ^= 0x36 ^ 0x5c;\n    this.oHash.update(pad);\n    clean(pad);\n  }\n  update(buf: Uint8Array): this {\n    aexists(this);\n    this.iHash.update(buf);\n    return this;\n  }\n  digestInto(out: Uint8Array): void {\n    aexists(this);\n    abytes(out, this.outputLen, 'output');\n    this.finished = true;\n    this.iHash.digestInto(out);\n    this.oHash.update(out);\n    this.oHash.digestInto(out);\n    this.destroy();\n  }\n  digest(): Uint8Array {\n    const out = new Uint8Array(this.oHash.outputLen);\n    this.digestInto(out);\n    return out;\n  }\n  _cloneInto(to?: _HMAC<T>): _HMAC<T> {\n    // Create new instance without calling constructor since key already in state and we don't know it.\n    to ||= Object.create(Object.getPrototypeOf(this), {});\n    const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n    to = to as this;\n    to.finished = finished;\n    to.destroyed = destroyed;\n    to.blockLen = blockLen;\n    to.outputLen = outputLen;\n    to.oHash = oHash._cloneInto(to.oHash);\n    to.iHash = iHash._cloneInto(to.iHash);\n    return to;\n  }\n  clone(): _HMAC<T> {\n    return this._cloneInto();\n  }\n  destroy(): void {\n    this.destroyed = true;\n    this.oHash.destroy();\n    this.iHash.destroy();\n  }\n}\n\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n * @example\n * import { hmac } from '@noble/hashes/hmac';\n * import { sha256 } from '@noble/hashes/sha2';\n * const mac1 = hmac(sha256, 'key', 'message');\n */\nexport const hmac: {\n  (hash: CHash, key: Uint8Array, message: Uint8Array): Uint8Array;\n  create(hash: CHash, key: Uint8Array): _HMAC<any>;\n} = (hash: CHash, key: Uint8Array, message: Uint8Array): Uint8Array =>\n  new _HMAC<any>(hash, key).update(message).digest();\nhmac.create = (hash: CHash, key: Uint8Array) => new _HMAC<any>(hash, key);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6698, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/pbkdf2.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bhashes%402.0.1/node_modules/%40noble/hashes/src/pbkdf2.ts"],"sourcesContent":["/**\n * PBKDF (RFC 2898). Can be used to create a key from password and salt.\n * @module\n */\nimport { hmac } from './hmac.ts';\n// prettier-ignore\nimport {\n  ahash, anumber,\n  asyncLoop, checkOpts, clean, createView, kdfInputToBytes,\n  type CHash,\n  type Hash,\n  type KDFInput\n} from './utils.ts';\n\n/**\n * PBKDF2 options:\n * * c: iterations, should probably be higher than 100_000\n * * dkLen: desired length of derived key in bytes\n * * asyncTick: max time in ms for which async function can block execution\n */\nexport type Pbkdf2Opt = {\n  c: number;\n  dkLen?: number;\n  asyncTick?: number;\n};\n// Common start and end for sync/async functions\nfunction pbkdf2Init(hash: CHash, _password: KDFInput, _salt: KDFInput, _opts: Pbkdf2Opt) {\n  ahash(hash);\n  const opts = checkOpts({ dkLen: 32, asyncTick: 10 }, _opts);\n  const { c, dkLen, asyncTick } = opts;\n  anumber(c, 'c');\n  anumber(dkLen, 'dkLen');\n  anumber(asyncTick, 'asyncTick');\n  if (c < 1) throw new Error('iterations (c) must be >= 1');\n  const password = kdfInputToBytes(_password, 'password');\n  const salt = kdfInputToBytes(_salt, 'salt');\n  // DK = PBKDF2(PRF, Password, Salt, c, dkLen);\n  const DK = new Uint8Array(dkLen);\n  // U1 = PRF(Password, Salt + INT_32_BE(i))\n  const PRF = hmac.create(hash, password);\n  const PRFSalt = PRF._cloneInto().update(salt);\n  return { c, dkLen, asyncTick, DK, PRF, PRFSalt };\n}\n\nfunction pbkdf2Output<T extends Hash<T>>(\n  PRF: Hash<T>,\n  PRFSalt: Hash<T>,\n  DK: Uint8Array,\n  prfW: Hash<T>,\n  u: Uint8Array\n) {\n  PRF.destroy();\n  PRFSalt.destroy();\n  if (prfW) prfW.destroy();\n  clean(u);\n  return DK;\n}\n\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function\n * @param hash - hash function that would be used e.g. sha256\n * @param password - password from which a derived key is generated\n * @param salt - cryptographic salt\n * @param opts - {c, dkLen} where c is work factor and dkLen is output message size\n * @example\n * const key = pbkdf2(sha256, 'password', 'salt', { dkLen: 32, c: Math.pow(2, 18) });\n */\nexport function pbkdf2(\n  hash: CHash,\n  password: KDFInput,\n  salt: KDFInput,\n  opts: Pbkdf2Opt\n): Uint8Array {\n  const { c, dkLen, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n  let prfW: any; // Working copy\n  const arr = new Uint8Array(4);\n  const view = createView(arr);\n  const u = new Uint8Array(PRF.outputLen);\n  // DK = T1 + T2 +  + Tdklen/hlen\n  for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n    // Ti = F(Password, Salt, c, i)\n    const Ti = DK.subarray(pos, pos + PRF.outputLen);\n    view.setInt32(0, ti, false);\n    // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n    Ti.set(u.subarray(0, Ti.length));\n    for (let ui = 1; ui < c; ui++) {\n      // Uc = PRF(Password, Uc1)\n      PRF._cloneInto(prfW).update(u).digestInto(u);\n      for (let i = 0; i < Ti.length; i++) Ti[i] ^= u[i];\n    }\n  }\n  return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\n\n/**\n * PBKDF2-HMAC: RFC 2898 key derivation function. Async version.\n * @example\n * await pbkdf2Async(sha256, 'password', 'salt', { dkLen: 32, c: 500_000 });\n */\nexport async function pbkdf2Async(\n  hash: CHash,\n  password: KDFInput,\n  salt: KDFInput,\n  opts: Pbkdf2Opt\n): Promise<Uint8Array> {\n  const { c, dkLen, asyncTick, DK, PRF, PRFSalt } = pbkdf2Init(hash, password, salt, opts);\n  let prfW: any; // Working copy\n  const arr = new Uint8Array(4);\n  const view = createView(arr);\n  const u = new Uint8Array(PRF.outputLen);\n  // DK = T1 + T2 +  + Tdklen/hlen\n  for (let ti = 1, pos = 0; pos < dkLen; ti++, pos += PRF.outputLen) {\n    // Ti = F(Password, Salt, c, i)\n    const Ti = DK.subarray(pos, pos + PRF.outputLen);\n    view.setInt32(0, ti, false);\n    // F(Password, Salt, c, i) = U1 ^ U2 ^  ^ Uc\n    // U1 = PRF(Password, Salt + INT_32_BE(i))\n    (prfW = PRFSalt._cloneInto(prfW)).update(arr).digestInto(u);\n    Ti.set(u.subarray(0, Ti.length));\n    await asyncLoop(c - 1, asyncTick, () => {\n      // Uc = PRF(Password, Uc1)\n      PRF._cloneInto(prfW).update(u).digestInto(u);\n      for (let i = 0; i < Ti.length; i++) Ti[i] ^= u[i];\n    });\n  }\n  return pbkdf2Output(PRF, PRFSalt, DK, prfW, u);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6797, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/_md.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bhashes%402.0.1/node_modules/%40noble/hashes/src/_md.ts"],"sourcesContent":["/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\nimport { abytes, aexists, aoutput, clean, createView, type Hash } from './utils.ts';\n\n/** Choice: a ? b : c */\nexport function Chi(a: number, b: number, c: number): number {\n  return (a & b) ^ (~a & c);\n}\n\n/** Majority function, true if any two inputs is true. */\nexport function Maj(a: number, b: number, c: number): number {\n  return (a & b) ^ (a & c) ^ (b & c);\n}\n\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nexport abstract class HashMD<T extends HashMD<T>> implements Hash<T> {\n  protected abstract process(buf: DataView, offset: number): void;\n  protected abstract get(): number[];\n  protected abstract set(...args: number[]): void;\n  abstract destroy(): void;\n  protected abstract roundClean(): void;\n\n  readonly blockLen: number;\n  readonly outputLen: number;\n  readonly padOffset: number;\n  readonly isLE: boolean;\n\n  // For partial updates less than block size\n  protected buffer: Uint8Array;\n  protected view: DataView;\n  protected finished = false;\n  protected length = 0;\n  protected pos = 0;\n  protected destroyed = false;\n\n  constructor(blockLen: number, outputLen: number, padOffset: number, isLE: boolean) {\n    this.blockLen = blockLen;\n    this.outputLen = outputLen;\n    this.padOffset = padOffset;\n    this.isLE = isLE;\n    this.buffer = new Uint8Array(blockLen);\n    this.view = createView(this.buffer);\n  }\n  update(data: Uint8Array): this {\n    aexists(this);\n    abytes(data);\n    const { view, buffer, blockLen } = this;\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      // Fast path: we have at least one block in input, cast it to view and process\n      if (take === blockLen) {\n        const dataView = createView(data);\n        for (; blockLen <= len - pos; pos += blockLen) this.process(dataView, pos);\n        continue;\n      }\n      buffer.set(data.subarray(pos, pos + take), this.pos);\n      this.pos += take;\n      pos += take;\n      if (this.pos === blockLen) {\n        this.process(view, 0);\n        this.pos = 0;\n      }\n    }\n    this.length += data.length;\n    this.roundClean();\n    return this;\n  }\n  digestInto(out: Uint8Array): void {\n    aexists(this);\n    aoutput(out, this);\n    this.finished = true;\n    // Padding\n    // We can avoid allocation of buffer for padding completely if it\n    // was previously not allocated here. But it won't change performance.\n    const { buffer, view, blockLen, isLE } = this;\n    let { pos } = this;\n    // append the bit '1' to the message\n    buffer[pos++] = 0b10000000;\n    clean(this.buffer.subarray(pos));\n    // we have less than padOffset left in buffer, so we cannot put length in\n    // current block, need process it and pad again\n    if (this.padOffset > blockLen - pos) {\n      this.process(view, 0);\n      pos = 0;\n    }\n    // Pad until full block byte with zeros\n    for (let i = pos; i < blockLen; i++) buffer[i] = 0;\n    // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n    // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n    // So we just write lowest 64 bits of that value.\n    view.setBigUint64(blockLen - 8, BigInt(this.length * 8), isLE);\n    this.process(view, 0);\n    const oview = createView(out);\n    const len = this.outputLen;\n    // NOTE: we do division by 4 later, which must be fused in single op with modulo by JIT\n    if (len % 4) throw new Error('_sha2: outputLen must be aligned to 32bit');\n    const outLen = len / 4;\n    const state = this.get();\n    if (outLen > state.length) throw new Error('_sha2: outputLen bigger than state');\n    for (let i = 0; i < outLen; i++) oview.setUint32(4 * i, state[i], isLE);\n  }\n  digest(): Uint8Array {\n    const { buffer, outputLen } = this;\n    this.digestInto(buffer);\n    const res = buffer.slice(0, outputLen);\n    this.destroy();\n    return res;\n  }\n  _cloneInto(to?: T): T {\n    to ||= new (this.constructor as any)() as T;\n    to.set(...this.get());\n    const { blockLen, buffer, length, finished, destroyed, pos } = this;\n    to.destroyed = destroyed;\n    to.finished = finished;\n    to.length = length;\n    to.pos = pos;\n    if (length % blockLen) to.buffer.set(buffer);\n    return to as unknown as any;\n  }\n  clone(): T {\n    return this._cloneInto();\n  }\n}\n\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */\n\n/** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */\nexport const SHA256_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,\n]);\n\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */\nexport const SHA224_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939, 0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4,\n]);\n\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */\nexport const SHA384_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507, 0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n  0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511, 0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4,\n]);\n\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */\nexport const SHA512_IV: Uint32Array = /* @__PURE__ */ Uint32Array.from([\n  0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n  0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179,\n]);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6985, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/_u64.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bhashes%402.0.1/node_modules/%40noble/hashes/src/_u64.ts"],"sourcesContent":["/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n\nfunction fromBig(\n  n: bigint,\n  le = false\n): {\n  h: number;\n  l: number;\n} {\n  if (le) return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n  return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\n\nfunction split(lst: bigint[], le = false): Uint32Array[] {\n  const len = lst.length;\n  let Ah = new Uint32Array(len);\n  let Al = new Uint32Array(len);\n  for (let i = 0; i < len; i++) {\n    const { h, l } = fromBig(lst[i], le);\n    [Ah[i], Al[i]] = [h, l];\n  }\n  return [Ah, Al];\n}\n\nconst toBig = (h: number, l: number): bigint => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h: number, _l: number, s: number): number => h >>> s;\nconst shrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h: number, l: number, s: number): number => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h: number, l: number, s: number): number => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h: number, l: number, s: number): number => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h: number, l: number): number => l;\nconst rotr32L = (h: number, _l: number): number => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h: number, l: number, s: number): number => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h: number, l: number, s: number): number => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h: number, l: number, s: number): number => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h: number, l: number, s: number): number => (h << (s - 32)) | (l >>> (64 - s));\n\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(\n  Ah: number,\n  Al: number,\n  Bh: number,\n  Bl: number\n): {\n  h: number;\n  l: number;\n} {\n  const l = (Al >>> 0) + (Bl >>> 0);\n  return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al: number, Bl: number, Cl: number): number => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low: number, Ah: number, Bh: number, Ch: number): number =>\n  (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al: number, Bl: number, Cl: number, Dl: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number): number =>\n  (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al: number, Bl: number, Cl: number, Dl: number, El: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number): number =>\n  (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n\n// prettier-ignore\nexport {\n  add, add3H, add3L, add4H, add4L, add5H, add5L, fromBig, rotlBH, rotlBL, rotlSH, rotlSL, rotr32H, rotr32L, rotrBH, rotrBL, rotrSH, rotrSL, shrSH, shrSL, split, toBig\n};\n// prettier-ignore\nconst u64: { fromBig: typeof fromBig; split: typeof split; toBig: (h: number, l: number) => bigint; shrSH: (h: number, _l: number, s: number) => number; shrSL: (h: number, l: number, s: number) => number; rotrSH: (h: number, l: number, s: number) => number; rotrSL: (h: number, l: number, s: number) => number; rotrBH: (h: number, l: number, s: number) => number; rotrBL: (h: number, l: number, s: number) => number; rotr32H: (_h: number, l: number) => number; rotr32L: (h: number, _l: number) => number; rotlSH: (h: number, l: number, s: number) => number; rotlSL: (h: number, l: number, s: number) => number; rotlBH: (h: number, l: number, s: number) => number; rotlBL: (h: number, l: number, s: number) => number; add: typeof add; add3L: (Al: number, Bl: number, Cl: number) => number; add3H: (low: number, Ah: number, Bh: number, Ch: number) => number; add4L: (Al: number, Bl: number, Cl: number, Dl: number) => number; add4H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number) => number; add5H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number) => number; add5L: (Al: number, Bl: number, Cl: number, Dl: number, El: number) => number; } = {\n  fromBig, split, toBig,\n  shrSH, shrSL,\n  rotrSH, rotrSL, rotrBH, rotrBL,\n  rotr32H, rotr32L,\n  rotlSH, rotlSL, rotlBH, rotlBL,\n  add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n"],"names":[],"mappings":"AAAA;;;;GAIG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACH,MAAM,UAAU,GAAG,aAAA,EAAe,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;AACvD,MAAM,IAAI,GAAG,aAAA,EAAe,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAExC,SAAS,OAAO,CACd,CAAS,EACT,EAAE,GAAG,KAAK;IAKV,IAAI,EAAE,EAAE,OAAO;QAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC;QAAE,CAAC,EAAE,MAAM,CAAE,AAAD,CAAE,IAAI,IAAI,CAAC,EAAG,UAAU,CAAC;IAAA,CAAE,CAAC;IAClF,OAAO;QAAE,CAAC,EAAE,MAAM,CAAC,AAAC,CAAC,IAAI,IAAI,CAAC,EAAG,UAAU,CAAC,GAAG,CAAC;QAAE,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,UAAU,CAAC,GAAG,CAAC;IAAA,CAAE,CAAC;AACpF,CAAC;AAED,SAAS,KAAK,CAAC,GAAa,EAAE,EAAE,GAAG,KAAK;IACtC,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;IACvB,IAAI,EAAE,GAAG,IAAI,WAAW,CAAC,GAAG,CAAC,CAAC;IAC9B,IAAI,EAAE,GAAG,IAAI,WAAW,CAAC,GAAG,CAAC,CAAC;IAC9B,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,CAAE,CAAC;QAC7B,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACrC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG;YAAC,CAAC;YAAE,CAAC;SAAC,CAAC;IAC1B,CAAC;IACD,OAAO;QAAC,EAAE;QAAE,EAAE;KAAC,CAAC;AAClB,CAAC;AAED,MAAM,KAAK,GAAG,CAAC,CAAS,EAAE,CAAS,EAAU,CAAI,AAAD,CAAD,KAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,EAAG,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;AAC5F,uBAAuB;AACvB,MAAM,KAAK,GAAG,CAAC,CAAS,EAAE,EAAU,EAAE,CAAS,EAAU,CAAG,CAAD,AAAE,KAAK,CAAC,CAAC;AACpE,MAAM,KAAK,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAU,CAAG,AAAC,CAAF,AAAG,IAAI,AAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAI,CAAC,CAAF,IAAO,CAAC,CAAC,CAAC;AACvF,oCAAoC;AACpC,MAAM,MAAM,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAU,CAAG,AAAC,CAAF,AAAG,KAAK,CAAC,CAAC,EAAI,CAAC,AAAF,IAAM,AAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;AACxF,MAAM,MAAM,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAU,CAAG,AAAC,CAAC,AAAH,IAAO,AAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAI,CAAC,CAAF,IAAO,CAAC,CAAC,CAAC;AACxF,gEAAgE;AAChE,MAAM,MAAM,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAU,CAAG,AAAC,CAAF,AAAG,IAAI,AAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAI,CAAC,CAAF,IAAO,AAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AAC/F,MAAM,MAAM,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAU,CAAG,AAAC,CAAF,AAAG,KAAK,AAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAI,CAAC,CAAF,GAAM,AAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/F,+CAA+C;AAC/C,MAAM,OAAO,GAAG,CAAC,EAAU,EAAE,CAAS,EAAU,CAAG,CAAD,AAAE,CAAC;AACrD,MAAM,OAAO,GAAG,CAAC,CAAS,EAAE,EAAU,EAAU,CAAG,CAAD,AAAE,CAAC;AACrD,mCAAmC;AACnC,MAAM,MAAM,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAU,CAAG,AAAC,CAAC,AAAH,IAAO,CAAC,CAAC,EAAI,CAAD,AAAE,KAAK,AAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;AACxF,MAAM,MAAM,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAU,CAAI,AAAD,CAAE,AAAH,IAAO,CAAC,CAAC,EAAI,CAAD,AAAE,KAAK,AAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;AACxF,+DAA+D;AAC/D,MAAM,MAAM,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAU,CAAG,AAAC,CAAF,AAAG,IAAI,AAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAI,CAAC,CAAF,IAAQ,AAAD,EAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/F,MAAM,MAAM,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAU,CAAG,AAAC,CAAF,AAAG,IAAK,AAAD,CAAE,GAAG,EAAE,CAAC,CAAC,CAAI,CAAC,CAAF,IAAO,AAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;AAE/F,8EAA8E;AAC9E,0EAA0E;AAC1E,SAAS,GAAG,CACV,EAAU,EACV,EAAU,EACV,EAAU,EACV,EAAU;IAKV,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;IAClC,OAAO;QAAE,CAAC,EAAE,AAAC,EAAE,GAAG,EAAE,GAAG,CAAC,AAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAG,CAAC,CAAC,CAAC,EAAG,CAAC;QAAE,CAAC,EAAE,CAAC,GAAG,CAAC;IAAA,CAAE,CAAC;AAC9D,CAAC;AACD,qCAAqC;AACrC,MAAM,KAAK,GAAG,CAAC,EAAU,EAAE,EAAU,EAAE,EAAU,EAAU,CAAG,CAAD,AAAE,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AACnG,MAAM,KAAK,GAAG,CAAC,GAAW,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAU,CACrE,AAAD,CADwE,CACrE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,AAAC,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,EAAG,CAAC,CAAC,CAAC,EAAG,CAAC,CAAC;AAC7C,MAAM,KAAK,GAAG,CAAC,EAAU,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAU,CACrE,CADuE,AACtE,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AACpD,MAAM,KAAK,GAAG,CAAC,GAAW,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAU,CAClF,AAAC,CADmF,CACjF,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,AAAC,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,EAAG,CAAC,CAAC,CAAC,EAAG,CAAC,CAAC;AAClD,MAAM,KAAK,GAAG,CAAC,EAAU,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAU,CACjF,CADmF,AAClF,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AACjE,MAAM,KAAK,GAAG,CAAC,GAAW,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAE,EAAU,EAAU,CAC9F,AAAC,CAD+F,CAC7F,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,AAAC,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,EAAG,CAAC,CAAC,CAAC,EAAG,CAAC,CAAC;;AAMvD,kBAAkB;AAClB,MAAM,GAAG,GAAkpC;IACzpC,OAAO;IAAE,KAAK;IAAE,KAAK;IACrB,KAAK;IAAE,KAAK;IACZ,MAAM;IAAE,MAAM;IAAE,MAAM;IAAE,MAAM;IAC9B,OAAO;IAAE,OAAO;IAChB,MAAM;IAAE,MAAM;IAAE,MAAM;IAAE,MAAM;IAC9B,GAAG;IAAE,KAAK;IAAE,KAAK;IAAE,KAAK;IAAE,KAAK;IAAE,KAAK;IAAE,KAAK;CAC9C,CAAC;uCACa,GAAG,CAAC","debugId":null}},
    {"offset": {"line": 7132, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/sha2.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bhashes%402.0.1/node_modules/%40noble/hashes/src/sha2.ts"],"sourcesContent":["/**\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\n * Check out [RFC 4634](https://www.rfc-editor.org/rfc/rfc4634) and\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\nimport { Chi, HashMD, Maj, SHA224_IV, SHA256_IV, SHA384_IV, SHA512_IV } from './_md.ts';\nimport * as u64 from './_u64.ts';\nimport { type CHash, clean, createHasher, oidNist, rotr } from './utils.ts';\n\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\n\n/** Internal 32-byte base SHA2 hash class. */\nabstract class SHA2_32B<T extends SHA2_32B<T>> extends HashMD<T> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  protected abstract A: number;\n  protected abstract B: number;\n  protected abstract C: number;\n  protected abstract D: number;\n  protected abstract E: number;\n  protected abstract F: number;\n  protected abstract G: number;\n  protected abstract H: number;\n\n  constructor(outputLen: number) {\n    super(64, outputLen, 8, false);\n  }\n  protected get(): [number, number, number, number, number, number, number, number] {\n    const { A, B, C, D, E, F, G, H } = this;\n    return [A, B, C, D, E, F, G, H];\n  }\n  // prettier-ignore\n  protected set(\n    A: number, B: number, C: number, D: number, E: number, F: number, G: number, H: number\n  ): void {\n    this.A = A | 0;\n    this.B = B | 0;\n    this.C = C | 0;\n    this.D = D | 0;\n    this.E = E | 0;\n    this.F = F | 0;\n    this.G = G | 0;\n    this.H = H | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) SHA256_W[i] = view.getUint32(offset, false);\n    for (let i = 16; i < 64; i++) {\n      const W15 = SHA256_W[i - 15];\n      const W2 = SHA256_W[i - 2];\n      const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n      const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n      SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n    }\n    // Compression function main loop, 64 rounds\n    let { A, B, C, D, E, F, G, H } = this;\n    for (let i = 0; i < 64; i++) {\n      const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n      const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n      const T2 = (sigma0 + Maj(A, B, C)) | 0;\n      H = G;\n      G = F;\n      F = E;\n      E = (D + T1) | 0;\n      D = C;\n      C = B;\n      B = A;\n      A = (T1 + T2) | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    A = (A + this.A) | 0;\n    B = (B + this.B) | 0;\n    C = (C + this.C) | 0;\n    D = (D + this.D) | 0;\n    E = (E + this.E) | 0;\n    F = (F + this.F) | 0;\n    G = (G + this.G) | 0;\n    H = (H + this.H) | 0;\n    this.set(A, B, C, D, E, F, G, H);\n  }\n  protected roundClean(): void {\n    clean(SHA256_W);\n  }\n  destroy(): void {\n    this.set(0, 0, 0, 0, 0, 0, 0, 0);\n    clean(this.buffer);\n  }\n}\n\n/** Internal SHA2-256 hash class. */\nexport class _SHA256 extends SHA2_32B<_SHA256> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  protected A: number = SHA256_IV[0] | 0;\n  protected B: number = SHA256_IV[1] | 0;\n  protected C: number = SHA256_IV[2] | 0;\n  protected D: number = SHA256_IV[3] | 0;\n  protected E: number = SHA256_IV[4] | 0;\n  protected F: number = SHA256_IV[5] | 0;\n  protected G: number = SHA256_IV[6] | 0;\n  protected H: number = SHA256_IV[7] | 0;\n  constructor() {\n    super(32);\n  }\n}\n\n/** Internal SHA2-224 hash class. */\nexport class _SHA224 extends SHA2_32B<_SHA224> {\n  protected A: number = SHA224_IV[0] | 0;\n  protected B: number = SHA224_IV[1] | 0;\n  protected C: number = SHA224_IV[2] | 0;\n  protected D: number = SHA224_IV[3] | 0;\n  protected E: number = SHA224_IV[4] | 0;\n  protected F: number = SHA224_IV[5] | 0;\n  protected G: number = SHA224_IV[6] | 0;\n  protected H: number = SHA224_IV[7] | 0;\n  constructor() {\n    super(28);\n  }\n}\n\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (() => u64.split([\n  '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n  '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n  '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n  '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n  '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n  '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n  '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n  '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n  '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n  '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n  '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n  '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n  '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n  '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n  '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n  '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n  '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n  '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n  '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n  '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\n\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\n\n/** Internal 64-byte base SHA2 hash class. */\nabstract class SHA2_64B<T extends SHA2_64B<T>> extends HashMD<T> {\n  // We cannot use array here since array allows indexing by variable\n  // which means optimizer/compiler cannot use registers.\n  // h -- high 32 bits, l -- low 32 bits\n  protected abstract Ah: number;\n  protected abstract Al: number;\n  protected abstract Bh: number;\n  protected abstract Bl: number;\n  protected abstract Ch: number;\n  protected abstract Cl: number;\n  protected abstract Dh: number;\n  protected abstract Dl: number;\n  protected abstract Eh: number;\n  protected abstract El: number;\n  protected abstract Fh: number;\n  protected abstract Fl: number;\n  protected abstract Gh: number;\n  protected abstract Gl: number;\n  protected abstract Hh: number;\n  protected abstract Hl: number;\n\n  constructor(outputLen: number) {\n    super(128, outputLen, 16, false);\n  }\n  // prettier-ignore\n  protected get(): [\n    number, number, number, number, number, number, number, number,\n    number, number, number, number, number, number, number, number\n  ] {\n    const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n  }\n  // prettier-ignore\n  protected set(\n    Ah: number, Al: number, Bh: number, Bl: number, Ch: number, Cl: number, Dh: number, Dl: number,\n    Eh: number, El: number, Fh: number, Fl: number, Gh: number, Gl: number, Hh: number, Hl: number\n  ): void {\n    this.Ah = Ah | 0;\n    this.Al = Al | 0;\n    this.Bh = Bh | 0;\n    this.Bl = Bl | 0;\n    this.Ch = Ch | 0;\n    this.Cl = Cl | 0;\n    this.Dh = Dh | 0;\n    this.Dl = Dl | 0;\n    this.Eh = Eh | 0;\n    this.El = El | 0;\n    this.Fh = Fh | 0;\n    this.Fl = Fl | 0;\n    this.Gh = Gh | 0;\n    this.Gl = Gl | 0;\n    this.Hh = Hh | 0;\n    this.Hl = Hl | 0;\n  }\n  protected process(view: DataView, offset: number): void {\n    // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n    for (let i = 0; i < 16; i++, offset += 4) {\n      SHA512_W_H[i] = view.getUint32(offset);\n      SHA512_W_L[i] = view.getUint32((offset += 4));\n    }\n    for (let i = 16; i < 80; i++) {\n      // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n      const W15h = SHA512_W_H[i - 15] | 0;\n      const W15l = SHA512_W_L[i - 15] | 0;\n      const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n      const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n      // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n      const W2h = SHA512_W_H[i - 2] | 0;\n      const W2l = SHA512_W_L[i - 2] | 0;\n      const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n      const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n      // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n      const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n      const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n      SHA512_W_H[i] = SUMh | 0;\n      SHA512_W_L[i] = SUMl | 0;\n    }\n    let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n    // Compression function main loop, 80 rounds\n    for (let i = 0; i < 80; i++) {\n      // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n      const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n      const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n      //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n      const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n      const CHIl = (El & Fl) ^ (~El & Gl);\n      // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n      // prettier-ignore\n      const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n      const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n      const T1l = T1ll | 0;\n      // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n      const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n      const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n      const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n      const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n      Hh = Gh | 0;\n      Hl = Gl | 0;\n      Gh = Fh | 0;\n      Gl = Fl | 0;\n      Fh = Eh | 0;\n      Fl = El | 0;\n      ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n      Dh = Ch | 0;\n      Dl = Cl | 0;\n      Ch = Bh | 0;\n      Cl = Bl | 0;\n      Bh = Ah | 0;\n      Bl = Al | 0;\n      const All = u64.add3L(T1l, sigma0l, MAJl);\n      Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n      Al = All | 0;\n    }\n    // Add the compressed chunk to the current hash value\n    ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n    ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n    ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n    ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n    ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n    ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n    ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n    ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n    this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n  }\n  protected roundClean(): void {\n    clean(SHA512_W_H, SHA512_W_L);\n  }\n  destroy(): void {\n    clean(this.buffer);\n    this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n  }\n}\n\n/** Internal SHA2-512 hash class. */\nexport class _SHA512 extends SHA2_64B<_SHA512> {\n  protected Ah: number = SHA512_IV[0] | 0;\n  protected Al: number = SHA512_IV[1] | 0;\n  protected Bh: number = SHA512_IV[2] | 0;\n  protected Bl: number = SHA512_IV[3] | 0;\n  protected Ch: number = SHA512_IV[4] | 0;\n  protected Cl: number = SHA512_IV[5] | 0;\n  protected Dh: number = SHA512_IV[6] | 0;\n  protected Dl: number = SHA512_IV[7] | 0;\n  protected Eh: number = SHA512_IV[8] | 0;\n  protected El: number = SHA512_IV[9] | 0;\n  protected Fh: number = SHA512_IV[10] | 0;\n  protected Fl: number = SHA512_IV[11] | 0;\n  protected Gh: number = SHA512_IV[12] | 0;\n  protected Gl: number = SHA512_IV[13] | 0;\n  protected Hh: number = SHA512_IV[14] | 0;\n  protected Hl: number = SHA512_IV[15] | 0;\n\n  constructor() {\n    super(64);\n  }\n}\n\n/** Internal SHA2-384 hash class. */\nexport class _SHA384 extends SHA2_64B<_SHA384> {\n  protected Ah: number = SHA384_IV[0] | 0;\n  protected Al: number = SHA384_IV[1] | 0;\n  protected Bh: number = SHA384_IV[2] | 0;\n  protected Bl: number = SHA384_IV[3] | 0;\n  protected Ch: number = SHA384_IV[4] | 0;\n  protected Cl: number = SHA384_IV[5] | 0;\n  protected Dh: number = SHA384_IV[6] | 0;\n  protected Dl: number = SHA384_IV[7] | 0;\n  protected Eh: number = SHA384_IV[8] | 0;\n  protected El: number = SHA384_IV[9] | 0;\n  protected Fh: number = SHA384_IV[10] | 0;\n  protected Fl: number = SHA384_IV[11] | 0;\n  protected Gh: number = SHA384_IV[12] | 0;\n  protected Gl: number = SHA384_IV[13] | 0;\n  protected Hh: number = SHA384_IV[14] | 0;\n  protected Hl: number = SHA384_IV[15] | 0;\n\n  constructor() {\n    super(48);\n  }\n}\n\n/**\n * Truncated SHA512/256 and SHA512/224.\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\n * Then t hashes string to produce result IV.\n * See `test/misc/sha2-gen-iv.js`.\n */\n\n/** SHA512/224 IV */\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\n  0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\n  0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\n]);\n\n/** SHA512/256 IV */\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\n  0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\n  0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\n]);\n\n/** Internal SHA2-512/224 hash class. */\nexport class _SHA512_224 extends SHA2_64B<_SHA512_224> {\n  protected Ah: number = T224_IV[0] | 0;\n  protected Al: number = T224_IV[1] | 0;\n  protected Bh: number = T224_IV[2] | 0;\n  protected Bl: number = T224_IV[3] | 0;\n  protected Ch: number = T224_IV[4] | 0;\n  protected Cl: number = T224_IV[5] | 0;\n  protected Dh: number = T224_IV[6] | 0;\n  protected Dl: number = T224_IV[7] | 0;\n  protected Eh: number = T224_IV[8] | 0;\n  protected El: number = T224_IV[9] | 0;\n  protected Fh: number = T224_IV[10] | 0;\n  protected Fl: number = T224_IV[11] | 0;\n  protected Gh: number = T224_IV[12] | 0;\n  protected Gl: number = T224_IV[13] | 0;\n  protected Hh: number = T224_IV[14] | 0;\n  protected Hl: number = T224_IV[15] | 0;\n\n  constructor() {\n    super(28);\n  }\n}\n\n/** Internal SHA2-512/256 hash class. */\nexport class _SHA512_256 extends SHA2_64B<_SHA512_256> {\n  protected Ah: number = T256_IV[0] | 0;\n  protected Al: number = T256_IV[1] | 0;\n  protected Bh: number = T256_IV[2] | 0;\n  protected Bl: number = T256_IV[3] | 0;\n  protected Ch: number = T256_IV[4] | 0;\n  protected Cl: number = T256_IV[5] | 0;\n  protected Dh: number = T256_IV[6] | 0;\n  protected Dl: number = T256_IV[7] | 0;\n  protected Eh: number = T256_IV[8] | 0;\n  protected El: number = T256_IV[9] | 0;\n  protected Fh: number = T256_IV[10] | 0;\n  protected Fl: number = T256_IV[11] | 0;\n  protected Gh: number = T256_IV[12] | 0;\n  protected Gl: number = T256_IV[13] | 0;\n  protected Hh: number = T256_IV[14] | 0;\n  protected Hl: number = T256_IV[15] | 0;\n\n  constructor() {\n    super(32);\n  }\n}\n\n/**\n * SHA2-256 hash function from RFC 4634. In JS it's the fastest: even faster than Blake3. Some info:\n *\n * - Trying 2^128 hashes would get 50% chance of collision, using birthday attack.\n * - BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n * - Each sha256 hash is executing 2^18 bit operations.\n * - Good 2024 ASICs can do 200Th/sec with 3500 watts of power, corresponding to 2^36 hashes/joule.\n */\nexport const sha256: CHash<_SHA256> = /* @__PURE__ */ createHasher(\n  () => new _SHA256(),\n  /* @__PURE__ */ oidNist(0x01)\n);\n/** SHA2-224 hash function from RFC 4634 */\nexport const sha224: CHash<_SHA224> = /* @__PURE__ */ createHasher(\n  () => new _SHA224(),\n  /* @__PURE__ */ oidNist(0x04)\n);\n\n/** SHA2-512 hash function from RFC 4634. */\nexport const sha512: CHash<_SHA512> = /* @__PURE__ */ createHasher(\n  () => new _SHA512(),\n  /* @__PURE__ */ oidNist(0x03)\n);\n/** SHA2-384 hash function from RFC 4634. */\nexport const sha384: CHash<_SHA384> = /* @__PURE__ */ createHasher(\n  () => new _SHA384(),\n  /* @__PURE__ */ oidNist(0x02)\n);\n\n/**\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_256: CHash<_SHA512_256> = /* @__PURE__ */ createHasher(\n  () => new _SHA512_256(),\n  /* @__PURE__ */ oidNist(0x06)\n);\n/**\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_224: CHash<_SHA512_224> = /* @__PURE__ */ createHasher(\n  () => new _SHA512_224(),\n  /* @__PURE__ */ oidNist(0x05)\n);\n"],"names":[],"mappings":"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E,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,4MAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,4MAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,4MAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,4MAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,4MAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,CAAC,4MAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,E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","debugId":null}},
    {"offset": {"line": 7691, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/@noble+hashes@2.0.1/node_modules/@noble/hashes/scrypt.js","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40noble%2Bhashes%402.0.1/node_modules/%40noble/hashes/src/scrypt.ts"],"sourcesContent":["/**\n * RFC 7914 Scrypt KDF. Can be used to create a key from password and salt.\n * @module\n */\nimport { pbkdf2 } from './pbkdf2.ts';\nimport { sha256 } from './sha2.ts';\n// prettier-ignore\nimport {\n  anumber, asyncLoop,\n  checkOpts, clean,\n  type KDFInput, rotl,\n  swap32IfBE,\n  u32\n} from './utils.ts';\n\n// The main Scrypt loop: uses Salsa extensively.\n// Six versions of the function were tried, this is the fastest one.\n// prettier-ignore\nfunction XorAndSalsa(\n  prev: Uint32Array,\n  pi: number,\n  input: Uint32Array,\n  ii: number,\n  out: Uint32Array,\n  oi: number\n) {\n  // Based on https://cr.yp.to/salsa20.html\n  // Xor blocks\n  let y00 = prev[pi++] ^ input[ii++], y01 = prev[pi++] ^ input[ii++];\n  let y02 = prev[pi++] ^ input[ii++], y03 = prev[pi++] ^ input[ii++];\n  let y04 = prev[pi++] ^ input[ii++], y05 = prev[pi++] ^ input[ii++];\n  let y06 = prev[pi++] ^ input[ii++], y07 = prev[pi++] ^ input[ii++];\n  let y08 = prev[pi++] ^ input[ii++], y09 = prev[pi++] ^ input[ii++];\n  let y10 = prev[pi++] ^ input[ii++], y11 = prev[pi++] ^ input[ii++];\n  let y12 = prev[pi++] ^ input[ii++], y13 = prev[pi++] ^ input[ii++];\n  let y14 = prev[pi++] ^ input[ii++], y15 = prev[pi++] ^ input[ii++];\n  // Save state to temporary variables (salsa)\n  let x00 = y00, x01 = y01, x02 = y02, x03 = y03,\n      x04 = y04, x05 = y05, x06 = y06, x07 = y07,\n      x08 = y08, x09 = y09, x10 = y10, x11 = y11,\n      x12 = y12, x13 = y13, x14 = y14, x15 = y15;\n  // Main loop (salsa)\n  for (let i = 0; i < 8; i += 2) {\n    x04 ^= rotl(x00 + x12 | 0,  7); x08 ^= rotl(x04 + x00 | 0,  9);\n    x12 ^= rotl(x08 + x04 | 0, 13); x00 ^= rotl(x12 + x08 | 0, 18);\n    x09 ^= rotl(x05 + x01 | 0,  7); x13 ^= rotl(x09 + x05 | 0,  9);\n    x01 ^= rotl(x13 + x09 | 0, 13); x05 ^= rotl(x01 + x13 | 0, 18);\n    x14 ^= rotl(x10 + x06 | 0,  7); x02 ^= rotl(x14 + x10 | 0,  9);\n    x06 ^= rotl(x02 + x14 | 0, 13); x10 ^= rotl(x06 + x02 | 0, 18);\n    x03 ^= rotl(x15 + x11 | 0,  7); x07 ^= rotl(x03 + x15 | 0,  9);\n    x11 ^= rotl(x07 + x03 | 0, 13); x15 ^= rotl(x11 + x07 | 0, 18);\n    x01 ^= rotl(x00 + x03 | 0,  7); x02 ^= rotl(x01 + x00 | 0,  9);\n    x03 ^= rotl(x02 + x01 | 0, 13); x00 ^= rotl(x03 + x02 | 0, 18);\n    x06 ^= rotl(x05 + x04 | 0,  7); x07 ^= rotl(x06 + x05 | 0,  9);\n    x04 ^= rotl(x07 + x06 | 0, 13); x05 ^= rotl(x04 + x07 | 0, 18);\n    x11 ^= rotl(x10 + x09 | 0,  7); x08 ^= rotl(x11 + x10 | 0,  9);\n    x09 ^= rotl(x08 + x11 | 0, 13); x10 ^= rotl(x09 + x08 | 0, 18);\n    x12 ^= rotl(x15 + x14 | 0,  7); x13 ^= rotl(x12 + x15 | 0,  9);\n    x14 ^= rotl(x13 + x12 | 0, 13); x15 ^= rotl(x14 + x13 | 0, 18);\n  }\n  // Write output (salsa)\n  out[oi++] = (y00 + x00) | 0; out[oi++] = (y01 + x01) | 0;\n  out[oi++] = (y02 + x02) | 0; out[oi++] = (y03 + x03) | 0;\n  out[oi++] = (y04 + x04) | 0; out[oi++] = (y05 + x05) | 0;\n  out[oi++] = (y06 + x06) | 0; out[oi++] = (y07 + x07) | 0;\n  out[oi++] = (y08 + x08) | 0; out[oi++] = (y09 + x09) | 0;\n  out[oi++] = (y10 + x10) | 0; out[oi++] = (y11 + x11) | 0;\n  out[oi++] = (y12 + x12) | 0; out[oi++] = (y13 + x13) | 0;\n  out[oi++] = (y14 + x14) | 0; out[oi++] = (y15 + x15) | 0;\n}\n\nfunction BlockMix(input: Uint32Array, ii: number, out: Uint32Array, oi: number, r: number) {\n  // The block B is r 128-byte chunks (which is equivalent of 2r 64-byte chunks)\n  let head = oi + 0;\n  let tail = oi + 16 * r;\n  for (let i = 0; i < 16; i++) out[tail + i] = input[ii + (2 * r - 1) * 16 + i]; // X  B[2r1]\n  for (let i = 0; i < r; i++, head += 16, ii += 16) {\n    // We write odd & even Yi at same time. Even: 0bXXXXX0 Odd:  0bXXXXX1\n    XorAndSalsa(out, tail, input, ii, out, head); // head[i] = Salsa(blockIn[2*i] ^ tail[i-1])\n    if (i > 0) tail += 16; // First iteration overwrites tmp value in tail\n    XorAndSalsa(out, head, input, (ii += 16), out, tail); // tail[i] = Salsa(blockIn[2*i+1] ^ head[i])\n  }\n}\n\n/**\n * Scrypt options:\n * - `N` is cpu/mem work factor (power of 2 e.g. `2**18`)\n * - `r` is block size (8 is common), fine-tunes sequential memory read size and performance\n * - `p` is parallelization factor (1 is common)\n * - `dkLen` is output key length in bytes e.g. 32.\n * - `asyncTick` - (default: 10) max time in ms for which async function can block execution\n * - `maxmem` - (default: `1024 ** 3 + 1024` aka 1GB+1KB). A limit that the app could use for scrypt\n * - `onProgress` - callback function that would be executed for progress report\n */\nexport type ScryptOpts = {\n  N: number; // cost factor\n  r: number; // block size\n  p: number; // parallelization\n  dkLen?: number; // key length\n  asyncTick?: number; // block execution max time\n  maxmem?: number;\n  onProgress?: (progress: number) => void;\n};\n\n// Common prologue and epilogue for sync/async functions\nfunction scryptInit(password: KDFInput, salt: KDFInput, _opts?: ScryptOpts) {\n  // Maxmem - 1GB+1KB by default\n  const opts = checkOpts(\n    {\n      dkLen: 32,\n      asyncTick: 10,\n      maxmem: 1024 ** 3 + 1024,\n    },\n    _opts\n  );\n  const { N, r, p, dkLen, asyncTick, maxmem, onProgress } = opts;\n  anumber(N, 'N');\n  anumber(r, 'r');\n  anumber(p, 'p');\n  anumber(dkLen, 'dkLen');\n  anumber(asyncTick, 'asyncTick');\n  anumber(maxmem, 'maxmem');\n  if (onProgress !== undefined && typeof onProgress !== 'function')\n    throw new Error('progressCb must be a function');\n  const blockSize = 128 * r;\n  const blockSize32 = blockSize / 4;\n\n  // Max N is 2^32 (Integrify is 32-bit).\n  // Real limit can be 2^22: some JS engines limit Uint8Array to 4GB.\n  // Spec check `N >= 2^(blockSize / 8)` is not done for compat with popular libs,\n  // which used incorrect r: 1, p: 8. Also, the check seems to be a spec error:\n  // https://www.rfc-editor.org/errata_search.php?rfc=7914\n  const pow32 = Math.pow(2, 32);\n  if (N <= 1 || (N & (N - 1)) !== 0 || N > pow32)\n    throw new Error('\"N\" expected a power of 2, and 2^1 <= N <= 2^32');\n  if (p < 1 || p > ((pow32 - 1) * 32) / blockSize)\n    throw new Error('\"p\" expected integer 1..((2^32 - 1) * 32) / (128 * r)');\n  if (dkLen < 1 || dkLen > (pow32 - 1) * 32)\n    throw new Error('\"dkLen\" expected integer 1..(2^32 - 1) * 32');\n  const memUsed = blockSize * (N + p);\n  if (memUsed > maxmem)\n    throw new Error('\"maxmem\" limit was hit, expected 128*r*(N+p) <= \"maxmem\"=' + maxmem);\n  // [B0...Bp1]  PBKDF2HMAC-SHA256(Passphrase, Salt, 1, blockSize*ParallelizationFactor)\n  // Since it has only one iteration there is no reason to use async variant\n  const B = pbkdf2(sha256, password, salt, { c: 1, dkLen: blockSize * p });\n  const B32 = u32(B);\n  // Re-used between parallel iterations. Array(iterations) of B\n  const V = u32(new Uint8Array(blockSize * N));\n  const tmp = u32(new Uint8Array(blockSize));\n  let blockMixCb = () => {};\n  if (onProgress) {\n    const totalBlockMix = 2 * N * p;\n    // Invoke callback if progress changes from 10.01 to 10.02\n    // Allows to draw smooth progress bar on up to 8K screen\n    const callbackPer = Math.max(Math.floor(totalBlockMix / 10000), 1);\n    let blockMixCnt = 0;\n    blockMixCb = () => {\n      blockMixCnt++;\n      if (onProgress && (!(blockMixCnt % callbackPer) || blockMixCnt === totalBlockMix))\n        onProgress(blockMixCnt / totalBlockMix);\n    };\n  }\n  return { N, r, p, dkLen, blockSize32, V, B32, B, tmp, blockMixCb, asyncTick };\n}\n\nfunction scryptOutput(\n  password: KDFInput,\n  dkLen: number,\n  B: Uint8Array,\n  V: Uint32Array,\n  tmp: Uint32Array\n) {\n  const res = pbkdf2(sha256, password, B, { c: 1, dkLen });\n  clean(B, V, tmp);\n  return res;\n}\n\n/**\n * Scrypt KDF from RFC 7914. See {@link ScryptOpts}.\n * @example\n * scrypt('password', 'salt', { N: 2**18, r: 8, p: 1, dkLen: 32 });\n */\nexport function scrypt(password: KDFInput, salt: KDFInput, opts: ScryptOpts): Uint8Array {\n  const { N, r, p, dkLen, blockSize32, V, B32, B, tmp, blockMixCb } = scryptInit(\n    password,\n    salt,\n    opts\n  );\n  swap32IfBE(B32);\n  for (let pi = 0; pi < p; pi++) {\n    const Pi = blockSize32 * pi;\n    for (let i = 0; i < blockSize32; i++) V[i] = B32[Pi + i]; // V[0] = B[i]\n    for (let i = 0, pos = 0; i < N - 1; i++) {\n      BlockMix(V, pos, V, (pos += blockSize32), r); // V[i] = BlockMix(V[i-1]);\n      blockMixCb();\n    }\n    BlockMix(V, (N - 1) * blockSize32, B32, Pi, r); // Process last element\n    blockMixCb();\n    for (let i = 0; i < N; i++) {\n      // First u32 of the last 64-byte block (u32 is LE)\n      // & (N - 1) is % N as N is a power of 2, N & (N - 1) = 0 is checked above; >>> 0 for unsigned, input fits in u32\n      const j = (B32[Pi + blockSize32 - 16] & (N - 1)) >>> 0; // j = Integrify(X) % iterations\n      for (let k = 0; k < blockSize32; k++) tmp[k] = B32[Pi + k] ^ V[j * blockSize32 + k]; // tmp = B ^ V[j]\n      BlockMix(tmp, 0, B32, Pi, r); // B = BlockMix(B ^ V[j])\n      blockMixCb();\n    }\n  }\n  swap32IfBE(B32);\n  return scryptOutput(password, dkLen, B, V, tmp);\n}\n\n/**\n * Scrypt KDF from RFC 7914. Async version. See {@link ScryptOpts}.\n * @example\n * await scryptAsync('password', 'salt', { N: 2**18, r: 8, p: 1, dkLen: 32 });\n */\nexport async function scryptAsync(\n  password: KDFInput,\n  salt: KDFInput,\n  opts: ScryptOpts\n): Promise<Uint8Array> {\n  const { N, r, p, dkLen, blockSize32, V, B32, B, tmp, blockMixCb, asyncTick } = scryptInit(\n    password,\n    salt,\n    opts\n  );\n  swap32IfBE(B32);\n  for (let pi = 0; pi < p; pi++) {\n    const Pi = blockSize32 * pi;\n    for (let i = 0; i < blockSize32; i++) V[i] = B32[Pi + i]; // V[0] = B[i]\n    let pos = 0;\n    await asyncLoop(N - 1, asyncTick, () => {\n      BlockMix(V, pos, V, (pos += blockSize32), r); // V[i] = BlockMix(V[i-1]);\n      blockMixCb();\n    });\n    BlockMix(V, (N - 1) * blockSize32, B32, Pi, r); // Process last element\n    blockMixCb();\n    await asyncLoop(N, asyncTick, () => {\n      // First u32 of the last 64-byte block (u32 is LE)\n      // & (N - 1) is % N as N is a power of 2, N & (N - 1) = 0 is checked above; >>> 0 for unsigned, input fits in u32\n      const j = (B32[Pi + blockSize32 - 16] & (N - 1)) >>> 0; // j = Integrify(X) % iterations\n      for (let k = 0; k < blockSize32; k++) tmp[k] = B32[Pi + k] ^ V[j * blockSize32 + k]; // tmp = B ^ V[j]\n      BlockMix(tmp, 0, B32, Pi, r); // B = BlockMix(B ^ V[j])\n      blockMixCb();\n    });\n  }\n  swap32IfBE(B32);\n  return scryptOutput(password, dkLen, B, V, tmp);\n}\n"],"names":[],"mappings":"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AAG,GAAG,GAAG,CAAC,EAAG,CAAC,CAAC,CAAC;QAC/D,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAAC,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAC/D,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAG,CAAC,CAAC,CAAC;QAAC,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAG,CAAC,CAAC,CAAC;QAC/D,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAAC,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAC/D,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAG,CAAC,CAAC,CAAC;QAAC,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAG,CAAC,CAAC,CAAC;QAC/D,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAAC,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAC/D,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAG,CAAC,CAAC,CAAC;QAAC,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAG,CAAC,CAAC,CAAC;QAC/D,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAAC,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;QAC/D,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAG,CAAC,CAAC,CAAC;QAAC,GAAG,QAAI,kNAAI,EAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAG,CAAC,CAAC,CAAC;QAC/D,GAAG,QAAI,k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","debugId":null}},
    {"offset": {"line": 7914, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40better-auth%2Btelemetry%401.3.34_better-call%401.0.19_jose%406.1.1_kysely%400.28.8_nanostores%401.0.1/node_modules/%40better-auth/telemetry/dist/index.mjs"],"sourcesContent":["import { env, getEnvVar, isTest, getBooleanEnvVar, ENV, logger } from '@better-auth/core/env';\nimport { createRandomStringGenerator } from '@better-auth/utils/random';\nimport { createHash } from '@better-auth/utils/hash';\nimport { base64 } from '@better-auth/utils/base64';\nimport { betterFetch } from '@better-fetch/fetch';\n\nconst generateId = (size) => {\n  return createRandomStringGenerator(\"a-z\", \"A-Z\", \"0-9\")(size);\n};\n\nasync function hashToBase64(data) {\n  const buffer = await createHash(\"SHA-256\").digest(data);\n  return base64.encode(buffer);\n}\n\nlet packageJSONCache;\nasync function readRootPackageJson() {\n  if (packageJSONCache) return packageJSONCache;\n  try {\n    const cwd = typeof process !== \"undefined\" && typeof process.cwd === \"function\" ? process.cwd() : \"\";\n    if (!cwd) return void 0;\n    const importRuntime = (m) => Function(\"mm\", \"return import(mm)\")(m);\n    const [{ default: fs }, { default: path }] = await Promise.all([\n      importRuntime(\"fs/promises\"),\n      importRuntime(\"path\")\n    ]);\n    const raw = await fs.readFile(path.join(cwd, \"package.json\"), \"utf-8\");\n    packageJSONCache = JSON.parse(raw);\n    return packageJSONCache;\n  } catch {\n  }\n  return void 0;\n}\nasync function getPackageVersion(pkg) {\n  if (packageJSONCache) {\n    return packageJSONCache.dependencies?.[pkg] || packageJSONCache.devDependencies?.[pkg] || packageJSONCache.peerDependencies?.[pkg];\n  }\n  try {\n    const cwd = typeof process !== \"undefined\" && typeof process.cwd === \"function\" ? process.cwd() : \"\";\n    if (!cwd) throw new Error(\"no-cwd\");\n    const importRuntime = (m) => Function(\"mm\", \"return import(mm)\")(m);\n    const [{ default: fs }, { default: path }] = await Promise.all([\n      importRuntime(\"fs/promises\"),\n      importRuntime(\"path\")\n    ]);\n    const pkgJsonPath = path.join(cwd, \"node_modules\", pkg, \"package.json\");\n    const raw = await fs.readFile(pkgJsonPath, \"utf-8\");\n    const json = JSON.parse(raw);\n    const resolved = json.version || await getVersionFromLocalPackageJson(pkg) || void 0;\n    return resolved;\n  } catch {\n  }\n  const fromRoot = await getVersionFromLocalPackageJson(pkg);\n  return fromRoot;\n}\nasync function getVersionFromLocalPackageJson(pkg) {\n  const json = await readRootPackageJson();\n  if (!json) return void 0;\n  const allDeps = {\n    ...json.dependencies,\n    ...json.devDependencies,\n    ...json.peerDependencies\n  };\n  return allDeps[pkg];\n}\nasync function getNameFromLocalPackageJson() {\n  const json = await readRootPackageJson();\n  return json?.name;\n}\n\nlet projectIdCached = null;\nasync function getProjectId(baseUrl) {\n  if (projectIdCached) return projectIdCached;\n  const projectName = await getNameFromLocalPackageJson();\n  if (projectName) {\n    projectIdCached = await hashToBase64(\n      baseUrl ? baseUrl + projectName : projectName\n    );\n    return projectIdCached;\n  }\n  if (baseUrl) {\n    projectIdCached = await hashToBase64(baseUrl);\n    return projectIdCached;\n  }\n  projectIdCached = generateId(32);\n  return projectIdCached;\n}\n\nconst importRuntime = (m) => {\n  return Function(\"mm\", \"return import(mm)\")(m);\n};\n\nfunction getVendor() {\n  const hasAny = (...keys) => keys.some((k) => Boolean(env[k]));\n  if (hasAny(\"CF_PAGES\", \"CF_PAGES_URL\", \"CF_ACCOUNT_ID\") || typeof navigator !== \"undefined\" && navigator.userAgent === \"Cloudflare-Workers\") {\n    return \"cloudflare\";\n  }\n  if (hasAny(\"VERCEL\", \"VERCEL_URL\", \"VERCEL_ENV\")) return \"vercel\";\n  if (hasAny(\"NETLIFY\", \"NETLIFY_URL\")) return \"netlify\";\n  if (hasAny(\n    \"RENDER\",\n    \"RENDER_URL\",\n    \"RENDER_INTERNAL_HOSTNAME\",\n    \"RENDER_SERVICE_ID\"\n  )) {\n    return \"render\";\n  }\n  if (hasAny(\"AWS_LAMBDA_FUNCTION_NAME\", \"AWS_EXECUTION_ENV\", \"LAMBDA_TASK_ROOT\")) {\n    return \"aws\";\n  }\n  if (hasAny(\n    \"GOOGLE_CLOUD_FUNCTION_NAME\",\n    \"GOOGLE_CLOUD_PROJECT\",\n    \"GCP_PROJECT\",\n    \"K_SERVICE\"\n  )) {\n    return \"gcp\";\n  }\n  if (hasAny(\n    \"AZURE_FUNCTION_NAME\",\n    \"FUNCTIONS_WORKER_RUNTIME\",\n    \"WEBSITE_INSTANCE_ID\",\n    \"WEBSITE_SITE_NAME\"\n  )) {\n    return \"azure\";\n  }\n  if (hasAny(\"DENO_DEPLOYMENT_ID\", \"DENO_REGION\")) return \"deno-deploy\";\n  if (hasAny(\"FLY_APP_NAME\", \"FLY_REGION\", \"FLY_ALLOC_ID\")) return \"fly-io\";\n  if (hasAny(\"RAILWAY_STATIC_URL\", \"RAILWAY_ENVIRONMENT_NAME\"))\n    return \"railway\";\n  if (hasAny(\"DYNO\", \"HEROKU_APP_NAME\")) return \"heroku\";\n  if (hasAny(\"DO_DEPLOYMENT_ID\", \"DO_APP_NAME\", \"DIGITALOCEAN\"))\n    return \"digitalocean\";\n  if (hasAny(\"KOYEB\", \"KOYEB_DEPLOYMENT_ID\", \"KOYEB_APP_NAME\")) return \"koyeb\";\n  return null;\n}\nasync function detectSystemInfo() {\n  try {\n    if (getVendor() === \"cloudflare\") return \"cloudflare\";\n    const os = await importRuntime(\"os\");\n    const cpus = os.cpus();\n    return {\n      deploymentVendor: getVendor(),\n      systemPlatform: os.platform(),\n      systemRelease: os.release(),\n      systemArchitecture: os.arch(),\n      cpuCount: cpus.length,\n      cpuModel: cpus.length ? cpus[0].model : null,\n      cpuSpeed: cpus.length ? cpus[0].speed : null,\n      memory: os.totalmem(),\n      isWSL: await isWsl(),\n      isDocker: await isDocker(),\n      isTTY: typeof process !== \"undefined\" && process.stdout ? process.stdout.isTTY : null\n    };\n  } catch (e) {\n    return {\n      systemPlatform: null,\n      systemRelease: null,\n      systemArchitecture: null,\n      cpuCount: null,\n      cpuModel: null,\n      cpuSpeed: null,\n      memory: null,\n      isWSL: null,\n      isDocker: null,\n      isTTY: null\n    };\n  }\n}\nlet isDockerCached;\nasync function hasDockerEnv() {\n  if (getVendor() === \"cloudflare\") return false;\n  try {\n    const fs = await importRuntime(\"fs\");\n    fs.statSync(\"/.dockerenv\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nasync function hasDockerCGroup() {\n  if (getVendor() === \"cloudflare\") return false;\n  try {\n    const fs = await importRuntime(\"fs\");\n    return fs.readFileSync(\"/proc/self/cgroup\", \"utf8\").includes(\"docker\");\n  } catch {\n    return false;\n  }\n}\nasync function isDocker() {\n  if (getVendor() === \"cloudflare\") return false;\n  if (isDockerCached === void 0) {\n    isDockerCached = await hasDockerEnv() || await hasDockerCGroup();\n  }\n  return isDockerCached;\n}\nasync function isWsl() {\n  try {\n    if (getVendor() === \"cloudflare\") return false;\n    if (typeof process === \"undefined\" || process?.platform !== \"linux\") {\n      return false;\n    }\n    const fs = await importRuntime(\"fs\");\n    const os = await importRuntime(\"os\");\n    if (os.release().toLowerCase().includes(\"microsoft\")) {\n      if (await isInsideContainer()) {\n        return false;\n      }\n      return true;\n    }\n    return fs.readFileSync(\"/proc/version\", \"utf8\").toLowerCase().includes(\"microsoft\") ? !await isInsideContainer() : false;\n  } catch {\n    return false;\n  }\n}\nlet isInsideContainerCached;\nconst hasContainerEnv = async () => {\n  if (getVendor() === \"cloudflare\") return false;\n  try {\n    const fs = await importRuntime(\"fs\");\n    fs.statSync(\"/run/.containerenv\");\n    return true;\n  } catch {\n    return false;\n  }\n};\nasync function isInsideContainer() {\n  if (isInsideContainerCached === void 0) {\n    isInsideContainerCached = await hasContainerEnv() || await isDocker();\n  }\n  return isInsideContainerCached;\n}\nfunction isCI() {\n  return env.CI !== \"false\" && (\"BUILD_ID\" in env || // Jenkins, Cloudbees\n  \"BUILD_NUMBER\" in env || // Jenkins, TeamCity (fixed typo: extra space removed)\n  \"CI\" in env || // Travis CI, CircleCI, Cirrus CI, Gitlab CI, Appveyor, CodeShip, dsari, Cloudflare\n  \"CI_APP_ID\" in env || // Appflow\n  \"CI_BUILD_ID\" in env || // Appflow\n  \"CI_BUILD_NUMBER\" in env || // Appflow\n  \"CI_NAME\" in env || // Codeship and others\n  \"CONTINUOUS_INTEGRATION\" in env || // Travis CI, Cirrus CI\n  \"RUN_ID\" in env);\n}\n\nfunction detectRuntime() {\n  if (typeof Deno !== \"undefined\") {\n    const denoVersion = Deno?.version?.deno ?? null;\n    return { name: \"deno\", version: denoVersion };\n  }\n  if (typeof Bun !== \"undefined\") {\n    const bunVersion = Bun?.version ?? null;\n    return { name: \"bun\", version: bunVersion };\n  }\n  if (typeof process !== \"undefined\" && process?.versions?.node) {\n    return { name: \"node\", version: process.versions.node ?? null };\n  }\n  return { name: \"edge\", version: null };\n}\nfunction detectEnvironment() {\n  return getEnvVar(\"NODE_ENV\") === \"production\" ? \"production\" : isCI() ? \"ci\" : isTest() ? \"test\" : \"development\";\n}\n\nconst DATABASES = {\n  pg: \"postgresql\",\n  mysql: \"mysql\",\n  mariadb: \"mariadb\",\n  sqlite3: \"sqlite\",\n  \"better-sqlite3\": \"sqlite\",\n  \"@prisma/client\": \"prisma\",\n  mongoose: \"mongodb\",\n  mongodb: \"mongodb\",\n  \"drizzle-orm\": \"drizzle\"\n};\nasync function detectDatabase() {\n  for (const [pkg, name] of Object.entries(DATABASES)) {\n    const version = await getPackageVersion(pkg);\n    if (version) return { name, version };\n  }\n  return void 0;\n}\n\nconst FRAMEWORKS = {\n  next: \"next\",\n  nuxt: \"nuxt\",\n  \"@remix-run/server-runtime\": \"remix\",\n  astro: \"astro\",\n  \"@sveltejs/kit\": \"sveltekit\",\n  \"solid-start\": \"solid-start\",\n  \"tanstack-start\": \"tanstack-start\",\n  hono: \"hono\",\n  express: \"express\",\n  elysia: \"elysia\",\n  expo: \"expo\"\n};\nasync function detectFramework() {\n  for (const [pkg, name] of Object.entries(FRAMEWORKS)) {\n    const version = await getPackageVersion(pkg);\n    if (version) return { name, version };\n  }\n  return void 0;\n}\n\nfunction detectPackageManager() {\n  const userAgent = env.npm_config_user_agent;\n  if (!userAgent) {\n    return void 0;\n  }\n  const pmSpec = userAgent.split(\" \")[0];\n  const separatorPos = pmSpec.lastIndexOf(\"/\");\n  const name = pmSpec.substring(0, separatorPos);\n  return {\n    name: name === \"npminstall\" ? \"cnpm\" : name,\n    version: pmSpec.substring(separatorPos + 1)\n  };\n}\n\nfunction getTelemetryAuthConfig(options, context) {\n  return {\n    database: context?.database,\n    adapter: context?.adapter,\n    emailVerification: {\n      sendVerificationEmail: !!options.emailVerification?.sendVerificationEmail,\n      sendOnSignUp: !!options.emailVerification?.sendOnSignUp,\n      sendOnSignIn: !!options.emailVerification?.sendOnSignIn,\n      autoSignInAfterVerification: !!options.emailVerification?.autoSignInAfterVerification,\n      expiresIn: options.emailVerification?.expiresIn,\n      onEmailVerification: !!options.emailVerification?.onEmailVerification,\n      afterEmailVerification: !!options.emailVerification?.afterEmailVerification\n    },\n    emailAndPassword: {\n      enabled: !!options.emailAndPassword?.enabled,\n      disableSignUp: !!options.emailAndPassword?.disableSignUp,\n      requireEmailVerification: !!options.emailAndPassword?.requireEmailVerification,\n      maxPasswordLength: options.emailAndPassword?.maxPasswordLength,\n      minPasswordLength: options.emailAndPassword?.minPasswordLength,\n      sendResetPassword: !!options.emailAndPassword?.sendResetPassword,\n      resetPasswordTokenExpiresIn: options.emailAndPassword?.resetPasswordTokenExpiresIn,\n      onPasswordReset: !!options.emailAndPassword?.onPasswordReset,\n      password: {\n        hash: !!options.emailAndPassword?.password?.hash,\n        verify: !!options.emailAndPassword?.password?.verify\n      },\n      autoSignIn: !!options.emailAndPassword?.autoSignIn,\n      revokeSessionsOnPasswordReset: !!options.emailAndPassword?.revokeSessionsOnPasswordReset\n    },\n    socialProviders: Object.keys(options.socialProviders || {}).map((p) => {\n      const provider = options.socialProviders?.[p];\n      if (!provider) return {};\n      return {\n        id: p,\n        mapProfileToUser: !!provider.mapProfileToUser,\n        disableDefaultScope: !!provider.disableDefaultScope,\n        disableIdTokenSignIn: !!provider.disableIdTokenSignIn,\n        disableImplicitSignUp: provider.disableImplicitSignUp,\n        disableSignUp: provider.disableSignUp,\n        getUserInfo: !!provider.getUserInfo,\n        overrideUserInfoOnSignIn: !!provider.overrideUserInfoOnSignIn,\n        prompt: provider.prompt,\n        verifyIdToken: !!provider.verifyIdToken,\n        scope: provider.scope,\n        refreshAccessToken: !!provider.refreshAccessToken\n      };\n    }),\n    plugins: options.plugins?.map((p) => p.id.toString()),\n    user: {\n      modelName: options.user?.modelName,\n      fields: options.user?.fields,\n      additionalFields: options.user?.additionalFields,\n      changeEmail: {\n        enabled: options.user?.changeEmail?.enabled,\n        sendChangeEmailVerification: !!options.user?.changeEmail?.sendChangeEmailVerification\n      }\n    },\n    verification: {\n      modelName: options.verification?.modelName,\n      disableCleanup: options.verification?.disableCleanup,\n      fields: options.verification?.fields\n    },\n    session: {\n      modelName: options.session?.modelName,\n      additionalFields: options.session?.additionalFields,\n      cookieCache: {\n        enabled: options.session?.cookieCache?.enabled,\n        maxAge: options.session?.cookieCache?.maxAge\n      },\n      disableSessionRefresh: options.session?.disableSessionRefresh,\n      expiresIn: options.session?.expiresIn,\n      fields: options.session?.fields,\n      freshAge: options.session?.freshAge,\n      preserveSessionInDatabase: options.session?.preserveSessionInDatabase,\n      storeSessionInDatabase: options.session?.storeSessionInDatabase,\n      updateAge: options.session?.updateAge\n    },\n    account: {\n      modelName: options.account?.modelName,\n      fields: options.account?.fields,\n      encryptOAuthTokens: options.account?.encryptOAuthTokens,\n      updateAccountOnSignIn: options.account?.updateAccountOnSignIn,\n      accountLinking: {\n        enabled: options.account?.accountLinking?.enabled,\n        trustedProviders: options.account?.accountLinking?.trustedProviders,\n        updateUserInfoOnLink: options.account?.accountLinking?.updateUserInfoOnLink,\n        allowUnlinkingAll: options.account?.accountLinking?.allowUnlinkingAll\n      }\n    },\n    hooks: {\n      after: !!options.hooks?.after,\n      before: !!options.hooks?.before\n    },\n    secondaryStorage: !!options.secondaryStorage,\n    advanced: {\n      cookiePrefix: !!options.advanced?.cookiePrefix,\n      //this shouldn't be tracked\n      cookies: !!options.advanced?.cookies,\n      crossSubDomainCookies: {\n        domain: !!options.advanced?.crossSubDomainCookies?.domain,\n        enabled: options.advanced?.crossSubDomainCookies?.enabled,\n        additionalCookies: options.advanced?.crossSubDomainCookies?.additionalCookies\n      },\n      database: {\n        useNumberId: !!options.advanced?.database?.useNumberId,\n        generateId: options.advanced?.database?.generateId,\n        defaultFindManyLimit: options.advanced?.database?.defaultFindManyLimit\n      },\n      useSecureCookies: options.advanced?.useSecureCookies,\n      ipAddress: {\n        disableIpTracking: options.advanced?.ipAddress?.disableIpTracking,\n        ipAddressHeaders: options.advanced?.ipAddress?.ipAddressHeaders\n      },\n      disableCSRFCheck: options.advanced?.disableCSRFCheck,\n      cookieAttributes: {\n        expires: options.advanced?.defaultCookieAttributes?.expires,\n        secure: options.advanced?.defaultCookieAttributes?.secure,\n        sameSite: options.advanced?.defaultCookieAttributes?.sameSite,\n        domain: !!options.advanced?.defaultCookieAttributes?.domain,\n        path: options.advanced?.defaultCookieAttributes?.path,\n        httpOnly: options.advanced?.defaultCookieAttributes?.httpOnly\n      }\n    },\n    trustedOrigins: options.trustedOrigins?.length,\n    rateLimit: {\n      storage: options.rateLimit?.storage,\n      modelName: options.rateLimit?.modelName,\n      window: options.rateLimit?.window,\n      customStorage: !!options.rateLimit?.customStorage,\n      enabled: options.rateLimit?.enabled,\n      max: options.rateLimit?.max\n    },\n    onAPIError: {\n      errorURL: options.onAPIError?.errorURL,\n      onError: !!options.onAPIError?.onError,\n      throw: options.onAPIError?.throw\n    },\n    logger: {\n      disabled: options.logger?.disabled,\n      level: options.logger?.level,\n      log: !!options.logger?.log\n    },\n    databaseHooks: {\n      user: {\n        create: {\n          after: !!options.databaseHooks?.user?.create?.after,\n          before: !!options.databaseHooks?.user?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.user?.update?.after,\n          before: !!options.databaseHooks?.user?.update?.before\n        }\n      },\n      session: {\n        create: {\n          after: !!options.databaseHooks?.session?.create?.after,\n          before: !!options.databaseHooks?.session?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.session?.update?.after,\n          before: !!options.databaseHooks?.session?.update?.before\n        }\n      },\n      account: {\n        create: {\n          after: !!options.databaseHooks?.account?.create?.after,\n          before: !!options.databaseHooks?.account?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.account?.update?.after,\n          before: !!options.databaseHooks?.account?.update?.before\n        }\n      },\n      verification: {\n        create: {\n          after: !!options.databaseHooks?.verification?.create?.after,\n          before: !!options.databaseHooks?.verification?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.verification?.update?.after,\n          before: !!options.databaseHooks?.verification?.update?.before\n        }\n      }\n    }\n  };\n}\n\nasync function createTelemetry(options, context) {\n  const debugEnabled = options.telemetry?.debug || getBooleanEnvVar(\"BETTER_AUTH_TELEMETRY_DEBUG\", false);\n  const TELEMETRY_ENDPOINT = ENV.BETTER_AUTH_TELEMETRY_ENDPOINT;\n  const track = async (event) => {\n    try {\n      if (context?.customTrack) {\n        await context.customTrack(event);\n      } else {\n        if (debugEnabled) {\n          await Promise.resolve(\n            logger.info(\"telemetry event\", JSON.stringify(event, null, 2))\n          );\n        } else {\n          await betterFetch(TELEMETRY_ENDPOINT, {\n            method: \"POST\",\n            body: event\n          });\n        }\n      }\n    } catch {\n    }\n  };\n  const isEnabled = async () => {\n    const telemetryEnabled = options.telemetry?.enabled !== void 0 ? options.telemetry.enabled : false;\n    const envEnabled = getBooleanEnvVar(\"BETTER_AUTH_TELEMETRY\", false);\n    return (envEnabled || telemetryEnabled) && (context?.skipTestCheck || !isTest());\n  };\n  const enabled = await isEnabled();\n  let anonymousId;\n  if (enabled) {\n    anonymousId = await getProjectId(options.baseURL);\n    const payload = {\n      config: getTelemetryAuthConfig(options),\n      runtime: detectRuntime(),\n      database: await detectDatabase(),\n      framework: await detectFramework(),\n      environment: detectEnvironment(),\n      systemInfo: await detectSystemInfo(),\n      packageManager: detectPackageManager()\n    };\n    void track({ type: \"init\", payload, anonymousId });\n  }\n  return {\n    publish: async (event) => {\n      if (!enabled) return;\n      if (!anonymousId) {\n        anonymousId = await getProjectId(options.baseURL);\n      }\n      await track({\n        type: event.type,\n        payload: event.payload,\n        anonymousId\n      });\n    }\n  };\n}\n\nexport { createTelemetry, getTelemetryAuthConfig };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8475, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40t3-oss%2Benv-core%400.13.8_typescript%405.9.3_zod%404.1.12/node_modules/%40t3-oss/env-core/dist/src-Bb3GbGAa.js"],"sourcesContent":["//#region src/standard.ts\nfunction ensureSynchronous(value, message) {\n\tif (value instanceof Promise) throw new Error(message);\n}\nfunction parseWithDictionary(dictionary, value) {\n\tconst result = {};\n\tconst issues = [];\n\tfor (const key in dictionary) {\n\t\tconst propResult = dictionary[key][\"~standard\"].validate(value[key]);\n\t\tensureSynchronous(propResult, `Validation must be synchronous, but ${key} returned a Promise.`);\n\t\tif (propResult.issues) {\n\t\t\tissues.push(...propResult.issues.map((issue) => ({\n\t\t\t\t...issue,\n\t\t\t\tmessage: issue.message,\n\t\t\t\tpath: [key, ...issue.path ?? []]\n\t\t\t})));\n\t\t\tcontinue;\n\t\t}\n\t\tresult[key] = propResult.value;\n\t}\n\tif (issues.length) return { issues };\n\treturn { value: result };\n}\n\n//#endregion\n//#region src/index.ts\n/**\n* Create a new environment variable schema.\n*/\nfunction createEnv(opts) {\n\tconst runtimeEnv = opts.runtimeEnvStrict ?? opts.runtimeEnv ?? process.env;\n\tconst emptyStringAsUndefined = opts.emptyStringAsUndefined ?? false;\n\tif (emptyStringAsUndefined) {\n\t\tfor (const [key, value] of Object.entries(runtimeEnv)) if (value === \"\") delete runtimeEnv[key];\n\t}\n\tconst skip = !!opts.skipValidation;\n\tif (skip) return runtimeEnv;\n\tconst _client = typeof opts.client === \"object\" ? opts.client : {};\n\tconst _server = typeof opts.server === \"object\" ? opts.server : {};\n\tconst _shared = typeof opts.shared === \"object\" ? opts.shared : {};\n\tconst isServer = opts.isServer ?? (typeof window === \"undefined\" || \"Deno\" in window);\n\tconst finalSchemaShape = isServer ? {\n\t\t..._server,\n\t\t..._shared,\n\t\t..._client\n\t} : {\n\t\t..._client,\n\t\t..._shared\n\t};\n\tconst parsed = opts.createFinalSchema?.(finalSchemaShape, isServer)[\"~standard\"].validate(runtimeEnv) ?? parseWithDictionary(finalSchemaShape, runtimeEnv);\n\tensureSynchronous(parsed, \"Validation must be synchronous\");\n\tconst onValidationError = opts.onValidationError ?? ((issues) => {\n\t\tconsole.error(\" Invalid environment variables:\", issues);\n\t\tthrow new Error(\"Invalid environment variables\");\n\t});\n\tconst onInvalidAccess = opts.onInvalidAccess ?? (() => {\n\t\tthrow new Error(\" Attempted to access a server-side environment variable on the client\");\n\t});\n\tif (parsed.issues) return onValidationError(parsed.issues);\n\tconst isServerAccess = (prop) => {\n\t\tif (!opts.clientPrefix) return true;\n\t\treturn !prop.startsWith(opts.clientPrefix) && !(prop in _shared);\n\t};\n\tconst isValidServerAccess = (prop) => {\n\t\treturn isServer || !isServerAccess(prop);\n\t};\n\tconst ignoreProp = (prop) => {\n\t\treturn prop === \"__esModule\" || prop === \"$$typeof\";\n\t};\n\tconst extendedObj = (opts.extends ?? []).reduce((acc, curr) => {\n\t\treturn Object.assign(acc, curr);\n\t}, {});\n\tconst fullObj = Object.assign(extendedObj, parsed.value);\n\tconst env = new Proxy(fullObj, { get(target, prop) {\n\t\tif (typeof prop !== \"string\") return void 0;\n\t\tif (ignoreProp(prop)) return void 0;\n\t\tif (!isValidServerAccess(prop)) return onInvalidAccess(prop);\n\t\treturn Reflect.get(target, prop);\n\t} });\n\treturn env;\n}\n\n//#endregion\nexport { createEnv };"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8572, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40t3-oss%2Benv-core%400.13.8_typescript%405.9.3_zod%404.1.12/node_modules/%40t3-oss/env-core/dist/index.js"],"sourcesContent":["import { createEnv } from \"./src-Bb3GbGAa.js\";\n\nexport { createEnv };"],"names":[],"mappings":";AAAA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8579, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/dotenv@17.2.3/node_modules/dotenv/package.json"],"sourcesContent":["{\"name\":\"dotenv\",\"version\":\"17.2.3\",\"description\":\"Loads environment variables from .env file\",\"main\":\"lib/main.js\",\"types\":\"lib/main.d.ts\",\"exports\":{\".\":{\"types\":\"./lib/main.d.ts\",\"require\":\"./lib/main.js\",\"default\":\"./lib/main.js\"},\"./config\":\"./config.js\",\"./config.js\":\"./config.js\",\"./lib/env-options\":\"./lib/env-options.js\",\"./lib/env-options.js\":\"./lib/env-options.js\",\"./lib/cli-options\":\"./lib/cli-options.js\",\"./lib/cli-options.js\":\"./lib/cli-options.js\",\"./package.json\":\"./package.json\"},\"scripts\":{\"dts-check\":\"tsc --project tests/types/tsconfig.json\",\"lint\":\"standard\",\"pretest\":\"npm run lint && npm run dts-check\",\"test\":\"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000\",\"test:coverage\":\"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov\",\"prerelease\":\"npm test\",\"release\":\"standard-version\"},\"repository\":{\"type\":\"git\",\"url\":\"git://github.com/motdotla/dotenv.git\"},\"homepage\":\"https://github.com/motdotla/dotenv#readme\",\"funding\":\"https://dotenvx.com\",\"keywords\":[\"dotenv\",\"env\",\".env\",\"environment\",\"variables\",\"config\",\"settings\"],\"readmeFilename\":\"README.md\",\"license\":\"BSD-2-Clause\",\"devDependencies\":{\"@types/node\":\"^18.11.3\",\"decache\":\"^4.6.2\",\"sinon\":\"^14.0.1\",\"standard\":\"^17.0.0\",\"standard-version\":\"^9.5.0\",\"tap\":\"^19.2.0\",\"typescript\":\"^4.8.4\"},\"engines\":{\"node\":\">=12\"},\"browser\":{\"fs\":false}}"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 8579, "column": 1435}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8582, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/dotenv%4017.2.3/node_modules/dotenv/lib/main.js"],"sourcesContent":["const fs = require('fs')\nconst path = require('path')\nconst os = require('os')\nconst crypto = require('crypto')\nconst packageJson = require('../package.json')\n\nconst version = packageJson.version\n\n// Array of tips to display randomly\nconst TIPS = [\n  ' encrypt with Dotenvx: https://dotenvx.com',\n  ' prevent committing .env to code: https://dotenvx.com/precommit',\n  ' prevent building .env in docker: https://dotenvx.com/prebuild',\n  ' add observability to secrets: https://dotenvx.com/ops',\n  ' sync secrets across teammates & machines: https://dotenvx.com/ops',\n  ' backup and recover secrets: https://dotenvx.com/ops',\n  ' audit secrets and track compliance: https://dotenvx.com/ops',\n  ' add secrets lifecycle management: https://dotenvx.com/ops',\n  ' add access controls to secrets: https://dotenvx.com/ops',\n  '  run anywhere with `dotenvx run -- yourcommand`',\n  '  specify custom .env file path with { path: \\'/custom/path/.env\\' }',\n  '  enable debug logging with { debug: true }',\n  '  override existing env vars with { override: true }',\n  '  suppress all logs with { quiet: true }',\n  '  write to custom object with { processEnv: myObject }',\n  '  load multiple .env files with { path: [\\'.env.local\\', \\'.env\\'] }'\n]\n\n// Get a random tip from the tips array\nfunction _getRandomTip () {\n  return TIPS[Math.floor(Math.random() * TIPS.length)]\n}\n\nfunction parseBoolean (value) {\n  if (typeof value === 'string') {\n    return !['false', '0', 'no', 'off', ''].includes(value.toLowerCase())\n  }\n  return Boolean(value)\n}\n\nfunction supportsAnsi () {\n  return process.stdout.isTTY // && process.env.TERM !== 'dumb'\n}\n\nfunction dim (text) {\n  return supportsAnsi() ? `\\x1b[2m${text}\\x1b[0m` : text\n}\n\nconst LINE = /(?:^|^)\\s*(?:export\\s+)?([\\w.-]+)(?:\\s*=\\s*?|:\\s+?)(\\s*'(?:\\\\'|[^'])*'|\\s*\"(?:\\\\\"|[^\"])*\"|\\s*`(?:\\\\`|[^`])*`|[^#\\r\\n]+)?\\s*(?:#.*)?(?:$|$)/mg\n\n// Parse src into an Object\nfunction parse (src) {\n  const obj = {}\n\n  // Convert buffer to string\n  let lines = src.toString()\n\n  // Convert line breaks to same format\n  lines = lines.replace(/\\r\\n?/mg, '\\n')\n\n  let match\n  while ((match = LINE.exec(lines)) != null) {\n    const key = match[1]\n\n    // Default undefined or null to empty string\n    let value = (match[2] || '')\n\n    // Remove whitespace\n    value = value.trim()\n\n    // Check if double quoted\n    const maybeQuote = value[0]\n\n    // Remove surrounding quotes\n    value = value.replace(/^(['\"`])([\\s\\S]*)\\1$/mg, '$2')\n\n    // Expand newlines if double quoted\n    if (maybeQuote === '\"') {\n      value = value.replace(/\\\\n/g, '\\n')\n      value = value.replace(/\\\\r/g, '\\r')\n    }\n\n    // Add to object\n    obj[key] = value\n  }\n\n  return obj\n}\n\nfunction _parseVault (options) {\n  options = options || {}\n\n  const vaultPath = _vaultPath(options)\n  options.path = vaultPath // parse .env.vault\n  const result = DotenvModule.configDotenv(options)\n  if (!result.parsed) {\n    const err = new Error(`MISSING_DATA: Cannot parse ${vaultPath} for an unknown reason`)\n    err.code = 'MISSING_DATA'\n    throw err\n  }\n\n  // handle scenario for comma separated keys - for use with key rotation\n  // example: DOTENV_KEY=\"dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=prod,dotenv://:key_7890@dotenvx.com/vault/.env.vault?environment=prod\"\n  const keys = _dotenvKey(options).split(',')\n  const length = keys.length\n\n  let decrypted\n  for (let i = 0; i < length; i++) {\n    try {\n      // Get full key\n      const key = keys[i].trim()\n\n      // Get instructions for decrypt\n      const attrs = _instructions(result, key)\n\n      // Decrypt\n      decrypted = DotenvModule.decrypt(attrs.ciphertext, attrs.key)\n\n      break\n    } catch (error) {\n      // last key\n      if (i + 1 >= length) {\n        throw error\n      }\n      // try next key\n    }\n  }\n\n  // Parse decrypted .env string\n  return DotenvModule.parse(decrypted)\n}\n\nfunction _warn (message) {\n  console.error(`[dotenv@${version}][WARN] ${message}`)\n}\n\nfunction _debug (message) {\n  console.log(`[dotenv@${version}][DEBUG] ${message}`)\n}\n\nfunction _log (message) {\n  console.log(`[dotenv@${version}] ${message}`)\n}\n\nfunction _dotenvKey (options) {\n  // prioritize developer directly setting options.DOTENV_KEY\n  if (options && options.DOTENV_KEY && options.DOTENV_KEY.length > 0) {\n    return options.DOTENV_KEY\n  }\n\n  // secondary infra already contains a DOTENV_KEY environment variable\n  if (process.env.DOTENV_KEY && process.env.DOTENV_KEY.length > 0) {\n    return process.env.DOTENV_KEY\n  }\n\n  // fallback to empty string\n  return ''\n}\n\nfunction _instructions (result, dotenvKey) {\n  // Parse DOTENV_KEY. Format is a URI\n  let uri\n  try {\n    uri = new URL(dotenvKey)\n  } catch (error) {\n    if (error.code === 'ERR_INVALID_URL') {\n      const err = new Error('INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development')\n      err.code = 'INVALID_DOTENV_KEY'\n      throw err\n    }\n\n    throw error\n  }\n\n  // Get decrypt key\n  const key = uri.password\n  if (!key) {\n    const err = new Error('INVALID_DOTENV_KEY: Missing key part')\n    err.code = 'INVALID_DOTENV_KEY'\n    throw err\n  }\n\n  // Get environment\n  const environment = uri.searchParams.get('environment')\n  if (!environment) {\n    const err = new Error('INVALID_DOTENV_KEY: Missing environment part')\n    err.code = 'INVALID_DOTENV_KEY'\n    throw err\n  }\n\n  // Get ciphertext payload\n  const environmentKey = `DOTENV_VAULT_${environment.toUpperCase()}`\n  const ciphertext = result.parsed[environmentKey] // DOTENV_VAULT_PRODUCTION\n  if (!ciphertext) {\n    const err = new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${environmentKey} in your .env.vault file.`)\n    err.code = 'NOT_FOUND_DOTENV_ENVIRONMENT'\n    throw err\n  }\n\n  return { ciphertext, key }\n}\n\nfunction _vaultPath (options) {\n  let possibleVaultPath = null\n\n  if (options && options.path && options.path.length > 0) {\n    if (Array.isArray(options.path)) {\n      for (const filepath of options.path) {\n        if (fs.existsSync(filepath)) {\n          possibleVaultPath = filepath.endsWith('.vault') ? filepath : `${filepath}.vault`\n        }\n      }\n    } else {\n      possibleVaultPath = options.path.endsWith('.vault') ? options.path : `${options.path}.vault`\n    }\n  } else {\n    possibleVaultPath = path.resolve(process.cwd(), '.env.vault')\n  }\n\n  if (fs.existsSync(possibleVaultPath)) {\n    return possibleVaultPath\n  }\n\n  return null\n}\n\nfunction _resolveHome (envPath) {\n  return envPath[0] === '~' ? path.join(os.homedir(), envPath.slice(1)) : envPath\n}\n\nfunction _configVault (options) {\n  const debug = parseBoolean(process.env.DOTENV_CONFIG_DEBUG || (options && options.debug))\n  const quiet = parseBoolean(process.env.DOTENV_CONFIG_QUIET || (options && options.quiet))\n\n  if (debug || !quiet) {\n    _log('Loading env from encrypted .env.vault')\n  }\n\n  const parsed = DotenvModule._parseVault(options)\n\n  let processEnv = process.env\n  if (options && options.processEnv != null) {\n    processEnv = options.processEnv\n  }\n\n  DotenvModule.populate(processEnv, parsed, options)\n\n  return { parsed }\n}\n\nfunction configDotenv (options) {\n  const dotenvPath = path.resolve(process.cwd(), '.env')\n  let encoding = 'utf8'\n  let processEnv = process.env\n  if (options && options.processEnv != null) {\n    processEnv = options.processEnv\n  }\n  let debug = parseBoolean(processEnv.DOTENV_CONFIG_DEBUG || (options && options.debug))\n  let quiet = parseBoolean(processEnv.DOTENV_CONFIG_QUIET || (options && options.quiet))\n\n  if (options && options.encoding) {\n    encoding = options.encoding\n  } else {\n    if (debug) {\n      _debug('No encoding is specified. UTF-8 is used by default')\n    }\n  }\n\n  let optionPaths = [dotenvPath] // default, look for .env\n  if (options && options.path) {\n    if (!Array.isArray(options.path)) {\n      optionPaths = [_resolveHome(options.path)]\n    } else {\n      optionPaths = [] // reset default\n      for (const filepath of options.path) {\n        optionPaths.push(_resolveHome(filepath))\n      }\n    }\n  }\n\n  // Build the parsed data in a temporary object (because we need to return it).  Once we have the final\n  // parsed data, we will combine it with process.env (or options.processEnv if provided).\n  let lastError\n  const parsedAll = {}\n  for (const path of optionPaths) {\n    try {\n      // Specifying an encoding returns a string instead of a buffer\n      const parsed = DotenvModule.parse(fs.readFileSync(path, { encoding }))\n\n      DotenvModule.populate(parsedAll, parsed, options)\n    } catch (e) {\n      if (debug) {\n        _debug(`Failed to load ${path} ${e.message}`)\n      }\n      lastError = e\n    }\n  }\n\n  const populated = DotenvModule.populate(processEnv, parsedAll, options)\n\n  // handle user settings DOTENV_CONFIG_ options inside .env file(s)\n  debug = parseBoolean(processEnv.DOTENV_CONFIG_DEBUG || debug)\n  quiet = parseBoolean(processEnv.DOTENV_CONFIG_QUIET || quiet)\n\n  if (debug || !quiet) {\n    const keysCount = Object.keys(populated).length\n    const shortPaths = []\n    for (const filePath of optionPaths) {\n      try {\n        const relative = path.relative(process.cwd(), filePath)\n        shortPaths.push(relative)\n      } catch (e) {\n        if (debug) {\n          _debug(`Failed to load ${filePath} ${e.message}`)\n        }\n        lastError = e\n      }\n    }\n\n    _log(`injecting env (${keysCount}) from ${shortPaths.join(',')} ${dim(`-- tip: ${_getRandomTip()}`)}`)\n  }\n\n  if (lastError) {\n    return { parsed: parsedAll, error: lastError }\n  } else {\n    return { parsed: parsedAll }\n  }\n}\n\n// Populates process.env from .env file\nfunction config (options) {\n  // fallback to original dotenv if DOTENV_KEY is not set\n  if (_dotenvKey(options).length === 0) {\n    return DotenvModule.configDotenv(options)\n  }\n\n  const vaultPath = _vaultPath(options)\n\n  // dotenvKey exists but .env.vault file does not exist\n  if (!vaultPath) {\n    _warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${vaultPath}. Did you forget to build it?`)\n\n    return DotenvModule.configDotenv(options)\n  }\n\n  return DotenvModule._configVault(options)\n}\n\nfunction decrypt (encrypted, keyStr) {\n  const key = Buffer.from(keyStr.slice(-64), 'hex')\n  let ciphertext = Buffer.from(encrypted, 'base64')\n\n  const nonce = ciphertext.subarray(0, 12)\n  const authTag = ciphertext.subarray(-16)\n  ciphertext = ciphertext.subarray(12, -16)\n\n  try {\n    const aesgcm = crypto.createDecipheriv('aes-256-gcm', key, nonce)\n    aesgcm.setAuthTag(authTag)\n    return `${aesgcm.update(ciphertext)}${aesgcm.final()}`\n  } catch (error) {\n    const isRange = error instanceof RangeError\n    const invalidKeyLength = error.message === 'Invalid key length'\n    const decryptionFailed = error.message === 'Unsupported state or unable to authenticate data'\n\n    if (isRange || invalidKeyLength) {\n      const err = new Error('INVALID_DOTENV_KEY: It must be 64 characters long (or more)')\n      err.code = 'INVALID_DOTENV_KEY'\n      throw err\n    } else if (decryptionFailed) {\n      const err = new Error('DECRYPTION_FAILED: Please check your DOTENV_KEY')\n      err.code = 'DECRYPTION_FAILED'\n      throw err\n    } else {\n      throw error\n    }\n  }\n}\n\n// Populate process.env with parsed values\nfunction populate (processEnv, parsed, options = {}) {\n  const debug = Boolean(options && options.debug)\n  const override = Boolean(options && options.override)\n  const populated = {}\n\n  if (typeof parsed !== 'object') {\n    const err = new Error('OBJECT_REQUIRED: Please check the processEnv argument being passed to populate')\n    err.code = 'OBJECT_REQUIRED'\n    throw err\n  }\n\n  // Set process.env\n  for (const key of Object.keys(parsed)) {\n    if (Object.prototype.hasOwnProperty.call(processEnv, key)) {\n      if (override === true) {\n        processEnv[key] = parsed[key]\n        populated[key] = parsed[key]\n      }\n\n      if (debug) {\n        if (override === true) {\n          _debug(`\"${key}\" is already defined and WAS overwritten`)\n        } else {\n          _debug(`\"${key}\" is already defined and was NOT overwritten`)\n        }\n      }\n    } else {\n      processEnv[key] = parsed[key]\n      populated[key] = parsed[key]\n    }\n  }\n\n  return populated\n}\n\nconst DotenvModule = {\n  configDotenv,\n  _configVault,\n  _parseVault,\n  config,\n  decrypt,\n  parse,\n  populate\n}\n\nmodule.exports.configDotenv = DotenvModule.configDotenv\nmodule.exports._configVault = DotenvModule._configVault\nmodule.exports._parseVault = DotenvModule._parseVault\nmodule.exports.config = DotenvModule.config\nmodule.exports.decrypt = DotenvModule.decrypt\nmodule.exports.parse = DotenvModule.parse\nmodule.exports.populate = DotenvModule.populate\n\nmodule.exports = DotenvModule\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8969, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bshared%401.11.1/node_modules/%40orpc/shared/dist/index.mjs"],"sourcesContent":["export { group, guard, mapEntries, mapValues, omit, retry, sleep } from 'radash';\n\nfunction resolveMaybeOptionalOptions(rest) {\n  return rest[0] ?? {};\n}\n\nfunction toArray(value) {\n  return Array.isArray(value) ? value : value === void 0 || value === null ? [] : [value];\n}\nfunction splitInHalf(arr) {\n  const half = Math.ceil(arr.length / 2);\n  return [arr.slice(0, half), arr.slice(half)];\n}\n\nfunction readAsBuffer(source) {\n  if (typeof source.bytes === \"function\") {\n    return source.bytes();\n  }\n  return source.arrayBuffer();\n}\n\nconst ORPC_NAME = \"orpc\";\nconst ORPC_SHARED_PACKAGE_NAME = \"@orpc/shared\";\nconst ORPC_SHARED_PACKAGE_VERSION = \"1.11.1\";\n\nclass AbortError extends Error {\n  constructor(...rest) {\n    super(...rest);\n    this.name = \"AbortError\";\n  }\n}\n\nfunction once(fn) {\n  let cached;\n  return () => {\n    if (cached) {\n      return cached.result;\n    }\n    const result = fn();\n    cached = { result };\n    return result;\n  };\n}\nfunction sequential(fn) {\n  let lastOperationPromise = Promise.resolve();\n  return (...args) => {\n    return lastOperationPromise = lastOperationPromise.catch(() => {\n    }).then(() => {\n      return fn(...args);\n    });\n  };\n}\nfunction defer(callback) {\n  if (typeof setTimeout === \"function\") {\n    setTimeout(callback, 0);\n  } else {\n    Promise.resolve().then(() => Promise.resolve().then(() => Promise.resolve().then(callback)));\n  }\n}\n\nconst SPAN_ERROR_STATUS = 2;\nconst GLOBAL_OTEL_CONFIG_KEY = `__${ORPC_SHARED_PACKAGE_NAME}@${ORPC_SHARED_PACKAGE_VERSION}/otel/config__`;\nfunction setGlobalOtelConfig(config) {\n  globalThis[GLOBAL_OTEL_CONFIG_KEY] = config;\n}\nfunction getGlobalOtelConfig() {\n  return globalThis[GLOBAL_OTEL_CONFIG_KEY];\n}\nfunction startSpan(name, options = {}, context) {\n  const tracer = getGlobalOtelConfig()?.tracer;\n  return tracer?.startSpan(name, options, context);\n}\nfunction setSpanError(span, error, options = {}) {\n  if (!span) {\n    return;\n  }\n  const exception = toOtelException(error);\n  span.recordException(exception);\n  if (!options.signal?.aborted || options.signal.reason !== error) {\n    span.setStatus({\n      code: SPAN_ERROR_STATUS,\n      message: exception.message\n    });\n  }\n}\nfunction setSpanAttribute(span, key, value) {\n  if (!span || value === void 0) {\n    return;\n  }\n  span.setAttribute(key, value);\n}\nfunction toOtelException(error) {\n  if (error instanceof Error) {\n    const exception = {\n      message: error.message,\n      name: error.name,\n      stack: error.stack\n    };\n    if (\"code\" in error && (typeof error.code === \"string\" || typeof error.code === \"number\")) {\n      exception.code = error.code;\n    }\n    return exception;\n  }\n  return { message: String(error) };\n}\nfunction toSpanAttributeValue(data) {\n  if (data === void 0) {\n    return \"undefined\";\n  }\n  try {\n    return JSON.stringify(data, (_, value) => {\n      if (typeof value === \"bigint\") {\n        return value.toString();\n      }\n      if (value instanceof Map || value instanceof Set) {\n        return Array.from(value);\n      }\n      return value;\n    });\n  } catch {\n    return String(data);\n  }\n}\nasync function runWithSpan({ name, context, ...options }, fn) {\n  const tracer = getGlobalOtelConfig()?.tracer;\n  if (!tracer) {\n    return fn();\n  }\n  const callback = async (span) => {\n    try {\n      return await fn(span);\n    } catch (e) {\n      setSpanError(span, e, options);\n      throw e;\n    } finally {\n      span.end();\n    }\n  };\n  if (context) {\n    return tracer.startActiveSpan(name, options, context, callback);\n  } else {\n    return tracer.startActiveSpan(name, options, callback);\n  }\n}\nasync function runInSpanContext(span, fn) {\n  const otelConfig = getGlobalOtelConfig();\n  if (!span || !otelConfig) {\n    return fn();\n  }\n  const ctx = otelConfig.trace.setSpan(otelConfig.context.active(), span);\n  return otelConfig.context.with(ctx, fn);\n}\n\nclass AsyncIdQueue {\n  openIds = /* @__PURE__ */ new Set();\n  queues = /* @__PURE__ */ new Map();\n  waiters = /* @__PURE__ */ new Map();\n  get length() {\n    return this.openIds.size;\n  }\n  get waiterIds() {\n    return Array.from(this.waiters.keys());\n  }\n  hasBufferedItems(id) {\n    return Boolean(this.queues.get(id)?.length);\n  }\n  open(id) {\n    this.openIds.add(id);\n  }\n  isOpen(id) {\n    return this.openIds.has(id);\n  }\n  push(id, item) {\n    this.assertOpen(id);\n    const pending = this.waiters.get(id);\n    if (pending?.length) {\n      pending.shift()[0](item);\n      if (pending.length === 0) {\n        this.waiters.delete(id);\n      }\n    } else {\n      const items = this.queues.get(id);\n      if (items) {\n        items.push(item);\n      } else {\n        this.queues.set(id, [item]);\n      }\n    }\n  }\n  async pull(id) {\n    this.assertOpen(id);\n    const items = this.queues.get(id);\n    if (items?.length) {\n      const item = items.shift();\n      if (items.length === 0) {\n        this.queues.delete(id);\n      }\n      return item;\n    }\n    return new Promise((resolve, reject) => {\n      const waitingPulls = this.waiters.get(id);\n      const pending = [resolve, reject];\n      if (waitingPulls) {\n        waitingPulls.push(pending);\n      } else {\n        this.waiters.set(id, [pending]);\n      }\n    });\n  }\n  close({ id, reason } = {}) {\n    if (id === void 0) {\n      this.waiters.forEach((pendingPulls, id2) => {\n        const error2 = reason ?? new AbortError(`[AsyncIdQueue] Queue[${id2}] was closed or aborted while waiting for pulling.`);\n        pendingPulls.forEach(([, reject]) => reject(error2));\n      });\n      this.waiters.clear();\n      this.openIds.clear();\n      this.queues.clear();\n      return;\n    }\n    const error = reason ?? new AbortError(`[AsyncIdQueue] Queue[${id}] was closed or aborted while waiting for pulling.`);\n    this.waiters.get(id)?.forEach(([, reject]) => reject(error));\n    this.waiters.delete(id);\n    this.openIds.delete(id);\n    this.queues.delete(id);\n  }\n  assertOpen(id) {\n    if (!this.isOpen(id)) {\n      throw new Error(`[AsyncIdQueue] Cannot access queue[${id}] because it is not open or aborted.`);\n    }\n  }\n}\n\nfunction isAsyncIteratorObject(maybe) {\n  if (!maybe || typeof maybe !== \"object\") {\n    return false;\n  }\n  return \"next\" in maybe && typeof maybe.next === \"function\" && Symbol.asyncIterator in maybe && typeof maybe[Symbol.asyncIterator] === \"function\";\n}\nconst fallbackAsyncDisposeSymbol = Symbol.for(\"asyncDispose\");\nconst asyncDisposeSymbol = Symbol.asyncDispose ?? fallbackAsyncDisposeSymbol;\nclass AsyncIteratorClass {\n  #isDone = false;\n  #isExecuteComplete = false;\n  #cleanup;\n  #next;\n  constructor(next, cleanup) {\n    this.#cleanup = cleanup;\n    this.#next = sequential(async () => {\n      if (this.#isDone) {\n        return { done: true, value: void 0 };\n      }\n      try {\n        const result = await next();\n        if (result.done) {\n          this.#isDone = true;\n        }\n        return result;\n      } catch (err) {\n        this.#isDone = true;\n        throw err;\n      } finally {\n        if (this.#isDone && !this.#isExecuteComplete) {\n          this.#isExecuteComplete = true;\n          await this.#cleanup(\"next\");\n        }\n      }\n    });\n  }\n  next() {\n    return this.#next();\n  }\n  async return(value) {\n    this.#isDone = true;\n    if (!this.#isExecuteComplete) {\n      this.#isExecuteComplete = true;\n      await this.#cleanup(\"return\");\n    }\n    return { done: true, value };\n  }\n  async throw(err) {\n    this.#isDone = true;\n    if (!this.#isExecuteComplete) {\n      this.#isExecuteComplete = true;\n      await this.#cleanup(\"throw\");\n    }\n    throw err;\n  }\n  /**\n   * asyncDispose symbol only available in esnext, we should fallback to Symbol.for('asyncDispose')\n   */\n  async [asyncDisposeSymbol]() {\n    this.#isDone = true;\n    if (!this.#isExecuteComplete) {\n      this.#isExecuteComplete = true;\n      await this.#cleanup(\"dispose\");\n    }\n  }\n  [Symbol.asyncIterator]() {\n    return this;\n  }\n}\nfunction replicateAsyncIterator(source, count) {\n  const queue = new AsyncIdQueue();\n  const ids = Array.from({ length: count }, (_, i) => i.toString());\n  let isSourceFinished = false;\n  const start = once(async () => {\n    try {\n      while (true) {\n        const item = await source.next();\n        ids.forEach((id) => {\n          if (queue.isOpen(id)) {\n            queue.push(id, { next: item });\n          }\n        });\n        if (item.done) {\n          break;\n        }\n      }\n    } catch (error) {\n      ids.forEach((id) => {\n        if (queue.isOpen(id)) {\n          queue.push(id, { error });\n        }\n      });\n    } finally {\n      isSourceFinished = true;\n    }\n  });\n  const replicated = ids.map((id) => {\n    queue.open(id);\n    return new AsyncIteratorClass(\n      async () => {\n        start();\n        const item = await queue.pull(id);\n        if (item.next) {\n          return item.next;\n        }\n        throw item.error;\n      },\n      async (reason) => {\n        queue.close({ id });\n        if (reason !== \"next\" && !queue.length && !isSourceFinished) {\n          isSourceFinished = true;\n          await source?.return?.();\n        }\n      }\n    );\n  });\n  return replicated;\n}\nfunction asyncIteratorWithSpan({ name, ...options }, iterator) {\n  let span;\n  return new AsyncIteratorClass(\n    async () => {\n      span ??= startSpan(name);\n      try {\n        const result = await runInSpanContext(span, () => iterator.next());\n        span?.addEvent(result.done ? \"completed\" : \"yielded\");\n        return result;\n      } catch (err) {\n        setSpanError(span, err, options);\n        throw err;\n      }\n    },\n    async (reason) => {\n      try {\n        if (reason !== \"next\") {\n          await runInSpanContext(span, () => iterator.return?.());\n        }\n      } catch (err) {\n        setSpanError(span, err, options);\n        throw err;\n      } finally {\n        span?.end();\n      }\n    }\n  );\n}\n\nclass EventPublisher {\n  #listenersMap = /* @__PURE__ */ new Map();\n  #maxBufferedEvents;\n  constructor(options = {}) {\n    this.#maxBufferedEvents = options.maxBufferedEvents ?? 100;\n  }\n  get size() {\n    return this.#listenersMap.size;\n  }\n  /**\n   * Emits an event and delivers the payload to all subscribed listeners.\n   */\n  publish(event, payload) {\n    const listeners = this.#listenersMap.get(event);\n    if (!listeners) {\n      return;\n    }\n    for (const listener of listeners) {\n      listener(payload);\n    }\n  }\n  subscribe(event, listenerOrOptions) {\n    if (typeof listenerOrOptions === \"function\") {\n      let listeners = this.#listenersMap.get(event);\n      if (!listeners) {\n        this.#listenersMap.set(event, listeners = []);\n      }\n      listeners.push(listenerOrOptions);\n      return once(() => {\n        listeners.splice(listeners.indexOf(listenerOrOptions), 1);\n        if (listeners.length === 0) {\n          this.#listenersMap.delete(event);\n        }\n      });\n    }\n    const signal = listenerOrOptions?.signal;\n    const maxBufferedEvents = listenerOrOptions?.maxBufferedEvents ?? this.#maxBufferedEvents;\n    signal?.throwIfAborted();\n    const bufferedEvents = [];\n    const pullResolvers = [];\n    const unsubscribe = this.subscribe(event, (payload) => {\n      const resolver = pullResolvers.shift();\n      if (resolver) {\n        resolver[0]({ done: false, value: payload });\n      } else {\n        bufferedEvents.push(payload);\n        if (bufferedEvents.length > maxBufferedEvents) {\n          bufferedEvents.shift();\n        }\n      }\n    });\n    const abortListener = (event2) => {\n      unsubscribe();\n      pullResolvers.forEach((resolver) => resolver[1](event2.target.reason));\n      pullResolvers.length = 0;\n      bufferedEvents.length = 0;\n    };\n    signal?.addEventListener(\"abort\", abortListener, { once: true });\n    return new AsyncIteratorClass(async () => {\n      if (signal?.aborted) {\n        throw signal.reason;\n      }\n      if (bufferedEvents.length > 0) {\n        return { done: false, value: bufferedEvents.shift() };\n      }\n      return new Promise((resolve, reject) => {\n        pullResolvers.push([resolve, reject]);\n      });\n    }, async () => {\n      unsubscribe();\n      signal?.removeEventListener(\"abort\", abortListener);\n      pullResolvers.forEach((resolver) => resolver[0]({ done: true, value: void 0 }));\n      pullResolvers.length = 0;\n      bufferedEvents.length = 0;\n    });\n  }\n}\n\nclass SequentialIdGenerator {\n  index = BigInt(1);\n  generate() {\n    const id = this.index.toString(36);\n    this.index++;\n    return id;\n  }\n}\nfunction compareSequentialIds(a, b) {\n  if (a.length !== b.length) {\n    return a.length - b.length;\n  }\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n\nfunction onStart(callback) {\n  return async (options, ...rest) => {\n    await callback(options, ...rest);\n    return await options.next();\n  };\n}\nfunction onSuccess(callback) {\n  return async (options, ...rest) => {\n    const result = await options.next();\n    await callback(result, options, ...rest);\n    return result;\n  };\n}\nfunction onError(callback) {\n  return async (options, ...rest) => {\n    try {\n      return await options.next();\n    } catch (error) {\n      await callback(error, options, ...rest);\n      throw error;\n    }\n  };\n}\nfunction onFinish(callback) {\n  let state;\n  return async (options, ...rest) => {\n    try {\n      const result = await options.next();\n      state = [null, result, true];\n      return result;\n    } catch (error) {\n      state = [error, void 0, false];\n      throw error;\n    } finally {\n      await callback(state, options, ...rest);\n    }\n  };\n}\nfunction intercept(interceptors, options, main) {\n  const next = (options2, index) => {\n    const interceptor = interceptors[index];\n    if (!interceptor) {\n      return main(options2);\n    }\n    return interceptor({\n      ...options2,\n      next: (newOptions = options2) => next(newOptions, index + 1)\n    });\n  };\n  return next(options, 0);\n}\n\nfunction parseEmptyableJSON(text) {\n  if (!text) {\n    return void 0;\n  }\n  return JSON.parse(text);\n}\nfunction stringifyJSON(value) {\n  return JSON.stringify(value);\n}\n\nfunction findDeepMatches(check, payload, segments = [], maps = [], values = []) {\n  if (check(payload)) {\n    maps.push(segments);\n    values.push(payload);\n  } else if (Array.isArray(payload)) {\n    payload.forEach((v, i) => {\n      findDeepMatches(check, v, [...segments, i], maps, values);\n    });\n  } else if (isObject(payload)) {\n    for (const key in payload) {\n      findDeepMatches(check, payload[key], [...segments, key], maps, values);\n    }\n  }\n  return { maps, values };\n}\nfunction getConstructor(value) {\n  if (!isTypescriptObject(value)) {\n    return null;\n  }\n  return Object.getPrototypeOf(value)?.constructor;\n}\nfunction isObject(value) {\n  if (!value || typeof value !== \"object\") {\n    return false;\n  }\n  const proto = Object.getPrototypeOf(value);\n  return proto === Object.prototype || !proto || !proto.constructor;\n}\nfunction isTypescriptObject(value) {\n  return !!value && (typeof value === \"object\" || typeof value === \"function\");\n}\nfunction clone(value) {\n  if (Array.isArray(value)) {\n    return value.map(clone);\n  }\n  if (isObject(value)) {\n    const result = {};\n    for (const key in value) {\n      result[key] = clone(value[key]);\n    }\n    return result;\n  }\n  return value;\n}\nfunction get(object, path) {\n  let current = object;\n  for (const key of path) {\n    if (!isTypescriptObject(current)) {\n      return void 0;\n    }\n    current = current[key];\n  }\n  return current;\n}\nfunction isPropertyKey(value) {\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"symbol\";\n}\nconst NullProtoObj = /* @__PURE__ */ (() => {\n  const e = function() {\n  };\n  e.prototype = /* @__PURE__ */ Object.create(null);\n  Object.freeze(e.prototype);\n  return e;\n})();\n\nfunction value(value2, ...args) {\n  if (typeof value2 === \"function\") {\n    return value2(...args);\n  }\n  return value2;\n}\nfunction fallback(value2, fallback2) {\n  return value2 === void 0 ? fallback2 : value2;\n}\n\nfunction preventNativeAwait(target) {\n  return new Proxy(target, {\n    get(target2, prop, receiver) {\n      const value2 = Reflect.get(target2, prop, receiver);\n      if (prop !== \"then\" || typeof value2 !== \"function\") {\n        return value2;\n      }\n      return new Proxy(value2, {\n        apply(targetFn, thisArg, args) {\n          if (args.length !== 2 || args.some((arg) => !isNativeFunction(arg))) {\n            return Reflect.apply(targetFn, thisArg, args);\n          }\n          let shouldOmit = true;\n          args[0].call(thisArg, preventNativeAwait(new Proxy(target2, {\n            get: (target3, prop2, receiver2) => {\n              if (shouldOmit && prop2 === \"then\") {\n                shouldOmit = false;\n                return void 0;\n              }\n              return Reflect.get(target3, prop2, receiver2);\n            }\n          })));\n        }\n      });\n    }\n  });\n}\nconst NATIVE_FUNCTION_REGEX = /^\\s*function\\s*\\(\\)\\s*\\{\\s*\\[native code\\]\\s*\\}\\s*$/;\nfunction isNativeFunction(fn) {\n  return typeof fn === \"function\" && NATIVE_FUNCTION_REGEX.test(fn.toString());\n}\nfunction overlayProxy(target, partial) {\n  const proxy = new Proxy(typeof target === \"function\" ? partial : target, {\n    get(_, prop) {\n      const targetValue = prop in partial ? partial : value(target);\n      const v = Reflect.get(targetValue, prop);\n      return typeof v === \"function\" ? v.bind(targetValue) : v;\n    },\n    has(_, prop) {\n      return Reflect.has(partial, prop) || Reflect.has(value(target), prop);\n    }\n  });\n  return proxy;\n}\n\nfunction streamToAsyncIteratorClass(stream) {\n  const reader = stream.getReader();\n  return new AsyncIteratorClass(\n    async () => {\n      return reader.read();\n    },\n    async () => {\n      await reader.cancel();\n    }\n  );\n}\nfunction asyncIteratorToStream(iterator) {\n  return new ReadableStream({\n    async pull(controller) {\n      const { done, value } = await iterator.next();\n      if (done) {\n        controller.close();\n      } else {\n        controller.enqueue(value);\n      }\n    },\n    async cancel() {\n      await iterator.return?.();\n    }\n  });\n}\nfunction asyncIteratorToUnproxiedDataStream(iterator) {\n  return new ReadableStream({\n    async pull(controller) {\n      const { done, value } = await iterator.next();\n      if (done) {\n        controller.close();\n      } else {\n        const unproxied = isObject(value) ? { ...value } : Array.isArray(value) ? value.map((i) => i) : value;\n        controller.enqueue(unproxied);\n      }\n    },\n    async cancel() {\n      await iterator.return?.();\n    }\n  });\n}\n\nfunction tryDecodeURIComponent(value) {\n  try {\n    return decodeURIComponent(value);\n  } catch {\n    return value;\n  }\n}\n\nexport { AbortError, AsyncIdQueue, AsyncIteratorClass, EventPublisher, NullProtoObj, ORPC_NAME, ORPC_SHARED_PACKAGE_NAME, ORPC_SHARED_PACKAGE_VERSION, SequentialIdGenerator, asyncIteratorToStream, asyncIteratorToUnproxiedDataStream, asyncIteratorWithSpan, clone, compareSequentialIds, defer, fallback, findDeepMatches, get, getConstructor, getGlobalOtelConfig, intercept, isAsyncIteratorObject, isObject, isPropertyKey, isTypescriptObject, onError, onFinish, onStart, onSuccess, once, overlayProxy, parseEmptyableJSON, preventNativeAwait, readAsBuffer, replicateAsyncIterator, resolveMaybeOptionalOptions, runInSpanContext, runWithSpan, sequential, setGlobalOtelConfig, setSpanAttribute, setSpanError, splitInHalf, startSpan, streamToAsyncIteratorClass, stringifyJSON, toArray, toOtelException, toSpanAttributeValue, tryDecodeURIComponent, value };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 9816, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bclient%401.11.1/node_modules/%40orpc/client/dist/shared/client.D5YVQlyY.mjs"],"sourcesContent":["import { resolveMaybeOptionalOptions, getConstructor, isObject } from '@orpc/shared';\n\nconst ORPC_CLIENT_PACKAGE_NAME = \"@orpc/client\";\nconst ORPC_CLIENT_PACKAGE_VERSION = \"1.11.1\";\n\nconst COMMON_ORPC_ERROR_DEFS = {\n  BAD_REQUEST: {\n    status: 400,\n    message: \"Bad Request\"\n  },\n  UNAUTHORIZED: {\n    status: 401,\n    message: \"Unauthorized\"\n  },\n  FORBIDDEN: {\n    status: 403,\n    message: \"Forbidden\"\n  },\n  NOT_FOUND: {\n    status: 404,\n    message: \"Not Found\"\n  },\n  METHOD_NOT_SUPPORTED: {\n    status: 405,\n    message: \"Method Not Supported\"\n  },\n  NOT_ACCEPTABLE: {\n    status: 406,\n    message: \"Not Acceptable\"\n  },\n  TIMEOUT: {\n    status: 408,\n    message: \"Request Timeout\"\n  },\n  CONFLICT: {\n    status: 409,\n    message: \"Conflict\"\n  },\n  PRECONDITION_FAILED: {\n    status: 412,\n    message: \"Precondition Failed\"\n  },\n  PAYLOAD_TOO_LARGE: {\n    status: 413,\n    message: \"Payload Too Large\"\n  },\n  UNSUPPORTED_MEDIA_TYPE: {\n    status: 415,\n    message: \"Unsupported Media Type\"\n  },\n  UNPROCESSABLE_CONTENT: {\n    status: 422,\n    message: \"Unprocessable Content\"\n  },\n  TOO_MANY_REQUESTS: {\n    status: 429,\n    message: \"Too Many Requests\"\n  },\n  CLIENT_CLOSED_REQUEST: {\n    status: 499,\n    message: \"Client Closed Request\"\n  },\n  INTERNAL_SERVER_ERROR: {\n    status: 500,\n    message: \"Internal Server Error\"\n  },\n  NOT_IMPLEMENTED: {\n    status: 501,\n    message: \"Not Implemented\"\n  },\n  BAD_GATEWAY: {\n    status: 502,\n    message: \"Bad Gateway\"\n  },\n  SERVICE_UNAVAILABLE: {\n    status: 503,\n    message: \"Service Unavailable\"\n  },\n  GATEWAY_TIMEOUT: {\n    status: 504,\n    message: \"Gateway Timeout\"\n  }\n};\nfunction fallbackORPCErrorStatus(code, status) {\n  return status ?? COMMON_ORPC_ERROR_DEFS[code]?.status ?? 500;\n}\nfunction fallbackORPCErrorMessage(code, message) {\n  return message || COMMON_ORPC_ERROR_DEFS[code]?.message || code;\n}\nconst GLOBAL_ORPC_ERROR_CONSTRUCTORS_SYMBOL = Symbol.for(`__${ORPC_CLIENT_PACKAGE_NAME}@${ORPC_CLIENT_PACKAGE_VERSION}/error/ORPC_ERROR_CONSTRUCTORS__`);\nvoid (globalThis[GLOBAL_ORPC_ERROR_CONSTRUCTORS_SYMBOL] ??= /* @__PURE__ */ new WeakSet());\nconst globalORPCErrorConstructors = globalThis[GLOBAL_ORPC_ERROR_CONSTRUCTORS_SYMBOL];\nclass ORPCError extends Error {\n  defined;\n  code;\n  status;\n  data;\n  constructor(code, ...rest) {\n    const options = resolveMaybeOptionalOptions(rest);\n    if (options.status !== void 0 && !isORPCErrorStatus(options.status)) {\n      throw new Error(\"[ORPCError] Invalid error status code.\");\n    }\n    const message = fallbackORPCErrorMessage(code, options.message);\n    super(message, options);\n    this.code = code;\n    this.status = fallbackORPCErrorStatus(code, options.status);\n    this.defined = options.defined ?? false;\n    this.data = options.data;\n  }\n  toJSON() {\n    return {\n      defined: this.defined,\n      code: this.code,\n      status: this.status,\n      message: this.message,\n      data: this.data\n    };\n  }\n  /**\n   * Workaround for Next.js where different contexts use separate\n   * dependency graphs, causing multiple ORPCError constructors existing and breaking\n   * `instanceof` checks across contexts.\n   *\n   * This is particularly problematic with \"Optimized SSR\", where orpc-client\n   * executes in one context but is invoked from another. When an error is thrown\n   * in the execution context, `instanceof ORPCError` checks fail in the\n   * invocation context due to separate class constructors.\n   *\n   * @todo Remove this and related code if Next.js resolves the multiple dependency graph issue.\n   */\n  static [Symbol.hasInstance](instance) {\n    if (globalORPCErrorConstructors.has(this)) {\n      const constructor = getConstructor(instance);\n      if (constructor && globalORPCErrorConstructors.has(constructor)) {\n        return true;\n      }\n    }\n    return super[Symbol.hasInstance](instance);\n  }\n}\nglobalORPCErrorConstructors.add(ORPCError);\nfunction isDefinedError(error) {\n  return error instanceof ORPCError && error.defined;\n}\nfunction toORPCError(error) {\n  return error instanceof ORPCError ? error : new ORPCError(\"INTERNAL_SERVER_ERROR\", {\n    message: \"Internal server error\",\n    cause: error\n  });\n}\nfunction isORPCErrorStatus(status) {\n  return status < 200 || status >= 400;\n}\nfunction isORPCErrorJson(json) {\n  if (!isObject(json)) {\n    return false;\n  }\n  const validKeys = [\"defined\", \"code\", \"status\", \"message\", \"data\"];\n  if (Object.keys(json).some((k) => !validKeys.includes(k))) {\n    return false;\n  }\n  return \"defined\" in json && typeof json.defined === \"boolean\" && \"code\" in json && typeof json.code === \"string\" && \"status\" in json && typeof json.status === \"number\" && isORPCErrorStatus(json.status) && \"message\" in json && typeof json.message === \"string\";\n}\nfunction createORPCErrorFromJson(json, options = {}) {\n  return new ORPCError(json.code, {\n    ...options,\n    ...json\n  });\n}\n\nexport { COMMON_ORPC_ERROR_DEFS as C, ORPC_CLIENT_PACKAGE_NAME as O, ORPC_CLIENT_PACKAGE_VERSION as a, fallbackORPCErrorMessage as b, ORPCError as c, isORPCErrorStatus as d, isORPCErrorJson as e, fallbackORPCErrorStatus as f, createORPCErrorFromJson as g, isDefinedError as i, toORPCError as t };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 10018, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bclient%401.11.1/node_modules/%40orpc/client/dist/shared/client.BLtwTQUg.mjs"],"sourcesContent":["import { AsyncIteratorClass, isTypescriptObject } from '@orpc/shared';\nimport { getEventMeta, withEventMeta } from '@orpc/standard-server';\n\nfunction mapEventIterator(iterator, maps) {\n  const mapError = async (error) => {\n    let mappedError = await maps.error(error);\n    if (mappedError !== error) {\n      const meta = getEventMeta(error);\n      if (meta && isTypescriptObject(mappedError)) {\n        mappedError = withEventMeta(mappedError, meta);\n      }\n    }\n    return mappedError;\n  };\n  return new AsyncIteratorClass(async () => {\n    const { done, value } = await (async () => {\n      try {\n        return await iterator.next();\n      } catch (error) {\n        throw await mapError(error);\n      }\n    })();\n    let mappedValue = await maps.value(value, done);\n    if (mappedValue !== value) {\n      const meta = getEventMeta(value);\n      if (meta && isTypescriptObject(mappedValue)) {\n        mappedValue = withEventMeta(mappedValue, meta);\n      }\n    }\n    return { done, value: mappedValue };\n  }, async () => {\n    try {\n      await iterator.return?.();\n    } catch (error) {\n      throw await mapError(error);\n    }\n  });\n}\n\nexport { mapEventIterator as m };\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,SAAS,iBAAiB,QAAQ,EAAE,IAAI;IACtC,MAAM,WAAW,OAAO;QACtB,IAAI,cAAc,MAAM,KAAK,KAAK,CAAC;QACnC,IAAI,gBAAgB,OAAO;YACzB,MAAM,OAAO,IAAA,0PAAY,EAAC;YAC1B,IAAI,QAAQ,IAAA,wPAAkB,EAAC,cAAc;gBAC3C,cAAc,IAAA,2PAAa,EAAC,aAAa;YAC3C;QACF;QACA,OAAO;IACT;IACA,OAAO,IAAI,wPAAkB,CAAC;QAC5B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,CAAC;YAC7B,IAAI;gBACF,OAAO,MAAM,SAAS,IAAI;YAC5B,EAAE,OAAO,OAAO;gBACd,MAAM,MAAM,SAAS;YACvB;QACF,CAAC;QACD,IAAI,cAAc,MAAM,KAAK,KAAK,CAAC,OAAO;QAC1C,IAAI,gBAAgB,OAAO;YACzB,MAAM,OAAO,IAAA,0PAAY,EAAC;YAC1B,IAAI,QAAQ,IAAA,wPAAkB,EAAC,cAAc;gBAC3C,cAAc,IAAA,2PAAa,EAAC,aAAa;YAC3C;QACF;QACA,OAAO;YAAE;YAAM,OAAO;QAAY;IACpC,GAAG;QACD,IAAI;YACF,MAAM,SAAS,MAAM;QACvB,EAAE,OAAO,OAAO;YACd,MAAM,MAAM,SAAS;QACvB;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 10069, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bclient%401.11.1/node_modules/%40orpc/client/dist/index.mjs"],"sourcesContent":["import { preventNativeAwait, isTypescriptObject } from '@orpc/shared';\nexport { AsyncIteratorClass, EventPublisher, asyncIteratorToStream as eventIteratorToStream, asyncIteratorToUnproxiedDataStream as eventIteratorToUnproxiedDataStream, onError, onFinish, onStart, onSuccess, streamToAsyncIteratorClass as streamToEventIterator } from '@orpc/shared';\nimport { i as isDefinedError } from './shared/client.D5YVQlyY.mjs';\nexport { C as COMMON_ORPC_ERROR_DEFS, c as ORPCError, O as ORPC_CLIENT_PACKAGE_NAME, a as ORPC_CLIENT_PACKAGE_VERSION, g as createORPCErrorFromJson, b as fallbackORPCErrorMessage, f as fallbackORPCErrorStatus, e as isORPCErrorJson, d as isORPCErrorStatus, t as toORPCError } from './shared/client.D5YVQlyY.mjs';\nexport { m as mapEventIterator } from './shared/client.BLtwTQUg.mjs';\nexport { ErrorEvent } from '@orpc/standard-server';\n\nasync function safe(promise) {\n  try {\n    const output = await promise;\n    return Object.assign(\n      [null, output, false, true],\n      { error: null, data: output, isDefined: false, isSuccess: true }\n    );\n  } catch (e) {\n    const error = e;\n    if (isDefinedError(error)) {\n      return Object.assign(\n        [error, void 0, true, false],\n        { error, data: void 0, isDefined: true, isSuccess: false }\n      );\n    }\n    return Object.assign(\n      [error, void 0, false, false],\n      { error, data: void 0, isDefined: false, isSuccess: false }\n    );\n  }\n}\nfunction resolveFriendlyClientOptions(options) {\n  return {\n    ...options,\n    context: options.context ?? {}\n    // Context only optional if all fields are optional\n  };\n}\nfunction consumeEventIterator(iterator, options) {\n  void (async () => {\n    let onFinishState;\n    try {\n      const resolvedIterator = await iterator;\n      while (true) {\n        const { done, value } = await resolvedIterator.next();\n        if (done) {\n          const realValue = value;\n          onFinishState = [null, realValue, true];\n          options.onSuccess?.(realValue);\n          break;\n        }\n        options.onEvent(value);\n      }\n    } catch (error) {\n      onFinishState = [error, void 0, false];\n      if (!options.onError && !options.onFinish) {\n        throw error;\n      }\n      options.onError?.(error);\n    } finally {\n      options.onFinish?.(onFinishState);\n    }\n  })();\n  return async () => {\n    await (await iterator)?.return?.();\n  };\n}\n\nfunction createORPCClient(link, options = {}) {\n  const path = options.path ?? [];\n  const procedureClient = async (...[input, options2 = {}]) => {\n    return await link.call(path, input, resolveFriendlyClientOptions(options2));\n  };\n  const recursive = new Proxy(procedureClient, {\n    get(target, key) {\n      if (typeof key !== \"string\") {\n        return Reflect.get(target, key);\n      }\n      return createORPCClient(link, {\n        ...options,\n        path: [...path, key]\n      });\n    }\n  });\n  return preventNativeAwait(recursive);\n}\n\nfunction createSafeClient(client) {\n  const proxy = new Proxy((...args) => safe(client(...args)), {\n    get(_, prop, receiver) {\n      const value = Reflect.get(client, prop, receiver);\n      if (typeof prop !== \"string\") {\n        return value;\n      }\n      if (!isTypescriptObject(value)) {\n        return value;\n      }\n      return createSafeClient(value);\n    }\n  });\n  return proxy;\n}\n\nclass DynamicLink {\n  constructor(linkResolver) {\n    this.linkResolver = linkResolver;\n  }\n  async call(path, input, options) {\n    const resolvedLink = await this.linkResolver(options, path, input);\n    const output = await resolvedLink.call(path, input, options);\n    return output;\n  }\n}\n\nexport { DynamicLink, consumeEventIterator, createORPCClient, createSafeClient, isDefinedError, resolveFriendlyClientOptions, safe };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 10274, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bclient%401.11.1/node_modules/%40orpc/client/dist/shared/client.FREUPCkF.mjs"],"sourcesContent":["import { toArray, runWithSpan, ORPC_NAME, isAsyncIteratorObject, asyncIteratorWithSpan, intercept, getGlobalOtelConfig, isObject, value, stringifyJSON } from '@orpc/shared';\nimport { mergeStandardHeaders, ErrorEvent } from '@orpc/standard-server';\nimport { C as COMMON_ORPC_ERROR_DEFS, d as isORPCErrorStatus, e as isORPCErrorJson, g as createORPCErrorFromJson, c as ORPCError, t as toORPCError } from './client.D5YVQlyY.mjs';\nimport { toStandardHeaders as toStandardHeaders$1 } from '@orpc/standard-server-fetch';\nimport { m as mapEventIterator } from './client.BLtwTQUg.mjs';\n\nclass CompositeStandardLinkPlugin {\n  plugins;\n  constructor(plugins = []) {\n    this.plugins = [...plugins].sort((a, b) => (a.order ?? 0) - (b.order ?? 0));\n  }\n  init(options) {\n    for (const plugin of this.plugins) {\n      plugin.init?.(options);\n    }\n  }\n}\n\nclass StandardLink {\n  constructor(codec, sender, options = {}) {\n    this.codec = codec;\n    this.sender = sender;\n    const plugin = new CompositeStandardLinkPlugin(options.plugins);\n    plugin.init(options);\n    this.interceptors = toArray(options.interceptors);\n    this.clientInterceptors = toArray(options.clientInterceptors);\n  }\n  interceptors;\n  clientInterceptors;\n  call(path, input, options) {\n    return runWithSpan(\n      { name: `${ORPC_NAME}.${path.join(\"/\")}`, signal: options.signal },\n      (span) => {\n        span?.setAttribute(\"rpc.system\", ORPC_NAME);\n        span?.setAttribute(\"rpc.method\", path.join(\".\"));\n        if (isAsyncIteratorObject(input)) {\n          input = asyncIteratorWithSpan(\n            { name: \"consume_event_iterator_input\", signal: options.signal },\n            input\n          );\n        }\n        return intercept(this.interceptors, { ...options, path, input }, async ({ path: path2, input: input2, ...options2 }) => {\n          const otelConfig = getGlobalOtelConfig();\n          let otelContext;\n          const currentSpan = otelConfig?.trace.getActiveSpan() ?? span;\n          if (currentSpan && otelConfig) {\n            otelContext = otelConfig?.trace.setSpan(otelConfig.context.active(), currentSpan);\n          }\n          const request = await runWithSpan(\n            { name: \"encode_request\", context: otelContext },\n            () => this.codec.encode(path2, input2, options2)\n          );\n          const response = await intercept(\n            this.clientInterceptors,\n            { ...options2, input: input2, path: path2, request },\n            ({ input: input3, path: path3, request: request2, ...options3 }) => {\n              return runWithSpan(\n                { name: \"send_request\", signal: options3.signal, context: otelContext },\n                () => this.sender.call(request2, options3, path3, input3)\n              );\n            }\n          );\n          const output = await runWithSpan(\n            { name: \"decode_response\", context: otelContext },\n            () => this.codec.decode(response, options2, path2, input2)\n          );\n          if (isAsyncIteratorObject(output)) {\n            return asyncIteratorWithSpan(\n              { name: \"consume_event_iterator_output\", signal: options2.signal },\n              output\n            );\n          }\n          return output;\n        });\n      }\n    );\n  }\n}\n\nconst STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES = {\n  BIGINT: 0,\n  DATE: 1,\n  NAN: 2,\n  UNDEFINED: 3,\n  URL: 4,\n  REGEXP: 5,\n  SET: 6,\n  MAP: 7\n};\nclass StandardRPCJsonSerializer {\n  customSerializers;\n  constructor(options = {}) {\n    this.customSerializers = options.customJsonSerializers ?? [];\n    if (this.customSerializers.length !== new Set(this.customSerializers.map((custom) => custom.type)).size) {\n      throw new Error(\"Custom serializer type must be unique.\");\n    }\n  }\n  serialize(data, segments = [], meta = [], maps = [], blobs = []) {\n    for (const custom of this.customSerializers) {\n      if (custom.condition(data)) {\n        const result = this.serialize(custom.serialize(data), segments, meta, maps, blobs);\n        meta.push([custom.type, ...segments]);\n        return result;\n      }\n    }\n    if (data instanceof Blob) {\n      maps.push(segments);\n      blobs.push(data);\n      return [data, meta, maps, blobs];\n    }\n    if (typeof data === \"bigint\") {\n      meta.push([STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.BIGINT, ...segments]);\n      return [data.toString(), meta, maps, blobs];\n    }\n    if (data instanceof Date) {\n      meta.push([STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.DATE, ...segments]);\n      if (Number.isNaN(data.getTime())) {\n        return [null, meta, maps, blobs];\n      }\n      return [data.toISOString(), meta, maps, blobs];\n    }\n    if (Number.isNaN(data)) {\n      meta.push([STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.NAN, ...segments]);\n      return [null, meta, maps, blobs];\n    }\n    if (data instanceof URL) {\n      meta.push([STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.URL, ...segments]);\n      return [data.toString(), meta, maps, blobs];\n    }\n    if (data instanceof RegExp) {\n      meta.push([STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.REGEXP, ...segments]);\n      return [data.toString(), meta, maps, blobs];\n    }\n    if (data instanceof Set) {\n      const result = this.serialize(Array.from(data), segments, meta, maps, blobs);\n      meta.push([STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.SET, ...segments]);\n      return result;\n    }\n    if (data instanceof Map) {\n      const result = this.serialize(Array.from(data.entries()), segments, meta, maps, blobs);\n      meta.push([STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.MAP, ...segments]);\n      return result;\n    }\n    if (Array.isArray(data)) {\n      const json = data.map((v, i) => {\n        if (v === void 0) {\n          meta.push([STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.UNDEFINED, ...segments, i]);\n          return v;\n        }\n        return this.serialize(v, [...segments, i], meta, maps, blobs)[0];\n      });\n      return [json, meta, maps, blobs];\n    }\n    if (isObject(data)) {\n      const json = {};\n      for (const k in data) {\n        if (k === \"toJSON\" && typeof data[k] === \"function\") {\n          continue;\n        }\n        json[k] = this.serialize(data[k], [...segments, k], meta, maps, blobs)[0];\n      }\n      return [json, meta, maps, blobs];\n    }\n    return [data, meta, maps, blobs];\n  }\n  deserialize(json, meta, maps, getBlob) {\n    const ref = { data: json };\n    if (maps && getBlob) {\n      maps.forEach((segments, i) => {\n        let currentRef = ref;\n        let preSegment = \"data\";\n        segments.forEach((segment) => {\n          currentRef = currentRef[preSegment];\n          preSegment = segment;\n        });\n        currentRef[preSegment] = getBlob(i);\n      });\n    }\n    for (const item of meta) {\n      const type = item[0];\n      let currentRef = ref;\n      let preSegment = \"data\";\n      for (let i = 1; i < item.length; i++) {\n        currentRef = currentRef[preSegment];\n        preSegment = item[i];\n      }\n      for (const custom of this.customSerializers) {\n        if (custom.type === type) {\n          currentRef[preSegment] = custom.deserialize(currentRef[preSegment]);\n          break;\n        }\n      }\n      switch (type) {\n        case STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.BIGINT:\n          currentRef[preSegment] = BigInt(currentRef[preSegment]);\n          break;\n        case STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.DATE:\n          currentRef[preSegment] = new Date(currentRef[preSegment] ?? \"Invalid Date\");\n          break;\n        case STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.NAN:\n          currentRef[preSegment] = Number.NaN;\n          break;\n        case STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.UNDEFINED:\n          currentRef[preSegment] = void 0;\n          break;\n        case STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.URL:\n          currentRef[preSegment] = new URL(currentRef[preSegment]);\n          break;\n        case STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.REGEXP: {\n          const [, pattern, flags] = currentRef[preSegment].match(/^\\/(.*)\\/([a-z]*)$/);\n          currentRef[preSegment] = new RegExp(pattern, flags);\n          break;\n        }\n        case STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.SET:\n          currentRef[preSegment] = new Set(currentRef[preSegment]);\n          break;\n        case STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES.MAP:\n          currentRef[preSegment] = new Map(currentRef[preSegment]);\n          break;\n      }\n    }\n    return ref.data;\n  }\n}\n\nfunction toHttpPath(path) {\n  return `/${path.map(encodeURIComponent).join(\"/\")}`;\n}\nfunction toStandardHeaders(headers) {\n  if (typeof headers.forEach === \"function\") {\n    return toStandardHeaders$1(headers);\n  }\n  return headers;\n}\nfunction getMalformedResponseErrorCode(status) {\n  return Object.entries(COMMON_ORPC_ERROR_DEFS).find(([, def]) => def.status === status)?.[0] ?? \"MALFORMED_ORPC_ERROR_RESPONSE\";\n}\n\nclass StandardRPCLinkCodec {\n  constructor(serializer, options) {\n    this.serializer = serializer;\n    this.baseUrl = options.url;\n    this.maxUrlLength = options.maxUrlLength ?? 2083;\n    this.fallbackMethod = options.fallbackMethod ?? \"POST\";\n    this.expectedMethod = options.method ?? this.fallbackMethod;\n    this.headers = options.headers ?? {};\n  }\n  baseUrl;\n  maxUrlLength;\n  fallbackMethod;\n  expectedMethod;\n  headers;\n  async encode(path, input, options) {\n    let headers = toStandardHeaders(await value(this.headers, options, path, input));\n    if (options.lastEventId !== void 0) {\n      headers = mergeStandardHeaders(headers, { \"last-event-id\": options.lastEventId });\n    }\n    const expectedMethod = await value(this.expectedMethod, options, path, input);\n    const baseUrl = await value(this.baseUrl, options, path, input);\n    const url = new URL(baseUrl);\n    url.pathname = `${url.pathname.replace(/\\/$/, \"\")}${toHttpPath(path)}`;\n    const serialized = this.serializer.serialize(input);\n    if (expectedMethod === \"GET\" && !(serialized instanceof FormData) && !isAsyncIteratorObject(serialized)) {\n      const maxUrlLength = await value(this.maxUrlLength, options, path, input);\n      const getUrl = new URL(url);\n      getUrl.searchParams.append(\"data\", stringifyJSON(serialized));\n      if (getUrl.toString().length <= maxUrlLength) {\n        return {\n          body: void 0,\n          method: expectedMethod,\n          headers,\n          url: getUrl,\n          signal: options.signal\n        };\n      }\n    }\n    return {\n      url,\n      method: expectedMethod === \"GET\" ? this.fallbackMethod : expectedMethod,\n      headers,\n      body: serialized,\n      signal: options.signal\n    };\n  }\n  async decode(response) {\n    const isOk = !isORPCErrorStatus(response.status);\n    const deserialized = await (async () => {\n      let isBodyOk = false;\n      try {\n        const body = await response.body();\n        isBodyOk = true;\n        return this.serializer.deserialize(body);\n      } catch (error) {\n        if (!isBodyOk) {\n          throw new Error(\"Cannot parse response body, please check the response body and content-type.\", {\n            cause: error\n          });\n        }\n        throw new Error(\"Invalid RPC response format.\", {\n          cause: error\n        });\n      }\n    })();\n    if (!isOk) {\n      if (isORPCErrorJson(deserialized)) {\n        throw createORPCErrorFromJson(deserialized);\n      }\n      throw new ORPCError(getMalformedResponseErrorCode(response.status), {\n        status: response.status,\n        data: { ...response, body: deserialized }\n      });\n    }\n    return deserialized;\n  }\n}\n\nclass StandardRPCSerializer {\n  constructor(jsonSerializer) {\n    this.jsonSerializer = jsonSerializer;\n  }\n  serialize(data) {\n    if (isAsyncIteratorObject(data)) {\n      return mapEventIterator(data, {\n        value: async (value) => this.#serialize(value, false),\n        error: async (e) => {\n          return new ErrorEvent({\n            data: this.#serialize(toORPCError(e).toJSON(), false),\n            cause: e\n          });\n        }\n      });\n    }\n    return this.#serialize(data, true);\n  }\n  #serialize(data, enableFormData) {\n    const [json, meta_, maps, blobs] = this.jsonSerializer.serialize(data);\n    const meta = meta_.length === 0 ? void 0 : meta_;\n    if (!enableFormData || blobs.length === 0) {\n      return {\n        json,\n        meta\n      };\n    }\n    const form = new FormData();\n    form.set(\"data\", stringifyJSON({ json, meta, maps }));\n    blobs.forEach((blob, i) => {\n      form.set(i.toString(), blob);\n    });\n    return form;\n  }\n  deserialize(data) {\n    if (isAsyncIteratorObject(data)) {\n      return mapEventIterator(data, {\n        value: async (value) => this.#deserialize(value),\n        error: async (e) => {\n          if (!(e instanceof ErrorEvent)) {\n            return e;\n          }\n          const deserialized = this.#deserialize(e.data);\n          if (isORPCErrorJson(deserialized)) {\n            return createORPCErrorFromJson(deserialized, { cause: e });\n          }\n          return new ErrorEvent({\n            data: deserialized,\n            cause: e\n          });\n        }\n      });\n    }\n    return this.#deserialize(data);\n  }\n  #deserialize(data) {\n    if (data === void 0) {\n      return void 0;\n    }\n    if (!(data instanceof FormData)) {\n      return this.jsonSerializer.deserialize(data.json, data.meta ?? []);\n    }\n    const serialized = JSON.parse(data.get(\"data\"));\n    return this.jsonSerializer.deserialize(\n      serialized.json,\n      serialized.meta ?? [],\n      serialized.maps,\n      (i) => data.get(i.toString())\n    );\n  }\n}\n\nclass StandardRPCLink extends StandardLink {\n  constructor(linkClient, options) {\n    const jsonSerializer = new StandardRPCJsonSerializer(options);\n    const serializer = new StandardRPCSerializer(jsonSerializer);\n    const linkCodec = new StandardRPCLinkCodec(serializer, options);\n    super(linkCodec, linkClient, options);\n  }\n}\n\nexport { CompositeStandardLinkPlugin as C, StandardLink as S, STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES as a, StandardRPCJsonSerializer as b, StandardRPCLink as c, StandardRPCLinkCodec as d, StandardRPCSerializer as e, toStandardHeaders as f, getMalformedResponseErrorCode as g, toHttpPath as t };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 10796, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bclient%401.11.1/node_modules/%40orpc/client/dist/adapters/standard/index.mjs"],"sourcesContent":["export { C as CompositeStandardLinkPlugin, a as STANDARD_RPC_JSON_SERIALIZER_BUILT_IN_TYPES, S as StandardLink, b as StandardRPCJsonSerializer, c as StandardRPCLink, d as StandardRPCLinkCodec, e as StandardRPCSerializer, g as getMalformedResponseErrorCode, t as toHttpPath, f as toStandardHeaders } from '../../shared/client.FREUPCkF.mjs';\nimport '@orpc/shared';\nimport '@orpc/standard-server';\nimport '../../shared/client.D5YVQlyY.mjs';\nimport '@orpc/standard-server-fetch';\nimport '../../shared/client.BLtwTQUg.mjs';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 10894, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bstandard-server%401.11.1/node_modules/%40orpc/standard-server/dist/index.mjs"],"sourcesContent":["import { isTypescriptObject, AsyncIteratorClass, tryDecodeURIComponent, toArray, once, isAsyncIteratorObject, replicateAsyncIterator } from '@orpc/shared';\n\nclass EventEncoderError extends TypeError {\n}\nclass EventDecoderError extends TypeError {\n}\nclass ErrorEvent extends Error {\n  data;\n  constructor(options) {\n    super(options?.message ?? \"An error event was received\", options);\n    this.data = options?.data;\n  }\n}\n\nfunction decodeEventMessage(encoded) {\n  const lines = encoded.replace(/\\n+$/, \"\").split(/\\n/);\n  const message = {\n    data: void 0,\n    event: void 0,\n    id: void 0,\n    retry: void 0,\n    comments: []\n  };\n  for (const line of lines) {\n    const index = line.indexOf(\":\");\n    const key = index === -1 ? line : line.slice(0, index);\n    const value = index === -1 ? \"\" : line.slice(index + 1).replace(/^\\s/, \"\");\n    if (index === 0) {\n      message.comments.push(value);\n    } else if (key === \"data\") {\n      message.data ??= \"\";\n      message.data += `${value}\n`;\n    } else if (key === \"event\") {\n      message.event = value;\n    } else if (key === \"id\") {\n      message.id = value;\n    } else if (key === \"retry\") {\n      const maybeInteger = Number.parseInt(value);\n      if (Number.isInteger(maybeInteger) && maybeInteger >= 0 && maybeInteger.toString() === value) {\n        message.retry = maybeInteger;\n      }\n    }\n  }\n  message.data = message.data?.replace(/\\n$/, \"\");\n  return message;\n}\nclass EventDecoder {\n  constructor(options = {}) {\n    this.options = options;\n  }\n  incomplete = \"\";\n  feed(chunk) {\n    this.incomplete += chunk;\n    const lastCompleteIndex = this.incomplete.lastIndexOf(\"\\n\\n\");\n    if (lastCompleteIndex === -1) {\n      return;\n    }\n    const completes = this.incomplete.slice(0, lastCompleteIndex).split(/\\n\\n/);\n    this.incomplete = this.incomplete.slice(lastCompleteIndex + 2);\n    for (const encoded of completes) {\n      const message = decodeEventMessage(`${encoded}\n\n`);\n      if (this.options.onEvent) {\n        this.options.onEvent(message);\n      }\n    }\n    this.incomplete = \"\";\n  }\n  end() {\n    if (this.incomplete) {\n      throw new EventDecoderError(\"Event Iterator ended before complete\");\n    }\n  }\n}\nclass EventDecoderStream extends TransformStream {\n  constructor() {\n    let decoder;\n    super({\n      start(controller) {\n        decoder = new EventDecoder({\n          onEvent: (event) => {\n            controller.enqueue(event);\n          }\n        });\n      },\n      transform(chunk) {\n        decoder.feed(chunk);\n      },\n      flush() {\n        decoder.end();\n      }\n    });\n  }\n}\n\nfunction assertEventId(id) {\n  if (id.includes(\"\\n\")) {\n    throw new EventEncoderError(\"Event's id must not contain a newline character\");\n  }\n}\nfunction assertEventName(event) {\n  if (event.includes(\"\\n\")) {\n    throw new EventEncoderError(\"Event's event must not contain a newline character\");\n  }\n}\nfunction assertEventRetry(retry) {\n  if (!Number.isInteger(retry) || retry < 0) {\n    throw new EventEncoderError(\"Event's retry must be a integer and >= 0\");\n  }\n}\nfunction assertEventComment(comment) {\n  if (comment.includes(\"\\n\")) {\n    throw new EventEncoderError(\"Event's comment must not contain a newline character\");\n  }\n}\nfunction encodeEventData(data) {\n  const lines = data?.split(/\\n/) ?? [];\n  let output = \"\";\n  for (const line of lines) {\n    output += `data: ${line}\n`;\n  }\n  return output;\n}\nfunction encodeEventComments(comments) {\n  let output = \"\";\n  for (const comment of comments ?? []) {\n    assertEventComment(comment);\n    output += `: ${comment}\n`;\n  }\n  return output;\n}\nfunction encodeEventMessage(message) {\n  let output = \"\";\n  output += encodeEventComments(message.comments);\n  if (message.event !== void 0) {\n    assertEventName(message.event);\n    output += `event: ${message.event}\n`;\n  }\n  if (message.retry !== void 0) {\n    assertEventRetry(message.retry);\n    output += `retry: ${message.retry}\n`;\n  }\n  if (message.id !== void 0) {\n    assertEventId(message.id);\n    output += `id: ${message.id}\n`;\n  }\n  output += encodeEventData(message.data);\n  output += \"\\n\";\n  return output;\n}\n\nconst EVENT_SOURCE_META_SYMBOL = Symbol(\"ORPC_EVENT_SOURCE_META\");\nfunction withEventMeta(container, meta) {\n  if (meta.id === void 0 && meta.retry === void 0 && !meta.comments?.length) {\n    return container;\n  }\n  if (meta.id !== void 0) {\n    assertEventId(meta.id);\n  }\n  if (meta.retry !== void 0) {\n    assertEventRetry(meta.retry);\n  }\n  if (meta.comments !== void 0) {\n    for (const comment of meta.comments) {\n      assertEventComment(comment);\n    }\n  }\n  return new Proxy(container, {\n    get(target, prop, receiver) {\n      if (prop === EVENT_SOURCE_META_SYMBOL) {\n        return meta;\n      }\n      return Reflect.get(target, prop, receiver);\n    }\n  });\n}\nfunction getEventMeta(container) {\n  return isTypescriptObject(container) ? Reflect.get(container, EVENT_SOURCE_META_SYMBOL) : void 0;\n}\n\nclass HibernationEventIterator extends AsyncIteratorClass {\n  /**\n   * this property is not transferred to the client, so it should be optional for type safety\n   */\n  hibernationCallback;\n  constructor(hibernationCallback) {\n    super(async () => {\n      throw new Error(\"Cannot iterate over hibernating iterator directly\");\n    }, async (reason) => {\n      if (reason !== \"next\") {\n        throw new Error(\"Cannot cleanup hibernating iterator directly\");\n      }\n    });\n    this.hibernationCallback = hibernationCallback;\n  }\n}\n\nfunction generateContentDisposition(filename) {\n  const escapedFileName = filename.replace(/\"/g, '\\\\\"');\n  const encodedFilenameStar = encodeURIComponent(filename).replace(/['()*]/g, (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`).replace(/%(7C|60|5E)/g, (str, hex) => String.fromCharCode(Number.parseInt(hex, 16)));\n  return `inline; filename=\"${escapedFileName}\"; filename*=utf-8''${encodedFilenameStar}`;\n}\nfunction getFilenameFromContentDisposition(contentDisposition) {\n  const encodedFilenameStarMatch = contentDisposition.match(/filename\\*=(UTF-8'')?([^;]*)/i);\n  if (encodedFilenameStarMatch && typeof encodedFilenameStarMatch[2] === \"string\") {\n    return tryDecodeURIComponent(encodedFilenameStarMatch[2]);\n  }\n  const encodedFilenameMatch = contentDisposition.match(/filename=\"((?:\\\\\"|[^\"])*)\"/i);\n  if (encodedFilenameMatch && typeof encodedFilenameMatch[1] === \"string\") {\n    return encodedFilenameMatch[1].replace(/\\\\\"/g, '\"');\n  }\n}\nfunction mergeStandardHeaders(a, b) {\n  const merged = { ...a };\n  for (const key in b) {\n    if (Array.isArray(b[key])) {\n      merged[key] = [...toArray(merged[key]), ...b[key]];\n    } else if (b[key] !== void 0) {\n      if (Array.isArray(merged[key])) {\n        merged[key] = [...merged[key], b[key]];\n      } else if (merged[key] !== void 0) {\n        merged[key] = [merged[key], b[key]];\n      } else {\n        merged[key] = b[key];\n      }\n    }\n  }\n  return merged;\n}\nfunction flattenHeader(header) {\n  if (typeof header === \"string\" || header === void 0) {\n    return header;\n  }\n  if (header.length === 0) {\n    return void 0;\n  }\n  return header.join(\", \");\n}\nfunction replicateStandardLazyResponse(response, count) {\n  const replicated = [];\n  let bodyPromise;\n  let replicatedAsyncIteratorObjects;\n  for (let i = 0; i < count; i++) {\n    replicated.push({\n      ...response,\n      body: once(async () => {\n        const body = await (bodyPromise ??= response.body());\n        if (!isAsyncIteratorObject(body)) {\n          return body;\n        }\n        replicatedAsyncIteratorObjects ??= replicateAsyncIterator(body, count);\n        return replicatedAsyncIteratorObjects.shift();\n      })\n    });\n  }\n  return replicated;\n}\nfunction isEventIteratorHeaders(headers) {\n  return Boolean(flattenHeader(headers[\"content-type\"])?.startsWith(\"text/event-stream\") && flattenHeader(headers[\"content-disposition\"]) === void 0);\n}\n\nexport { ErrorEvent, EventDecoder, EventDecoderError, EventDecoderStream, EventEncoderError, HibernationEventIterator, assertEventComment, assertEventId, assertEventName, assertEventRetry, decodeEventMessage, encodeEventComments, encodeEventData, encodeEventMessage, flattenHeader, generateContentDisposition, getEventMeta, getFilenameFromContentDisposition, isEventIteratorHeaders, mergeStandardHeaders, replicateStandardLazyResponse, withEventMeta };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 11217, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bstandard-server%401.11.1/node_modules/%40orpc/standard-server/dist/batch/index.mjs"],"sourcesContent":["import { stringifyJSON, parseEmptyableJSON, AsyncIteratorClass, isAsyncIteratorObject, isObject } from '@orpc/shared';\n\nfunction toBatchAbortSignal(signals) {\n  const realSignals = signals.filter((signal) => signal !== void 0);\n  if (realSignals.length === 0 || realSignals.length !== signals.length) {\n    return void 0;\n  }\n  const controller = new AbortController();\n  const abortIfAllInputsAborted = () => {\n    if (realSignals.every((signal) => signal.aborted)) {\n      controller.abort();\n    }\n  };\n  abortIfAllInputsAborted();\n  for (const signal of realSignals) {\n    signal.addEventListener(\"abort\", () => {\n      abortIfAllInputsAborted();\n    }, {\n      once: true,\n      signal: controller.signal\n    });\n  }\n  return controller.signal;\n}\n\nfunction toBatchRequest(options) {\n  const url = new URL(options.url);\n  let body;\n  const batchRequestItems = options.requests.map((request) => ({\n    body: request.body,\n    headers: Object.keys(request.headers).length ? request.headers : void 0,\n    method: request.method === options.method ? void 0 : request.method,\n    url: request.url\n  }));\n  if (options.method === \"GET\") {\n    url.searchParams.append(\"batch\", stringifyJSON(batchRequestItems));\n  } else if (options.method === \"POST\") {\n    body = batchRequestItems;\n  }\n  return {\n    method: options.method,\n    url,\n    headers: options.headers,\n    body,\n    signal: toBatchAbortSignal(options.requests.map((request) => request.signal))\n  };\n}\nfunction parseBatchRequest(request) {\n  const items = request.method === \"GET\" ? parseEmptyableJSON(request.url.searchParams.getAll(\"batch\").at(-1)) : request.body;\n  if (!Array.isArray(items)) {\n    throw new TypeError(\"Invalid batch request\");\n  }\n  return items.map((item) => {\n    return {\n      method: item.method ?? request.method,\n      url: new URL(item.url),\n      headers: item.headers ?? {},\n      body: item.body,\n      signal: request.signal\n    };\n  });\n}\n\nfunction toBatchResponse(options) {\n  const mode = options.mode ?? \"streaming\";\n  const minifyResponseItem = (item) => {\n    return {\n      index: item.index,\n      status: item.status === options.status ? void 0 : item.status,\n      headers: Object.keys(item.headers).length ? item.headers : void 0,\n      body: item.body\n    };\n  };\n  if (mode === \"buffered\") {\n    return (async () => {\n      try {\n        const body = [];\n        for await (const item of options.body) {\n          body.push(minifyResponseItem(item));\n        }\n        return {\n          headers: options.headers,\n          status: options.status,\n          body\n        };\n      } finally {\n        await options.body.return?.();\n      }\n    })();\n  }\n  return {\n    headers: options.headers,\n    status: options.status,\n    body: new AsyncIteratorClass(\n      async () => {\n        const { done, value } = await options.body.next();\n        if (done) {\n          return { done, value };\n        }\n        return {\n          done,\n          value: {\n            index: value.index,\n            status: value.status === options.status ? void 0 : value.status,\n            headers: Object.keys(value.headers).length ? value.headers : void 0,\n            body: value.body\n          }\n        };\n      },\n      async (reason) => {\n        if (reason !== \"next\") {\n          await options.body.return?.();\n        }\n      }\n    )\n  };\n}\nfunction parseBatchResponse(response) {\n  const body = response.body;\n  if (isAsyncIteratorObject(body) || Array.isArray(body)) {\n    const iterator = (async function* () {\n      for await (const item of body) {\n        if (!isObject(item) || !(\"index\" in item) || typeof item.index !== \"number\") {\n          throw new TypeError(\"Invalid batch response\", {\n            cause: item\n          });\n        }\n        yield {\n          index: item.index,\n          status: item.status ?? response.status,\n          headers: item.headers ?? {},\n          body: item.body\n        };\n      }\n    })();\n    return new AsyncIteratorClass(\n      () => iterator.next(),\n      async (reason) => {\n        if (reason !== \"next\" && isAsyncIteratorObject(body)) {\n          await body.return?.();\n        }\n      }\n    );\n  }\n  throw new TypeError(\"Invalid batch response\", {\n    cause: response\n  });\n}\n\nexport { parseBatchRequest, parseBatchResponse, toBatchAbortSignal, toBatchRequest, toBatchResponse };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 11377, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bcontract%401.11.1/node_modules/%40orpc/contract/dist/shared/contract.D_dZrO__.mjs"],"sourcesContent":["import { fallbackORPCErrorStatus, ORPCError, isORPCErrorStatus } from '@orpc/client';\n\nclass ValidationError extends Error {\n  issues;\n  data;\n  constructor(options) {\n    super(options.message, options);\n    this.issues = options.issues;\n    this.data = options.data;\n  }\n}\nfunction mergeErrorMap(errorMap1, errorMap2) {\n  return { ...errorMap1, ...errorMap2 };\n}\nasync function validateORPCError(map, error) {\n  const { code, status, message, data, cause, defined } = error;\n  const config = map?.[error.code];\n  if (!config || fallbackORPCErrorStatus(error.code, config.status) !== error.status) {\n    return defined ? new ORPCError(code, { defined: false, status, message, data, cause }) : error;\n  }\n  if (!config.data) {\n    return defined ? error : new ORPCError(code, { defined: true, status, message, data, cause });\n  }\n  const validated = await config.data[\"~standard\"].validate(error.data);\n  if (validated.issues) {\n    return defined ? new ORPCError(code, { defined: false, status, message, data, cause }) : error;\n  }\n  return new ORPCError(code, { defined: true, status, message, data: validated.value, cause });\n}\n\nclass ContractProcedure {\n  /**\n   * This property holds the defined options for the contract procedure.\n   */\n  \"~orpc\";\n  constructor(def) {\n    if (def.route?.successStatus && isORPCErrorStatus(def.route.successStatus)) {\n      throw new Error(\"[ContractProcedure] Invalid successStatus.\");\n    }\n    if (Object.values(def.errorMap).some((val) => val && val.status && !isORPCErrorStatus(val.status))) {\n      throw new Error(\"[ContractProcedure] Invalid error status code.\");\n    }\n    this[\"~orpc\"] = def;\n  }\n}\nfunction isContractProcedure(item) {\n  if (item instanceof ContractProcedure) {\n    return true;\n  }\n  return (typeof item === \"object\" || typeof item === \"function\") && item !== null && \"~orpc\" in item && typeof item[\"~orpc\"] === \"object\" && item[\"~orpc\"] !== null && \"errorMap\" in item[\"~orpc\"] && \"route\" in item[\"~orpc\"] && \"meta\" in item[\"~orpc\"];\n}\n\nexport { ContractProcedure as C, ValidationError as V, isContractProcedure as i, mergeErrorMap as m, validateORPCError as v };\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;;AAEA,MAAM,wBAAwB;IAC5B,OAAO;IACP,KAAK;IACL,YAAY,OAAO,CAAE;QACnB,KAAK,CAAC,QAAQ,OAAO,EAAE;QACvB,IAAI,CAAC,MAAM,GAAG,QAAQ,MAAM;QAC5B,IAAI,CAAC,IAAI,GAAG,QAAQ,IAAI;IAC1B;AACF;AACA,SAAS,cAAc,SAAS,EAAE,SAAS;IACzC,OAAO;QAAE,GAAG,SAAS;QAAE,GAAG,SAAS;IAAC;AACtC;AACA,eAAe,kBAAkB,GAAG,EAAE,KAAK;IACzC,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IACxD,MAAM,SAAS,KAAK,CAAC,MAAM,IAAI,CAAC;IAChC,IAAI,CAAC,UAAU,IAAA,oTAAuB,EAAC,MAAM,IAAI,EAAE,OAAO,MAAM,MAAM,MAAM,MAAM,EAAE;QAClF,OAAO,UAAU,IAAI,wRAAS,CAAC,MAAM;YAAE,SAAS;YAAO;YAAQ;YAAS;YAAM;QAAM,KAAK;IAC3F;IACA,IAAI,CAAC,OAAO,IAAI,EAAE;QAChB,OAAO,UAAU,QAAQ,IAAI,wRAAS,CAAC,MAAM;YAAE,SAAS;YAAM;YAAQ;YAAS;YAAM;QAAM;IAC7F;IACA,MAAM,YAAY,MAAM,OAAO,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,MAAM,IAAI;IACpE,IAAI,UAAU,MAAM,EAAE;QACpB,OAAO,UAAU,IAAI,wRAAS,CAAC,MAAM;YAAE,SAAS;YAAO;YAAQ;YAAS;YAAM;QAAM,KAAK;IAC3F;IACA,OAAO,IAAI,wRAAS,CAAC,MAAM;QAAE,SAAS;QAAM;QAAQ;QAAS,MAAM,UAAU,KAAK;QAAE;IAAM;AAC5F;AAEA,MAAM;IACJ;;GAEC,GACD,QAAQ;IACR,YAAY,GAAG,CAAE;QACf,IAAI,IAAI,KAAK,EAAE,iBAAiB,IAAA,wSAAiB,EAAC,IAAI,KAAK,CAAC,aAAa,GAAG;YAC1E,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,OAAO,MAAM,CAAC,IAAI,QAAQ,EAAE,IAAI,CAAC,CAAC,MAAQ,OAAO,IAAI,MAAM,IAAI,CAAC,IAAA,wSAAiB,EAAC,IAAI,MAAM,IAAI;YAClG,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,CAAC,QAAQ,GAAG;IAClB;AACF;AACA,SAAS,oBAAoB,IAAI;IAC/B,IAAI,gBAAgB,mBAAmB;QACrC,OAAO;IACT;IACA,OAAO,CAAC,OAAO,SAAS,YAAY,OAAO,SAAS,UAAU,KAAK,SAAS,QAAQ,WAAW,QAAQ,OAAO,IAAI,CAAC,QAAQ,KAAK,YAAY,IAAI,CAAC,QAAQ,KAAK,QAAQ,cAAc,IAAI,CAAC,QAAQ,IAAI,WAAW,IAAI,CAAC,QAAQ,IAAI,UAAU,IAAI,CAAC,QAAQ;AAC1P","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 11473, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bcontract%401.11.1/node_modules/%40orpc/contract/dist/index.mjs"],"sourcesContent":["import { i as isContractProcedure, C as ContractProcedure, m as mergeErrorMap, V as ValidationError } from './shared/contract.D_dZrO__.mjs';\nexport { v as validateORPCError } from './shared/contract.D_dZrO__.mjs';\nimport { mapEventIterator, ORPCError } from '@orpc/client';\nexport { ORPCError } from '@orpc/client';\nimport { isAsyncIteratorObject, get, isTypescriptObject, isPropertyKey } from '@orpc/shared';\nexport { AsyncIteratorClass } from '@orpc/shared';\n\nfunction mergeMeta(meta1, meta2) {\n  return { ...meta1, ...meta2 };\n}\n\nfunction mergeRoute(a, b) {\n  return { ...a, ...b };\n}\nfunction prefixRoute(route, prefix) {\n  if (!route.path) {\n    return route;\n  }\n  return {\n    ...route,\n    path: `${prefix}${route.path}`\n  };\n}\nfunction unshiftTagRoute(route, tags) {\n  return {\n    ...route,\n    tags: [...tags, ...route.tags ?? []]\n  };\n}\nfunction mergePrefix(a, b) {\n  return a ? `${a}${b}` : b;\n}\nfunction mergeTags(a, b) {\n  return a ? [...a, ...b] : b;\n}\nfunction enhanceRoute(route, options) {\n  let router = route;\n  if (options.prefix) {\n    router = prefixRoute(router, options.prefix);\n  }\n  if (options.tags?.length) {\n    router = unshiftTagRoute(router, options.tags);\n  }\n  return router;\n}\n\nfunction getContractRouter(router, path) {\n  let current = router;\n  for (let i = 0; i < path.length; i++) {\n    const segment = path[i];\n    if (!current) {\n      return void 0;\n    }\n    if (isContractProcedure(current)) {\n      return void 0;\n    }\n    current = current[segment];\n  }\n  return current;\n}\nfunction enhanceContractRouter(router, options) {\n  if (isContractProcedure(router)) {\n    const enhanced2 = new ContractProcedure({\n      ...router[\"~orpc\"],\n      errorMap: mergeErrorMap(options.errorMap, router[\"~orpc\"].errorMap),\n      route: enhanceRoute(router[\"~orpc\"].route, options)\n    });\n    return enhanced2;\n  }\n  const enhanced = {};\n  for (const key in router) {\n    enhanced[key] = enhanceContractRouter(router[key], options);\n  }\n  return enhanced;\n}\nfunction minifyContractRouter(router) {\n  if (isContractProcedure(router)) {\n    const procedure = {\n      \"~orpc\": {\n        errorMap: {},\n        meta: router[\"~orpc\"].meta,\n        route: router[\"~orpc\"].route\n      }\n    };\n    return procedure;\n  }\n  const json = {};\n  for (const key in router) {\n    json[key] = minifyContractRouter(router[key]);\n  }\n  return json;\n}\n\nclass ContractBuilder extends ContractProcedure {\n  constructor(def) {\n    super(def);\n    this[\"~orpc\"].prefix = def.prefix;\n    this[\"~orpc\"].tags = def.tags;\n  }\n  /**\n   * Sets or overrides the initial meta.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/metadata Metadata Docs}\n   */\n  $meta(initialMeta) {\n    return new ContractBuilder({\n      ...this[\"~orpc\"],\n      meta: initialMeta\n    });\n  }\n  /**\n   * Sets or overrides the initial route.\n   * This option is typically relevant when integrating with OpenAPI.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/routing OpenAPI Routing Docs}\n   * @see {@link https://orpc.unnoq.com/docs/openapi/input-output-structure OpenAPI Input/Output Structure Docs}\n   */\n  $route(initialRoute) {\n    return new ContractBuilder({\n      ...this[\"~orpc\"],\n      route: initialRoute\n    });\n  }\n  /**\n   * Adds type-safe custom errors to the contract.\n   * The provided errors are spared-merged with any existing errors in the contract.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/error-handling#type%E2%80%90safe-error-handling Type-Safe Error Handling Docs}\n   */\n  errors(errors) {\n    return new ContractBuilder({\n      ...this[\"~orpc\"],\n      errorMap: mergeErrorMap(this[\"~orpc\"].errorMap, errors)\n    });\n  }\n  /**\n   * Sets or updates the metadata for the contract.\n   * The provided metadata is spared-merged with any existing metadata in the contract.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/metadata Metadata Docs}\n   */\n  meta(meta) {\n    return new ContractBuilder({\n      ...this[\"~orpc\"],\n      meta: mergeMeta(this[\"~orpc\"].meta, meta)\n    });\n  }\n  /**\n   * Sets or updates the route definition for the contract.\n   * The provided route is spared-merged with any existing route in the contract.\n   * This option is typically relevant when integrating with OpenAPI.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/routing OpenAPI Routing Docs}\n   * @see {@link https://orpc.unnoq.com/docs/openapi/input-output-structure OpenAPI Input/Output Structure Docs}\n   */\n  route(route) {\n    return new ContractBuilder({\n      ...this[\"~orpc\"],\n      route: mergeRoute(this[\"~orpc\"].route, route)\n    });\n  }\n  /**\n   * Defines the input validation schema for the contract.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/procedure#input-output-validation Input Validation Docs}\n   */\n  input(schema) {\n    return new ContractBuilder({\n      ...this[\"~orpc\"],\n      inputSchema: schema\n    });\n  }\n  /**\n   * Defines the output validation schema for the contract.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/procedure#input-output-validation Output Validation Docs}\n   */\n  output(schema) {\n    return new ContractBuilder({\n      ...this[\"~orpc\"],\n      outputSchema: schema\n    });\n  }\n  /**\n   * Prefixes all procedures in the contract router.\n   * The provided prefix is post-appended to any existing router prefix.\n   *\n   * @note This option does not affect procedures that do not define a path in their route definition.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/routing#route-prefixes OpenAPI Route Prefixes Docs}\n   */\n  prefix(prefix) {\n    return new ContractBuilder({\n      ...this[\"~orpc\"],\n      prefix: mergePrefix(this[\"~orpc\"].prefix, prefix)\n    });\n  }\n  /**\n   * Adds tags to all procedures in the contract router.\n   * This helpful when you want to group procedures together in the OpenAPI specification.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/openapi-specification#operation-metadata OpenAPI Operation Metadata Docs}\n   */\n  tag(...tags) {\n    return new ContractBuilder({\n      ...this[\"~orpc\"],\n      tags: mergeTags(this[\"~orpc\"].tags, tags)\n    });\n  }\n  /**\n   * Applies all of the previously defined options to the specified contract router.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/router#extending-router Extending Router Docs}\n   */\n  router(router) {\n    return enhanceContractRouter(router, this[\"~orpc\"]);\n  }\n}\nconst oc = new ContractBuilder({\n  errorMap: {},\n  route: {},\n  meta: {}\n});\n\nconst DEFAULT_CONFIG = {\n  defaultMethod: \"POST\",\n  defaultSuccessStatus: 200,\n  defaultSuccessDescription: \"OK\",\n  defaultInputStructure: \"compact\",\n  defaultOutputStructure: \"compact\"\n};\nfunction fallbackContractConfig(key, value) {\n  if (value === void 0) {\n    return DEFAULT_CONFIG[key];\n  }\n  return value;\n}\n\nconst EVENT_ITERATOR_DETAILS_SYMBOL = Symbol(\"ORPC_EVENT_ITERATOR_DETAILS\");\nfunction eventIterator(yields, returns) {\n  return {\n    \"~standard\": {\n      [EVENT_ITERATOR_DETAILS_SYMBOL]: { yields, returns },\n      vendor: \"orpc\",\n      version: 1,\n      validate(iterator) {\n        if (!isAsyncIteratorObject(iterator)) {\n          return { issues: [{ message: \"Expect event iterator\", path: [] }] };\n        }\n        const mapped = mapEventIterator(iterator, {\n          async value(value, done) {\n            const schema = done ? returns : yields;\n            if (!schema) {\n              return value;\n            }\n            const result = await schema[\"~standard\"].validate(value);\n            if (result.issues) {\n              throw new ORPCError(\"EVENT_ITERATOR_VALIDATION_FAILED\", {\n                message: \"Event iterator validation failed\",\n                cause: new ValidationError({\n                  issues: result.issues,\n                  message: \"Event iterator validation failed\",\n                  data: value\n                })\n              });\n            }\n            return result.value;\n          },\n          error: async (error) => error\n        });\n        return { value: mapped };\n      }\n    }\n  };\n}\nfunction getEventIteratorSchemaDetails(schema) {\n  if (schema === void 0) {\n    return void 0;\n  }\n  return schema[\"~standard\"][EVENT_ITERATOR_DETAILS_SYMBOL];\n}\n\nfunction inferRPCMethodFromContractRouter(contract) {\n  return (_, path) => {\n    const procedure = get(contract, path);\n    if (!isContractProcedure(procedure)) {\n      throw new Error(\n        `[inferRPCMethodFromContractRouter] No valid procedure found at path \"${path.join(\".\")}\". This may happen when the contract router is not properly configured.`\n      );\n    }\n    const method = fallbackContractConfig(\"defaultMethod\", procedure[\"~orpc\"].route.method);\n    return method === \"HEAD\" ? \"GET\" : method;\n  };\n}\n\nfunction type(...[map]) {\n  return {\n    \"~standard\": {\n      vendor: \"custom\",\n      version: 1,\n      async validate(value) {\n        if (map) {\n          return { value: await map(value) };\n        }\n        return { value };\n      }\n    }\n  };\n}\n\nfunction isSchemaIssue(issue) {\n  if (!isTypescriptObject(issue) || typeof issue.message !== \"string\") {\n    return false;\n  }\n  if (issue.path !== void 0) {\n    if (!Array.isArray(issue.path)) {\n      return false;\n    }\n    if (!issue.path.every((segment) => isPropertyKey(segment) || isTypescriptObject(segment) && isPropertyKey(segment.key))) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport { ContractBuilder, ContractProcedure, ValidationError, enhanceContractRouter, enhanceRoute, eventIterator, fallbackContractConfig, getContractRouter, getEventIteratorSchemaDetails, inferRPCMethodFromContractRouter, isContractProcedure, isSchemaIssue, mergeErrorMap, mergeMeta, mergePrefix, mergeRoute, mergeTags, minifyContractRouter, oc, prefixRoute, type, unshiftTagRoute };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 11888, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bserver%401.11.1/node_modules/%40orpc/server/dist/shared/server.Ds4HPpvH.mjs"],"sourcesContent":["import { isContractProcedure, validateORPCError, ValidationError, mergePrefix, mergeErrorMap, enhanceRoute } from '@orpc/contract';\nimport { resolveMaybeOptionalOptions, toArray, value, runWithSpan, intercept, isAsyncIteratorObject, overlayProxy, asyncIteratorWithSpan } from '@orpc/shared';\nimport { ORPCError, mapEventIterator } from '@orpc/client';\nimport { HibernationEventIterator } from '@orpc/standard-server';\n\nconst LAZY_SYMBOL = Symbol(\"ORPC_LAZY_SYMBOL\");\nfunction lazy(loader, meta = {}) {\n  return {\n    [LAZY_SYMBOL]: {\n      loader,\n      meta\n    }\n  };\n}\nfunction isLazy(item) {\n  return (typeof item === \"object\" || typeof item === \"function\") && item !== null && LAZY_SYMBOL in item;\n}\nfunction getLazyMeta(lazied) {\n  return lazied[LAZY_SYMBOL].meta;\n}\nfunction unlazy(lazied) {\n  return isLazy(lazied) ? lazied[LAZY_SYMBOL].loader() : Promise.resolve({ default: lazied });\n}\n\nfunction isStartWithMiddlewares(middlewares, compare) {\n  if (compare.length > middlewares.length) {\n    return false;\n  }\n  for (let i = 0; i < middlewares.length; i++) {\n    if (compare[i] === void 0) {\n      return true;\n    }\n    if (middlewares[i] !== compare[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction mergeMiddlewares(first, second, options) {\n  if (options.dedupeLeading && isStartWithMiddlewares(second, first)) {\n    return second;\n  }\n  return [...first, ...second];\n}\nfunction addMiddleware(middlewares, addition) {\n  return [...middlewares, addition];\n}\n\nclass Procedure {\n  /**\n   * This property holds the defined options.\n   */\n  \"~orpc\";\n  constructor(def) {\n    this[\"~orpc\"] = def;\n  }\n}\nfunction isProcedure(item) {\n  if (item instanceof Procedure) {\n    return true;\n  }\n  return isContractProcedure(item) && \"middlewares\" in item[\"~orpc\"] && \"inputValidationIndex\" in item[\"~orpc\"] && \"outputValidationIndex\" in item[\"~orpc\"] && \"handler\" in item[\"~orpc\"];\n}\n\nfunction mergeCurrentContext(context, other) {\n  return { ...context, ...other };\n}\n\nfunction createORPCErrorConstructorMap(errors) {\n  const proxy = new Proxy(errors, {\n    get(target, code) {\n      if (typeof code !== \"string\") {\n        return Reflect.get(target, code);\n      }\n      const item = (...rest) => {\n        const options = resolveMaybeOptionalOptions(rest);\n        const config = errors[code];\n        return new ORPCError(code, {\n          defined: Boolean(config),\n          status: config?.status,\n          message: options.message ?? config?.message,\n          data: options.data,\n          cause: options.cause\n        });\n      };\n      return item;\n    }\n  });\n  return proxy;\n}\n\nfunction middlewareOutputFn(output) {\n  return { output, context: {} };\n}\n\nfunction createProcedureClient(lazyableProcedure, ...rest) {\n  const options = resolveMaybeOptionalOptions(rest);\n  return async (...[input, callerOptions]) => {\n    const path = toArray(options.path);\n    const { default: procedure } = await unlazy(lazyableProcedure);\n    const clientContext = callerOptions?.context ?? {};\n    const context = await value(options.context ?? {}, clientContext);\n    const errors = createORPCErrorConstructorMap(procedure[\"~orpc\"].errorMap);\n    const validateError = async (e) => {\n      if (e instanceof ORPCError) {\n        return await validateORPCError(procedure[\"~orpc\"].errorMap, e);\n      }\n      return e;\n    };\n    try {\n      const output = await runWithSpan(\n        { name: \"call_procedure\", signal: callerOptions?.signal },\n        (span) => {\n          span?.setAttribute(\"procedure.path\", [...path]);\n          return intercept(\n            toArray(options.interceptors),\n            {\n              context,\n              input,\n              // input only optional when it undefinable so we can safely cast it\n              errors,\n              path,\n              procedure,\n              signal: callerOptions?.signal,\n              lastEventId: callerOptions?.lastEventId\n            },\n            (interceptorOptions) => executeProcedureInternal(interceptorOptions.procedure, interceptorOptions)\n          );\n        }\n      );\n      if (isAsyncIteratorObject(output)) {\n        if (output instanceof HibernationEventIterator) {\n          return output;\n        }\n        return overlayProxy(output, mapEventIterator(\n          asyncIteratorWithSpan(\n            { name: \"consume_event_iterator_output\", signal: callerOptions?.signal },\n            output\n          ),\n          {\n            value: (v) => v,\n            error: (e) => validateError(e)\n          }\n        ));\n      }\n      return output;\n    } catch (e) {\n      throw await validateError(e);\n    }\n  };\n}\nasync function validateInput(procedure, input) {\n  const schema = procedure[\"~orpc\"].inputSchema;\n  if (!schema) {\n    return input;\n  }\n  return runWithSpan(\n    { name: \"validate_input\" },\n    async () => {\n      const result = await schema[\"~standard\"].validate(input);\n      if (result.issues) {\n        throw new ORPCError(\"BAD_REQUEST\", {\n          message: \"Input validation failed\",\n          data: {\n            issues: result.issues\n          },\n          cause: new ValidationError({\n            message: \"Input validation failed\",\n            issues: result.issues,\n            data: input\n          })\n        });\n      }\n      return result.value;\n    }\n  );\n}\nasync function validateOutput(procedure, output) {\n  const schema = procedure[\"~orpc\"].outputSchema;\n  if (!schema) {\n    return output;\n  }\n  return runWithSpan(\n    { name: \"validate_output\" },\n    async () => {\n      const result = await schema[\"~standard\"].validate(output);\n      if (result.issues) {\n        throw new ORPCError(\"INTERNAL_SERVER_ERROR\", {\n          message: \"Output validation failed\",\n          cause: new ValidationError({\n            message: \"Output validation failed\",\n            issues: result.issues,\n            data: output\n          })\n        });\n      }\n      return result.value;\n    }\n  );\n}\nasync function executeProcedureInternal(procedure, options) {\n  const middlewares = procedure[\"~orpc\"].middlewares;\n  const inputValidationIndex = Math.min(Math.max(0, procedure[\"~orpc\"].inputValidationIndex), middlewares.length);\n  const outputValidationIndex = Math.min(Math.max(0, procedure[\"~orpc\"].outputValidationIndex), middlewares.length);\n  const next = async (index, context, input) => {\n    let currentInput = input;\n    if (index === inputValidationIndex) {\n      currentInput = await validateInput(procedure, currentInput);\n    }\n    const mid = middlewares[index];\n    const output = mid ? await runWithSpan(\n      { name: `middleware.${mid.name}`, signal: options.signal },\n      async (span) => {\n        span?.setAttribute(\"middleware.index\", index);\n        span?.setAttribute(\"middleware.name\", mid.name);\n        const result = await mid({\n          ...options,\n          context,\n          next: async (...[nextOptions]) => {\n            const nextContext = nextOptions?.context ?? {};\n            return {\n              output: await next(index + 1, mergeCurrentContext(context, nextContext), currentInput),\n              context: nextContext\n            };\n          }\n        }, currentInput, middlewareOutputFn);\n        return result.output;\n      }\n    ) : await runWithSpan(\n      { name: \"handler\", signal: options.signal },\n      () => procedure[\"~orpc\"].handler({ ...options, context, input: currentInput })\n    );\n    if (index === outputValidationIndex) {\n      return await validateOutput(procedure, output);\n    }\n    return output;\n  };\n  return next(0, options.context, options.input);\n}\n\nconst HIDDEN_ROUTER_CONTRACT_SYMBOL = Symbol(\"ORPC_HIDDEN_ROUTER_CONTRACT\");\nfunction setHiddenRouterContract(router, contract) {\n  return new Proxy(router, {\n    get(target, key) {\n      if (key === HIDDEN_ROUTER_CONTRACT_SYMBOL) {\n        return contract;\n      }\n      return Reflect.get(target, key);\n    }\n  });\n}\nfunction getHiddenRouterContract(router) {\n  return router[HIDDEN_ROUTER_CONTRACT_SYMBOL];\n}\n\nfunction getRouter(router, path) {\n  let current = router;\n  for (let i = 0; i < path.length; i++) {\n    const segment = path[i];\n    if (!current) {\n      return void 0;\n    }\n    if (isProcedure(current)) {\n      return void 0;\n    }\n    if (!isLazy(current)) {\n      current = current[segment];\n      continue;\n    }\n    const lazied = current;\n    const rest = path.slice(i);\n    return lazy(async () => {\n      const unwrapped = await unlazy(lazied);\n      const next = getRouter(unwrapped.default, rest);\n      return unlazy(next);\n    }, getLazyMeta(lazied));\n  }\n  return current;\n}\nfunction createAccessibleLazyRouter(lazied) {\n  const recursive = new Proxy(lazied, {\n    get(target, key) {\n      if (typeof key !== \"string\") {\n        return Reflect.get(target, key);\n      }\n      const next = getRouter(lazied, [key]);\n      return createAccessibleLazyRouter(next);\n    }\n  });\n  return recursive;\n}\nfunction enhanceRouter(router, options) {\n  if (isLazy(router)) {\n    const laziedMeta = getLazyMeta(router);\n    const enhancedPrefix = laziedMeta?.prefix ? mergePrefix(options.prefix, laziedMeta?.prefix) : options.prefix;\n    const enhanced2 = lazy(async () => {\n      const { default: unlaziedRouter } = await unlazy(router);\n      const enhanced3 = enhanceRouter(unlaziedRouter, options);\n      return unlazy(enhanced3);\n    }, {\n      ...laziedMeta,\n      prefix: enhancedPrefix\n    });\n    const accessible = createAccessibleLazyRouter(enhanced2);\n    return accessible;\n  }\n  if (isProcedure(router)) {\n    const newMiddlewares = mergeMiddlewares(options.middlewares, router[\"~orpc\"].middlewares, { dedupeLeading: options.dedupeLeadingMiddlewares });\n    const newMiddlewareAdded = newMiddlewares.length - router[\"~orpc\"].middlewares.length;\n    const enhanced2 = new Procedure({\n      ...router[\"~orpc\"],\n      route: enhanceRoute(router[\"~orpc\"].route, options),\n      errorMap: mergeErrorMap(options.errorMap, router[\"~orpc\"].errorMap),\n      middlewares: newMiddlewares,\n      inputValidationIndex: router[\"~orpc\"].inputValidationIndex + newMiddlewareAdded,\n      outputValidationIndex: router[\"~orpc\"].outputValidationIndex + newMiddlewareAdded\n    });\n    return enhanced2;\n  }\n  const enhanced = {};\n  for (const key in router) {\n    enhanced[key] = enhanceRouter(router[key], options);\n  }\n  return enhanced;\n}\nfunction traverseContractProcedures(options, callback, lazyOptions = []) {\n  let currentRouter = options.router;\n  const hiddenContract = getHiddenRouterContract(options.router);\n  if (hiddenContract !== void 0) {\n    currentRouter = hiddenContract;\n  }\n  if (isLazy(currentRouter)) {\n    lazyOptions.push({\n      router: currentRouter,\n      path: options.path\n    });\n  } else if (isContractProcedure(currentRouter)) {\n    callback({\n      contract: currentRouter,\n      path: options.path\n    });\n  } else {\n    for (const key in currentRouter) {\n      traverseContractProcedures(\n        {\n          router: currentRouter[key],\n          path: [...options.path, key]\n        },\n        callback,\n        lazyOptions\n      );\n    }\n  }\n  return lazyOptions;\n}\nasync function resolveContractProcedures(options, callback) {\n  const pending = [options];\n  for (const options2 of pending) {\n    const lazyOptions = traverseContractProcedures(options2, callback);\n    for (const options3 of lazyOptions) {\n      const { default: router } = await unlazy(options3.router);\n      pending.push({\n        router,\n        path: options3.path\n      });\n    }\n  }\n}\nasync function unlazyRouter(router) {\n  if (isProcedure(router)) {\n    return router;\n  }\n  const unlazied = {};\n  for (const key in router) {\n    const item = router[key];\n    const { default: unlaziedRouter } = await unlazy(item);\n    unlazied[key] = await unlazyRouter(unlaziedRouter);\n  }\n  return unlazied;\n}\n\nfunction createAssertedLazyProcedure(lazied) {\n  const lazyProcedure = lazy(async () => {\n    const { default: maybeProcedure } = await unlazy(lazied);\n    if (!isProcedure(maybeProcedure)) {\n      throw new Error(`\n            Expected a lazy<procedure> but got lazy<unknown>.\n            This should be caught by TypeScript compilation.\n            Please report this issue if this makes you feel uncomfortable.\n        `);\n    }\n    return { default: maybeProcedure };\n  }, getLazyMeta(lazied));\n  return lazyProcedure;\n}\nfunction createContractedProcedure(procedure, contract) {\n  return new Procedure({\n    ...procedure[\"~orpc\"],\n    errorMap: contract[\"~orpc\"].errorMap,\n    route: contract[\"~orpc\"].route,\n    meta: contract[\"~orpc\"].meta\n  });\n}\nfunction call(procedure, input, ...rest) {\n  const options = resolveMaybeOptionalOptions(rest);\n  return createProcedureClient(procedure, options)(input, options);\n}\n\nexport { LAZY_SYMBOL as L, Procedure as P, createContractedProcedure as a, addMiddleware as b, createProcedureClient as c, isLazy as d, enhanceRouter as e, createAssertedLazyProcedure as f, getRouter as g, createORPCErrorConstructorMap as h, isProcedure as i, getLazyMeta as j, middlewareOutputFn as k, lazy as l, mergeCurrentContext as m, isStartWithMiddlewares as n, mergeMiddlewares as o, call as p, getHiddenRouterContract as q, createAccessibleLazyRouter as r, setHiddenRouterContract as s, traverseContractProcedures as t, unlazy as u, resolveContractProcedures as v, unlazyRouter as w };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 12369, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bserver%401.11.1/node_modules/%40orpc/server/dist/index.mjs"],"sourcesContent":["import { mergeErrorMap, mergeMeta, mergeRoute, mergePrefix, mergeTags, isContractProcedure, getContractRouter, fallbackContractConfig } from '@orpc/contract';\nexport { ValidationError, eventIterator, type, validateORPCError } from '@orpc/contract';\nimport { P as Procedure, b as addMiddleware, c as createProcedureClient, e as enhanceRouter, l as lazy, s as setHiddenRouterContract, u as unlazy, g as getRouter, i as isProcedure, d as isLazy, f as createAssertedLazyProcedure } from './shared/server.Ds4HPpvH.mjs';\nexport { L as LAZY_SYMBOL, p as call, r as createAccessibleLazyRouter, a as createContractedProcedure, h as createORPCErrorConstructorMap, q as getHiddenRouterContract, j as getLazyMeta, n as isStartWithMiddlewares, m as mergeCurrentContext, o as mergeMiddlewares, k as middlewareOutputFn, v as resolveContractProcedures, t as traverseContractProcedures, w as unlazyRouter } from './shared/server.Ds4HPpvH.mjs';\nimport { toORPCError } from '@orpc/client';\nexport { ORPCError, isDefinedError, safe } from '@orpc/client';\nimport { isObject, resolveMaybeOptionalOptions } from '@orpc/shared';\nexport { AsyncIteratorClass, EventPublisher, asyncIteratorToStream as eventIteratorToStream, asyncIteratorToUnproxiedDataStream as eventIteratorToUnproxiedDataStream, onError, onFinish, onStart, onSuccess, streamToAsyncIteratorClass as streamToEventIterator } from '@orpc/shared';\nexport { getEventMeta, withEventMeta } from '@orpc/standard-server';\n\nconst DEFAULT_CONFIG = {\n  initialInputValidationIndex: 0,\n  initialOutputValidationIndex: 0,\n  dedupeLeadingMiddlewares: true\n};\nfunction fallbackConfig(key, value) {\n  if (value === void 0) {\n    return DEFAULT_CONFIG[key];\n  }\n  return value;\n}\n\nfunction decorateMiddleware(middleware) {\n  const decorated = ((...args) => middleware(...args));\n  decorated.mapInput = (mapInput) => {\n    const mapped = decorateMiddleware(\n      (options, input, ...rest) => middleware(options, mapInput(input), ...rest)\n    );\n    return mapped;\n  };\n  decorated.concat = (concatMiddleware, mapInput) => {\n    const mapped = mapInput ? decorateMiddleware(concatMiddleware).mapInput(mapInput) : concatMiddleware;\n    const concatted = decorateMiddleware((options, input, output, ...rest) => {\n      const merged = middleware({\n        ...options,\n        next: (...[nextOptions1]) => mapped({\n          ...options,\n          context: { ...options.context, ...nextOptions1?.context },\n          next: (...[nextOptions2]) => options.next({ context: { ...nextOptions1?.context, ...nextOptions2?.context } })\n        }, input, output, ...rest)\n      }, input, output, ...rest);\n      return merged;\n    });\n    return concatted;\n  };\n  return decorated;\n}\n\nfunction createActionableClient(client) {\n  const action = async (input) => {\n    try {\n      return [null, await client(input)];\n    } catch (error) {\n      if (error instanceof Error && \"digest\" in error && typeof error.digest === \"string\" && error.digest.startsWith(\"NEXT_\")) {\n        throw error;\n      }\n      if (error instanceof Response && \"options\" in error && isObject(error.options) || isObject(error) && error.isNotFound === true) {\n        throw error;\n      }\n      return [toORPCError(error).toJSON(), void 0];\n    }\n  };\n  return action;\n}\n\nclass DecoratedProcedure extends Procedure {\n  /**\n   * Adds type-safe custom errors.\n   * The provided errors are spared-merged with any existing errors.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/error-handling#type%E2%80%90safe-error-handling Type-Safe Error Handling Docs}\n   */\n  errors(errors) {\n    return new DecoratedProcedure({\n      ...this[\"~orpc\"],\n      errorMap: mergeErrorMap(this[\"~orpc\"].errorMap, errors)\n    });\n  }\n  /**\n   * Sets or updates the metadata.\n   * The provided metadata is spared-merged with any existing metadata.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/metadata Metadata Docs}\n   */\n  meta(meta) {\n    return new DecoratedProcedure({\n      ...this[\"~orpc\"],\n      meta: mergeMeta(this[\"~orpc\"].meta, meta)\n    });\n  }\n  /**\n   * Sets or updates the route definition.\n   * The provided route is spared-merged with any existing route.\n   * This option is typically relevant when integrating with OpenAPI.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/routing OpenAPI Routing Docs}\n   * @see {@link https://orpc.unnoq.com/docs/openapi/input-output-structure OpenAPI Input/Output Structure Docs}\n   */\n  route(route) {\n    return new DecoratedProcedure({\n      ...this[\"~orpc\"],\n      route: mergeRoute(this[\"~orpc\"].route, route)\n    });\n  }\n  use(middleware, mapInput) {\n    const mapped = mapInput ? decorateMiddleware(middleware).mapInput(mapInput) : middleware;\n    return new DecoratedProcedure({\n      ...this[\"~orpc\"],\n      middlewares: addMiddleware(this[\"~orpc\"].middlewares, mapped)\n    });\n  }\n  /**\n   * Make this procedure callable (works like a function while still being a procedure).\n   *\n   * @see {@link https://orpc.unnoq.com/docs/client/server-side Server-side Client Docs}\n   */\n  callable(...rest) {\n    const client = createProcedureClient(this, ...rest);\n    return new Proxy(client, {\n      get: (target, key) => {\n        return Reflect.has(this, key) ? Reflect.get(this, key) : Reflect.get(target, key);\n      },\n      has: (target, key) => {\n        return Reflect.has(this, key) || Reflect.has(target, key);\n      }\n    });\n  }\n  /**\n   * Make this procedure compatible with server action.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/server-action Server Action Docs}\n   */\n  actionable(...rest) {\n    const action = createActionableClient(createProcedureClient(this, ...rest));\n    return new Proxy(action, {\n      get: (target, key) => {\n        return Reflect.has(this, key) ? Reflect.get(this, key) : Reflect.get(target, key);\n      },\n      has: (target, key) => {\n        return Reflect.has(this, key) || Reflect.has(target, key);\n      }\n    });\n  }\n}\n\nclass Builder {\n  /**\n   * This property holds the defined options.\n   */\n  \"~orpc\";\n  constructor(def) {\n    this[\"~orpc\"] = def;\n  }\n  /**\n   * Sets or overrides the config.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/client/server-side#middlewares-order Middlewares Order Docs}\n   * @see {@link https://orpc.unnoq.com/docs/best-practices/dedupe-middleware#configuration Dedupe Middleware Docs}\n   */\n  $config(config) {\n    const inputValidationCount = this[\"~orpc\"].inputValidationIndex - fallbackConfig(\"initialInputValidationIndex\", this[\"~orpc\"].config.initialInputValidationIndex);\n    const outputValidationCount = this[\"~orpc\"].outputValidationIndex - fallbackConfig(\"initialOutputValidationIndex\", this[\"~orpc\"].config.initialOutputValidationIndex);\n    return new Builder({\n      ...this[\"~orpc\"],\n      config,\n      dedupeLeadingMiddlewares: fallbackConfig(\"dedupeLeadingMiddlewares\", config.dedupeLeadingMiddlewares),\n      inputValidationIndex: fallbackConfig(\"initialInputValidationIndex\", config.initialInputValidationIndex) + inputValidationCount,\n      outputValidationIndex: fallbackConfig(\"initialOutputValidationIndex\", config.initialOutputValidationIndex) + outputValidationCount\n    });\n  }\n  /**\n   * Set or override the initial context.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/context Context Docs}\n   */\n  $context() {\n    return new Builder({\n      ...this[\"~orpc\"],\n      middlewares: [],\n      inputValidationIndex: fallbackConfig(\"initialInputValidationIndex\", this[\"~orpc\"].config.initialInputValidationIndex),\n      outputValidationIndex: fallbackConfig(\"initialOutputValidationIndex\", this[\"~orpc\"].config.initialOutputValidationIndex)\n    });\n  }\n  /**\n   * Sets or overrides the initial meta.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/metadata Metadata Docs}\n   */\n  $meta(initialMeta) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      meta: initialMeta\n    });\n  }\n  /**\n   * Sets or overrides the initial route.\n   * This option is typically relevant when integrating with OpenAPI.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/routing OpenAPI Routing Docs}\n   * @see {@link https://orpc.unnoq.com/docs/openapi/input-output-structure OpenAPI Input/Output Structure Docs}\n   */\n  $route(initialRoute) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      route: initialRoute\n    });\n  }\n  /**\n   * Sets or overrides the initial input schema.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/procedure#initial-configuration Initial Procedure Configuration Docs}\n   */\n  $input(initialInputSchema) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      inputSchema: initialInputSchema\n    });\n  }\n  /**\n   * Creates a middleware.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/middleware Middleware Docs}\n   */\n  middleware(middleware) {\n    return decorateMiddleware(middleware);\n  }\n  /**\n   * Adds type-safe custom errors.\n   * The provided errors are spared-merged with any existing errors.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/error-handling#type%E2%80%90safe-error-handling Type-Safe Error Handling Docs}\n   */\n  errors(errors) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      errorMap: mergeErrorMap(this[\"~orpc\"].errorMap, errors)\n    });\n  }\n  use(middleware, mapInput) {\n    const mapped = mapInput ? decorateMiddleware(middleware).mapInput(mapInput) : middleware;\n    return new Builder({\n      ...this[\"~orpc\"],\n      middlewares: addMiddleware(this[\"~orpc\"].middlewares, mapped)\n    });\n  }\n  /**\n   * Sets or updates the metadata.\n   * The provided metadata is spared-merged with any existing metadata.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/metadata Metadata Docs}\n   */\n  meta(meta) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      meta: mergeMeta(this[\"~orpc\"].meta, meta)\n    });\n  }\n  /**\n   * Sets or updates the route definition.\n   * The provided route is spared-merged with any existing route.\n   * This option is typically relevant when integrating with OpenAPI.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/routing OpenAPI Routing Docs}\n   * @see {@link https://orpc.unnoq.com/docs/openapi/input-output-structure OpenAPI Input/Output Structure Docs}\n   */\n  route(route) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      route: mergeRoute(this[\"~orpc\"].route, route)\n    });\n  }\n  /**\n   * Defines the input validation schema.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/procedure#input-output-validation Input Validation Docs}\n   */\n  input(schema) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      inputSchema: schema,\n      inputValidationIndex: fallbackConfig(\"initialInputValidationIndex\", this[\"~orpc\"].config.initialInputValidationIndex) + this[\"~orpc\"].middlewares.length\n    });\n  }\n  /**\n   * Defines the output validation schema.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/procedure#input-output-validation Output Validation Docs}\n   */\n  output(schema) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      outputSchema: schema,\n      outputValidationIndex: fallbackConfig(\"initialOutputValidationIndex\", this[\"~orpc\"].config.initialOutputValidationIndex) + this[\"~orpc\"].middlewares.length\n    });\n  }\n  /**\n   * Defines the handler of the procedure.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/procedure Procedure Docs}\n   */\n  handler(handler) {\n    return new DecoratedProcedure({\n      ...this[\"~orpc\"],\n      handler\n    });\n  }\n  /**\n   * Prefixes all procedures in the router.\n   * The provided prefix is post-appended to any existing router prefix.\n   *\n   * @note This option does not affect procedures that do not define a path in their route definition.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/routing#route-prefixes OpenAPI Route Prefixes Docs}\n   */\n  prefix(prefix) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      prefix: mergePrefix(this[\"~orpc\"].prefix, prefix)\n    });\n  }\n  /**\n   * Adds tags to all procedures in the router.\n   * This helpful when you want to group procedures together in the OpenAPI specification.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/openapi-specification#operation-metadata OpenAPI Operation Metadata Docs}\n   */\n  tag(...tags) {\n    return new Builder({\n      ...this[\"~orpc\"],\n      tags: mergeTags(this[\"~orpc\"].tags, tags)\n    });\n  }\n  /**\n   * Applies all of the previously defined options to the specified router.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/router#extending-router Extending Router Docs}\n   */\n  router(router) {\n    return enhanceRouter(router, this[\"~orpc\"]);\n  }\n  /**\n   * Create a lazy router\n   * And applies all of the previously defined options to the specified router.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/router#extending-router Extending Router Docs}\n   */\n  lazy(loader) {\n    return enhanceRouter(lazy(loader), this[\"~orpc\"]);\n  }\n}\nconst os = new Builder({\n  config: {},\n  route: {},\n  meta: {},\n  errorMap: {},\n  inputValidationIndex: fallbackConfig(\"initialInputValidationIndex\"),\n  outputValidationIndex: fallbackConfig(\"initialOutputValidationIndex\"),\n  middlewares: [],\n  dedupeLeadingMiddlewares: true\n});\n\nfunction implementerInternal(contract, config, middlewares) {\n  if (isContractProcedure(contract)) {\n    const impl2 = new Builder({\n      ...contract[\"~orpc\"],\n      config,\n      middlewares,\n      inputValidationIndex: fallbackConfig(\"initialInputValidationIndex\", config?.initialInputValidationIndex) + middlewares.length,\n      outputValidationIndex: fallbackConfig(\"initialOutputValidationIndex\", config?.initialOutputValidationIndex) + middlewares.length,\n      dedupeLeadingMiddlewares: fallbackConfig(\"dedupeLeadingMiddlewares\", config.dedupeLeadingMiddlewares)\n    });\n    return impl2;\n  }\n  const impl = new Proxy(contract, {\n    get: (target, key) => {\n      if (typeof key !== \"string\") {\n        return Reflect.get(target, key);\n      }\n      let method;\n      if (key === \"middleware\") {\n        method = (mid) => decorateMiddleware(mid);\n      } else if (key === \"use\") {\n        method = (mid) => {\n          return implementerInternal(\n            contract,\n            config,\n            addMiddleware(middlewares, mid)\n          );\n        };\n      } else if (key === \"router\") {\n        method = (router) => {\n          const adapted = enhanceRouter(router, {\n            middlewares,\n            errorMap: {},\n            prefix: void 0,\n            tags: void 0,\n            dedupeLeadingMiddlewares: fallbackConfig(\"dedupeLeadingMiddlewares\", config.dedupeLeadingMiddlewares)\n          });\n          return setHiddenRouterContract(adapted, contract);\n        };\n      } else if (key === \"lazy\") {\n        method = (loader) => {\n          const adapted = enhanceRouter(lazy(loader), {\n            middlewares,\n            errorMap: {},\n            prefix: void 0,\n            tags: void 0,\n            dedupeLeadingMiddlewares: fallbackConfig(\"dedupeLeadingMiddlewares\", config.dedupeLeadingMiddlewares)\n          });\n          return setHiddenRouterContract(adapted, contract);\n        };\n      }\n      const next = getContractRouter(target, [key]);\n      if (!next) {\n        return method ?? next;\n      }\n      const nextImpl = implementerInternal(next, config, middlewares);\n      if (method) {\n        return new Proxy(method, {\n          get(_, key2) {\n            return Reflect.get(nextImpl, key2);\n          }\n        });\n      }\n      return nextImpl;\n    }\n  });\n  return impl;\n}\nfunction implement(contract, config = {}) {\n  const implInternal = implementerInternal(contract, config, []);\n  const impl = new Proxy(implInternal, {\n    get: (target, key) => {\n      let method;\n      if (key === \"$context\") {\n        method = () => impl;\n      } else if (key === \"$config\") {\n        method = (config2) => implement(contract, config2);\n      }\n      const next = Reflect.get(target, key);\n      if (!method || !next || typeof next !== \"function\" && typeof next !== \"object\") {\n        return method || next;\n      }\n      return new Proxy(method, {\n        get(_, key2) {\n          return Reflect.get(next, key2);\n        }\n      });\n    }\n  });\n  return impl;\n}\n\nfunction inferRPCMethodFromRouter(router) {\n  return async (_, path) => {\n    const { default: procedure } = await unlazy(getRouter(router, path));\n    if (!isProcedure(procedure)) {\n      throw new Error(\n        `[inferRPCMethodFromRouter] No valid procedure found at path \"${path.join(\".\")}\". This may happen when the router is not properly configured.`\n      );\n    }\n    const method = fallbackContractConfig(\"defaultMethod\", procedure[\"~orpc\"].route.method);\n    return method === \"HEAD\" ? \"GET\" : method;\n  };\n}\n\nfunction createRouterClient(router, ...rest) {\n  const options = resolveMaybeOptionalOptions(rest);\n  if (isProcedure(router)) {\n    const caller = createProcedureClient(router, options);\n    return caller;\n  }\n  const procedureCaller = isLazy(router) ? createProcedureClient(createAssertedLazyProcedure(router), options) : {};\n  const recursive = new Proxy(procedureCaller, {\n    get(target, key) {\n      if (typeof key !== \"string\") {\n        return Reflect.get(target, key);\n      }\n      const next = getRouter(router, [key]);\n      if (!next) {\n        return Reflect.get(target, key);\n      }\n      return createRouterClient(next, {\n        ...rest[0],\n        path: [...rest[0]?.path ?? [], key]\n      });\n    }\n  });\n  return recursive;\n}\n\nexport { Builder, DecoratedProcedure, Procedure, addMiddleware, createActionableClient, createAssertedLazyProcedure, createProcedureClient, createRouterClient, decorateMiddleware, enhanceRouter, fallbackConfig, getRouter, implement, implementerInternal, inferRPCMethodFromRouter, isLazy, isProcedure, lazy, os, setHiddenRouterContract, unlazy };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 12877, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bserver%401.11.1/node_modules/%40orpc/server/dist/shared/server.DZ5BIITo.mjs"],"sourcesContent":["function resolveFriendlyStandardHandleOptions(options) {\n  return {\n    ...options,\n    context: options.context ?? {}\n    // Context only optional if all fields are optional\n  };\n}\n\nexport { resolveFriendlyStandardHandleOptions as r };\n"],"names":[],"mappings":";;;;AAAA,SAAS,qCAAqC,OAAO;IACnD,OAAO;QACL,GAAG,OAAO;QACV,SAAS,QAAQ,OAAO,IAAI,CAAC;IAE/B;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 12892, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bserver%401.11.1/node_modules/%40orpc/server/dist/shared/server.Bxx6tqNe.mjs"],"sourcesContent":["import { toHttpPath, StandardRPCJsonSerializer, StandardRPCSerializer } from '@orpc/client/standard';\nimport { ORPCError, toORPCError } from '@orpc/client';\nimport { toArray, intercept, runWithSpan, ORPC_NAME, isAsyncIteratorObject, asyncIteratorWithSpan, setSpanError, parseEmptyableJSON, NullProtoObj, value } from '@orpc/shared';\nimport { flattenHeader } from '@orpc/standard-server';\nimport { c as createProcedureClient, t as traverseContractProcedures, i as isProcedure, u as unlazy, g as getRouter, a as createContractedProcedure } from './server.Ds4HPpvH.mjs';\n\nclass CompositeStandardHandlerPlugin {\n  plugins;\n  constructor(plugins = []) {\n    this.plugins = [...plugins].sort((a, b) => (a.order ?? 0) - (b.order ?? 0));\n  }\n  init(options, router) {\n    for (const plugin of this.plugins) {\n      plugin.init?.(options, router);\n    }\n  }\n}\n\nclass StandardHandler {\n  constructor(router, matcher, codec, options) {\n    this.matcher = matcher;\n    this.codec = codec;\n    const plugins = new CompositeStandardHandlerPlugin(options.plugins);\n    plugins.init(options, router);\n    this.interceptors = toArray(options.interceptors);\n    this.clientInterceptors = toArray(options.clientInterceptors);\n    this.rootInterceptors = toArray(options.rootInterceptors);\n    this.matcher.init(router);\n  }\n  interceptors;\n  clientInterceptors;\n  rootInterceptors;\n  async handle(request, options) {\n    const prefix = options.prefix?.replace(/\\/$/, \"\") || void 0;\n    if (prefix && !request.url.pathname.startsWith(`${prefix}/`) && request.url.pathname !== prefix) {\n      return { matched: false, response: void 0 };\n    }\n    return intercept(\n      this.rootInterceptors,\n      { ...options, request, prefix },\n      async (interceptorOptions) => {\n        return runWithSpan(\n          { name: `${request.method} ${request.url.pathname}` },\n          async (span) => {\n            let step;\n            try {\n              return await intercept(\n                this.interceptors,\n                interceptorOptions,\n                async ({ request: request2, context, prefix: prefix2 }) => {\n                  const method = request2.method;\n                  const url = request2.url;\n                  const pathname = prefix2 ? url.pathname.replace(prefix2, \"\") : url.pathname;\n                  const match = await runWithSpan(\n                    { name: \"find_procedure\" },\n                    () => this.matcher.match(method, `/${pathname.replace(/^\\/|\\/$/g, \"\")}`)\n                  );\n                  if (!match) {\n                    return { matched: false, response: void 0 };\n                  }\n                  span?.updateName(`${ORPC_NAME}.${match.path.join(\"/\")}`);\n                  span?.setAttribute(\"rpc.system\", ORPC_NAME);\n                  span?.setAttribute(\"rpc.method\", match.path.join(\".\"));\n                  step = \"decode_input\";\n                  let input = await runWithSpan(\n                    { name: \"decode_input\" },\n                    () => this.codec.decode(request2, match.params, match.procedure)\n                  );\n                  step = void 0;\n                  if (isAsyncIteratorObject(input)) {\n                    input = asyncIteratorWithSpan(\n                      { name: \"consume_event_iterator_input\", signal: request2.signal },\n                      input\n                    );\n                  }\n                  const client = createProcedureClient(match.procedure, {\n                    context,\n                    path: match.path,\n                    interceptors: this.clientInterceptors\n                  });\n                  step = \"call_procedure\";\n                  const output = await client(input, {\n                    signal: request2.signal,\n                    lastEventId: flattenHeader(request2.headers[\"last-event-id\"])\n                  });\n                  step = void 0;\n                  const response = this.codec.encode(output, match.procedure);\n                  return {\n                    matched: true,\n                    response\n                  };\n                }\n              );\n            } catch (e) {\n              if (step !== \"call_procedure\") {\n                setSpanError(span, e);\n              }\n              const error = step === \"decode_input\" && !(e instanceof ORPCError) ? new ORPCError(\"BAD_REQUEST\", {\n                message: `Malformed request. Ensure the request body is properly formatted and the 'Content-Type' header is set correctly.`,\n                cause: e\n              }) : toORPCError(e);\n              const response = this.codec.encodeError(error);\n              return {\n                matched: true,\n                response\n              };\n            }\n          }\n        );\n      }\n    );\n  }\n}\n\nclass StandardRPCCodec {\n  constructor(serializer) {\n    this.serializer = serializer;\n  }\n  async decode(request, _params, _procedure) {\n    const serialized = request.method === \"GET\" ? parseEmptyableJSON(request.url.searchParams.getAll(\"data\").at(-1)) : await request.body();\n    return this.serializer.deserialize(serialized);\n  }\n  encode(output, _procedure) {\n    return {\n      status: 200,\n      headers: {},\n      body: this.serializer.serialize(output)\n    };\n  }\n  encodeError(error) {\n    return {\n      status: error.status,\n      headers: {},\n      body: this.serializer.serialize(error.toJSON())\n    };\n  }\n}\n\nclass StandardRPCMatcher {\n  filter;\n  tree = new NullProtoObj();\n  pendingRouters = [];\n  constructor(options = {}) {\n    this.filter = options.filter ?? true;\n  }\n  init(router, path = []) {\n    const laziedOptions = traverseContractProcedures({ router, path }, (traverseOptions) => {\n      if (!value(this.filter, traverseOptions)) {\n        return;\n      }\n      const { path: path2, contract } = traverseOptions;\n      const httpPath = toHttpPath(path2);\n      if (isProcedure(contract)) {\n        this.tree[httpPath] = {\n          path: path2,\n          contract,\n          procedure: contract,\n          // this mean dev not used contract-first so we can used contract as procedure directly\n          router\n        };\n      } else {\n        this.tree[httpPath] = {\n          path: path2,\n          contract,\n          procedure: void 0,\n          router\n        };\n      }\n    });\n    this.pendingRouters.push(...laziedOptions.map((option) => ({\n      ...option,\n      httpPathPrefix: toHttpPath(option.path)\n    })));\n  }\n  async match(_method, pathname) {\n    if (this.pendingRouters.length) {\n      const newPendingRouters = [];\n      for (const pendingRouter of this.pendingRouters) {\n        if (pathname.startsWith(pendingRouter.httpPathPrefix)) {\n          const { default: router } = await unlazy(pendingRouter.router);\n          this.init(router, pendingRouter.path);\n        } else {\n          newPendingRouters.push(pendingRouter);\n        }\n      }\n      this.pendingRouters = newPendingRouters;\n    }\n    const match = this.tree[pathname];\n    if (!match) {\n      return void 0;\n    }\n    if (!match.procedure) {\n      const { default: maybeProcedure } = await unlazy(getRouter(match.router, match.path));\n      if (!isProcedure(maybeProcedure)) {\n        throw new Error(`\n          [Contract-First] Missing or invalid implementation for procedure at path: ${toHttpPath(match.path)}.\n          Ensure that the procedure is correctly defined and matches the expected contract.\n        `);\n      }\n      match.procedure = createContractedProcedure(maybeProcedure, match.contract);\n    }\n    return {\n      path: match.path,\n      procedure: match.procedure\n    };\n  }\n}\n\nclass StandardRPCHandler extends StandardHandler {\n  constructor(router, options = {}) {\n    const jsonSerializer = new StandardRPCJsonSerializer(options);\n    const serializer = new StandardRPCSerializer(jsonSerializer);\n    const matcher = new StandardRPCMatcher(options);\n    const codec = new StandardRPCCodec(serializer);\n    super(router, matcher, codec, options);\n  }\n}\n\nexport { CompositeStandardHandlerPlugin as C, StandardHandler as S, StandardRPCCodec as a, StandardRPCHandler as b, StandardRPCMatcher as c };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 13135, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bserver%401.11.1/node_modules/%40orpc/server/dist/shared/server.TEVCLCFC.mjs"],"sourcesContent":["import { ORPCError, fallbackContractConfig } from '@orpc/contract';\n\nconst STRICT_GET_METHOD_PLUGIN_IS_GET_METHOD_CONTEXT_SYMBOL = Symbol(\"STRICT_GET_METHOD_PLUGIN_IS_GET_METHOD_CONTEXT\");\nclass StrictGetMethodPlugin {\n  error;\n  /**\n   * make sure execute before batch plugin to get real method\n   */\n  order = 7e6;\n  constructor(options = {}) {\n    this.error = options.error ?? new ORPCError(\"METHOD_NOT_SUPPORTED\");\n  }\n  init(options) {\n    options.rootInterceptors ??= [];\n    options.clientInterceptors ??= [];\n    options.rootInterceptors.unshift((options2) => {\n      const isGetMethod = options2.request.method === \"GET\";\n      return options2.next({\n        ...options2,\n        context: {\n          ...options2.context,\n          [STRICT_GET_METHOD_PLUGIN_IS_GET_METHOD_CONTEXT_SYMBOL]: isGetMethod\n        }\n      });\n    });\n    options.clientInterceptors.unshift((options2) => {\n      if (typeof options2.context[STRICT_GET_METHOD_PLUGIN_IS_GET_METHOD_CONTEXT_SYMBOL] !== \"boolean\") {\n        throw new TypeError(\"[StrictGetMethodPlugin] strict GET method context has been corrupted or modified by another plugin or interceptor\");\n      }\n      const procedureMethod = fallbackContractConfig(\"defaultMethod\", options2.procedure[\"~orpc\"].route.method);\n      if (options2.context[STRICT_GET_METHOD_PLUGIN_IS_GET_METHOD_CONTEXT_SYMBOL] && procedureMethod !== \"GET\") {\n        throw this.error;\n      }\n      return options2.next();\n    });\n  }\n}\n\nexport { StrictGetMethodPlugin as S };\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEA,MAAM,wDAAwD,OAAO;AACrE,MAAM;IACJ,MAAM;IACN;;GAEC,GACD,QAAQ,IAAI;IACZ,YAAY,UAAU,CAAC,CAAC,CAAE;QACxB,IAAI,CAAC,KAAK,GAAG,QAAQ,KAAK,IAAI,IAAI,wRAAS,CAAC;IAC9C;IACA,KAAK,OAAO,EAAE;QACZ,QAAQ,gBAAgB,KAAK,EAAE;QAC/B,QAAQ,kBAAkB,KAAK,EAAE;QACjC,QAAQ,gBAAgB,CAAC,OAAO,CAAC,CAAC;YAChC,MAAM,cAAc,SAAS,OAAO,CAAC,MAAM,KAAK;YAChD,OAAO,SAAS,IAAI,CAAC;gBACnB,GAAG,QAAQ;gBACX,SAAS;oBACP,GAAG,SAAS,OAAO;oBACnB,CAAC,sDAAsD,EAAE;gBAC3D;YACF;QACF;QACA,QAAQ,kBAAkB,CAAC,OAAO,CAAC,CAAC;YAClC,IAAI,OAAO,SAAS,OAAO,CAAC,sDAAsD,KAAK,WAAW;gBAChG,MAAM,IAAI,UAAU;YACtB;YACA,MAAM,kBAAkB,IAAA,gQAAsB,EAAC,iBAAiB,SAAS,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM;YACxG,IAAI,SAAS,OAAO,CAAC,sDAAsD,IAAI,oBAAoB,OAAO;gBACxG,MAAM,IAAI,CAAC,KAAK;YAClB;YACA,OAAO,SAAS,IAAI;QACtB;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 13181, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bserver%401.11.1/node_modules/%40orpc/server/dist/adapters/fetch/index.mjs"],"sourcesContent":["import { ORPCError } from '@orpc/client';\nimport { toArray, intercept, resolveMaybeOptionalOptions } from '@orpc/shared';\nimport { toStandardLazyRequest, toFetchResponse } from '@orpc/standard-server-fetch';\nimport { r as resolveFriendlyStandardHandleOptions } from '../../shared/server.DZ5BIITo.mjs';\nimport '@orpc/standard-server';\nimport '@orpc/contract';\nimport { C as CompositeStandardHandlerPlugin, b as StandardRPCHandler } from '../../shared/server.Bxx6tqNe.mjs';\nimport '@orpc/client/standard';\nimport '@orpc/standard-server/batch';\nimport { S as StrictGetMethodPlugin } from '../../shared/server.TEVCLCFC.mjs';\nimport '../../shared/server.Ds4HPpvH.mjs';\n\nclass BodyLimitPlugin {\n  maxBodySize;\n  constructor(options) {\n    this.maxBodySize = options.maxBodySize;\n  }\n  initRuntimeAdapter(options) {\n    options.adapterInterceptors ??= [];\n    options.adapterInterceptors.push(async (options2) => {\n      if (!options2.request.body) {\n        return options2.next();\n      }\n      let currentBodySize = 0;\n      const rawReader = options2.request.body.getReader();\n      const reader = new ReadableStream({\n        start: async (controller) => {\n          try {\n            if (Number(options2.request.headers.get(\"content-length\")) > this.maxBodySize) {\n              controller.error(new ORPCError(\"PAYLOAD_TOO_LARGE\"));\n              return;\n            }\n            while (true) {\n              const { done, value } = await rawReader.read();\n              if (done) {\n                break;\n              }\n              currentBodySize += value.length;\n              if (currentBodySize > this.maxBodySize) {\n                controller.error(new ORPCError(\"PAYLOAD_TOO_LARGE\"));\n                break;\n              }\n              controller.enqueue(value);\n            }\n          } finally {\n            controller.close();\n          }\n        }\n      });\n      const requestInit = { body: reader, duplex: \"half\" };\n      return options2.next({\n        ...options2,\n        request: new Request(options2.request, requestInit)\n      });\n    });\n  }\n}\n\nconst ORDERED_SUPPORTED_ENCODINGS = [\"gzip\", \"deflate\"];\nclass CompressionPlugin {\n  encodings;\n  threshold;\n  filter;\n  constructor(options = {}) {\n    this.encodings = options.encodings ?? ORDERED_SUPPORTED_ENCODINGS;\n    this.threshold = options.threshold ?? 1024;\n    this.filter = (request, response) => {\n      const hasContentDisposition = response.headers.has(\"content-disposition\");\n      const contentType = response.headers.get(\"content-type\");\n      if (!hasContentDisposition && contentType?.startsWith(\"text/event-stream\")) {\n        return false;\n      }\n      return options.filter ? options.filter(request, response) : isCompressibleContentType(contentType);\n    };\n  }\n  initRuntimeAdapter(options) {\n    options.adapterInterceptors ??= [];\n    options.adapterInterceptors.unshift(async (options2) => {\n      const result = await options2.next();\n      if (!result.matched) {\n        return result;\n      }\n      const response = result.response;\n      if (response.headers.has(\"content-encoding\") || response.headers.has(\"transfer-encoding\") || isNoTransformCacheControl(response.headers.get(\"cache-control\"))) {\n        return result;\n      }\n      const contentLength = response.headers.get(\"content-length\");\n      if (contentLength && Number(contentLength) < this.threshold) {\n        return result;\n      }\n      const acceptEncoding = options2.request.headers.get(\"accept-encoding\")?.split(\",\").map((enc) => enc.trim().split(\";\")[0]);\n      const encoding = this.encodings.find((enc) => acceptEncoding?.includes(enc));\n      if (!response.body || encoding === void 0) {\n        return result;\n      }\n      if (!this.filter(options2.request, response)) {\n        return result;\n      }\n      const compressedBody = response.body.pipeThrough(new CompressionStream(encoding));\n      const compressedHeaders = new Headers(response.headers);\n      compressedHeaders.delete(\"content-length\");\n      compressedHeaders.set(\"content-encoding\", encoding);\n      return {\n        ...result,\n        response: new Response(compressedBody, {\n          status: response.status,\n          statusText: response.statusText,\n          headers: compressedHeaders\n        })\n      };\n    });\n  }\n}\nconst COMPRESSIBLE_CONTENT_TYPE_REGEX = /^\\s*(?:text\\/(?!event-stream(?:[;\\s]|$))[^;\\s]+|application\\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\\.dart|vnd\\.ms-fontobject|vnd\\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\\/(?:otf|ttf)|image\\/(?:bmp|vnd\\.adobe\\.photoshop|vnd\\.microsoft\\.icon|vnd\\.ms-dds|x-icon|x-ms-bmp)|message\\/rfc822|model\\/gltf-binary|x-shader\\/x-fragment|x-shader\\/x-vertex|[^;\\s]+?\\+(?:json|text|xml|yaml))(?:[;\\s]|$)/i;\nfunction isCompressibleContentType(contentType) {\n  if (contentType === null) {\n    return false;\n  }\n  return COMPRESSIBLE_CONTENT_TYPE_REGEX.test(contentType);\n}\nconst CACHE_CONTROL_NO_TRANSFORM_REGEX = /(?:^|,)\\s*no-transform\\s*(?:,|$)/i;\nfunction isNoTransformCacheControl(cacheControl) {\n  if (cacheControl === null) {\n    return false;\n  }\n  return CACHE_CONTROL_NO_TRANSFORM_REGEX.test(cacheControl);\n}\n\nclass CompositeFetchHandlerPlugin extends CompositeStandardHandlerPlugin {\n  initRuntimeAdapter(options) {\n    for (const plugin of this.plugins) {\n      plugin.initRuntimeAdapter?.(options);\n    }\n  }\n}\n\nclass FetchHandler {\n  constructor(standardHandler, options = {}) {\n    this.standardHandler = standardHandler;\n    const plugin = new CompositeFetchHandlerPlugin(options.plugins);\n    plugin.initRuntimeAdapter(options);\n    this.adapterInterceptors = toArray(options.adapterInterceptors);\n    this.toFetchResponseOptions = options;\n  }\n  toFetchResponseOptions;\n  adapterInterceptors;\n  async handle(request, ...rest) {\n    return intercept(\n      this.adapterInterceptors,\n      {\n        ...resolveFriendlyStandardHandleOptions(resolveMaybeOptionalOptions(rest)),\n        request,\n        toFetchResponseOptions: this.toFetchResponseOptions\n      },\n      async ({ request: request2, toFetchResponseOptions, ...options }) => {\n        const standardRequest = toStandardLazyRequest(request2);\n        const result = await this.standardHandler.handle(standardRequest, options);\n        if (!result.matched) {\n          return result;\n        }\n        return {\n          matched: true,\n          response: toFetchResponse(result.response, toFetchResponseOptions)\n        };\n      }\n    );\n  }\n}\n\nclass RPCHandler extends FetchHandler {\n  constructor(router, options = {}) {\n    if (options.strictGetMethodPluginEnabled ?? true) {\n      options.plugins ??= [];\n      options.plugins.push(new StrictGetMethodPlugin());\n    }\n    super(new StandardRPCHandler(router, options), options);\n  }\n}\n\nexport { BodyLimitPlugin, CompositeFetchHandlerPlugin, CompressionPlugin, FetchHandler, RPCHandler };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 13385, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bserver%401.11.1/node_modules/%40orpc/server/dist/adapters/standard/index.mjs"],"sourcesContent":["export { C as CompositeStandardHandlerPlugin, S as StandardHandler, a as StandardRPCCodec, b as StandardRPCHandler, c as StandardRPCMatcher } from '../../shared/server.Bxx6tqNe.mjs';\nexport { r as resolveFriendlyStandardHandleOptions } from '../../shared/server.DZ5BIITo.mjs';\nimport '@orpc/client/standard';\nimport '@orpc/client';\nimport '@orpc/shared';\nimport '@orpc/standard-server';\nimport '../../shared/server.Ds4HPpvH.mjs';\nimport '@orpc/contract';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 13478, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bstandard-server-fetch%401.11.1/node_modules/%40orpc/standard-server-fetch/dist/index.mjs"],"sourcesContent":["import { AsyncIteratorClass, startSpan, runInSpanContext, AbortError, parseEmptyableJSON, isTypescriptObject, setSpanError, stringifyJSON, runWithSpan, isAsyncIteratorObject, once } from '@orpc/shared';\nimport { EventDecoderStream, withEventMeta, ErrorEvent, encodeEventMessage, getEventMeta, getFilenameFromContentDisposition, generateContentDisposition } from '@orpc/standard-server';\n\nfunction toEventIterator(stream, options = {}) {\n  const eventStream = stream?.pipeThrough(new TextDecoderStream()).pipeThrough(new EventDecoderStream());\n  const reader = eventStream?.getReader();\n  let span;\n  let isCancelled = false;\n  return new AsyncIteratorClass(async () => {\n    span ??= startSpan(\"consume_event_iterator_stream\");\n    try {\n      while (true) {\n        if (reader === void 0) {\n          return { done: true, value: void 0 };\n        }\n        const { done, value } = await runInSpanContext(span, () => reader.read());\n        if (done) {\n          if (isCancelled) {\n            throw new AbortError(\"Stream was cancelled\");\n          }\n          return { done: true, value: void 0 };\n        }\n        switch (value.event) {\n          case \"message\": {\n            let message = parseEmptyableJSON(value.data);\n            if (isTypescriptObject(message)) {\n              message = withEventMeta(message, value);\n            }\n            span?.addEvent(\"message\");\n            return { done: false, value: message };\n          }\n          case \"error\": {\n            let error = new ErrorEvent({\n              data: parseEmptyableJSON(value.data)\n            });\n            error = withEventMeta(error, value);\n            span?.addEvent(\"error\");\n            throw error;\n          }\n          case \"done\": {\n            let done2 = parseEmptyableJSON(value.data);\n            if (isTypescriptObject(done2)) {\n              done2 = withEventMeta(done2, value);\n            }\n            span?.addEvent(\"done\");\n            return { done: true, value: done2 };\n          }\n          default: {\n            span?.addEvent(\"maybe_keepalive\");\n          }\n        }\n      }\n    } catch (e) {\n      if (!(e instanceof ErrorEvent)) {\n        setSpanError(span, e, options);\n      }\n      throw e;\n    }\n  }, async (reason) => {\n    try {\n      if (reason !== \"next\") {\n        isCancelled = true;\n        span?.addEvent(\"cancelled\");\n      }\n      await runInSpanContext(span, () => reader?.cancel());\n    } catch (e) {\n      setSpanError(span, e, options);\n      throw e;\n    } finally {\n      span?.end();\n    }\n  });\n}\nfunction toEventStream(iterator, options = {}) {\n  const keepAliveEnabled = options.eventIteratorKeepAliveEnabled ?? true;\n  const keepAliveInterval = options.eventIteratorKeepAliveInterval ?? 5e3;\n  const keepAliveComment = options.eventIteratorKeepAliveComment ?? \"\";\n  let cancelled = false;\n  let timeout;\n  let span;\n  const stream = new ReadableStream({\n    start() {\n      span = startSpan(\"stream_event_iterator\");\n    },\n    async pull(controller) {\n      try {\n        if (keepAliveEnabled) {\n          timeout = setInterval(() => {\n            controller.enqueue(encodeEventMessage({\n              comments: [keepAliveComment]\n            }));\n            span?.addEvent(\"keepalive\");\n          }, keepAliveInterval);\n        }\n        const value = await runInSpanContext(span, () => iterator.next());\n        clearInterval(timeout);\n        if (cancelled) {\n          return;\n        }\n        const meta = getEventMeta(value.value);\n        if (!value.done || value.value !== void 0 || meta !== void 0) {\n          const event = value.done ? \"done\" : \"message\";\n          controller.enqueue(encodeEventMessage({\n            ...meta,\n            event,\n            data: stringifyJSON(value.value)\n          }));\n          span?.addEvent(event);\n        }\n        if (value.done) {\n          controller.close();\n          span?.end();\n        }\n      } catch (err) {\n        clearInterval(timeout);\n        if (cancelled) {\n          return;\n        }\n        if (err instanceof ErrorEvent) {\n          controller.enqueue(encodeEventMessage({\n            ...getEventMeta(err),\n            event: \"error\",\n            data: stringifyJSON(err.data)\n          }));\n          span?.addEvent(\"error\");\n          controller.close();\n        } else {\n          setSpanError(span, err);\n          controller.error(err);\n        }\n        span?.end();\n      }\n    },\n    async cancel() {\n      try {\n        cancelled = true;\n        clearInterval(timeout);\n        span?.addEvent(\"cancelled\");\n        await runInSpanContext(span, () => iterator.return?.());\n      } catch (e) {\n        setSpanError(span, e);\n        throw e;\n      } finally {\n        span?.end();\n      }\n    }\n  }).pipeThrough(new TextEncoderStream());\n  return stream;\n}\n\nfunction toStandardBody(re, options = {}) {\n  return runWithSpan(\n    { name: \"parse_standard_body\", signal: options.signal },\n    async () => {\n      const contentDisposition = re.headers.get(\"content-disposition\");\n      if (typeof contentDisposition === \"string\") {\n        const fileName = getFilenameFromContentDisposition(contentDisposition) ?? \"blob\";\n        const blob2 = await re.blob();\n        return new File([blob2], fileName, {\n          type: blob2.type\n        });\n      }\n      const contentType = re.headers.get(\"content-type\");\n      if (!contentType || contentType.startsWith(\"application/json\")) {\n        const text = await re.text();\n        return parseEmptyableJSON(text);\n      }\n      if (contentType.startsWith(\"multipart/form-data\")) {\n        return await re.formData();\n      }\n      if (contentType.startsWith(\"application/x-www-form-urlencoded\")) {\n        const text = await re.text();\n        return new URLSearchParams(text);\n      }\n      if (contentType.startsWith(\"text/event-stream\")) {\n        return toEventIterator(re.body, options);\n      }\n      if (contentType.startsWith(\"text/plain\")) {\n        return await re.text();\n      }\n      const blob = await re.blob();\n      return new File([blob], \"blob\", {\n        type: blob.type\n      });\n    }\n  );\n}\nfunction toFetchBody(body, headers, options = {}) {\n  const currentContentDisposition = headers.get(\"content-disposition\");\n  headers.delete(\"content-type\");\n  headers.delete(\"content-disposition\");\n  if (body === void 0) {\n    return void 0;\n  }\n  if (body instanceof Blob) {\n    headers.set(\"content-type\", body.type);\n    headers.set(\"content-length\", body.size.toString());\n    headers.set(\n      \"content-disposition\",\n      currentContentDisposition ?? generateContentDisposition(body instanceof File ? body.name : \"blob\")\n    );\n    return body;\n  }\n  if (body instanceof FormData) {\n    return body;\n  }\n  if (body instanceof URLSearchParams) {\n    return body;\n  }\n  if (isAsyncIteratorObject(body)) {\n    headers.set(\"content-type\", \"text/event-stream\");\n    return toEventStream(body, options);\n  }\n  headers.set(\"content-type\", \"application/json\");\n  return stringifyJSON(body);\n}\n\nfunction toStandardHeaders(headers, standardHeaders = {}) {\n  headers.forEach((value, key) => {\n    if (Array.isArray(standardHeaders[key])) {\n      standardHeaders[key].push(value);\n    } else if (standardHeaders[key] !== void 0) {\n      standardHeaders[key] = [standardHeaders[key], value];\n    } else {\n      standardHeaders[key] = value;\n    }\n  });\n  return standardHeaders;\n}\nfunction toFetchHeaders(headers, fetchHeaders = new Headers()) {\n  for (const [key, value] of Object.entries(headers)) {\n    if (Array.isArray(value)) {\n      for (const v of value) {\n        fetchHeaders.append(key, v);\n      }\n    } else if (value !== void 0) {\n      fetchHeaders.append(key, value);\n    }\n  }\n  return fetchHeaders;\n}\n\nfunction toStandardLazyRequest(request) {\n  return {\n    url: new URL(request.url),\n    signal: request.signal,\n    method: request.method,\n    body: once(() => toStandardBody(request, { signal: request.signal })),\n    get headers() {\n      const headers = toStandardHeaders(request.headers);\n      Object.defineProperty(this, \"headers\", { value: headers, writable: true });\n      return headers;\n    },\n    set headers(value) {\n      Object.defineProperty(this, \"headers\", { value, writable: true });\n    }\n  };\n}\nfunction toFetchRequest(request, options = {}) {\n  const headers = toFetchHeaders(request.headers);\n  const body = toFetchBody(request.body, headers, options);\n  return new Request(request.url, {\n    signal: request.signal,\n    method: request.method,\n    headers,\n    body\n  });\n}\n\nfunction toFetchResponse(response, options = {}) {\n  const headers = toFetchHeaders(response.headers);\n  const body = toFetchBody(response.body, headers, options);\n  return new Response(body, { headers, status: response.status });\n}\nfunction toStandardLazyResponse(response, options = {}) {\n  return {\n    body: once(() => toStandardBody(response, options)),\n    status: response.status,\n    get headers() {\n      const headers = toStandardHeaders(response.headers);\n      Object.defineProperty(this, \"headers\", { value: headers, writable: true });\n      return headers;\n    },\n    set headers(value) {\n      Object.defineProperty(this, \"headers\", { value, writable: true });\n    }\n  };\n}\n\nexport { toEventIterator, toEventStream, toFetchBody, toFetchHeaders, toFetchRequest, toFetchResponse, toStandardBody, toStandardHeaders, toStandardLazyRequest, toStandardLazyResponse };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 13829, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bopenapi-client%401.11.1/node_modules/%40orpc/openapi-client/dist/shared/openapi-client.t9fCAe3x.mjs"],"sourcesContent":["import { isObject, NullProtoObj } from '@orpc/shared';\n\nclass StandardBracketNotationSerializer {\n  maxArrayIndex;\n  constructor(options = {}) {\n    this.maxArrayIndex = options.maxBracketNotationArrayIndex ?? 9999;\n  }\n  serialize(data, segments = [], result = []) {\n    if (Array.isArray(data)) {\n      data.forEach((item, i) => {\n        this.serialize(item, [...segments, i], result);\n      });\n    } else if (isObject(data)) {\n      for (const key in data) {\n        this.serialize(data[key], [...segments, key], result);\n      }\n    } else {\n      result.push([this.stringifyPath(segments), data]);\n    }\n    return result;\n  }\n  deserialize(serialized) {\n    if (serialized.length === 0) {\n      return {};\n    }\n    const arrayPushStyles = /* @__PURE__ */ new WeakSet();\n    const ref = { value: [] };\n    for (const [path, value] of serialized) {\n      const segments = this.parsePath(path);\n      let currentRef = ref;\n      let nextSegment = \"value\";\n      segments.forEach((segment, i) => {\n        if (!Array.isArray(currentRef[nextSegment]) && !isObject(currentRef[nextSegment])) {\n          currentRef[nextSegment] = [];\n        }\n        if (i !== segments.length - 1) {\n          if (Array.isArray(currentRef[nextSegment]) && !isValidArrayIndex(segment, this.maxArrayIndex)) {\n            if (arrayPushStyles.has(currentRef[nextSegment])) {\n              arrayPushStyles.delete(currentRef[nextSegment]);\n              currentRef[nextSegment] = pushStyleArrayToObject(currentRef[nextSegment]);\n            } else {\n              currentRef[nextSegment] = arrayToObject(currentRef[nextSegment]);\n            }\n          }\n        } else {\n          if (Array.isArray(currentRef[nextSegment])) {\n            if (segment === \"\") {\n              if (currentRef[nextSegment].length && !arrayPushStyles.has(currentRef[nextSegment])) {\n                currentRef[nextSegment] = arrayToObject(currentRef[nextSegment]);\n              }\n            } else {\n              if (arrayPushStyles.has(currentRef[nextSegment])) {\n                arrayPushStyles.delete(currentRef[nextSegment]);\n                currentRef[nextSegment] = pushStyleArrayToObject(currentRef[nextSegment]);\n              } else if (!isValidArrayIndex(segment, this.maxArrayIndex)) {\n                currentRef[nextSegment] = arrayToObject(currentRef[nextSegment]);\n              }\n            }\n          }\n        }\n        currentRef = currentRef[nextSegment];\n        nextSegment = segment;\n      });\n      if (Array.isArray(currentRef) && nextSegment === \"\") {\n        arrayPushStyles.add(currentRef);\n        currentRef.push(value);\n      } else if (nextSegment in currentRef) {\n        if (Array.isArray(currentRef[nextSegment])) {\n          currentRef[nextSegment].push(value);\n        } else {\n          currentRef[nextSegment] = [currentRef[nextSegment], value];\n        }\n      } else {\n        currentRef[nextSegment] = value;\n      }\n    }\n    return ref.value;\n  }\n  stringifyPath(segments) {\n    return segments.map((segment) => {\n      return segment.toString().replace(/[\\\\[\\]]/g, (match) => {\n        switch (match) {\n          case \"\\\\\":\n            return \"\\\\\\\\\";\n          case \"[\":\n            return \"\\\\[\";\n          case \"]\":\n            return \"\\\\]\";\n          /* v8 ignore next 2 */\n          default:\n            return match;\n        }\n      });\n    }).reduce((result, segment, i) => {\n      if (i === 0) {\n        return segment;\n      }\n      return `${result}[${segment}]`;\n    }, \"\");\n  }\n  parsePath(path) {\n    const segments = [];\n    let inBrackets = false;\n    let currentSegment = \"\";\n    let backslashCount = 0;\n    for (let i = 0; i < path.length; i++) {\n      const char = path[i];\n      const nextChar = path[i + 1];\n      if (inBrackets && char === \"]\" && (nextChar === void 0 || nextChar === \"[\") && backslashCount % 2 === 0) {\n        if (nextChar === void 0) {\n          inBrackets = false;\n        }\n        segments.push(currentSegment);\n        currentSegment = \"\";\n        i++;\n      } else if (segments.length === 0 && char === \"[\" && backslashCount % 2 === 0) {\n        inBrackets = true;\n        segments.push(currentSegment);\n        currentSegment = \"\";\n      } else if (char === \"\\\\\") {\n        backslashCount++;\n      } else {\n        currentSegment += \"\\\\\".repeat(backslashCount / 2) + char;\n        backslashCount = 0;\n      }\n    }\n    return inBrackets || segments.length === 0 ? [path] : segments;\n  }\n}\nfunction isValidArrayIndex(value, maxIndex) {\n  return /^0$|^[1-9]\\d*$/.test(value) && Number(value) <= maxIndex;\n}\nfunction arrayToObject(array) {\n  const obj = new NullProtoObj();\n  array.forEach((item, i) => {\n    obj[i] = item;\n  });\n  return obj;\n}\nfunction pushStyleArrayToObject(array) {\n  const obj = new NullProtoObj();\n  obj[\"\"] = array.length === 1 ? array[0] : array;\n  return obj;\n}\n\nexport { StandardBracketNotationSerializer as S };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 13997, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bopenapi-client%401.11.1/node_modules/%40orpc/openapi-client/dist/shared/openapi-client.Dgl8z2tb.mjs"],"sourcesContent":["import { isSchemaIssue } from '@orpc/contract';\nimport { isTypescriptObject } from '@orpc/shared';\nimport { S as StandardBracketNotationSerializer } from './openapi-client.t9fCAe3x.mjs';\n\nfunction parseFormData(form) {\n  const serializer = new StandardBracketNotationSerializer();\n  return serializer.deserialize(Array.from(form.entries()));\n}\nfunction getIssueMessage(error, path) {\n  if (!isTypescriptObject(error) || !isTypescriptObject(error.data) || !Array.isArray(error.data.issues)) {\n    return void 0;\n  }\n  const serializer = new StandardBracketNotationSerializer();\n  for (const issue of error.data.issues) {\n    if (!isSchemaIssue(issue)) {\n      continue;\n    }\n    if (issue.path === void 0) {\n      if (path === \"\") {\n        return issue.message;\n      }\n      continue;\n    }\n    const issuePath = serializer.stringifyPath(\n      issue.path.map((segment) => typeof segment === \"object\" ? segment.key.toString() : segment.toString())\n    );\n    if (issuePath === path) {\n      return issue.message;\n    }\n    if (path.endsWith(\"[]\") && issuePath.replace(/\\[(?:0|[1-9]\\d*)\\]$/, \"[]\") === path) {\n      return issue.message;\n    }\n    if (path === \"\" && issuePath.match(/(?:0|[1-9]\\d*)$/)) {\n      return issue.message;\n    }\n  }\n}\n\nexport { getIssueMessage as g, parseFormData as p };\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,SAAS,cAAc,IAAI;IACzB,MAAM,aAAa,IAAI,+QAAiC;IACxD,OAAO,WAAW,WAAW,CAAC,MAAM,IAAI,CAAC,KAAK,OAAO;AACvD;AACA,SAAS,gBAAgB,KAAK,EAAE,IAAI;IAClC,IAAI,CAAC,IAAA,wPAAkB,EAAC,UAAU,CAAC,IAAA,wPAAkB,EAAC,MAAM,IAAI,KAAK,CAAC,MAAM,OAAO,CAAC,MAAM,IAAI,CAAC,MAAM,GAAG;QACtG,OAAO,KAAK;IACd;IACA,MAAM,aAAa,IAAI,+QAAiC;IACxD,KAAK,MAAM,SAAS,MAAM,IAAI,CAAC,MAAM,CAAE;QACrC,IAAI,CAAC,IAAA,uPAAa,EAAC,QAAQ;YACzB;QACF;QACA,IAAI,MAAM,IAAI,KAAK,KAAK,GAAG;YACzB,IAAI,SAAS,IAAI;gBACf,OAAO,MAAM,OAAO;YACtB;YACA;QACF;QACA,MAAM,YAAY,WAAW,aAAa,CACxC,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,UAAY,OAAO,YAAY,WAAW,QAAQ,GAAG,CAAC,QAAQ,KAAK,QAAQ,QAAQ;QAErG,IAAI,cAAc,MAAM;YACtB,OAAO,MAAM,OAAO;QACtB;QACA,IAAI,KAAK,QAAQ,CAAC,SAAS,UAAU,OAAO,CAAC,uBAAuB,UAAU,MAAM;YAClF,OAAO,MAAM,OAAO;QACtB;QACA,IAAI,SAAS,MAAM,UAAU,KAAK,CAAC,oBAAoB;YACrD,OAAO,MAAM,OAAO;QACtB;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 14045, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bopenapi-client%401.11.1/node_modules/%40orpc/openapi-client/dist/shared/openapi-client.B2Q9qU5m.mjs"],"sourcesContent":["import { toStandardHeaders, toHttpPath, getMalformedResponseErrorCode, StandardLink } from '@orpc/client/standard';\nimport { S as StandardBracketNotationSerializer } from './openapi-client.t9fCAe3x.mjs';\nimport { isObject, value, get, isAsyncIteratorObject } from '@orpc/shared';\nimport { isORPCErrorStatus, isORPCErrorJson, createORPCErrorFromJson, mapEventIterator, toORPCError } from '@orpc/client';\nimport { isContractProcedure, fallbackContractConfig, ORPCError } from '@orpc/contract';\nimport { mergeStandardHeaders, ErrorEvent } from '@orpc/standard-server';\n\nclass StandardOpenAPIJsonSerializer {\n  customSerializers;\n  constructor(options = {}) {\n    this.customSerializers = options.customJsonSerializers ?? [];\n  }\n  serialize(data, hasBlobRef = { value: false }) {\n    for (const custom of this.customSerializers) {\n      if (custom.condition(data)) {\n        const result = this.serialize(custom.serialize(data), hasBlobRef);\n        return result;\n      }\n    }\n    if (data instanceof Blob) {\n      hasBlobRef.value = true;\n      return [data, hasBlobRef.value];\n    }\n    if (data instanceof Set) {\n      return this.serialize(Array.from(data), hasBlobRef);\n    }\n    if (data instanceof Map) {\n      return this.serialize(Array.from(data.entries()), hasBlobRef);\n    }\n    if (Array.isArray(data)) {\n      const json = data.map((v) => v === void 0 ? null : this.serialize(v, hasBlobRef)[0]);\n      return [json, hasBlobRef.value];\n    }\n    if (isObject(data)) {\n      const json = {};\n      for (const k in data) {\n        if (k === \"toJSON\" && typeof data[k] === \"function\") {\n          continue;\n        }\n        json[k] = this.serialize(data[k], hasBlobRef)[0];\n      }\n      return [json, hasBlobRef.value];\n    }\n    if (typeof data === \"bigint\" || data instanceof RegExp || data instanceof URL) {\n      return [data.toString(), hasBlobRef.value];\n    }\n    if (data instanceof Date) {\n      return [Number.isNaN(data.getTime()) ? null : data.toISOString(), hasBlobRef.value];\n    }\n    if (Number.isNaN(data)) {\n      return [null, hasBlobRef.value];\n    }\n    return [data, hasBlobRef.value];\n  }\n}\n\nfunction standardizeHTTPPath(path) {\n  return `/${path.replace(/\\/{2,}/g, \"/\").replace(/^\\/|\\/$/g, \"\")}`;\n}\nfunction getDynamicParams(path) {\n  return path ? standardizeHTTPPath(path).match(/\\/\\{[^}]+\\}/g)?.map((v) => ({\n    raw: v,\n    name: v.match(/\\{\\+?([^}]+)\\}/)[1]\n  })) : void 0;\n}\n\nclass StandardOpenapiLinkCodec {\n  constructor(contract, serializer, options) {\n    this.contract = contract;\n    this.serializer = serializer;\n    this.baseUrl = options.url;\n    this.headers = options.headers ?? {};\n    this.customErrorResponseBodyDecoder = options.customErrorResponseBodyDecoder;\n  }\n  baseUrl;\n  headers;\n  customErrorResponseBodyDecoder;\n  async encode(path, input, options) {\n    let headers = toStandardHeaders(await value(this.headers, options, path, input));\n    if (options.lastEventId !== void 0) {\n      headers = mergeStandardHeaders(headers, { \"last-event-id\": options.lastEventId });\n    }\n    const baseUrl = await value(this.baseUrl, options, path, input);\n    const procedure = get(this.contract, path);\n    if (!isContractProcedure(procedure)) {\n      throw new Error(`[StandardOpenapiLinkCodec] expect a contract procedure at ${path.join(\".\")}`);\n    }\n    const inputStructure = fallbackContractConfig(\"defaultInputStructure\", procedure[\"~orpc\"].route.inputStructure);\n    return inputStructure === \"compact\" ? this.#encodeCompact(procedure, path, input, options, baseUrl, headers) : this.#encodeDetailed(procedure, path, input, options, baseUrl, headers);\n  }\n  #encodeCompact(procedure, path, input, options, baseUrl, headers) {\n    let httpPath = standardizeHTTPPath(procedure[\"~orpc\"].route.path ?? toHttpPath(path));\n    let httpBody = input;\n    const dynamicParams = getDynamicParams(httpPath);\n    if (dynamicParams?.length) {\n      if (!isObject(input)) {\n        throw new TypeError(`[StandardOpenapiLinkCodec] Invalid input shape for \"compact\" structure when has dynamic params at ${path.join(\".\")}.`);\n      }\n      const body = { ...input };\n      for (const param of dynamicParams) {\n        const value2 = input[param.name];\n        httpPath = httpPath.replace(param.raw, `/${encodeURIComponent(`${this.serializer.serialize(value2)}`)}`);\n        delete body[param.name];\n      }\n      httpBody = Object.keys(body).length ? body : void 0;\n    }\n    const method = fallbackContractConfig(\"defaultMethod\", procedure[\"~orpc\"].route.method);\n    const url = new URL(baseUrl);\n    url.pathname = `${url.pathname.replace(/\\/$/, \"\")}${httpPath}`;\n    if (method === \"GET\") {\n      const serialized = this.serializer.serialize(httpBody, { outputFormat: \"URLSearchParams\" });\n      for (const [key, value2] of serialized) {\n        url.searchParams.append(key, value2);\n      }\n      return {\n        url,\n        method,\n        headers,\n        body: void 0,\n        signal: options.signal\n      };\n    }\n    return {\n      url,\n      method,\n      headers,\n      body: this.serializer.serialize(httpBody),\n      signal: options.signal\n    };\n  }\n  #encodeDetailed(procedure, path, input, options, baseUrl, headers) {\n    let httpPath = standardizeHTTPPath(procedure[\"~orpc\"].route.path ?? toHttpPath(path));\n    const dynamicParams = getDynamicParams(httpPath);\n    if (!isObject(input) && input !== void 0) {\n      throw new TypeError(`[StandardOpenapiLinkCodec] Invalid input shape for \"detailed\" structure at ${path.join(\".\")}.`);\n    }\n    if (dynamicParams?.length) {\n      if (!isObject(input?.params)) {\n        throw new TypeError(`[StandardOpenapiLinkCodec] Invalid input.params shape for \"detailed\" structure when has dynamic params at ${path.join(\".\")}.`);\n      }\n      for (const param of dynamicParams) {\n        const value2 = input.params[param.name];\n        httpPath = httpPath.replace(param.raw, `/${encodeURIComponent(`${this.serializer.serialize(value2)}`)}`);\n      }\n    }\n    let mergedHeaders = headers;\n    if (input?.headers !== void 0) {\n      if (!isObject(input.headers)) {\n        throw new TypeError(`[StandardOpenapiLinkCodec] Invalid input.headers shape for \"detailed\" structure at ${path.join(\".\")}.`);\n      }\n      mergedHeaders = mergeStandardHeaders(input.headers, headers);\n    }\n    const method = fallbackContractConfig(\"defaultMethod\", procedure[\"~orpc\"].route.method);\n    const url = new URL(baseUrl);\n    url.pathname = `${url.pathname.replace(/\\/$/, \"\")}${httpPath}`;\n    if (input?.query !== void 0) {\n      const query = this.serializer.serialize(input.query, { outputFormat: \"URLSearchParams\" });\n      for (const [key, value2] of query) {\n        url.searchParams.append(key, value2);\n      }\n    }\n    if (method === \"GET\") {\n      return {\n        url,\n        method,\n        headers: mergedHeaders,\n        body: void 0,\n        signal: options.signal\n      };\n    }\n    return {\n      url,\n      method,\n      headers: mergedHeaders,\n      body: this.serializer.serialize(input?.body),\n      signal: options.signal\n    };\n  }\n  async decode(response, _options, path) {\n    const isOk = !isORPCErrorStatus(response.status);\n    const deserialized = await (async () => {\n      let isBodyOk = false;\n      try {\n        const body = await response.body();\n        isBodyOk = true;\n        return this.serializer.deserialize(body);\n      } catch (error) {\n        if (!isBodyOk) {\n          throw new Error(\"Cannot parse response body, please check the response body and content-type.\", {\n            cause: error\n          });\n        }\n        throw new Error(\"Invalid OpenAPI response format.\", {\n          cause: error\n        });\n      }\n    })();\n    if (!isOk) {\n      const error = this.customErrorResponseBodyDecoder?.(deserialized, response);\n      if (error !== null && error !== void 0) {\n        throw error;\n      }\n      if (isORPCErrorJson(deserialized)) {\n        throw createORPCErrorFromJson(deserialized);\n      }\n      throw new ORPCError(getMalformedResponseErrorCode(response.status), {\n        status: response.status,\n        data: { ...response, body: deserialized }\n      });\n    }\n    const procedure = get(this.contract, path);\n    if (!isContractProcedure(procedure)) {\n      throw new Error(`[StandardOpenapiLinkCodec] expect a contract procedure at ${path.join(\".\")}`);\n    }\n    const outputStructure = fallbackContractConfig(\"defaultOutputStructure\", procedure[\"~orpc\"].route.outputStructure);\n    if (outputStructure === \"compact\") {\n      return deserialized;\n    }\n    return {\n      status: response.status,\n      headers: response.headers,\n      body: deserialized\n    };\n  }\n}\n\nclass StandardOpenAPISerializer {\n  constructor(jsonSerializer, bracketNotation) {\n    this.jsonSerializer = jsonSerializer;\n    this.bracketNotation = bracketNotation;\n  }\n  serialize(data, options = {}) {\n    if (isAsyncIteratorObject(data) && !options.outputFormat) {\n      return mapEventIterator(data, {\n        value: async (value) => this.#serialize(value, { outputFormat: \"plain\" }),\n        error: async (e) => {\n          return new ErrorEvent({\n            data: this.#serialize(toORPCError(e).toJSON(), { outputFormat: \"plain\" }),\n            cause: e\n          });\n        }\n      });\n    }\n    return this.#serialize(data, options);\n  }\n  #serialize(data, options) {\n    const [json, hasBlob] = this.jsonSerializer.serialize(data);\n    if (options.outputFormat === \"plain\") {\n      return json;\n    }\n    if (options.outputFormat === \"URLSearchParams\") {\n      const params = new URLSearchParams();\n      for (const [path, value] of this.bracketNotation.serialize(json)) {\n        if (typeof value === \"string\" || typeof value === \"number\" || typeof value === \"boolean\") {\n          params.append(path, value.toString());\n        }\n      }\n      return params;\n    }\n    if (json instanceof Blob || json === void 0 || !hasBlob) {\n      return json;\n    }\n    const form = new FormData();\n    for (const [path, value] of this.bracketNotation.serialize(json)) {\n      if (typeof value === \"string\" || typeof value === \"number\" || typeof value === \"boolean\") {\n        form.append(path, value.toString());\n      } else if (value instanceof Blob) {\n        form.append(path, value);\n      }\n    }\n    return form;\n  }\n  deserialize(data) {\n    if (data instanceof URLSearchParams || data instanceof FormData) {\n      return this.bracketNotation.deserialize(Array.from(data.entries()));\n    }\n    if (isAsyncIteratorObject(data)) {\n      return mapEventIterator(data, {\n        value: async (value) => value,\n        error: async (e) => {\n          if (e instanceof ErrorEvent && isORPCErrorJson(e.data)) {\n            return createORPCErrorFromJson(e.data, { cause: e });\n          }\n          return e;\n        }\n      });\n    }\n    return data;\n  }\n}\n\nclass StandardOpenAPILink extends StandardLink {\n  constructor(contract, linkClient, options) {\n    const jsonSerializer = new StandardOpenAPIJsonSerializer(options);\n    const bracketNotationSerializer = new StandardBracketNotationSerializer({ maxBracketNotationArrayIndex: 4294967294 });\n    const serializer = new StandardOpenAPISerializer(jsonSerializer, bracketNotationSerializer);\n    const linkCodec = new StandardOpenapiLinkCodec(contract, serializer, options);\n    super(linkCodec, linkClient, options);\n  }\n}\n\nexport { StandardOpenAPIJsonSerializer as S, StandardOpenAPILink as a, StandardOpenapiLinkCodec as b, StandardOpenAPISerializer as c, getDynamicParams as g, standardizeHTTPPath as s };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 14418, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bopenapi-client%401.11.1/node_modules/%40orpc/openapi-client/dist/adapters/standard/index.mjs"],"sourcesContent":["export { S as StandardBracketNotationSerializer } from '../../shared/openapi-client.t9fCAe3x.mjs';\nexport { g as getIssueMessage, p as parseFormData } from '../../shared/openapi-client.Dgl8z2tb.mjs';\nexport { S as StandardOpenAPIJsonSerializer, a as StandardOpenAPILink, c as StandardOpenAPISerializer, b as StandardOpenapiLinkCodec, g as getDynamicParams, s as standardizeHTTPPath } from '../../shared/openapi-client.B2Q9qU5m.mjs';\nimport '@orpc/shared';\nimport '@orpc/contract';\nimport '@orpc/client/standard';\nimport '@orpc/client';\nimport '@orpc/standard-server';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 14484, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bopenapi%401.11.1/node_modules/%40orpc/openapi/dist/shared/openapi.DIt-Z9W1.mjs"],"sourcesContent":["import { standardizeHTTPPath, StandardOpenAPIJsonSerializer, StandardBracketNotationSerializer, StandardOpenAPISerializer } from '@orpc/openapi-client/standard';\nimport { StandardHandler } from '@orpc/server/standard';\nimport { isORPCErrorStatus } from '@orpc/client';\nimport { fallbackContractConfig } from '@orpc/contract';\nimport { isObject, stringifyJSON, tryDecodeURIComponent, value } from '@orpc/shared';\nimport { toHttpPath } from '@orpc/client/standard';\nimport { traverseContractProcedures, isProcedure, getLazyMeta, unlazy, getRouter, createContractedProcedure } from '@orpc/server';\nimport { createRouter, addRoute, findRoute } from 'rou3';\n\nclass StandardOpenAPICodec {\n  constructor(serializer, options = {}) {\n    this.serializer = serializer;\n    this.customErrorResponseBodyEncoder = options.customErrorResponseBodyEncoder;\n  }\n  customErrorResponseBodyEncoder;\n  async decode(request, params, procedure) {\n    const inputStructure = fallbackContractConfig(\"defaultInputStructure\", procedure[\"~orpc\"].route.inputStructure);\n    if (inputStructure === \"compact\") {\n      const data = request.method === \"GET\" ? this.serializer.deserialize(request.url.searchParams) : this.serializer.deserialize(await request.body());\n      if (data === void 0) {\n        return params;\n      }\n      if (isObject(data)) {\n        return {\n          ...params,\n          ...data\n        };\n      }\n      return data;\n    }\n    const deserializeSearchParams = () => {\n      return this.serializer.deserialize(request.url.searchParams);\n    };\n    return {\n      params,\n      get query() {\n        const value = deserializeSearchParams();\n        Object.defineProperty(this, \"query\", { value, writable: true });\n        return value;\n      },\n      set query(value) {\n        Object.defineProperty(this, \"query\", { value, writable: true });\n      },\n      headers: request.headers,\n      body: this.serializer.deserialize(await request.body())\n    };\n  }\n  encode(output, procedure) {\n    const successStatus = fallbackContractConfig(\"defaultSuccessStatus\", procedure[\"~orpc\"].route.successStatus);\n    const outputStructure = fallbackContractConfig(\"defaultOutputStructure\", procedure[\"~orpc\"].route.outputStructure);\n    if (outputStructure === \"compact\") {\n      return {\n        status: successStatus,\n        headers: {},\n        body: this.serializer.serialize(output)\n      };\n    }\n    if (!this.#isDetailedOutput(output)) {\n      throw new Error(`\n        Invalid \"detailed\" output structure:\n        \\u2022 Expected an object with optional properties:\n          - status (number 200-399)\n          - headers (Record<string, string | string[]>)\n          - body (any)\n        \\u2022 No extra keys allowed.\n\n        Actual value:\n          ${stringifyJSON(output)}\n      `);\n    }\n    return {\n      status: output.status ?? successStatus,\n      headers: output.headers ?? {},\n      body: this.serializer.serialize(output.body)\n    };\n  }\n  encodeError(error) {\n    const body = this.customErrorResponseBodyEncoder?.(error) ?? error.toJSON();\n    return {\n      status: error.status,\n      headers: {},\n      body: this.serializer.serialize(body, { outputFormat: \"plain\" })\n    };\n  }\n  #isDetailedOutput(output) {\n    if (!isObject(output)) {\n      return false;\n    }\n    if (output.headers && !isObject(output.headers)) {\n      return false;\n    }\n    if (output.status !== void 0 && (typeof output.status !== \"number\" || !Number.isInteger(output.status) || isORPCErrorStatus(output.status))) {\n      return false;\n    }\n    return true;\n  }\n}\n\nfunction toRou3Pattern(path) {\n  return standardizeHTTPPath(path).replace(/\\/\\{\\+([^}]+)\\}/g, \"/**:$1\").replace(/\\/\\{([^}]+)\\}/g, \"/:$1\");\n}\nfunction decodeParams(params) {\n  return Object.fromEntries(Object.entries(params).map(([key, value]) => [key, tryDecodeURIComponent(value)]));\n}\n\nclass StandardOpenAPIMatcher {\n  filter;\n  tree = createRouter();\n  pendingRouters = [];\n  constructor(options = {}) {\n    this.filter = options.filter ?? true;\n  }\n  init(router, path = []) {\n    const laziedOptions = traverseContractProcedures({ router, path }, (traverseOptions) => {\n      if (!value(this.filter, traverseOptions)) {\n        return;\n      }\n      const { path: path2, contract } = traverseOptions;\n      const method = fallbackContractConfig(\"defaultMethod\", contract[\"~orpc\"].route.method);\n      const httpPath = toRou3Pattern(contract[\"~orpc\"].route.path ?? toHttpPath(path2));\n      if (isProcedure(contract)) {\n        addRoute(this.tree, method, httpPath, {\n          path: path2,\n          contract,\n          procedure: contract,\n          // this mean dev not used contract-first so we can used contract as procedure directly\n          router\n        });\n      } else {\n        addRoute(this.tree, method, httpPath, {\n          path: path2,\n          contract,\n          procedure: void 0,\n          router\n        });\n      }\n    });\n    this.pendingRouters.push(...laziedOptions.map((option) => ({\n      ...option,\n      httpPathPrefix: toHttpPath(option.path),\n      laziedPrefix: getLazyMeta(option.router).prefix\n    })));\n  }\n  async match(method, pathname) {\n    if (this.pendingRouters.length) {\n      const newPendingRouters = [];\n      for (const pendingRouter of this.pendingRouters) {\n        if (!pendingRouter.laziedPrefix || pathname.startsWith(pendingRouter.laziedPrefix) || pathname.startsWith(pendingRouter.httpPathPrefix)) {\n          const { default: router } = await unlazy(pendingRouter.router);\n          this.init(router, pendingRouter.path);\n        } else {\n          newPendingRouters.push(pendingRouter);\n        }\n      }\n      this.pendingRouters = newPendingRouters;\n    }\n    const match = findRoute(this.tree, method, pathname);\n    if (!match) {\n      return void 0;\n    }\n    if (!match.data.procedure) {\n      const { default: maybeProcedure } = await unlazy(getRouter(match.data.router, match.data.path));\n      if (!isProcedure(maybeProcedure)) {\n        throw new Error(`\n          [Contract-First] Missing or invalid implementation for procedure at path: ${toHttpPath(match.data.path)}.\n          Ensure that the procedure is correctly defined and matches the expected contract.\n        `);\n      }\n      match.data.procedure = createContractedProcedure(maybeProcedure, match.data.contract);\n    }\n    return {\n      path: match.data.path,\n      procedure: match.data.procedure,\n      params: match.params ? decodeParams(match.params) : void 0\n    };\n  }\n}\n\nclass StandardOpenAPIHandler extends StandardHandler {\n  constructor(router, options) {\n    const jsonSerializer = new StandardOpenAPIJsonSerializer(options);\n    const bracketNotationSerializer = new StandardBracketNotationSerializer(options);\n    const serializer = new StandardOpenAPISerializer(jsonSerializer, bracketNotationSerializer);\n    const matcher = new StandardOpenAPIMatcher(options);\n    const codec = new StandardOpenAPICodec(serializer, options);\n    super(router, matcher, codec, options);\n  }\n}\n\nexport { StandardOpenAPICodec as S, StandardOpenAPIHandler as a, StandardOpenAPIMatcher as b, decodeParams as d, toRou3Pattern as t };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 14720, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bopenapi%401.11.1/node_modules/%40orpc/openapi/dist/adapters/fetch/index.mjs"],"sourcesContent":["import { FetchHandler } from '@orpc/server/fetch';\nimport '@orpc/client';\nimport '@orpc/contract';\nimport '@orpc/shared';\nimport { a as StandardOpenAPIHandler } from '../../shared/openapi.DIt-Z9W1.mjs';\nimport '@orpc/client/standard';\nimport '@orpc/server';\nimport 'rou3';\nimport '@orpc/openapi-client/standard';\nimport '@orpc/server/standard';\n\nclass OpenAPIHandler extends FetchHandler {\n  constructor(router, options = {}) {\n    super(new StandardOpenAPIHandler(router, options), options);\n  }\n}\n\nexport { OpenAPIHandler };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;;;;;;;AAEA,MAAM,uBAAuB,uPAAY;IACvC,YAAY,MAAM,EAAE,UAAU,CAAC,CAAC,CAAE;QAChC,KAAK,CAAC,IAAI,oPAAsB,CAAC,QAAQ,UAAU;IACrD;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 14753, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bopenapi%401.11.1/node_modules/%40orpc/openapi/dist/shared/openapi.CzHcOMxv.mjs"],"sourcesContent":["import { isORPCErrorStatus, fallbackORPCErrorStatus, fallbackORPCErrorMessage } from '@orpc/client';\nimport { toHttpPath } from '@orpc/client/standard';\nimport { fallbackContractConfig, getEventIteratorSchemaDetails } from '@orpc/contract';\nimport { standardizeHTTPPath, StandardOpenAPIJsonSerializer, getDynamicParams } from '@orpc/openapi-client/standard';\nimport { isProcedure, resolveContractProcedures } from '@orpc/server';\nimport { isObject, stringifyJSON, findDeepMatches, toArray, clone, value } from '@orpc/shared';\nimport { TypeName } from '@orpc/interop/json-schema-typed/draft-2020-12';\n\nconst OPERATION_EXTENDER_SYMBOL = Symbol(\"ORPC_OPERATION_EXTENDER\");\nfunction customOpenAPIOperation(o, extend) {\n  return new Proxy(o, {\n    get(target, prop, receiver) {\n      if (prop === OPERATION_EXTENDER_SYMBOL) {\n        return extend;\n      }\n      return Reflect.get(target, prop, receiver);\n    }\n  });\n}\nfunction getCustomOpenAPIOperation(o) {\n  return o[OPERATION_EXTENDER_SYMBOL];\n}\nfunction applyCustomOpenAPIOperation(operation, contract) {\n  const operationCustoms = [];\n  for (const errorItem of Object.values(contract[\"~orpc\"].errorMap)) {\n    const maybeExtender = errorItem ? getCustomOpenAPIOperation(errorItem) : void 0;\n    if (maybeExtender) {\n      operationCustoms.push(maybeExtender);\n    }\n  }\n  if (isProcedure(contract)) {\n    for (const middleware of contract[\"~orpc\"].middlewares) {\n      const maybeExtender = getCustomOpenAPIOperation(middleware);\n      if (maybeExtender) {\n        operationCustoms.push(maybeExtender);\n      }\n    }\n  }\n  let currentOperation = operation;\n  for (const custom of operationCustoms) {\n    if (typeof custom === \"function\") {\n      currentOperation = custom(currentOperation, contract);\n    } else {\n      currentOperation = {\n        ...currentOperation,\n        ...custom\n      };\n    }\n  }\n  return currentOperation;\n}\n\nconst LOGIC_KEYWORDS = [\n  \"$dynamicRef\",\n  \"$ref\",\n  \"additionalItems\",\n  \"additionalProperties\",\n  \"allOf\",\n  \"anyOf\",\n  \"const\",\n  \"contains\",\n  \"contentEncoding\",\n  \"contentMediaType\",\n  \"contentSchema\",\n  \"dependencies\",\n  \"dependentRequired\",\n  \"dependentSchemas\",\n  \"else\",\n  \"enum\",\n  \"exclusiveMaximum\",\n  \"exclusiveMinimum\",\n  \"format\",\n  \"if\",\n  \"items\",\n  \"maxContains\",\n  \"maximum\",\n  \"maxItems\",\n  \"maxLength\",\n  \"maxProperties\",\n  \"minContains\",\n  \"minimum\",\n  \"minItems\",\n  \"minLength\",\n  \"minProperties\",\n  \"multipleOf\",\n  \"not\",\n  \"oneOf\",\n  \"pattern\",\n  \"patternProperties\",\n  \"prefixItems\",\n  \"properties\",\n  \"propertyNames\",\n  \"required\",\n  \"then\",\n  \"type\",\n  \"unevaluatedItems\",\n  \"unevaluatedProperties\",\n  \"uniqueItems\"\n];\n\nfunction isFileSchema(schema) {\n  return isObject(schema) && schema.type === \"string\" && typeof schema.contentMediaType === \"string\";\n}\nfunction isObjectSchema(schema) {\n  return isObject(schema) && schema.type === \"object\";\n}\nfunction isAnySchema(schema) {\n  if (schema === true) {\n    return true;\n  }\n  if (Object.keys(schema).every((k) => !LOGIC_KEYWORDS.includes(k))) {\n    return true;\n  }\n  return false;\n}\nfunction separateObjectSchema(schema, separatedProperties) {\n  if (Object.keys(schema).some(\n    (k) => ![\"type\", \"properties\", \"required\", \"additionalProperties\"].includes(k) && LOGIC_KEYWORDS.includes(k) && schema[k] !== void 0\n  )) {\n    return [{ type: \"object\" }, schema];\n  }\n  const matched = { ...schema };\n  const rest = { ...schema };\n  matched.properties = separatedProperties.reduce((acc, key) => {\n    const keySchema = schema.properties?.[key] ?? schema.additionalProperties;\n    if (keySchema !== void 0) {\n      acc[key] = keySchema;\n    }\n    return acc;\n  }, {});\n  matched.required = schema.required?.filter((key) => separatedProperties.includes(key));\n  matched.examples = schema.examples?.map((example) => {\n    if (!isObject(example)) {\n      return example;\n    }\n    return Object.entries(example).reduce((acc, [key, value]) => {\n      if (separatedProperties.includes(key)) {\n        acc[key] = value;\n      }\n      return acc;\n    }, {});\n  });\n  rest.properties = schema.properties && Object.entries(schema.properties).filter(([key]) => !separatedProperties.includes(key)).reduce((acc, [key, value]) => {\n    acc[key] = value;\n    return acc;\n  }, {});\n  rest.required = schema.required?.filter((key) => !separatedProperties.includes(key));\n  rest.examples = schema.examples?.map((example) => {\n    if (!isObject(example)) {\n      return example;\n    }\n    return Object.entries(example).reduce((acc, [key, value]) => {\n      if (!separatedProperties.includes(key)) {\n        acc[key] = value;\n      }\n      return acc;\n    }, {});\n  });\n  return [matched, rest];\n}\nfunction filterSchemaBranches(schema, check, matches = []) {\n  if (check(schema)) {\n    matches.push(schema);\n    return [matches, void 0];\n  }\n  if (isObject(schema)) {\n    for (const keyword of [\"anyOf\", \"oneOf\"]) {\n      if (schema[keyword] && Object.keys(schema).every(\n        (k) => k === keyword || !LOGIC_KEYWORDS.includes(k)\n      )) {\n        const rest = schema[keyword].map((s) => filterSchemaBranches(s, check, matches)[1]).filter((v) => !!v);\n        if (rest.length === 1 && typeof rest[0] === \"object\") {\n          return [matches, { ...schema, [keyword]: void 0, ...rest[0] }];\n        }\n        return [matches, { ...schema, [keyword]: rest }];\n      }\n    }\n  }\n  return [matches, schema];\n}\nfunction applySchemaOptionality(required, schema) {\n  if (required) {\n    return schema;\n  }\n  return {\n    anyOf: [\n      schema,\n      { not: {} }\n    ]\n  };\n}\nfunction expandUnionSchema(schema) {\n  if (typeof schema === \"object\") {\n    for (const keyword of [\"anyOf\", \"oneOf\"]) {\n      if (schema[keyword] && Object.keys(schema).every(\n        (k) => k === keyword || !LOGIC_KEYWORDS.includes(k)\n      )) {\n        return schema[keyword].flatMap((s) => expandUnionSchema(s));\n      }\n    }\n  }\n  return [schema];\n}\nfunction expandArrayableSchema(schema) {\n  const schemas = expandUnionSchema(schema);\n  if (schemas.length !== 2) {\n    return void 0;\n  }\n  const arraySchema = schemas.find(\n    (s) => typeof s === \"object\" && s.type === \"array\" && Object.keys(s).filter((k) => LOGIC_KEYWORDS.includes(k)).every((k) => k === \"type\" || k === \"items\")\n  );\n  if (arraySchema === void 0) {\n    return void 0;\n  }\n  const items1 = arraySchema.items;\n  const items2 = schemas.find((s) => s !== arraySchema);\n  if (stringifyJSON(items1) !== stringifyJSON(items2)) {\n    return void 0;\n  }\n  return [items2, arraySchema];\n}\nconst PRIMITIVE_SCHEMA_TYPES = /* @__PURE__ */ new Set([\n  TypeName.String,\n  TypeName.Number,\n  TypeName.Integer,\n  TypeName.Boolean,\n  TypeName.Null\n]);\nfunction isPrimitiveSchema(schema) {\n  return expandUnionSchema(schema).every((s) => {\n    if (typeof s === \"boolean\") {\n      return false;\n    }\n    if (typeof s.type === \"string\" && PRIMITIVE_SCHEMA_TYPES.has(s.type)) {\n      return true;\n    }\n    if (s.const !== void 0) {\n      return true;\n    }\n    return false;\n  });\n}\n\nfunction toOpenAPIPath(path) {\n  return standardizeHTTPPath(path).replace(/\\/\\{\\+([^}]+)\\}/g, \"/{$1}\");\n}\nfunction toOpenAPIMethod(method) {\n  return method.toLocaleLowerCase();\n}\nfunction toOpenAPIContent(schema) {\n  const content = {};\n  const [matches, restSchema] = filterSchemaBranches(schema, isFileSchema);\n  for (const file of matches) {\n    content[file.contentMediaType] = {\n      schema: toOpenAPISchema(file)\n    };\n  }\n  if (restSchema !== void 0) {\n    content[\"application/json\"] = {\n      schema: toOpenAPISchema(restSchema)\n    };\n    const isStillHasFileSchema = findDeepMatches((v) => isObject(v) && isFileSchema(v), restSchema).values.length > 0;\n    if (isStillHasFileSchema) {\n      content[\"multipart/form-data\"] = {\n        schema: toOpenAPISchema(restSchema)\n      };\n    }\n  }\n  return content;\n}\nfunction toOpenAPIEventIteratorContent([yieldsRequired, yieldsSchema], [returnsRequired, returnsSchema]) {\n  return {\n    \"text/event-stream\": {\n      schema: toOpenAPISchema({\n        oneOf: [\n          {\n            type: \"object\",\n            properties: {\n              event: { const: \"message\" },\n              data: yieldsSchema,\n              id: { type: \"string\" },\n              retry: { type: \"number\" }\n            },\n            required: yieldsRequired ? [\"event\", \"data\"] : [\"event\"]\n          },\n          {\n            type: \"object\",\n            properties: {\n              event: { const: \"done\" },\n              data: returnsSchema,\n              id: { type: \"string\" },\n              retry: { type: \"number\" }\n            },\n            required: returnsRequired ? [\"event\", \"data\"] : [\"event\"]\n          },\n          {\n            type: \"object\",\n            properties: {\n              event: { const: \"error\" },\n              data: {},\n              id: { type: \"string\" },\n              retry: { type: \"number\" }\n            },\n            required: [\"event\"]\n          }\n        ]\n      })\n    }\n  };\n}\nfunction toOpenAPIParameters(schema, parameterIn) {\n  const parameters = [];\n  for (const key in schema.properties) {\n    const keySchema = schema.properties[key];\n    let isDeepObjectStyle = true;\n    if (parameterIn !== \"query\") {\n      isDeepObjectStyle = false;\n    } else if (isPrimitiveSchema(keySchema)) {\n      isDeepObjectStyle = false;\n    } else {\n      const [item] = expandArrayableSchema(keySchema) ?? [];\n      if (item !== void 0 && isPrimitiveSchema(item)) {\n        isDeepObjectStyle = false;\n      }\n    }\n    parameters.push({\n      name: key,\n      in: parameterIn,\n      required: schema.required?.includes(key),\n      schema: toOpenAPISchema(keySchema),\n      style: isDeepObjectStyle ? \"deepObject\" : void 0,\n      explode: isDeepObjectStyle ? true : void 0,\n      allowEmptyValue: parameterIn === \"query\" ? true : void 0,\n      allowReserved: parameterIn === \"query\" ? true : void 0\n    });\n  }\n  return parameters;\n}\nfunction checkParamsSchema(schema, params) {\n  const properties = Object.keys(schema.properties ?? {});\n  const required = schema.required ?? [];\n  if (properties.length !== params.length || properties.some((v) => !params.includes(v))) {\n    return false;\n  }\n  if (required.length !== params.length || required.some((v) => !params.includes(v))) {\n    return false;\n  }\n  return true;\n}\nfunction toOpenAPISchema(schema) {\n  return schema === true ? {} : schema === false ? { not: {} } : schema;\n}\nconst OPENAPI_JSON_SCHEMA_REF_PREFIX = \"#/components/schemas/\";\nfunction resolveOpenAPIJsonSchemaRef(doc, schema) {\n  if (typeof schema !== \"object\" || !schema.$ref?.startsWith(OPENAPI_JSON_SCHEMA_REF_PREFIX)) {\n    return schema;\n  }\n  const name = schema.$ref.slice(OPENAPI_JSON_SCHEMA_REF_PREFIX.length);\n  const resolved = doc.components?.schemas?.[name];\n  return resolved ?? schema;\n}\nfunction simplifyComposedObjectJsonSchemasAndRefs(schema, doc) {\n  if (doc) {\n    schema = resolveOpenAPIJsonSchemaRef(doc, schema);\n  }\n  if (typeof schema !== \"object\" || !schema.anyOf && !schema.oneOf && !schema.allOf) {\n    return schema;\n  }\n  const unionSchemas = [\n    ...toArray(schema.anyOf?.map((s) => simplifyComposedObjectJsonSchemasAndRefs(s, doc))),\n    ...toArray(schema.oneOf?.map((s) => simplifyComposedObjectJsonSchemasAndRefs(s, doc)))\n  ];\n  const objectUnionSchemas = [];\n  for (const u of unionSchemas) {\n    if (!isObjectSchema(u)) {\n      return schema;\n    }\n    objectUnionSchemas.push(u);\n  }\n  const mergedUnionPropertyMap = /* @__PURE__ */ new Map();\n  for (const u of objectUnionSchemas) {\n    if (u.properties) {\n      for (const [key, value] of Object.entries(u.properties)) {\n        let entry = mergedUnionPropertyMap.get(key);\n        if (!entry) {\n          const required = objectUnionSchemas.every((s) => s.required?.includes(key));\n          entry = { required, schemas: [] };\n          mergedUnionPropertyMap.set(key, entry);\n        }\n        entry.schemas.push(value);\n      }\n    }\n  }\n  const intersectionSchemas = toArray(schema.allOf?.map((s) => simplifyComposedObjectJsonSchemasAndRefs(s, doc)));\n  const objectIntersectionSchemas = [];\n  for (const u of intersectionSchemas) {\n    if (!isObjectSchema(u)) {\n      return schema;\n    }\n    objectIntersectionSchemas.push(u);\n  }\n  if (isObjectSchema(schema)) {\n    objectIntersectionSchemas.push(schema);\n  }\n  const mergedInteractionPropertyMap = /* @__PURE__ */ new Map();\n  for (const u of objectIntersectionSchemas) {\n    if (u.properties) {\n      for (const [key, value] of Object.entries(u.properties)) {\n        let entry = mergedInteractionPropertyMap.get(key);\n        if (!entry) {\n          const required = objectIntersectionSchemas.some((s) => s.required?.includes(key));\n          entry = { required, schemas: [] };\n          mergedInteractionPropertyMap.set(key, entry);\n        }\n        entry.schemas.push(value);\n      }\n    }\n  }\n  const resultObjectSchema = { type: \"object\", properties: {}, required: [] };\n  const keys = /* @__PURE__ */ new Set([\n    ...mergedUnionPropertyMap.keys(),\n    ...mergedInteractionPropertyMap.keys()\n  ]);\n  if (keys.size === 0) {\n    return schema;\n  }\n  const deduplicateSchemas = (schemas) => {\n    const seen = /* @__PURE__ */ new Set();\n    const result = [];\n    for (const schema2 of schemas) {\n      const key = stringifyJSON(schema2);\n      if (!seen.has(key)) {\n        seen.add(key);\n        result.push(schema2);\n      }\n    }\n    return result;\n  };\n  for (const key of keys) {\n    const unionEntry = mergedUnionPropertyMap.get(key);\n    const intersectionEntry = mergedInteractionPropertyMap.get(key);\n    resultObjectSchema.properties[key] = (() => {\n      const dedupedUnionSchemas = unionEntry ? deduplicateSchemas(unionEntry.schemas) : [];\n      const dedupedIntersectionSchemas = intersectionEntry ? deduplicateSchemas(intersectionEntry.schemas) : [];\n      if (!dedupedUnionSchemas.length) {\n        return dedupedIntersectionSchemas.length === 1 ? dedupedIntersectionSchemas[0] : { allOf: dedupedIntersectionSchemas };\n      }\n      if (!dedupedIntersectionSchemas.length) {\n        return dedupedUnionSchemas.length === 1 ? dedupedUnionSchemas[0] : { anyOf: dedupedUnionSchemas };\n      }\n      const allOf = deduplicateSchemas([\n        ...dedupedIntersectionSchemas,\n        dedupedUnionSchemas.length === 1 ? dedupedUnionSchemas[0] : { anyOf: dedupedUnionSchemas }\n      ]);\n      return allOf.length === 1 ? allOf[0] : { allOf };\n    })();\n    if (unionEntry?.required || intersectionEntry?.required) {\n      resultObjectSchema.required.push(key);\n    }\n  }\n  return resultObjectSchema;\n}\n\nclass CompositeSchemaConverter {\n  converters;\n  constructor(converters) {\n    this.converters = converters;\n  }\n  async convert(schema, options) {\n    for (const converter of this.converters) {\n      if (await converter.condition(schema, options)) {\n        return converter.convert(schema, options);\n      }\n    }\n    return [false, {}];\n  }\n}\n\nclass OpenAPIGeneratorError extends Error {\n}\nclass OpenAPIGenerator {\n  serializer;\n  converter;\n  constructor(options = {}) {\n    this.serializer = new StandardOpenAPIJsonSerializer(options);\n    this.converter = new CompositeSchemaConverter(toArray(options.schemaConverters));\n  }\n  /**\n   * Generates OpenAPI specifications from oRPC routers/contracts.\n   *\n   * @see {@link https://orpc.unnoq.com/docs/openapi/openapi-specification OpenAPI Specification Docs}\n   */\n  async generate(router, { customErrorResponseBodySchema, commonSchemas, filter: baseFilter, exclude, ...baseDoc } = {}) {\n    const filter = baseFilter ?? (({ contract, path }) => {\n      return !(exclude?.(contract, path) ?? false);\n    });\n    const doc = {\n      ...clone(baseDoc),\n      info: baseDoc.info ?? { title: \"API Reference\", version: \"0.0.0\" },\n      openapi: \"3.1.1\"\n    };\n    const { baseSchemaConvertOptions, undefinedErrorJsonSchema } = await this.#resolveCommonSchemas(doc, commonSchemas);\n    const contracts = [];\n    await resolveContractProcedures({ path: [], router }, (traverseOptions) => {\n      if (!value(filter, traverseOptions)) {\n        return;\n      }\n      contracts.push(traverseOptions);\n    });\n    const errors = [];\n    for (const { contract, path } of contracts) {\n      const stringPath = path.join(\".\");\n      try {\n        const def = contract[\"~orpc\"];\n        const method = toOpenAPIMethod(fallbackContractConfig(\"defaultMethod\", def.route.method));\n        const httpPath = toOpenAPIPath(def.route.path ?? toHttpPath(path));\n        let operationObjectRef;\n        if (def.route.spec !== void 0 && typeof def.route.spec !== \"function\") {\n          operationObjectRef = def.route.spec;\n        } else {\n          operationObjectRef = {\n            operationId: def.route.operationId ?? stringPath,\n            summary: def.route.summary,\n            description: def.route.description,\n            deprecated: def.route.deprecated,\n            tags: def.route.tags?.map((tag) => tag)\n          };\n          await this.#request(doc, operationObjectRef, def, baseSchemaConvertOptions);\n          await this.#successResponse(doc, operationObjectRef, def, baseSchemaConvertOptions);\n          await this.#errorResponse(operationObjectRef, def, baseSchemaConvertOptions, undefinedErrorJsonSchema, customErrorResponseBodySchema);\n        }\n        if (typeof def.route.spec === \"function\") {\n          operationObjectRef = def.route.spec(operationObjectRef);\n        }\n        doc.paths ??= {};\n        doc.paths[httpPath] ??= {};\n        doc.paths[httpPath][method] = applyCustomOpenAPIOperation(operationObjectRef, contract);\n      } catch (e) {\n        if (!(e instanceof OpenAPIGeneratorError)) {\n          throw e;\n        }\n        errors.push(\n          `[OpenAPIGenerator] Error occurred while generating OpenAPI for procedure at path: ${stringPath}\n${e.message}`\n        );\n      }\n    }\n    if (errors.length) {\n      throw new OpenAPIGeneratorError(\n        `Some error occurred during OpenAPI generation:\n\n${errors.join(\"\\n\\n\")}`\n      );\n    }\n    return this.serializer.serialize(doc)[0];\n  }\n  async #resolveCommonSchemas(doc, commonSchemas) {\n    let undefinedErrorJsonSchema = {\n      type: \"object\",\n      properties: {\n        defined: { const: false },\n        code: { type: \"string\" },\n        status: { type: \"number\" },\n        message: { type: \"string\" },\n        data: {}\n      },\n      required: [\"defined\", \"code\", \"status\", \"message\"]\n    };\n    const baseSchemaConvertOptions = {};\n    if (commonSchemas) {\n      baseSchemaConvertOptions.components = [];\n      for (const key in commonSchemas) {\n        const options = commonSchemas[key];\n        if (options.schema === void 0) {\n          continue;\n        }\n        const { schema, strategy = \"input\" } = options;\n        const [required, json] = await this.converter.convert(schema, { strategy });\n        const allowedStrategies = [strategy];\n        if (strategy === \"input\") {\n          const [outputRequired, outputJson] = await this.converter.convert(schema, { strategy: \"output\" });\n          if (outputRequired === required && stringifyJSON(outputJson) === stringifyJSON(json)) {\n            allowedStrategies.push(\"output\");\n          }\n        } else if (strategy === \"output\") {\n          const [inputRequired, inputJson] = await this.converter.convert(schema, { strategy: \"input\" });\n          if (inputRequired === required && stringifyJSON(inputJson) === stringifyJSON(json)) {\n            allowedStrategies.push(\"input\");\n          }\n        }\n        baseSchemaConvertOptions.components.push({\n          schema,\n          required,\n          ref: `#/components/schemas/${key}`,\n          allowedStrategies\n        });\n      }\n      doc.components ??= {};\n      doc.components.schemas ??= {};\n      for (const key in commonSchemas) {\n        const options = commonSchemas[key];\n        if (options.schema === void 0) {\n          if (options.error === \"UndefinedError\") {\n            doc.components.schemas[key] = toOpenAPISchema(undefinedErrorJsonSchema);\n            undefinedErrorJsonSchema = { $ref: `#/components/schemas/${key}` };\n          }\n          continue;\n        }\n        const { schema, strategy = \"input\" } = options;\n        const [, json] = await this.converter.convert(\n          schema,\n          {\n            ...baseSchemaConvertOptions,\n            strategy,\n            minStructureDepthForRef: 1\n            // not allow use $ref for root schemas\n          }\n        );\n        doc.components.schemas[key] = toOpenAPISchema(json);\n      }\n    }\n    return { baseSchemaConvertOptions, undefinedErrorJsonSchema };\n  }\n  async #request(doc, ref, def, baseSchemaConvertOptions) {\n    const method = fallbackContractConfig(\"defaultMethod\", def.route.method);\n    const details = getEventIteratorSchemaDetails(def.inputSchema);\n    if (details) {\n      ref.requestBody = {\n        required: true,\n        content: toOpenAPIEventIteratorContent(\n          await this.converter.convert(details.yields, { ...baseSchemaConvertOptions, strategy: \"input\" }),\n          await this.converter.convert(details.returns, { ...baseSchemaConvertOptions, strategy: \"input\" })\n        )\n      };\n      return;\n    }\n    const dynamicParams = getDynamicParams(def.route.path)?.map((v) => v.name);\n    const inputStructure = fallbackContractConfig(\"defaultInputStructure\", def.route.inputStructure);\n    let [required, schema] = await this.converter.convert(\n      def.inputSchema,\n      {\n        ...baseSchemaConvertOptions,\n        strategy: \"input\"\n      }\n    );\n    if (isAnySchema(schema) && !dynamicParams?.length) {\n      return;\n    }\n    if (inputStructure === \"detailed\" || inputStructure === \"compact\" && (dynamicParams?.length || method === \"GET\")) {\n      schema = simplifyComposedObjectJsonSchemasAndRefs(schema, doc);\n    }\n    if (inputStructure === \"compact\") {\n      if (dynamicParams?.length) {\n        const error2 = new OpenAPIGeneratorError(\n          'When input structure is \"compact\", and path has dynamic params, input schema must be an object with all dynamic params as required.'\n        );\n        if (!isObjectSchema(schema)) {\n          throw error2;\n        }\n        const [paramsSchema, rest] = separateObjectSchema(schema, dynamicParams);\n        schema = rest;\n        required = rest.required ? rest.required.length !== 0 : false;\n        if (!checkParamsSchema(paramsSchema, dynamicParams)) {\n          throw error2;\n        }\n        ref.parameters ??= [];\n        ref.parameters.push(...toOpenAPIParameters(paramsSchema, \"path\"));\n      }\n      if (method === \"GET\") {\n        if (!isObjectSchema(schema)) {\n          throw new OpenAPIGeneratorError(\n            'When method is \"GET\", input schema must satisfy: object | any | unknown'\n          );\n        }\n        ref.parameters ??= [];\n        ref.parameters.push(...toOpenAPIParameters(schema, \"query\"));\n      } else {\n        ref.requestBody = {\n          required,\n          content: toOpenAPIContent(schema)\n        };\n      }\n      return;\n    }\n    const error = new OpenAPIGeneratorError(\n      'When input structure is \"detailed\", input schema must satisfy: { params?: Record<string, unknown>, query?: Record<string, unknown>, headers?: Record<string, unknown>, body?: unknown }'\n    );\n    if (!isObjectSchema(schema)) {\n      throw error;\n    }\n    const resolvedParamSchema = schema.properties?.params !== void 0 ? simplifyComposedObjectJsonSchemasAndRefs(schema.properties.params, doc) : void 0;\n    if (dynamicParams?.length && (resolvedParamSchema === void 0 || !isObjectSchema(resolvedParamSchema) || !checkParamsSchema(resolvedParamSchema, dynamicParams))) {\n      throw new OpenAPIGeneratorError(\n        'When input structure is \"detailed\" and path has dynamic params, the \"params\" schema must be an object with all dynamic params as required.'\n      );\n    }\n    for (const from of [\"params\", \"query\", \"headers\"]) {\n      const fromSchema = schema.properties?.[from];\n      if (fromSchema !== void 0) {\n        const resolvedSchema = simplifyComposedObjectJsonSchemasAndRefs(fromSchema, doc);\n        if (!isObjectSchema(resolvedSchema)) {\n          throw error;\n        }\n        const parameterIn = from === \"params\" ? \"path\" : from === \"headers\" ? \"header\" : \"query\";\n        ref.parameters ??= [];\n        ref.parameters.push(...toOpenAPIParameters(resolvedSchema, parameterIn));\n      }\n    }\n    if (schema.properties?.body !== void 0) {\n      ref.requestBody = {\n        required: schema.required?.includes(\"body\"),\n        content: toOpenAPIContent(schema.properties.body)\n      };\n    }\n  }\n  async #successResponse(doc, ref, def, baseSchemaConvertOptions) {\n    const outputSchema = def.outputSchema;\n    const status = fallbackContractConfig(\"defaultSuccessStatus\", def.route.successStatus);\n    const description = fallbackContractConfig(\"defaultSuccessDescription\", def.route?.successDescription);\n    const eventIteratorSchemaDetails = getEventIteratorSchemaDetails(outputSchema);\n    const outputStructure = fallbackContractConfig(\"defaultOutputStructure\", def.route.outputStructure);\n    if (eventIteratorSchemaDetails) {\n      ref.responses ??= {};\n      ref.responses[status] = {\n        description,\n        content: toOpenAPIEventIteratorContent(\n          await this.converter.convert(eventIteratorSchemaDetails.yields, { ...baseSchemaConvertOptions, strategy: \"output\" }),\n          await this.converter.convert(eventIteratorSchemaDetails.returns, { ...baseSchemaConvertOptions, strategy: \"output\" })\n        )\n      };\n      return;\n    }\n    const [required, json] = await this.converter.convert(\n      outputSchema,\n      {\n        ...baseSchemaConvertOptions,\n        strategy: \"output\",\n        minStructureDepthForRef: outputStructure === \"detailed\" ? 1 : 0\n      }\n    );\n    if (outputStructure === \"compact\") {\n      ref.responses ??= {};\n      ref.responses[status] = {\n        description\n      };\n      ref.responses[status].content = toOpenAPIContent(applySchemaOptionality(required, json));\n      return;\n    }\n    const handledStatuses = /* @__PURE__ */ new Set();\n    for (const item of expandUnionSchema(json)) {\n      const error = new OpenAPIGeneratorError(`\n        When output structure is \"detailed\", output schema must satisfy:\n        { \n          status?: number, // must be a literal number and in the range of 200-399\n          headers?: Record<string, unknown>, \n          body?: unknown \n        }\n        \n        But got: ${stringifyJSON(item)}\n      `);\n      const simplifiedItem = simplifyComposedObjectJsonSchemasAndRefs(item, doc);\n      if (!isObjectSchema(simplifiedItem)) {\n        throw error;\n      }\n      let schemaStatus;\n      let schemaDescription;\n      if (simplifiedItem.properties?.status !== void 0) {\n        const statusSchema = resolveOpenAPIJsonSchemaRef(doc, simplifiedItem.properties.status);\n        if (typeof statusSchema !== \"object\" || statusSchema.const === void 0 || typeof statusSchema.const !== \"number\" || !Number.isInteger(statusSchema.const) || isORPCErrorStatus(statusSchema.const)) {\n          throw error;\n        }\n        schemaStatus = statusSchema.const;\n        schemaDescription = statusSchema.description;\n      }\n      const itemStatus = schemaStatus ?? status;\n      const itemDescription = schemaDescription ?? description;\n      if (handledStatuses.has(itemStatus)) {\n        throw new OpenAPIGeneratorError(`\n          When output structure is \"detailed\", each success status must be unique.\n          But got status: ${itemStatus} used more than once.\n        `);\n      }\n      handledStatuses.add(itemStatus);\n      ref.responses ??= {};\n      ref.responses[itemStatus] = {\n        description: itemDescription\n      };\n      if (simplifiedItem.properties?.headers !== void 0) {\n        const headersSchema = simplifyComposedObjectJsonSchemasAndRefs(simplifiedItem.properties.headers, doc);\n        if (!isObjectSchema(headersSchema)) {\n          throw error;\n        }\n        for (const key in headersSchema.properties) {\n          const headerSchema = headersSchema.properties[key];\n          if (headerSchema !== void 0) {\n            ref.responses[itemStatus].headers ??= {};\n            ref.responses[itemStatus].headers[key] = {\n              schema: toOpenAPISchema(headerSchema),\n              required: simplifiedItem.required?.includes(\"headers\") && headersSchema.required?.includes(key)\n            };\n          }\n        }\n      }\n      if (simplifiedItem.properties?.body !== void 0) {\n        ref.responses[itemStatus].content = toOpenAPIContent(\n          applySchemaOptionality(simplifiedItem.required?.includes(\"body\") ?? false, simplifiedItem.properties.body)\n        );\n      }\n    }\n  }\n  async #errorResponse(ref, def, baseSchemaConvertOptions, undefinedErrorSchema, customErrorResponseBodySchema) {\n    const errorMap = def.errorMap;\n    const errorResponsesByStatus = {};\n    for (const code in errorMap) {\n      const config = errorMap[code];\n      if (!config) {\n        continue;\n      }\n      const status = fallbackORPCErrorStatus(code, config.status);\n      const defaultMessage = fallbackORPCErrorMessage(code, config.message);\n      errorResponsesByStatus[status] ??= { status, definedErrorDefinitions: [], errorSchemaVariants: [] };\n      const [dataRequired, dataSchema] = await this.converter.convert(config.data, { ...baseSchemaConvertOptions, strategy: \"output\" });\n      errorResponsesByStatus[status].definedErrorDefinitions.push([code, defaultMessage, dataRequired, dataSchema]);\n      errorResponsesByStatus[status].errorSchemaVariants.push({\n        type: \"object\",\n        properties: {\n          defined: { const: true },\n          code: { const: code },\n          status: { const: status },\n          message: { type: \"string\", default: defaultMessage },\n          data: dataSchema\n        },\n        required: dataRequired ? [\"defined\", \"code\", \"status\", \"message\", \"data\"] : [\"defined\", \"code\", \"status\", \"message\"]\n      });\n    }\n    ref.responses ??= {};\n    for (const statusString in errorResponsesByStatus) {\n      const errorResponse = errorResponsesByStatus[statusString];\n      const customBodySchema = value(customErrorResponseBodySchema, errorResponse.definedErrorDefinitions, errorResponse.status);\n      ref.responses[statusString] = {\n        description: statusString,\n        content: toOpenAPIContent(customBodySchema ?? {\n          oneOf: [\n            ...errorResponse.errorSchemaVariants,\n            undefinedErrorSchema\n          ]\n        })\n      };\n    }\n  }\n}\n\nexport { CompositeSchemaConverter as C, LOGIC_KEYWORDS as L, OpenAPIGenerator as O, applyCustomOpenAPIOperation as a, toOpenAPIMethod as b, customOpenAPIOperation as c, toOpenAPIContent as d, toOpenAPIEventIteratorContent as e, toOpenAPIParameters as f, getCustomOpenAPIOperation as g, checkParamsSchema as h, toOpenAPISchema as i, isFileSchema as j, isObjectSchema as k, isAnySchema as l, separateObjectSchema as m, filterSchemaBranches as n, applySchemaOptionality as o, expandUnionSchema as p, expandArrayableSchema as q, resolveOpenAPIJsonSchemaRef as r, simplifyComposedObjectJsonSchemasAndRefs as s, toOpenAPIPath as t, isPrimitiveSchema as u };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;;;;;;;;AAEA,MAAM,4BAA4B,OAAO;AACzC,SAAS,uBAAuB,CAAC,EAAE,MAAM;IACvC,OAAO,IAAI,MAAM,GAAG;QAClB,KAAI,MAAM,EAAE,IAAI,EAAE,QAAQ;YACxB,IAAI,SAAS,2BAA2B;gBACtC,OAAO;YACT;YACA,OAAO,QAAQ,GAAG,CAAC,QAAQ,MAAM;QACnC;IACF;AACF;AACA,SAAS,0BAA0B,CAAC;IAClC,OAAO,CAAC,CAAC,0BAA0B;AACrC;AACA,SAAS,4BAA4B,SAAS,EAAE,QAAQ;IACtD,MAAM,mBAAmB,EAAE;IAC3B,KAAK,MAAM,aAAa,OAAO,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,EAAG;QACjE,MAAM,gBAAgB,YAAY,0BAA0B,aAAa,KAAK;QAC9E,IAAI,eAAe;YACjB,iBAAiB,IAAI,CAAC;QACxB;IACF;IACA,IAAI,IAAA,4RAAW,EAAC,WAAW;QACzB,KAAK,MAAM,cAAc,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAE;YACtD,MAAM,gBAAgB,0BAA0B;YAChD,IAAI,eAAe;gBACjB,iBAAiB,IAAI,CAAC;YACxB;QACF;IACF;IACA,IAAI,mBAAmB;IACvB,KAAK,MAAM,UAAU,iBAAkB;QACrC,IAAI,OAAO,WAAW,YAAY;YAChC,mBAAmB,OAAO,kBAAkB;QAC9C,OAAO;YACL,mBAAmB;gBACjB,GAAG,gBAAgB;gBACnB,GAAG,MAAM;YACX;QACF;IACF;IACA,OAAO;AACT;AAEA,MAAM,iBAAiB;IACrB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,SAAS,aAAa,MAAM;IAC1B,OAAO,IAAA,8OAAQ,EAAC,WAAW,OAAO,IAAI,KAAK,YAAY,OAAO,OAAO,gBAAgB,KAAK;AAC5F;AACA,SAAS,eAAe,MAAM;IAC5B,OAAO,IAAA,8OAAQ,EAAC,WAAW,OAAO,IAAI,KAAK;AAC7C;AACA,SAAS,YAAY,MAAM;IACzB,IAAI,WAAW,MAAM;QACnB,OAAO;IACT;IACA,IAAI,OAAO,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC,IAAM,CAAC,eAAe,QAAQ,CAAC,KAAK;QACjE,OAAO;IACT;IACA,OAAO;AACT;AACA,SAAS,qBAAqB,MAAM,EAAE,mBAAmB;IACvD,IAAI,OAAO,IAAI,CAAC,QAAQ,IAAI,CAC1B,CAAC,IAAM,CAAC;YAAC;YAAQ;YAAc;YAAY;SAAuB,CAAC,QAAQ,CAAC,MAAM,eAAe,QAAQ,CAAC,MAAM,MAAM,CAAC,EAAE,KAAK,KAAK,IAClI;QACD,OAAO;YAAC;gBAAE,MAAM;YAAS;YAAG;SAAO;IACrC;IACA,MAAM,UAAU;QAAE,GAAG,MAAM;IAAC;IAC5B,MAAM,OAAO;QAAE,GAAG,MAAM;IAAC;IACzB,QAAQ,UAAU,GAAG,oBAAoB,MAAM,CAAC,CAAC,KAAK;QACpD,MAAM,YAAY,OAAO,UAAU,EAAE,CAAC,IAAI,IAAI,OAAO,oBAAoB;QACzE,IAAI,cAAc,KAAK,GAAG;YACxB,GAAG,CAAC,IAAI,GAAG;QACb;QACA,OAAO;IACT,GAAG,CAAC;IACJ,QAAQ,QAAQ,GAAG,OAAO,QAAQ,EAAE,OAAO,CAAC,MAAQ,oBAAoB,QAAQ,CAAC;IACjF,QAAQ,QAAQ,GAAG,OAAO,QAAQ,EAAE,IAAI,CAAC;QACvC,IAAI,CAAC,IAAA,8OAAQ,EAAC,UAAU;YACtB,OAAO;QACT;QACA,OAAO,OAAO,OAAO,CAAC,SAAS,MAAM,CAAC,CAAC,KAAK,CAAC,KAAK,MAAM;YACtD,IAAI,oBAAoB,QAAQ,CAAC,MAAM;gBACrC,GAAG,CAAC,IAAI,GAAG;YACb;YACA,OAAO;QACT,GAAG,CAAC;IACN;IACA,KAAK,UAAU,GAAG,OAAO,UAAU,IAAI,OAAO,OAAO,CAAC,OAAO,UAAU,EAAE,MAAM,CAAC,CAAC,CAAC,IAAI,GAAK,CAAC,oBAAoB,QAAQ,CAAC,MAAM,MAAM,CAAC,CAAC,KAAK,CAAC,KAAK,MAAM;QACtJ,GAAG,CAAC,IAAI,GAAG;QACX,OAAO;IACT,GAAG,CAAC;IACJ,KAAK,QAAQ,GAAG,OAAO,QAAQ,EAAE,OAAO,CAAC,MAAQ,CAAC,oBAAoB,QAAQ,CAAC;IAC/E,KAAK,QAAQ,GAAG,OAAO,QAAQ,EAAE,IAAI,CAAC;QACpC,IAAI,CAAC,IAAA,8OAAQ,EAAC,UAAU;YACtB,OAAO;QACT;QACA,OAAO,OAAO,OAAO,CAAC,SAAS,MAAM,CAAC,CAAC,KAAK,CAAC,KAAK,MAAM;YACtD,IAAI,CAAC,oBAAoB,QAAQ,CAAC,MAAM;gBACtC,GAAG,CAAC,IAAI,GAAG;YACb;YACA,OAAO;QACT,GAAG,CAAC;IACN;IACA,OAAO;QAAC;QAAS;KAAK;AACxB;AACA,SAAS,qBAAqB,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE;IACvD,IAAI,MAAM,SAAS;QACjB,QAAQ,IAAI,CAAC;QACb,OAAO;YAAC;YAAS,KAAK;SAAE;IAC1B;IACA,IAAI,IAAA,8OAAQ,EAAC,SAAS;QACpB,KAAK,MAAM,WAAW;YAAC;YAAS;SAAQ,CAAE;YACxC,IAAI,MAAM,CAAC,QAAQ,IAAI,OAAO,IAAI,CAAC,QAAQ,KAAK,CAC9C,CAAC,IAAM,MAAM,WAAW,CAAC,eAAe,QAAQ,CAAC,KAChD;gBACD,MAAM,OAAO,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAM,qBAAqB,GAAG,OAAO,QAAQ,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,IAAM,CAAC,CAAC;gBACpG,IAAI,KAAK,MAAM,KAAK,KAAK,OAAO,IAAI,CAAC,EAAE,KAAK,UAAU;oBACpD,OAAO;wBAAC;wBAAS;4BAAE,GAAG,MAAM;4BAAE,CAAC,QAAQ,EAAE,KAAK;4BAAG,GAAG,IAAI,CAAC,EAAE;wBAAC;qBAAE;gBAChE;gBACA,OAAO;oBAAC;oBAAS;wBAAE,GAAG,MAAM;wBAAE,CAAC,QAAQ,EAAE;oBAAK;iBAAE;YAClD;QACF;IACF;IACA,OAAO;QAAC;QAAS;KAAO;AAC1B;AACA,SAAS,uBAAuB,QAAQ,EAAE,MAAM;IAC9C,IAAI,UAAU;QACZ,OAAO;IACT;IACA,OAAO;QACL,OAAO;YACL;YACA;gBAAE,KAAK,CAAC;YAAE;SACX;IACH;AACF;AACA,SAAS,kBAAkB,MAAM;IAC/B,IAAI,OAAO,WAAW,UAAU;QAC9B,KAAK,MAAM,WAAW;YAAC;YAAS;SAAQ,CAAE;YACxC,IAAI,MAAM,CAAC,QAAQ,IAAI,OAAO,IAAI,CAAC,QAAQ,KAAK,CAC9C,CAAC,IAAM,MAAM,WAAW,CAAC,eAAe,QAAQ,CAAC,KAChD;gBACD,OAAO,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAM,kBAAkB;YAC1D;QACF;IACF;IACA,OAAO;QAAC;KAAO;AACjB;AACA,SAAS,sBAAsB,MAAM;IACnC,MAAM,UAAU,kBAAkB;IAClC,IAAI,QAAQ,MAAM,KAAK,GAAG;QACxB,OAAO,KAAK;IACd;IACA,MAAM,cAAc,QAAQ,IAAI,CAC9B,CAAC,IAAM,OAAO,MAAM,YAAY,EAAE,IAAI,KAAK,WAAW,OAAO,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC,IAAM,eAAe,QAAQ,CAAC,IAAI,KAAK,CAAC,CAAC,IAAM,MAAM,UAAU,MAAM;IAEpJ,IAAI,gBAAgB,KAAK,GAAG;QAC1B,OAAO,KAAK;IACd;IACA,MAAM,SAAS,YAAY,KAAK;IAChC,MAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,IAAM,MAAM;IACzC,IAAI,IAAA,mPAAa,EAAC,YAAY,IAAA,mPAAa,EAAC,SAAS;QACnD,OAAO,KAAK;IACd;IACA,OAAO;QAAC;QAAQ;KAAY;AAC9B;AACA,MAAM,yBAAyB,aAAa,GAAG,IAAI,IAAI;IACrD,2PAAQ,CAAC,MAAM;IACf,2PAAQ,CAAC,MAAM;IACf,2PAAQ,CAAC,OAAO;IAChB,2PAAQ,CAAC,OAAO;IAChB,2PAAQ,CAAC,IAAI;CACd;AACD,SAAS,kBAAkB,MAAM;IAC/B,OAAO,kBAAkB,QAAQ,KAAK,CAAC,CAAC;QACtC,IAAI,OAAO,MAAM,WAAW;YAC1B,OAAO;QACT;QACA,IAAI,OAAO,EAAE,IAAI,KAAK,YAAY,uBAAuB,GAAG,CAAC,EAAE,IAAI,GAAG;YACpE,OAAO;QACT;QACA,IAAI,EAAE,KAAK,KAAK,KAAK,GAAG;YACtB,OAAO;QACT;QACA,OAAO;IACT;AACF;AAEA,SAAS,cAAc,IAAI;IACzB,OAAO,IAAA,6UAAmB,EAAC,MAAM,OAAO,CAAC,oBAAoB;AAC/D;AACA,SAAS,gBAAgB,MAAM;IAC7B,OAAO,OAAO,iBAAiB;AACjC;AACA,SAAS,iBAAiB,MAAM;IAC9B,MAAM,UAAU,CAAC;IACjB,MAAM,CAAC,SAAS,WAAW,GAAG,qBAAqB,QAAQ;IAC3D,KAAK,MAAM,QAAQ,QAAS;QAC1B,OAAO,CAAC,KAAK,gBAAgB,CAAC,GAAG;YAC/B,QAAQ,gBAAgB;QAC1B;IACF;IACA,IAAI,eAAe,KAAK,GAAG;QACzB,OAAO,CAAC,mBAAmB,GAAG;YAC5B,QAAQ,gBAAgB;QAC1B;QACA,MAAM,uBAAuB,IAAA,qPAAe,EAAC,CAAC,IAAM,IAAA,8OAAQ,EAAC,MAAM,aAAa,IAAI,YAAY,MAAM,CAAC,MAAM,GAAG;QAChH,IAAI,sBAAsB;YACxB,OAAO,CAAC,sBAAsB,GAAG;gBAC/B,QAAQ,gBAAgB;YAC1B;QACF;IACF;IACA,OAAO;AACT;AACA,SAAS,8BAA8B,CAAC,gBAAgB,aAAa,EAAE,CAAC,iBAAiB,cAAc;IACrG,OAAO;QACL,qBAAqB;YACnB,QAAQ,gBAAgB;gBACtB,OAAO;oBACL;wBACE,MAAM;wBACN,YAAY;4BACV,OAAO;gCAAE,OAAO;4BAAU;4BAC1B,MAAM;4BACN,IAAI;gCAAE,MAAM;4BAAS;4BACrB,OAAO;gCAAE,MAAM;4BAAS;wBAC1B;wBACA,UAAU,iBAAiB;4BAAC;4BAAS;yBAAO,GAAG;4BAAC;yBAAQ;oBAC1D;oBACA;wBACE,MAAM;wBACN,YAAY;4BACV,OAAO;gCAAE,OAAO;4BAAO;4BACvB,MAAM;4BACN,IAAI;gCAAE,MAAM;4BAAS;4BACrB,OAAO;gCAAE,MAAM;4BAAS;wBAC1B;wBACA,UAAU,kBAAkB;4BAAC;4BAAS;yBAAO,GAAG;4BAAC;yBAAQ;oBAC3D;oBACA;wBACE,MAAM;wBACN,YAAY;4BACV,OAAO;gCAAE,OAAO;4BAAQ;4BACxB,MAAM,CAAC;4BACP,IAAI;gCAAE,MAAM;4BAAS;4BACrB,OAAO;gCAAE,MAAM;4BAAS;wBAC1B;wBACA,UAAU;4BAAC;yBAAQ;oBACrB;iBACD;YACH;QACF;IACF;AACF;AACA,SAAS,oBAAoB,MAAM,EAAE,WAAW;IAC9C,MAAM,aAAa,EAAE;IACrB,IAAK,MAAM,OAAO,OAAO,UAAU,CAAE;QACnC,MAAM,YAAY,OAAO,UAAU,CAAC,IAAI;QACxC,IAAI,oBAAoB;QACxB,IAAI,gBAAgB,SAAS;YAC3B,oBAAoB;QACtB,OAAO,IAAI,kBAAkB,YAAY;YACvC,oBAAoB;QACtB,OAAO;YACL,MAAM,CAAC,KAAK,GAAG,sBAAsB,cAAc,EAAE;YACrD,IAAI,SAAS,KAAK,KAAK,kBAAkB,OAAO;gBAC9C,oBAAoB;YACtB;QACF;QACA,WAAW,IAAI,CAAC;YACd,MAAM;YACN,IAAI;YACJ,UAAU,OAAO,QAAQ,EAAE,SAAS;YACpC,QAAQ,gBAAgB;YACxB,OAAO,oBAAoB,eAAe,KAAK;YAC/C,SAAS,oBAAoB,OAAO,KAAK;YACzC,iBAAiB,gBAAgB,UAAU,OAAO,KAAK;YACvD,eAAe,gBAAgB,UAAU,OAAO,KAAK;QACvD;IACF;IACA,OAAO;AACT;AACA,SAAS,kBAAkB,MAAM,EAAE,MAAM;IACvC,MAAM,aAAa,OAAO,IAAI,CAAC,OAAO,UAAU,IAAI,CAAC;IACrD,MAAM,WAAW,OAAO,QAAQ,IAAI,EAAE;IACtC,IAAI,WAAW,MAAM,KAAK,OAAO,MAAM,IAAI,WAAW,IAAI,CAAC,CAAC,IAAM,CAAC,OAAO,QAAQ,CAAC,KAAK;QACtF,OAAO;IACT;IACA,IAAI,SAAS,MAAM,KAAK,OAAO,MAAM,IAAI,SAAS,IAAI,CAAC,CAAC,IAAM,CAAC,OAAO,QAAQ,CAAC,KAAK;QAClF,OAAO;IACT;IACA,OAAO;AACT;AACA,SAAS,gBAAgB,MAAM;IAC7B,OAAO,WAAW,OAAO,CAAC,IAAI,WAAW,QAAQ;QAAE,KAAK,CAAC;IAAE,IAAI;AACjE;AACA,MAAM,iCAAiC;AACvC,SAAS,4BAA4B,GAAG,EAAE,MAAM;IAC9C,IAAI,OAAO,WAAW,YAAY,CAAC,OAAO,IAAI,EAAE,WAAW,iCAAiC;QAC1F,OAAO;IACT;IACA,MAAM,OAAO,OAAO,IAAI,CAAC,KAAK,CAAC,+BAA+B,MAAM;IACpE,MAAM,WAAW,IAAI,UAAU,EAAE,SAAS,CAAC,KAAK;IAChD,OAAO,YAAY;AACrB;AACA,SAAS,yCAAyC,MAAM,EAAE,GAAG;IAC3D,IAAI,KAAK;QACP,SAAS,4BAA4B,KAAK;IAC5C;IACA,IAAI,OAAO,WAAW,YAAY,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,KAAK,EAAE;QACjF,OAAO;IACT;IACA,MAAM,eAAe;WAChB,IAAA,6OAAO,EAAC,OAAO,KAAK,EAAE,IAAI,CAAC,IAAM,yCAAyC,GAAG;WAC7E,IAAA,6OAAO,EAAC,OAAO,KAAK,EAAE,IAAI,CAAC,IAAM,yCAAyC,GAAG;KACjF;IACD,MAAM,qBAAqB,EAAE;IAC7B,KAAK,MAAM,KAAK,aAAc;QAC5B,IAAI,CAAC,eAAe,IAAI;YACtB,OAAO;QACT;QACA,mBAAmB,IAAI,CAAC;IAC1B;IACA,MAAM,yBAAyB,aAAa,GAAG,IAAI;IACnD,KAAK,MAAM,KAAK,mBAAoB;QAClC,IAAI,EAAE,UAAU,EAAE;YAChB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,EAAE,UAAU,EAAG;gBACvD,IAAI,QAAQ,uBAAuB,GAAG,CAAC;gBACvC,IAAI,CAAC,OAAO;oBACV,MAAM,WAAW,mBAAmB,KAAK,CAAC,CAAC,IAAM,EAAE,QAAQ,EAAE,SAAS;oBACtE,QAAQ;wBAAE;wBAAU,SAAS,EAAE;oBAAC;oBAChC,uBAAuB,GAAG,CAAC,KAAK;gBAClC;gBACA,MAAM,OAAO,CAAC,IAAI,CAAC;YACrB;QACF;IACF;IACA,MAAM,sBAAsB,IAAA,6OAAO,EAAC,OAAO,KAAK,EAAE,IAAI,CAAC,IAAM,yCAAyC,GAAG;IACzG,MAAM,4BAA4B,EAAE;IACpC,KAAK,MAAM,KAAK,oBAAqB;QACnC,IAAI,CAAC,eAAe,IAAI;YACtB,OAAO;QACT;QACA,0BAA0B,IAAI,CAAC;IACjC;IACA,IAAI,eAAe,SAAS;QAC1B,0BAA0B,IAAI,CAAC;IACjC;IACA,MAAM,+BAA+B,aAAa,GAAG,IAAI;IACzD,KAAK,MAAM,KAAK,0BAA2B;QACzC,IAAI,EAAE,UAAU,EAAE;YAChB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,EAAE,UAAU,EAAG;gBACvD,IAAI,QAAQ,6BAA6B,GAAG,CAAC;gBAC7C,IAAI,CAAC,OAAO;oBACV,MAAM,WAAW,0BAA0B,IAAI,CAAC,CAAC,IAAM,EAAE,QAAQ,EAAE,SAAS;oBAC5E,QAAQ;wBAAE;wBAAU,SAAS,EAAE;oBAAC;oBAChC,6BAA6B,GAAG,CAAC,KAAK;gBACxC;gBACA,MAAM,OAAO,CAAC,IAAI,CAAC;YACrB;QACF;IACF;IACA,MAAM,qBAAqB;QAAE,MAAM;QAAU,YAAY,CAAC;QAAG,UAAU,EAAE;IAAC;IAC1E,MAAM,OAAO,aAAa,GAAG,IAAI,IAAI;WAChC,uBAAuB,IAAI;WAC3B,6BAA6B,IAAI;KACrC;IACD,IAAI,KAAK,IAAI,KAAK,GAAG;QACnB,OAAO;IACT;IACA,MAAM,qBAAqB,CAAC;QAC1B,MAAM,OAAO,aAAa,GAAG,IAAI;QACjC,MAAM,SAAS,EAAE;QACjB,KAAK,MAAM,WAAW,QAAS;YAC7B,MAAM,MAAM,IAAA,mPAAa,EAAC;YAC1B,IAAI,CAAC,KAAK,GAAG,CAAC,MAAM;gBAClB,KAAK,GAAG,CAAC;gBACT,OAAO,IAAI,CAAC;YACd;QACF;QACA,OAAO;IACT;IACA,KAAK,MAAM,OAAO,KAAM;QACtB,MAAM,aAAa,uBAAuB,GAAG,CAAC;QAC9C,MAAM,oBAAoB,6BAA6B,GAAG,CAAC;QAC3D,mBAAmB,UAAU,CAAC,IAAI,GAAG,CAAC;YACpC,MAAM,sBAAsB,aAAa,mBAAmB,WAAW,OAAO,IAAI,EAAE;YACpF,MAAM,6BAA6B,oBAAoB,mBAAmB,kBAAkB,OAAO,IAAI,EAAE;YACzG,IAAI,CAAC,oBAAoB,MAAM,EAAE;gBAC/B,OAAO,2BAA2B,MAAM,KAAK,IAAI,0BAA0B,CAAC,EAAE,GAAG;oBAAE,OAAO;gBAA2B;YACvH;YACA,IAAI,CAAC,2BAA2B,MAAM,EAAE;gBACtC,OAAO,oBAAoB,MAAM,KAAK,IAAI,mBAAmB,CAAC,EAAE,GAAG;oBAAE,OAAO;gBAAoB;YAClG;YACA,MAAM,QAAQ,mBAAmB;mBAC5B;gBACH,oBAAoB,MAAM,KAAK,IAAI,mBAAmB,CAAC,EAAE,GAAG;oBAAE,OAAO;gBAAoB;aAC1F;YACD,OAAO,MAAM,MAAM,KAAK,IAAI,KAAK,CAAC,EAAE,GAAG;gBAAE;YAAM;QACjD,CAAC;QACD,IAAI,YAAY,YAAY,mBAAmB,UAAU;YACvD,mBAAmB,QAAQ,CAAC,IAAI,CAAC;QACnC;IACF;IACA,OAAO;AACT;AAEA,MAAM;IACJ,WAAW;IACX,YAAY,UAAU,CAAE;QACtB,IAAI,CAAC,UAAU,GAAG;IACpB;IACA,MAAM,QAAQ,MAAM,EAAE,OAAO,EAAE;QAC7B,KAAK,MAAM,aAAa,IAAI,CAAC,UAAU,CAAE;YACvC,IAAI,MAAM,UAAU,SAAS,CAAC,QAAQ,UAAU;gBAC9C,OAAO,UAAU,OAAO,CAAC,QAAQ;YACnC;QACF;QACA,OAAO;YAAC;YAAO,CAAC;SAAE;IACpB;AACF;AAEA,MAAM,8BAA8B;AACpC;AACA,MAAM;IACJ,WAAW;IACX,UAAU;IACV,YAAY,UAAU,CAAC,CAAC,CAAE;QACxB,IAAI,CAAC,UAAU,GAAG,IAAI,iWAA6B,CAAC;QACpD,IAAI,CAAC,SAAS,GAAG,IAAI,yBAAyB,IAAA,6OAAO,EAAC,QAAQ,gBAAgB;IAChF;IACA;;;;GAIC,GACD,MAAM,SAAS,MAAM,EAAE,EAAE,6BAA6B,EAAE,aAAa,EAAE,QAAQ,UAAU,EAAE,OAAO,EAAE,GAAG,SAAS,GAAG,CAAC,CAAC,EAAE;QACrH,MAAM,SAAS,cAAc,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE;YAC/C,OAAO,CAAC,CAAC,UAAU,UAAU,SAAS,KAAK;QAC7C,CAAC;QACD,MAAM,MAAM;YACV,GAAG,IAAA,2OAAK,EAAC,QAAQ;YACjB,MAAM,QAAQ,IAAI,IAAI;gBAAE,OAAO;gBAAiB,SAAS;YAAQ;YACjE,SAAS;QACX;QACA,MAAM,EAAE,wBAAwB,EAAE,wBAAwB,EAAE,GAAG,MAAM,IAAI,CAAC,CAAA,oBAAqB,CAAC,KAAK;QACrG,MAAM,YAAY,EAAE;QACpB,MAAM,IAAA,wTAAyB,EAAC;YAAE,MAAM,EAAE;YAAE;QAAO,GAAG,CAAC;YACrD,IAAI,CAAC,IAAA,2OAAK,EAAC,QAAQ,kBAAkB;gBACnC;YACF;YACA,UAAU,IAAI,CAAC;QACjB;QACA,MAAM,SAAS,EAAE;QACjB,KAAK,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,UAAW;YAC1C,MAAM,aAAa,KAAK,IAAI,CAAC;YAC7B,IAAI;gBACF,MAAM,MAAM,QAAQ,CAAC,QAAQ;gBAC7B,MAAM,SAAS,gBAAgB,IAAA,gQAAsB,EAAC,iBAAiB,IAAI,KAAK,CAAC,MAAM;gBACvF,MAAM,WAAW,cAAc,IAAI,KAAK,CAAC,IAAI,IAAI,IAAA,0RAAU,EAAC;gBAC5D,IAAI;gBACJ,IAAI,IAAI,KAAK,CAAC,IAAI,KAAK,KAAK,KAAK,OAAO,IAAI,KAAK,CAAC,IAAI,KAAK,YAAY;oBACrE,qBAAqB,IAAI,KAAK,CAAC,IAAI;gBACrC,OAAO;oBACL,qBAAqB;wBACnB,aAAa,IAAI,KAAK,CAAC,WAAW,IAAI;wBACtC,SAAS,IAAI,KAAK,CAAC,OAAO;wBAC1B,aAAa,IAAI,KAAK,CAAC,WAAW;wBAClC,YAAY,IAAI,KAAK,CAAC,UAAU;wBAChC,MAAM,IAAI,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,MAAQ;oBACrC;oBACA,MAAM,IAAI,CAAC,CAAA,OAAQ,CAAC,KAAK,oBAAoB,KAAK;oBAClD,MAAM,IAAI,CAAC,CAAA,eAAgB,CAAC,KAAK,oBAAoB,KAAK;oBAC1D,MAAM,IAAI,CAAC,CAAA,aAAc,CAAC,oBAAoB,KAAK,0BAA0B,0BAA0B;gBACzG;gBACA,IAAI,OAAO,IAAI,KAAK,CAAC,IAAI,KAAK,YAAY;oBACxC,qBAAqB,IAAI,KAAK,CAAC,IAAI,CAAC;gBACtC;gBACA,IAAI,KAAK,KAAK,CAAC;gBACf,IAAI,KAAK,CAAC,SAAS,KAAK,CAAC;gBACzB,IAAI,KAAK,CAAC,SAAS,CAAC,OAAO,GAAG,4BAA4B,oBAAoB;YAChF,EAAE,OAAO,GAAG;gBACV,IAAI,CAAC,CAAC,aAAa,qBAAqB,GAAG;oBACzC,MAAM;gBACR;gBACA,OAAO,IAAI,CACT,CAAC,kFAAkF,EAAE,WAAW;AAC1G,EAAE,EAAE,OAAO,EAAE;YAEP;QACF;QACA,IAAI,OAAO,MAAM,EAAE;YACjB,MAAM,IAAI,sBACR,CAAC;;AAET,EAAE,OAAO,IAAI,CAAC,SAAS;QAEnB;QACA,OAAO,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;IAC1C;IACA,MAAM,CAAA,oBAAqB,CAAC,GAAG,EAAE,aAAa;QAC5C,IAAI,2BAA2B;YAC7B,MAAM;YACN,YAAY;gBACV,SAAS;oBAAE,OAAO;gBAAM;gBACxB,MAAM;oBAAE,MAAM;gBAAS;gBACvB,QAAQ;oBAAE,MAAM;gBAAS;gBACzB,SAAS;oBAAE,MAAM;gBAAS;gBAC1B,MAAM,CAAC;YACT;YACA,UAAU;gBAAC;gBAAW;gBAAQ;gBAAU;aAAU;QACpD;QACA,MAAM,2BAA2B,CAAC;QAClC,IAAI,eAAe;YACjB,yBAAyB,UAAU,GAAG,EAAE;YACxC,IAAK,MAAM,OAAO,cAAe;gBAC/B,MAAM,UAAU,aAAa,CAAC,IAAI;gBAClC,IAAI,QAAQ,MAAM,KAAK,KAAK,GAAG;oBAC7B;gBACF;gBACA,MAAM,EAAE,MAAM,EAAE,WAAW,OAAO,EAAE,GAAG;gBACvC,MAAM,CAAC,UAAU,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ;oBAAE;gBAAS;gBACzE,MAAM,oBAAoB;oBAAC;iBAAS;gBACpC,IAAI,aAAa,SAAS;oBACxB,MAAM,CAAC,gBAAgB,WAAW,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ;wBAAE,UAAU;oBAAS;oBAC/F,IAAI,mBAAmB,YAAY,IAAA,mPAAa,EAAC,gBAAgB,IAAA,mPAAa,EAAC,OAAO;wBACpF,kBAAkB,IAAI,CAAC;oBACzB;gBACF,OAAO,IAAI,aAAa,UAAU;oBAChC,MAAM,CAAC,eAAe,UAAU,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ;wBAAE,UAAU;oBAAQ;oBAC5F,IAAI,kBAAkB,YAAY,IAAA,mPAAa,EAAC,eAAe,IAAA,mPAAa,EAAC,OAAO;wBAClF,kBAAkB,IAAI,CAAC;oBACzB;gBACF;gBACA,yBAAyB,UAAU,CAAC,IAAI,CAAC;oBACvC;oBACA;oBACA,KAAK,CAAC,qBAAqB,EAAE,KAAK;oBAClC;gBACF;YACF;YACA,IAAI,UAAU,KAAK,CAAC;YACpB,IAAI,UAAU,CAAC,OAAO,KAAK,CAAC;YAC5B,IAAK,MAAM,OAAO,cAAe;gBAC/B,MAAM,UAAU,aAAa,CAAC,IAAI;gBAClC,IAAI,QAAQ,MAAM,KAAK,KAAK,GAAG;oBAC7B,IAAI,QAAQ,KAAK,KAAK,kBAAkB;wBACtC,IAAI,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,gBAAgB;wBAC9C,2BAA2B;4BAAE,MAAM,CAAC,qBAAqB,EAAE,KAAK;wBAAC;oBACnE;oBACA;gBACF;gBACA,MAAM,EAAE,MAAM,EAAE,WAAW,OAAO,EAAE,GAAG;gBACvC,MAAM,GAAG,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAC3C,QACA;oBACE,GAAG,wBAAwB;oBAC3B;oBACA,yBAAyB;gBAE3B;gBAEF,IAAI,UAAU,CAAC,OAAO,CAAC,IAAI,GAAG,gBAAgB;YAChD;QACF;QACA,OAAO;YAAE;YAA0B;QAAyB;IAC9D;IACA,MAAM,CAAA,OAAQ,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,wBAAwB;QACpD,MAAM,SAAS,IAAA,gQAAsB,EAAC,iBAAiB,IAAI,KAAK,CAAC,MAAM;QACvE,MAAM,UAAU,IAAA,uQAA6B,EAAC,IAAI,WAAW;QAC7D,IAAI,SAAS;YACX,IAAI,WAAW,GAAG;gBAChB,UAAU;gBACV,SAAS,8BACP,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,MAAM,EAAE;oBAAE,GAAG,wBAAwB;oBAAE,UAAU;gBAAQ,IAC9F,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,OAAO,EAAE;oBAAE,GAAG,wBAAwB;oBAAE,UAAU;gBAAQ;YAEnG;YACA;QACF;QACA,MAAM,gBAAgB,IAAA,uUAAgB,EAAC,IAAI,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAM,EAAE,IAAI;QACzE,MAAM,iBAAiB,IAAA,gQAAsB,EAAC,yBAAyB,IAAI,KAAK,CAAC,cAAc;QAC/F,IAAI,CAAC,UAAU,OAAO,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CACnD,IAAI,WAAW,EACf;YACE,GAAG,wBAAwB;YAC3B,UAAU;QACZ;QAEF,IAAI,YAAY,WAAW,CAAC,eAAe,QAAQ;YACjD;QACF;QACA,IAAI,mBAAmB,cAAc,mBAAmB,aAAa,CAAC,eAAe,UAAU,WAAW,KAAK,GAAG;YAChH,SAAS,yCAAyC,QAAQ;QAC5D;QACA,IAAI,mBAAmB,WAAW;YAChC,IAAI,eAAe,QAAQ;gBACzB,MAAM,SAAS,IAAI,sBACjB;gBAEF,IAAI,CAAC,eAAe,SAAS;oBAC3B,MAAM;gBACR;gBACA,MAAM,CAAC,cAAc,KAAK,GAAG,qBAAqB,QAAQ;gBAC1D,SAAS;gBACT,WAAW,KAAK,QAAQ,GAAG,KAAK,QAAQ,CAAC,MAAM,KAAK,IAAI;gBACxD,IAAI,CAAC,kBAAkB,cAAc,gBAAgB;oBACnD,MAAM;gBACR;gBACA,IAAI,UAAU,KAAK,EAAE;gBACrB,IAAI,UAAU,CAAC,IAAI,IAAI,oBAAoB,cAAc;YAC3D;YACA,IAAI,WAAW,OAAO;gBACpB,IAAI,CAAC,eAAe,SAAS;oBAC3B,MAAM,IAAI,sBACR;gBAEJ;gBACA,IAAI,UAAU,KAAK,EAAE;gBACrB,IAAI,UAAU,CAAC,IAAI,IAAI,oBAAoB,QAAQ;YACrD,OAAO;gBACL,IAAI,WAAW,GAAG;oBAChB;oBACA,SAAS,iBAAiB;gBAC5B;YACF;YACA;QACF;QACA,MAAM,QAAQ,IAAI,sBAChB;QAEF,IAAI,CAAC,eAAe,SAAS;YAC3B,MAAM;QACR;QACA,MAAM,sBAAsB,OAAO,UAAU,EAAE,WAAW,KAAK,IAAI,yCAAyC,OAAO,UAAU,CAAC,MAAM,EAAE,OAAO,KAAK;QAClJ,IAAI,eAAe,UAAU,CAAC,wBAAwB,KAAK,KAAK,CAAC,eAAe,wBAAwB,CAAC,kBAAkB,qBAAqB,cAAc,GAAG;YAC/J,MAAM,IAAI,sBACR;QAEJ;QACA,KAAK,MAAM,QAAQ;YAAC;YAAU;YAAS;SAAU,CAAE;YACjD,MAAM,aAAa,OAAO,UAAU,EAAE,CAAC,KAAK;YAC5C,IAAI,eAAe,KAAK,GAAG;gBACzB,MAAM,iBAAiB,yCAAyC,YAAY;gBAC5E,IAAI,CAAC,eAAe,iBAAiB;oBACnC,MAAM;gBACR;gBACA,MAAM,cAAc,SAAS,WAAW,SAAS,SAAS,YAAY,WAAW;gBACjF,IAAI,UAAU,KAAK,EAAE;gBACrB,IAAI,UAAU,CAAC,IAAI,IAAI,oBAAoB,gBAAgB;YAC7D;QACF;QACA,IAAI,OAAO,UAAU,EAAE,SAAS,KAAK,GAAG;YACtC,IAAI,WAAW,GAAG;gBAChB,UAAU,OAAO,QAAQ,EAAE,SAAS;gBACpC,SAAS,iBAAiB,OAAO,UAAU,CAAC,IAAI;YAClD;QACF;IACF;IACA,MAAM,CAAA,eAAgB,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,wBAAwB;QAC5D,MAAM,eAAe,IAAI,YAAY;QACrC,MAAM,SAAS,IAAA,gQAAsB,EAAC,wBAAwB,IAAI,KAAK,CAAC,aAAa;QACrF,MAAM,cAAc,IAAA,gQAAsB,EAAC,6BAA6B,IAAI,KAAK,EAAE;QACnF,MAAM,6BAA6B,IAAA,uQAA6B,EAAC;QACjE,MAAM,kBAAkB,IAAA,gQAAsB,EAAC,0BAA0B,IAAI,KAAK,CAAC,eAAe;QAClG,IAAI,4BAA4B;YAC9B,IAAI,SAAS,KAAK,CAAC;YACnB,IAAI,SAAS,CAAC,OAAO,GAAG;gBACtB;gBACA,SAAS,8BACP,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,2BAA2B,MAAM,EAAE;oBAAE,GAAG,wBAAwB;oBAAE,UAAU;gBAAS,IAClH,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,2BAA2B,OAAO,EAAE;oBAAE,GAAG,wBAAwB;oBAAE,UAAU;gBAAS;YAEvH;YACA;QACF;QACA,MAAM,CAAC,UAAU,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CACnD,cACA;YACE,GAAG,wBAAwB;YAC3B,UAAU;YACV,yBAAyB,oBAAoB,aAAa,IAAI;QAChE;QAEF,IAAI,oBAAoB,WAAW;YACjC,IAAI,SAAS,KAAK,CAAC;YACnB,IAAI,SAAS,CAAC,OAAO,GAAG;gBACtB;YACF;YACA,IAAI,SAAS,CAAC,OAAO,CAAC,OAAO,GAAG,iBAAiB,uBAAuB,UAAU;YAClF;QACF;QACA,MAAM,kBAAkB,aAAa,GAAG,IAAI;QAC5C,KAAK,MAAM,QAAQ,kBAAkB,MAAO;YAC1C,MAAM,QAAQ,IAAI,sBAAsB,CAAC;;;;;;;;iBAQ9B,EAAE,IAAA,mPAAa,EAAC,MAAM;MACjC,CAAC;YACD,MAAM,iBAAiB,yCAAyC,MAAM;YACtE,IAAI,CAAC,eAAe,iBAAiB;gBACnC,MAAM;YACR;YACA,IAAI;YACJ,IAAI;YACJ,IAAI,eAAe,UAAU,EAAE,WAAW,KAAK,GAAG;gBAChD,MAAM,eAAe,4BAA4B,KAAK,eAAe,UAAU,CAAC,MAAM;gBACtF,IAAI,OAAO,iBAAiB,YAAY,aAAa,KAAK,KAAK,KAAK,KAAK,OAAO,aAAa,KAAK,KAAK,YAAY,CAAC,OAAO,SAAS,CAAC,aAAa,KAAK,KAAK,IAAA,wSAAiB,EAAC,aAAa,KAAK,GAAG;oBACjM,MAAM;gBACR;gBACA,eAAe,aAAa,KAAK;gBACjC,oBAAoB,aAAa,WAAW;YAC9C;YACA,MAAM,aAAa,gBAAgB;YACnC,MAAM,kBAAkB,qBAAqB;YAC7C,IAAI,gBAAgB,GAAG,CAAC,aAAa;gBACnC,MAAM,IAAI,sBAAsB,CAAC;;0BAEf,EAAE,WAAW;QAC/B,CAAC;YACH;YACA,gBAAgB,GAAG,CAAC;YACpB,IAAI,SAAS,KAAK,CAAC;YACnB,IAAI,SAAS,CAAC,WAAW,GAAG;gBAC1B,aAAa;YACf;YACA,IAAI,eAAe,UAAU,EAAE,YAAY,KAAK,GAAG;gBACjD,MAAM,gBAAgB,yCAAyC,eAAe,UAAU,CAAC,OAAO,EAAE;gBAClG,IAAI,CAAC,eAAe,gBAAgB;oBAClC,MAAM;gBACR;gBACA,IAAK,MAAM,OAAO,cAAc,UAAU,CAAE;oBAC1C,MAAM,eAAe,cAAc,UAAU,CAAC,IAAI;oBAClD,IAAI,iBAAiB,KAAK,GAAG;wBAC3B,IAAI,SAAS,CAAC,WAAW,CAAC,OAAO,KAAK,CAAC;wBACvC,IAAI,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,GAAG;4BACvC,QAAQ,gBAAgB;4BACxB,UAAU,eAAe,QAAQ,EAAE,SAAS,cAAc,cAAc,QAAQ,EAAE,SAAS;wBAC7F;oBACF;gBACF;YACF;YACA,IAAI,eAAe,UAAU,EAAE,SAAS,KAAK,GAAG;gBAC9C,IAAI,SAAS,CAAC,WAAW,CAAC,OAAO,GAAG,iBAClC,uBAAuB,eAAe,QAAQ,EAAE,SAAS,WAAW,OAAO,eAAe,UAAU,CAAC,IAAI;YAE7G;QACF;IACF;IACA,MAAM,CAAA,aAAc,CAAC,GAAG,EAAE,GAAG,EAAE,wBAAwB,EAAE,oBAAoB,EAAE,6BAA6B;QAC1G,MAAM,WAAW,IAAI,QAAQ;QAC7B,MAAM,yBAAyB,CAAC;QAChC,IAAK,MAAM,QAAQ,SAAU;YAC3B,MAAM,SAAS,QAAQ,CAAC,KAAK;YAC7B,IAAI,CAAC,QAAQ;gBACX;YACF;YACA,MAAM,SAAS,IAAA,oTAAuB,EAAC,MAAM,OAAO,MAAM;YAC1D,MAAM,iBAAiB,IAAA,sTAAwB,EAAC,MAAM,OAAO,OAAO;YACpE,sBAAsB,CAAC,OAAO,KAAK;gBAAE;gBAAQ,yBAAyB,EAAE;gBAAE,qBAAqB,EAAE;YAAC;YAClG,MAAM,CAAC,cAAc,WAAW,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,IAAI,EAAE;gBAAE,GAAG,wBAAwB;gBAAE,UAAU;YAAS;YAC/H,sBAAsB,CAAC,OAAO,CAAC,uBAAuB,CAAC,IAAI,CAAC;gBAAC;gBAAM;gBAAgB;gBAAc;aAAW;YAC5G,sBAAsB,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI,CAAC;gBACtD,MAAM;gBACN,YAAY;oBACV,SAAS;wBAAE,OAAO;oBAAK;oBACvB,MAAM;wBAAE,OAAO;oBAAK;oBACpB,QAAQ;wBAAE,OAAO;oBAAO;oBACxB,SAAS;wBAAE,MAAM;wBAAU,SAAS;oBAAe;oBACnD,MAAM;gBACR;gBACA,UAAU,eAAe;oBAAC;oBAAW;oBAAQ;oBAAU;oBAAW;iBAAO,GAAG;oBAAC;oBAAW;oBAAQ;oBAAU;iBAAU;YACtH;QACF;QACA,IAAI,SAAS,KAAK,CAAC;QACnB,IAAK,MAAM,gBAAgB,uBAAwB;YACjD,MAAM,gBAAgB,sBAAsB,CAAC,aAAa;YAC1D,MAAM,mBAAmB,IAAA,2OAAK,EAAC,+BAA+B,cAAc,uBAAuB,EAAE,cAAc,MAAM;YACzH,IAAI,SAAS,CAAC,aAAa,GAAG;gBAC5B,aAAa;gBACb,SAAS,iBAAiB,oBAAoB;oBAC5C,OAAO;2BACF,cAAc,mBAAmB;wBACpC;qBACD;gBACH;YACF;QACF;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 15813, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bopenapi%401.11.1/node_modules/%40orpc/openapi/dist/plugins/index.mjs"],"sourcesContent":["import { stringifyJSON, once, value } from '@orpc/shared';\nimport { O as OpenAPIGenerator } from '../shared/openapi.CzHcOMxv.mjs';\nimport '@orpc/client';\nimport '@orpc/client/standard';\nimport '@orpc/contract';\nimport '@orpc/openapi-client/standard';\nimport '@orpc/server';\nimport '@orpc/interop/json-schema-typed/draft-2020-12';\n\nclass OpenAPIReferencePlugin {\n  generator;\n  specGenerateOptions;\n  specPath;\n  docsPath;\n  docsTitle;\n  docsHead;\n  docsProvider;\n  docsScriptUrl;\n  docsCssUrl;\n  docsConfig;\n  renderDocsHtml;\n  constructor(options = {}) {\n    this.specGenerateOptions = options.specGenerateOptions;\n    this.docsPath = options.docsPath ?? \"/\";\n    this.docsTitle = options.docsTitle ?? \"API Reference\";\n    this.docsConfig = options.docsConfig ?? void 0;\n    this.docsProvider = options.docsProvider ?? \"scalar\";\n    this.docsScriptUrl = options.docsScriptUrl ?? (this.docsProvider === \"swagger\" ? \"https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js\" : \"https://cdn.jsdelivr.net/npm/@scalar/api-reference\");\n    this.docsCssUrl = options.docsCssUrl ?? (this.docsProvider === \"swagger\" ? \"https://unpkg.com/swagger-ui-dist/swagger-ui.css\" : void 0);\n    this.docsHead = options.docsHead ?? \"\";\n    this.specPath = options.specPath ?? \"/spec.json\";\n    this.generator = new OpenAPIGenerator(options);\n    const esc = (s) => s.replace(/&/g, \"&amp;\").replace(/\"/g, \"&quot;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    this.renderDocsHtml = options.renderDocsHtml ?? ((specUrl, title, head, scriptUrl, config, spec, docsProvider, cssUrl) => {\n      let body;\n      if (docsProvider === \"swagger\") {\n        const swaggerConfig = {\n          dom_id: \"#app\",\n          spec,\n          deepLinking: true,\n          presets: [\n            \"SwaggerUIBundle.presets.apis\",\n            \"SwaggerUIBundle.presets.standalone\"\n          ],\n          plugins: [\n            \"SwaggerUIBundle.plugins.DownloadUrl\"\n          ],\n          ...config\n        };\n        body = `\n        <body>\n          <div id=\"app\"></div>\n\n          <script src=\"${esc(scriptUrl)}\"><\\/script>\n\n          <script>\n            window.onload = () => {\n              window.ui = SwaggerUIBundle(${stringifyJSON(swaggerConfig).replace(/\"(SwaggerUIBundle\\.[^\"]+)\"/g, \"$1\")})\n            }\n          <\\/script>\n        </body>\n        `;\n      } else {\n        const scalarConfig = {\n          content: stringifyJSON(spec),\n          ...config\n        };\n        body = `\n        <body>\n          <div id=\"app\" data-config=\"${esc(stringifyJSON(scalarConfig))}\"></div>\n\n          <script src=\"${esc(scriptUrl)}\"><\\/script>\n\n          <script>\n            Scalar.createApiReference('#app', JSON.parse(document.getElementById('app').dataset.config))\n          <\\/script>\n        </body>\n        `;\n      }\n      return `\n        <!doctype html>\n        <html>\n          <head>\n            <meta charset=\"utf-8\" />\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n            <title>${esc(title)}</title>\n            ${cssUrl ? `<link rel=\"stylesheet\" type=\"text/css\" href=\"${esc(cssUrl)}\" />` : \"\"}\n            ${head}\n          </head>\n          ${body}\n        </html>\n        `;\n    });\n  }\n  init(options, router) {\n    options.interceptors ??= [];\n    options.interceptors.push(async (options2) => {\n      const res = await options2.next();\n      if (res.matched || options2.request.method !== \"GET\") {\n        return res;\n      }\n      const prefix = options2.prefix ?? \"\";\n      const requestPathname = options2.request.url.pathname.replace(/\\/$/, \"\") || \"/\";\n      const docsUrl = new URL(`${prefix}${this.docsPath}`.replace(/\\/$/, \"\"), options2.request.url.origin);\n      const specUrl = new URL(`${prefix}${this.specPath}`.replace(/\\/$/, \"\"), options2.request.url.origin);\n      const generateSpec = once(async () => {\n        return await this.generator.generate(router, {\n          servers: [{ url: new URL(prefix, options2.request.url.origin).toString() }],\n          ...await value(this.specGenerateOptions, options2)\n        });\n      });\n      if (requestPathname === specUrl.pathname) {\n        const spec = await generateSpec();\n        return {\n          matched: true,\n          response: {\n            status: 200,\n            headers: {},\n            body: new File([stringifyJSON(spec)], \"spec.json\", { type: \"application/json\" })\n          }\n        };\n      }\n      if (requestPathname === docsUrl.pathname) {\n        const html = this.renderDocsHtml(\n          specUrl.toString(),\n          await value(this.docsTitle, options2),\n          await value(this.docsHead, options2),\n          await value(this.docsScriptUrl, options2),\n          await value(this.docsConfig, options2),\n          await generateSpec(),\n          this.docsProvider,\n          await value(this.docsCssUrl, options2)\n        );\n        return {\n          matched: true,\n          response: {\n            status: 200,\n            headers: {},\n            body: new File([html], \"api-reference.html\", { type: \"text/html\" })\n          }\n        };\n      }\n      return res;\n    });\n  }\n}\n\nexport { OpenAPIReferencePlugin };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 15978, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bopenapi%401.11.1/node_modules/%40orpc/openapi/dist/index.mjs"],"sourcesContent":["import { c as customOpenAPIOperation } from './shared/openapi.CzHcOMxv.mjs';\nexport { C as CompositeSchemaConverter, L as LOGIC_KEYWORDS, O as OpenAPIGenerator, a as applyCustomOpenAPIOperation, o as applySchemaOptionality, h as checkParamsSchema, q as expandArrayableSchema, p as expandUnionSchema, n as filterSchemaBranches, g as getCustomOpenAPIOperation, l as isAnySchema, j as isFileSchema, k as isObjectSchema, u as isPrimitiveSchema, r as resolveOpenAPIJsonSchemaRef, m as separateObjectSchema, s as simplifyComposedObjectJsonSchemasAndRefs, d as toOpenAPIContent, e as toOpenAPIEventIteratorContent, b as toOpenAPIMethod, f as toOpenAPIParameters, t as toOpenAPIPath, i as toOpenAPISchema } from './shared/openapi.CzHcOMxv.mjs';\nimport { createORPCErrorFromJson } from '@orpc/client';\nimport { StandardOpenAPISerializer, StandardOpenAPIJsonSerializer, StandardBracketNotationSerializer } from '@orpc/openapi-client/standard';\nimport { ORPCError, createRouterClient } from '@orpc/server';\nimport { resolveMaybeOptionalOptions } from '@orpc/shared';\nexport { ContentEncoding as JSONSchemaContentEncoding, Format as JSONSchemaFormat, TypeName as JSONSchemaTypeName } from '@orpc/interop/json-schema-typed/draft-2020-12';\nimport '@orpc/client/standard';\nimport '@orpc/contract';\n\nfunction createJsonifiedRouterClient(router, ...rest) {\n  const options = resolveMaybeOptionalOptions(rest);\n  const serializer = new StandardOpenAPISerializer(new StandardOpenAPIJsonSerializer(), new StandardBracketNotationSerializer());\n  options.interceptors ??= [];\n  options.interceptors.unshift(async (options2) => {\n    try {\n      return serializer.deserialize(\n        serializer.serialize(\n          await options2.next()\n        )\n      );\n    } catch (e) {\n      if (e instanceof ORPCError) {\n        throw createORPCErrorFromJson(serializer.deserialize(\n          serializer.serialize(\n            e.toJSON(),\n            { outputFormat: \"plain\" }\n          )\n        ));\n      }\n      throw e;\n    }\n  });\n  return createRouterClient(router, options);\n}\n\nconst oo = {\n  spec: customOpenAPIOperation\n};\n\nexport { createJsonifiedRouterClient, customOpenAPIOperation, oo };\n"],"names":[],"mappings":";;;;;;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEA,SAAS,4BAA4B,MAAM,EAAE,GAAG,IAAI;IAClD,MAAM,UAAU,IAAA,iQAA2B,EAAC;IAC5C,MAAM,aAAa,IAAI,yVAAyB,CAAC,IAAI,iWAA6B,IAAI,IAAI,yWAAiC;IAC3H,QAAQ,YAAY,KAAK,EAAE;IAC3B,QAAQ,YAAY,CAAC,OAAO,CAAC,OAAO;QAClC,IAAI;YACF,OAAO,WAAW,WAAW,CAC3B,WAAW,SAAS,CAClB,MAAM,SAAS,IAAI;QAGzB,EAAE,OAAO,GAAG;YACV,IAAI,aAAa,wRAAS,EAAE;gBAC1B,MAAM,IAAA,oTAAuB,EAAC,WAAW,WAAW,CAClD,WAAW,SAAS,CAClB,EAAE,MAAM,IACR;oBAAE,cAAc;gBAAQ;YAG9B;YACA,MAAM;QACR;IACF;IACA,OAAO,IAAA,wPAAkB,EAAC,QAAQ;AACpC;AAEA,MAAM,KAAK;IACT,MAAM,iPAAsB;AAC9B","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 16041, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Binterop%401.11.1/node_modules/%40orpc/interop/dist/json-schema-typed/index.mjs"],"sourcesContent":["/// <reference types=\"./draft-2020-12.ts\" />\n// @generated\n// deno-fmt-ignore-file\n// deno-lint-ignore-file\n// This code was bundled using `deno bundle` and it's not recommended to edit it manually\n\nconst draft = \"2020-12\";\nconst $schema = \"https://json-schema.org/draft/2020-12/schema\";\nvar ContentEncoding;\n(function(ContentEncoding1) {\n    ContentEncoding1[\"7bit\"] = \"7bit\";\n    ContentEncoding1[\"8bit\"] = \"8bit\";\n    ContentEncoding1[\"Base64\"] = \"base64\";\n    ContentEncoding1[\"Binary\"] = \"binary\";\n    ContentEncoding1[\"IETFToken\"] = \"ietf-token\";\n    ContentEncoding1[\"QuotedPrintable\"] = \"quoted-printable\";\n    ContentEncoding1[\"XToken\"] = \"x-token\";\n})(ContentEncoding || (ContentEncoding = {}));\nvar Format;\n(function(Format1) {\n    Format1[\"Date\"] = \"date\";\n    Format1[\"DateTime\"] = \"date-time\";\n    Format1[\"Duration\"] = \"duration\";\n    Format1[\"Email\"] = \"email\";\n    Format1[\"Hostname\"] = \"hostname\";\n    Format1[\"IDNEmail\"] = \"idn-email\";\n    Format1[\"IDNHostname\"] = \"idn-hostname\";\n    Format1[\"IPv4\"] = \"ipv4\";\n    Format1[\"IPv6\"] = \"ipv6\";\n    Format1[\"IRI\"] = \"iri\";\n    Format1[\"IRIReference\"] = \"iri-reference\";\n    Format1[\"JSONPointer\"] = \"json-pointer\";\n    Format1[\"JSONPointerURIFragment\"] = \"json-pointer-uri-fragment\";\n    Format1[\"RegEx\"] = \"regex\";\n    Format1[\"RelativeJSONPointer\"] = \"relative-json-pointer\";\n    Format1[\"Time\"] = \"time\";\n    Format1[\"URI\"] = \"uri\";\n    Format1[\"URIReference\"] = \"uri-reference\";\n    Format1[\"URITemplate\"] = \"uri-template\";\n    Format1[\"UUID\"] = \"uuid\";\n})(Format || (Format = {}));\nvar TypeName;\n(function(TypeName1) {\n    TypeName1[\"Array\"] = \"array\";\n    TypeName1[\"Boolean\"] = \"boolean\";\n    TypeName1[\"Integer\"] = \"integer\";\n    TypeName1[\"Null\"] = \"null\";\n    TypeName1[\"Number\"] = \"number\";\n    TypeName1[\"Object\"] = \"object\";\n    TypeName1[\"String\"] = \"string\";\n})(TypeName || (TypeName = {}));\nconst keywords = [\n    \"$anchor\",\n    \"$comment\",\n    \"$defs\",\n    \"$dynamicAnchor\",\n    \"$dynamicRef\",\n    \"$id\",\n    \"$ref\",\n    \"$schema\",\n    \"$vocabulary\",\n    \"additionalItems\",\n    \"additionalProperties\",\n    \"allOf\",\n    \"anyOf\",\n    \"const\",\n    \"contains\",\n    \"contentEncoding\",\n    \"contentMediaType\",\n    \"contentSchema\",\n    \"default\",\n    \"definitions\",\n    \"dependencies\",\n    \"dependentRequired\",\n    \"dependentSchemas\",\n    \"deprecated\",\n    \"description\",\n    \"else\",\n    \"enum\",\n    \"examples\",\n    \"exclusiveMaximum\",\n    \"exclusiveMinimum\",\n    \"format\",\n    \"if\",\n    \"items\",\n    \"maxContains\",\n    \"maximum\",\n    \"maxItems\",\n    \"maxLength\",\n    \"maxProperties\",\n    \"minContains\",\n    \"minimum\",\n    \"minItems\",\n    \"minLength\",\n    \"minProperties\",\n    \"multipleOf\",\n    \"not\",\n    \"oneOf\",\n    \"pattern\",\n    \"patternProperties\",\n    \"prefixItems\",\n    \"properties\",\n    \"propertyNames\",\n    \"readOnly\",\n    \"required\",\n    \"then\",\n    \"title\",\n    \"type\",\n    \"unevaluatedItems\",\n    \"unevaluatedProperties\",\n    \"uniqueItems\",\n    \"writeOnly\", \n];\n\nexport { $schema, ContentEncoding, Format, TypeName, draft, keywords };\n"],"names":[],"mappings":"AAAA,4CAA4C;AAC5C,aAAa;AACb,uBAAuB;AACvB,wBAAwB;AACxB,yFAAyF;;;;;;;;;;;;;;;AAEzF,MAAM,QAAQ;AACd,MAAM,UAAU;AAChB,IAAI;AACJ,CAAC,SAAS,gBAAgB;IACtB,gBAAgB,CAAC,OAAO,GAAG;IAC3B,gBAAgB,CAAC,OAAO,GAAG;IAC3B,gBAAgB,CAAC,SAAS,GAAG;IAC7B,gBAAgB,CAAC,SAAS,GAAG;IAC7B,gBAAgB,CAAC,YAAY,GAAG;IAChC,gBAAgB,CAAC,kBAAkB,GAAG;IACtC,gBAAgB,CAAC,SAAS,GAAG;AACjC,CAAC,EAAE,mBAAmB,CAAC,kBAAkB,CAAC,CAAC;AAC3C,IAAI;AACJ,CAAC,SAAS,OAAO;IACb,OAAO,CAAC,OAAO,GAAG;IAClB,OAAO,CAAC,WAAW,GAAG;IACtB,OAAO,CAAC,WAAW,GAAG;IACtB,OAAO,CAAC,QAAQ,GAAG;IACnB,OAAO,CAAC,WAAW,GAAG;IACtB,OAAO,CAAC,WAAW,GAAG;IACtB,OAAO,CAAC,cAAc,GAAG;IACzB,OAAO,CAAC,OAAO,GAAG;IAClB,OAAO,CAAC,OAAO,GAAG;IAClB,OAAO,CAAC,MAAM,GAAG;IACjB,OAAO,CAAC,eAAe,GAAG;IAC1B,OAAO,CAAC,cAAc,GAAG;IACzB,OAAO,CAAC,yBAAyB,GAAG;IACpC,OAAO,CAAC,QAAQ,GAAG;IACnB,OAAO,CAAC,sBAAsB,GAAG;IACjC,OAAO,CAAC,OAAO,GAAG;IAClB,OAAO,CAAC,MAAM,GAAG;IACjB,OAAO,CAAC,eAAe,GAAG;IAC1B,OAAO,CAAC,cAAc,GAAG;IACzB,OAAO,CAAC,OAAO,GAAG;AACtB,CAAC,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC;AACzB,IAAI;AACJ,CAAC,SAAS,SAAS;IACf,SAAS,CAAC,QAAQ,GAAG;IACrB,SAAS,CAAC,UAAU,GAAG;IACvB,SAAS,CAAC,UAAU,GAAG;IACvB,SAAS,CAAC,OAAO,GAAG;IACpB,SAAS,CAAC,SAAS,GAAG;IACtB,SAAS,CAAC,SAAS,GAAG;IACtB,SAAS,CAAC,SAAS,GAAG;AAC1B,CAAC,EAAE,YAAY,CAAC,WAAW,CAAC,CAAC;AAC7B,MAAM,WAAW;IACb;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACH","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 16172, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Binterop%401.11.1/node_modules/%40orpc/interop/dist/json-schema-typed/draft-2020-12.mjs"],"sourcesContent":["export { $schema, ContentEncoding, Format, TypeName, draft, keywords } from './index.mjs';\n"],"names":[],"mappings":";AAAA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 16197, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/radash@12.1.1/node_modules/radash/dist/esm/typed.mjs","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/radash%4012.1.1/node_modules/radash/src/typed.ts"],"sourcesContent":["export const isSymbol = (value: any): value is symbol => {\n  return !!value && value.constructor === Symbol\n}\n\nexport const isArray = Array.isArray\n\nexport const isObject = (value: any): value is object => {\n  return !!value && value.constructor === Object\n}\n\n/**\n * Checks if the given value is primitive.\n *\n * Primitive Types: number , string , boolean , symbol, bigint, undefined, null\n *\n * @param {*} value value to check\n * @returns {boolean} result\n */\nexport const isPrimitive = (value: any): boolean => {\n  return (\n    value === undefined ||\n    value === null ||\n    (typeof value !== 'object' && typeof value !== 'function')\n  )\n}\n\nexport const isFunction = (value: any): value is Function => {\n  return !!(value && value.constructor && value.call && value.apply)\n}\n\nexport const isString = (value: any): value is string => {\n  return typeof value === 'string' || value instanceof String\n}\n\nexport const isInt = (value: any): value is number => {\n  return isNumber(value) && value % 1 === 0\n}\n\nexport const isFloat = (value: any): value is number => {\n  return isNumber(value) && value % 1 !== 0\n}\n\nexport const isNumber = (value: any): value is number => {\n  try {\n    return Number(value) === value\n  } catch {\n    return false\n  }\n}\n\nexport const isDate = (value: any): value is Date => {\n  return Object.prototype.toString.call(value) === '[object Date]'\n}\n\n/**\n * This is really a _best guess_ promise checking. You\n * should probably use Promise.resolve(value) to be 100%\n * sure you're handling it correctly.\n */\nexport const isPromise = (value: any): value is Promise<any> => {\n  if (!value) return false\n  if (!value.then) return false\n  if (!isFunction(value.then)) return false\n  return true\n}\n\nexport const isEmpty = (value: any) => {\n  if (value === true || value === false) return true\n  if (value === null || value === undefined) return true\n  if (isNumber(value)) return value === 0\n  if (isDate(value)) return isNaN(value.getTime())\n  if (isFunction(value)) return false\n  if (isSymbol(value)) return false\n  const length = (value as any).length\n  if (isNumber(length)) return length === 0\n  const size = (value as any).size\n  if (isNumber(size)) return size === 0\n  const keys = Object.keys(value).length\n  return keys === 0\n}\n\nexport const isEqual = <TType>(x: TType, y: TType): boolean => {\n  if (Object.is(x, y)) return true\n  if (x instanceof Date && y instanceof Date) {\n    return x.getTime() === y.getTime()\n  }\n  if (x instanceof RegExp && y instanceof RegExp) {\n    return x.toString() === y.toString()\n  }\n  if (\n    typeof x !== 'object' ||\n    x === null ||\n    typeof y !== 'object' ||\n    y === null\n  ) {\n    return false\n  }\n  const keysX = Reflect.ownKeys(x as unknown as object) as (keyof typeof x)[]\n  const keysY = Reflect.ownKeys(y as unknown as object)\n  if (keysX.length !== keysY.length) return false\n  for (let i = 0; i < keysX.length; i++) {\n    if (!Reflect.has(y as unknown as object, keysX[i])) return false\n    if (!isEqual(x[keysX[i]], y[keysX[i]])) return false\n  }\n  return true\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAa,MAAA,QAAA,GAAW,CAAC,KAAgC,KAAA;IACvD,OAAO,CAAC,CAAC,KAAS,IAAA,KAAA,CAAM,WAAgB,KAAA,MAAA,CAAA;AAC1C,EAAA;AAEO,MAAM,UAAU,KAAM,CAAA,OAAA,CAAA;AAEhB,MAAA,QAAA,GAAW,CAAC,KAAgC,KAAA;IACvD,OAAO,CAAC,CAAC,KAAS,IAAA,KAAA,CAAM,WAAgB,KAAA,MAAA,CAAA;AAC1C,EAAA;AAUa,MAAA,WAAA,GAAc,CAAC,KAAwB,KAAA;IAEhD,OAAA,KAAA,KAAU,KAAA,KACV,KAAU,KAAA,IAAA,IACT,OAAO,KAAU,KAAA,QAAA,IAAY,OAAO,KAAU,KAAA,UAAA,CAAA;AAEnD,EAAA;AAEa,MAAA,UAAA,GAAa,CAAC,KAAkC,KAAA;IAC3D,OAAO,CAAC,CAAA,CAAE,KAAA,IAAS,MAAM,WAAe,IAAA,KAAA,CAAM,IAAA,IAAQ,KAAM,CAAA,KAAA,CAAA,CAAA;AAC9D,EAAA;AAEa,MAAA,QAAA,GAAW,CAAC,KAAgC,KAAA;IAChD,OAAA,OAAO,KAAU,KAAA,QAAA,IAAY,KAAiB,YAAA,MAAA,CAAA;AACvD,EAAA;AAEa,MAAA,KAAA,GAAQ,CAAC,KAAgC,KAAA;IACpD,OAAO,QAAS,CAAA,KAAK,CAAK,IAAA,KAAA,GAAQ,CAAM,KAAA,CAAA,CAAA;AAC1C,EAAA;AAEa,MAAA,OAAA,GAAU,CAAC,KAAgC,KAAA;IACtD,OAAO,QAAS,CAAA,KAAK,CAAK,IAAA,KAAA,GAAQ,CAAM,KAAA,CAAA,CAAA;AAC1C,EAAA;AAEa,MAAA,QAAA,GAAW,CAAC,KAAgC,KAAA;IACnD,IAAA;QACK,OAAA,MAAA,CAAO,KAAK,CAAM,KAAA,KAAA,CAAA;IAAA,CACzB,CAAA,OAAA;QACO,OAAA,KAAA,CAAA;IAAA,CACT;AACF,EAAA;AAEa,MAAA,MAAA,GAAS,CAAC,KAA8B,KAAA;IACnD,OAAO,MAAO,CAAA,SAAA,CAAU,QAAS,CAAA,IAAA,CAAK,KAAK,CAAM,KAAA,eAAA,CAAA;AACnD,EAAA;AAOa,MAAA,SAAA,GAAY,CAAC,KAAsC,KAAA;IAC9D,IAAI,CAAC,KAAA,EAAc,OAAA,KAAA,CAAA;IACnB,IAAI,CAAC,KAAM,CAAA,IAAA,EAAa,OAAA,KAAA,CAAA;IACpB,IAAA,CAAC,UAAW,CAAA,KAAA,CAAM,IAAI,CAAA,EAAU,OAAA,KAAA,CAAA;IAC7B,OAAA,IAAA,CAAA;AACT,EAAA;AAEa,MAAA,OAAA,GAAU,CAAC,KAAe,KAAA;IACjC,IAAA,KAAA,KAAU,QAAQ,KAAU,KAAA,KAAA,EAAc,OAAA,IAAA,CAAA;IAC1C,IAAA,KAAA,KAAU,QAAQ,KAAU,KAAA,KAAA,CAAA,EAAkB,OAAA,IAAA,CAAA;IAClD,IAAI,SAAS,KAAK,CAAA,EAAG,OAAO,KAAU,KAAA,CAAA,CAAA;IACtC,IAAI,OAAO,KAAK,CAAA,EAAU,OAAA,KAAA,CAAM,KAAM,CAAA,OAAA,EAAS,CAAA,CAAA;IAC/C,IAAI,WAAW,KAAK,CAAA,EAAU,OAAA,KAAA,CAAA;IAC9B,IAAI,SAAS,KAAK,CAAA,EAAU,OAAA,KAAA,CAAA;IAC5B,MAAM,SAAU,KAAc,CAAA,MAAA,CAAA;IAC9B,IAAI,SAAS,MAAM,CAAA,EAAG,OAAO,MAAW,KAAA,CAAA,CAAA;IACxC,MAAM,OAAQ,KAAc,CAAA,IAAA,CAAA;IAC5B,IAAI,SAAS,IAAI,CAAA,EAAG,OAAO,IAAS,KAAA,CAAA,CAAA;IACpC,MAAM,IAAO,GAAA,MAAA,CAAO,IAAK,CAAA,KAAK,CAAE,CAAA,MAAA,CAAA;IAChC,OAAO,IAAS,KAAA,CAAA,CAAA;AAClB,EAAA;AAEa,MAAA,OAAA,GAAU,CAAQ,CAAA,EAAU,CAAsB,KAAA;IACzD,IAAA,MAAA,CAAO,EAAG,CAAA,CAAA,EAAG,CAAC,CAAA,EAAU,OAAA,IAAA,CAAA;IACxB,IAAA,CAAA,YAAa,IAAQ,IAAA,CAAA,YAAa,IAAM,EAAA;QAC1C,OAAO,CAAE,CAAA,OAAA,EAAc,KAAA,CAAA,CAAE,OAAQ,EAAA,CAAA;IAAA,CACnC;IACI,IAAA,CAAA,YAAa,MAAU,IAAA,CAAA,YAAa,MAAQ,EAAA;QAC9C,OAAO,CAAE,CAAA,QAAA,EAAe,KAAA,CAAA,CAAE,QAAS,EAAA,CAAA;IAAA,CACrC;IAEE,IAAA,OAAO,MAAM,QACb,IAAA,CAAA,KAAM,QACN,OAAO,CAAA,KAAM,QACb,IAAA,CAAA,KAAM,IACN,EAAA;QACO,OAAA,KAAA,CAAA;IAAA,CACT;IACM,MAAA,KAAA,GAAQ,OAAQ,CAAA,OAAA,CAAQ,CAAsB,CAAA,CAAA;IAC9C,MAAA,KAAA,GAAQ,OAAQ,CAAA,OAAA,CAAQ,CAAsB,CAAA,CAAA;IAChD,IAAA,KAAA,CAAM,MAAA,KAAW,KAAM,CAAA,MAAA,EAAe,OAAA,KAAA,CAAA;IAC1C,IAAA,IAAS,CAAI,GAAA,CAAA,EAAG,CAAI,GAAA,KAAA,CAAM,MAAA,EAAQ,CAAK,EAAA,CAAA;QACrC,IAAI,CAAC,OAAA,CAAQ,GAAI,CAAA,CAAA,EAAwB,KAAA,CAAM,CAAE,CAAA,CAAA,EAAU,OAAA,KAAA,CAAA;QAC3D,IAAI,CAAC,OAAQ,CAAA,CAAA,CAAE,KAAA,CAAM,CAAK,CAAA,CAAA,EAAA,CAAA,CAAE,KAAA,CAAM,CAAG,CAAA,CAAA,CAAA,EAAU,OAAA,KAAA,CAAA;IAAA,CACjD;IACO,OAAA,IAAA,CAAA;AACT","debugId":null}},
    {"offset": {"line": 16303, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/radash@12.1.1/node_modules/radash/dist/esm/array.mjs","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/radash%4012.1.1/node_modules/radash/src/array.ts"],"sourcesContent":["import { isArray, isFunction } from './typed'\n\n/**\n * Sorts an array of items into groups. The return value is a map where the keys are\n * the group ids the given getGroupId function produced and the value is an array of\n * each item in that group.\n */\nexport const group = <T, Key extends string | number | symbol>(\n  array: readonly T[],\n  getGroupId: (item: T) => Key\n): Partial<Record<Key, T[]>> => {\n  return array.reduce((acc, item) => {\n    const groupId = getGroupId(item)\n    if (!acc[groupId]) acc[groupId] = []\n    acc[groupId].push(item)\n    return acc\n  }, {} as Record<Key, T[]>)\n}\n\n/**\n * Creates an array of grouped elements, the first of which contains the\n * first elements of the given arrays, the second of which contains the\n * second elements of the given arrays, and so on.\n *\n * Ex. const zipped = zip(['a', 'b'], [1, 2], [true, false]) // [['a', 1, true], ['b', 2, false]]\n */\nexport function zip<T1, T2, T3, T4, T5>(\n  array1: T1[],\n  array2: T2[],\n  array3: T3[],\n  array4: T4[],\n  array5: T5[]\n): [T1, T2, T3, T4, T5][]\nexport function zip<T1, T2, T3, T4>(\n  array1: T1[],\n  array2: T2[],\n  array3: T3[],\n  array4: T4[]\n): [T1, T2, T3, T4][]\nexport function zip<T1, T2, T3>(\n  array1: T1[],\n  array2: T2[],\n  array3: T3[]\n): [T1, T2, T3][]\nexport function zip<T1, T2>(array1: T1[], array2: T2[]): [T1, T2][]\nexport function zip<T>(...arrays: T[][]): T[][] {\n  if (!arrays || !arrays.length) return []\n  return new Array(Math.max(...arrays.map(({ length }) => length)))\n    .fill([])\n    .map((_, idx) => arrays.map(array => array[idx]))\n}\n\n/**\n * Creates an object mapping the specified keys to their corresponding values\n *\n * Ex. const zipped = zipToObject(['a', 'b'], [1, 2]) // { a: 1, b: 2 }\n * Ex. const zipped = zipToObject(['a', 'b'], (k, i) => k + i) // { a: 'a0', b: 'b1' }\n * Ex. const zipped = zipToObject(['a', 'b'], 1) // { a: 1, b: 1 }\n */\nexport function zipToObject<K extends string | number | symbol, V>(\n  keys: K[],\n  values: V | ((key: K, idx: number) => V) | V[]\n): Record<K, V> {\n  if (!keys || !keys.length) {\n    return {} as Record<K, V>\n  }\n\n  const getValue = isFunction(values)\n    ? values\n    : isArray(values)\n    ? (_k: K, i: number) => values[i]\n    : (_k: K, _i: number) => values\n\n  return keys.reduce((acc, key, idx) => {\n    acc[key] = getValue(key, idx)\n    return acc\n  }, {} as Record<K, V>)\n}\n\n/**\n * Go through a list of items, starting with the first item,\n * and comparing with the second. Keep the one you want then\n * compare that to the next item in the list with the same\n *\n * Ex. const greatest = () => boil(numbers, (a, b) => a > b)\n */\nexport const boil = <T>(\n  array: readonly T[],\n  compareFunc: (a: T, b: T) => T\n) => {\n  if (!array || (array.length ?? 0) === 0) return null\n  return array.reduce(compareFunc)\n}\n\n/**\n * Sum all numbers in an array. Optionally provide a function\n * to convert objects in the array to number values.\n */\nexport function sum<T extends number>(array: readonly T[]): number\nexport function sum<T extends object>(\n  array: readonly T[],\n  fn: (item: T) => number\n): number\nexport function sum<T extends object | number>(\n  array: readonly any[],\n  fn?: (item: T) => number\n): number {\n  return (array || []).reduce((acc, item) => acc + (fn ? fn(item) : item), 0)\n}\n\n/**\n * Get the first item in an array or a default value\n */\nexport const first = <T>(\n  array: readonly T[],\n  defaultValue: T | null | undefined = undefined\n) => {\n  return array?.length > 0 ? array[0] : defaultValue\n}\n\n/**\n * Get the last item in an array or a default value\n */\nexport const last = <T>(\n  array: readonly T[],\n  defaultValue: T | null | undefined = undefined\n) => {\n  return array?.length > 0 ? array[array.length - 1] : defaultValue\n}\n\n/**\n * Sort an array without modifying it and return\n * the newly sorted value\n */\nexport const sort = <T>(\n  array: readonly T[],\n  getter: (item: T) => number,\n  desc = false\n) => {\n  if (!array) return []\n  const asc = (a: T, b: T) => getter(a) - getter(b)\n  const dsc = (a: T, b: T) => getter(b) - getter(a)\n  return array.slice().sort(desc === true ? dsc : asc)\n}\n\n/**\n * Sort an array without modifying it and return\n * the newly sorted value. Allows for a string\n * sorting value.\n */\nexport const alphabetical = <T>(\n  array: readonly T[],\n  getter: (item: T) => string,\n  dir: 'asc' | 'desc' = 'asc'\n) => {\n  if (!array) return []\n  const asc = (a: T, b: T) => `${getter(a)}`.localeCompare(getter(b))\n  const dsc = (a: T, b: T) => `${getter(b)}`.localeCompare(getter(a))\n  return array.slice().sort(dir === 'desc' ? dsc : asc)\n}\n\nexport const counting = <T, TId extends string | number | symbol>(\n  list: readonly T[],\n  identity: (item: T) => TId\n): Record<TId, number> => {\n  if (!list) return {} as Record<TId, number>\n  return list.reduce((acc, item) => {\n    const id = identity(item)\n    acc[id] = (acc[id] ?? 0) + 1\n    return acc\n  }, {} as Record<TId, number>)\n}\n\n/**\n * Replace an element in an array with a new\n * item without modifying the array and return\n * the new value\n */\nexport const replace = <T>(\n  list: readonly T[],\n  newItem: T,\n  match: (item: T, idx: number) => boolean\n): T[] => {\n  if (!list) return []\n  if (newItem === undefined) return [...list]\n  for (let idx = 0; idx < list.length; idx++) {\n    const item = list[idx]\n    if (match(item, idx)) {\n      return [\n        ...list.slice(0, idx),\n        newItem,\n        ...list.slice(idx + 1, list.length)\n      ]\n    }\n  }\n  return [...list]\n}\n\n/**\n * Convert an array to a dictionary by mapping each item\n * into a dictionary key & value\n */\nexport const objectify = <T, Key extends string | number | symbol, Value = T>(\n  array: readonly T[],\n  getKey: (item: T) => Key,\n  getValue: (item: T) => Value = item => item as unknown as Value\n): Record<Key, Value> => {\n  return array.reduce((acc, item) => {\n    acc[getKey(item)] = getValue(item)\n    return acc\n  }, {} as Record<Key, Value>)\n}\n\n/**\n * Select performs a filter and a mapper inside of a reduce,\n * only iterating the list one time.\n *\n * @example\n * select([1, 2, 3, 4], x => x*x, x > 2) == [9, 16]\n */\nexport const select = <T, K>(\n  array: readonly T[],\n  mapper: (item: T, index: number) => K,\n  condition: (item: T, index: number) => boolean\n) => {\n  if (!array) return []\n  return array.reduce((acc, item, index) => {\n    if (!condition(item, index)) return acc\n    acc.push(mapper(item, index))\n    return acc\n  }, [] as K[])\n}\n\n/**\n * Max gets the greatest value from a list\n *\n * @example\n * max([ 2, 3, 5]) == 5\n * max([{ num: 1 }, { num: 2 }], x => x.num) == { num: 2 }\n */\nexport function max(array: readonly [number, ...number[]]): number\nexport function max(array: readonly number[]): number | null\nexport function max<T>(\n  array: readonly T[],\n  getter: (item: T) => number\n): T | null\nexport function max<T>(\n  array: readonly T[],\n  getter?: (item: T) => number\n): T | null {\n  const get = getter ?? ((v: any) => v)\n  return boil(array, (a, b) => (get(a) > get(b) ? a : b))\n}\n\n/**\n * Min gets the smallest value from a list\n *\n * @example\n * min([1, 2, 3, 4]) == 1\n * min([{ num: 1 }, { num: 2 }], x => x.num) == { num: 1 }\n */\nexport function min(array: readonly [number, ...number[]]): number\nexport function min(array: readonly number[]): number | null\nexport function min<T>(\n  array: readonly T[],\n  getter: (item: T) => number\n): T | null\nexport function min<T>(\n  array: readonly T[],\n  getter?: (item: T) => number\n): T | null {\n  const get = getter ?? ((v: any) => v)\n  return boil(array, (a, b) => (get(a) < get(b) ? a : b))\n}\n\n/**\n * Splits a single list into many lists of the desired size. If\n * given a list of 10 items and a size of 2, it will return 5\n * lists with 2 items each\n */\nexport const cluster = <T>(list: readonly T[], size: number = 2): T[][] => {\n  const clusterCount = Math.ceil(list.length / size)\n  return new Array(clusterCount).fill(null).map((_c: null, i: number) => {\n    return list.slice(i * size, i * size + size)\n  })\n}\n\n/**\n * Given a list of items returns a new list with only\n * unique items. Accepts an optional identity function\n * to convert each item in the list to a comparable identity\n * value\n */\nexport const unique = <T, K extends string | number | symbol>(\n  array: readonly T[],\n  toKey?: (item: T) => K\n): T[] => {\n  const valueMap = array.reduce((acc, item) => {\n    const key = toKey ? toKey(item) : (item as any as string | number | symbol)\n    if (acc[key]) return acc\n    acc[key] = item\n    return acc\n  }, {} as Record<string | number | symbol, T>)\n  return Object.values(valueMap)\n}\n\n/**\n * Creates a generator that will produce an iteration through\n * the range of number as requested.\n *\n * @example\n * range(3)                  // yields 0, 1, 2, 3\n * range(0, 3)               // yields 0, 1, 2, 3\n * range(0, 3, 'y')          // yields y, y, y, y\n * range(0, 3, () => 'y')    // yields y, y, y, y\n * range(0, 3, i => i)       // yields 0, 1, 2, 3\n * range(0, 3, i => `y${i}`) // yields y0, y1, y2, y3\n * range(0, 3, obj)          // yields obj, obj, obj, obj\n * range(0, 6, i => i, 2)    // yields 0, 2, 4, 6\n */\nexport function* range<T = number>(\n  startOrLength: number,\n  end?: number,\n  valueOrMapper: T | ((i: number) => T) = i => i as T,\n  step: number = 1\n): Generator<T> {\n  const mapper = isFunction(valueOrMapper) ? valueOrMapper : () => valueOrMapper\n  const start = end ? startOrLength : 0\n  const final = end ?? startOrLength\n  for (let i = start; i <= final; i += step) {\n    yield mapper(i)\n    if (i + step > final) break\n  }\n}\n\n/**\n * Creates a list of given start, end, value, and\n * step parameters.\n *\n * @example\n * list(3)                  // 0, 1, 2, 3\n * list(0, 3)               // 0, 1, 2, 3\n * list(0, 3, 'y')          // y, y, y, y\n * list(0, 3, () => 'y')    // y, y, y, y\n * list(0, 3, i => i)       // 0, 1, 2, 3\n * list(0, 3, i => `y${i}`) // y0, y1, y2, y3\n * list(0, 3, obj)          // obj, obj, obj, obj\n * list(0, 6, i => i, 2)    // 0, 2, 4, 6\n */\nexport const list = <T = number>(\n  startOrLength: number,\n  end?: number,\n  valueOrMapper?: T | ((i: number) => T),\n  step?: number\n): T[] => {\n  return Array.from(range(startOrLength, end, valueOrMapper, step))\n}\n\n/**\n * Given an array of arrays, returns a single\n * dimentional array with all items in it.\n */\nexport const flat = <T>(lists: readonly T[][]): T[] => {\n  return lists.reduce((acc, list) => {\n    acc.push(...list)\n    return acc\n  }, [])\n}\n\n/**\n * Given two arrays, returns true if any\n * elements intersect\n */\nexport const intersects = <T, K extends string | number | symbol>(\n  listA: readonly T[],\n  listB: readonly T[],\n  identity?: (t: T) => K\n): boolean => {\n  if (!listA || !listB) return false\n  const ident = identity ?? ((x: T) => x as unknown as K)\n  const dictB = listB.reduce((acc, item) => {\n    acc[ident(item)] = true\n    return acc\n  }, {} as Record<string | number | symbol, boolean>)\n  return listA.some(value => dictB[ident(value)])\n}\n\n/**\n * Split an array into two array based on\n * a true/false condition function\n */\nexport const fork = <T>(\n  list: readonly T[],\n  condition: (item: T) => boolean\n): [T[], T[]] => {\n  if (!list) return [[], []]\n  return list.reduce(\n    (acc, item) => {\n      const [a, b] = acc\n      if (condition(item)) {\n        return [[...a, item], b]\n      } else {\n        return [a, [...b, item]]\n      }\n    },\n    [[], []] as [T[], T[]]\n  )\n}\n\n/**\n * Given two lists of the same type, iterate the first list\n * and replace items matched by the matcher func in the\n * first place.\n */\nexport const merge = <T>(\n  root: readonly T[],\n  others: readonly T[],\n  matcher: (item: T) => any\n) => {\n  if (!others && !root) return []\n  if (!others) return root\n  if (!root) return []\n  if (!matcher) return root\n  return root.reduce((acc, r) => {\n    const matched = others.find(o => matcher(r) === matcher(o))\n    if (matched) acc.push(matched)\n    else acc.push(r)\n    return acc\n  }, [] as T[])\n}\n\n/**\n * Replace an item in an array by a match function condition. If\n * no items match the function condition, appends the new item to\n * the end of the list.\n */\nexport const replaceOrAppend = <T>(\n  list: readonly T[],\n  newItem: T,\n  match: (a: T, idx: number) => boolean\n) => {\n  if (!list && !newItem) return []\n  if (!newItem) return [...list]\n  if (!list) return [newItem]\n  for (let idx = 0; idx < list.length; idx++) {\n    const item = list[idx]\n    if (match(item, idx)) {\n      return [\n        ...list.slice(0, idx),\n        newItem,\n        ...list.slice(idx + 1, list.length)\n      ]\n    }\n  }\n  return [...list, newItem]\n}\n\n/**\n * If the item matching the condition already exists\n * in the list it will be removed. If it does not it\n * will be added.\n */\nexport const toggle = <T>(\n  list: readonly T[],\n  item: T,\n  /**\n   * Converts an item of type T item into a value that\n   * can be checked for equality\n   */\n  toKey?: null | ((item: T, idx: number) => number | string | symbol),\n  options?: {\n    strategy?: 'prepend' | 'append'\n  }\n) => {\n  if (!list && !item) return []\n  if (!list) return [item]\n  if (!item) return [...list]\n  const matcher = toKey\n    ? (x: T, idx: number) => toKey(x, idx) === toKey(item, idx)\n    : (x: T) => x === item\n  const existing = list.find(matcher)\n  if (existing) return list.filter((x, idx) => !matcher(x, idx))\n  const strategy = options?.strategy ?? 'append'\n  if (strategy === 'append') return [...list, item]\n  return [item, ...list]\n}\n\ntype Falsy = null | undefined | false | '' | 0 | 0n\n\n/**\n * Given a list returns a new list with\n * only truthy values\n */\nexport const sift = <T>(list: readonly (T | Falsy)[]): T[] => {\n  return (list?.filter(x => !!x) as T[]) ?? []\n}\n\n/**\n * Like a reduce but does not require an array.\n * Only need a number and will iterate the function\n * as many times as specified.\n *\n * NOTE: This is NOT zero indexed. If you pass count=5\n * you will get 1, 2, 3, 4, 5 iteration in the callback\n * function\n */\nexport const iterate = <T>(\n  count: number,\n  func: (currentValue: T, iteration: number) => T,\n  initValue: T\n) => {\n  let value = initValue\n  for (let i = 1; i <= count; i++) {\n    value = func(value, i)\n  }\n  return value\n}\n\n/**\n * Returns all items from the first list that\n * do not exist in the second list.\n */\nexport const diff = <T>(\n  root: readonly T[],\n  other: readonly T[],\n  identity: (item: T) => string | number | symbol = (t: T) =>\n    t as unknown as string | number | symbol\n): T[] => {\n  if (!root?.length && !other?.length) return []\n  if (root?.length === undefined) return [...other]\n  if (!other?.length) return [...root]\n  const bKeys = other.reduce((acc, item) => {\n    acc[identity(item)] = true\n    return acc\n  }, {} as Record<string | number | symbol, boolean>)\n  return root.filter(a => !bKeys[identity(a)])\n}\n\n/**\n * Shift array items by n steps\n * If n > 0 items will shift n steps to the right\n * If n < 0 items will shift n steps to the left\n */\nexport function shift<T>(arr: Array<T>, n: number) {\n  if (arr.length === 0) return arr\n\n  const shiftNumber = n % arr.length\n\n  if (shiftNumber === 0) return arr\n\n  return [...arr.slice(-shiftNumber, arr.length), ...arr.slice(0, -shiftNumber)]\n}\n"],"names":["list"],"mappings":"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","debugId":null}},
    {"offset": {"line": 16627, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/radash@12.1.1/node_modules/radash/dist/esm/async.mjs","sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/radash%4012.1.1/node_modules/radash/src/async.ts"],"sourcesContent":["import { fork, list, range, sort } from './array'\nimport { isArray, isPromise } from './typed'\n\n/**\n * An async reduce function. Works like the\n * built-in Array.reduce function but handles\n * an async reducer function\n */\nexport const reduce = async <T, K>(\n  array: readonly T[],\n  asyncReducer: (acc: K, item: T, index: number) => Promise<K>,\n  initValue?: K\n): Promise<K> => {\n  const initProvided = initValue !== undefined\n  if (!initProvided && array?.length < 1) {\n    throw new Error('Cannot reduce empty array with no init value')\n  }\n  const iter = initProvided ? array : array.slice(1)\n  let value: any = initProvided ? initValue : array[0]\n  for (const [i, item] of iter.entries()) {\n    value = await asyncReducer(value, item, i)\n  }\n  return value\n}\n\n/**\n * An async map function. Works like the\n * built-in Array.map function but handles\n * an async mapper function\n */\nexport const map = async <T, K>(\n  array: readonly T[],\n  asyncMapFunc: (item: T, index: number) => Promise<K>\n): Promise<K[]> => {\n  if (!array) return []\n  let result = []\n  let index = 0\n  for (const value of array) {\n    const newValue = await asyncMapFunc(value, index++)\n    result.push(newValue)\n  }\n  return result\n}\n\n/**\n * Useful when for script like things where cleanup\n * should be done on fail or sucess no matter.\n *\n * You can call defer many times to register many\n * defered functions that will all be called when\n * the function exits in any state.\n */\nexport const defer = async <TResponse>(\n  func: (\n    register: (\n      fn: (error?: any) => any,\n      options?: { rethrow?: boolean }\n    ) => void\n  ) => Promise<TResponse>\n): Promise<TResponse> => {\n  const callbacks: {\n    fn: (error?: any) => any\n    rethrow: boolean\n  }[] = []\n  const register = (\n    fn: (error?: any) => any,\n    options?: { rethrow?: boolean }\n  ) =>\n    callbacks.push({\n      fn,\n      rethrow: options?.rethrow ?? false\n    })\n  const [err, response] = await tryit(func)(register)\n  for (const { fn, rethrow } of callbacks) {\n    const [rethrown] = await tryit(fn)(err)\n    if (rethrown && rethrow) throw rethrown\n  }\n  if (err) throw err\n  return response\n}\n\ntype WorkItemResult<K> = {\n  index: number\n  result: K\n  error: any\n}\n\n/**\n * Support for the built-in AggregateError\n * is still new. Node < 15 doesn't have it\n * so patching here.\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError#browser_compatibility\n */\nexport class AggregateError extends Error {\n  errors: Error[]\n  constructor(errors: Error[] = []) {\n    super()\n    const name = errors.find(e => e.name)?.name ?? ''\n    this.name = `AggregateError(${name}...)`\n    this.message = `AggregateError with ${errors.length} errors`\n    this.stack = errors.find(e => e.stack)?.stack ?? this.stack\n    this.errors = errors\n  }\n}\n\n/**\n * Executes many async functions in parallel. Returns the\n * results from all functions as an array. After all functions\n * have resolved, if any errors were thrown, they are rethrown\n * in an instance of AggregateError\n */\nexport const parallel = async <T, K>(\n  limit: number,\n  array: readonly T[],\n  func: (item: T) => Promise<K>\n): Promise<K[]> => {\n  const work = array.map((item, index) => ({\n    index,\n    item\n  }))\n  // Process array items\n  const processor = async (res: (value: WorkItemResult<K>[]) => void) => {\n    const results: WorkItemResult<K>[] = []\n    while (true) {\n      const next = work.pop()\n      if (!next) return res(results)\n      const [error, result] = await tryit(func)(next.item)\n      results.push({\n        error,\n        result: result as K,\n        index: next.index\n      })\n    }\n  }\n  // Create queues\n  const queues = list(1, limit).map(() => new Promise(processor))\n  // Wait for all queues to complete\n  const itemResults = (await Promise.all(queues)) as WorkItemResult<K>[][]\n  const [errors, results] = fork(\n    sort(itemResults.flat(), r => r.index),\n    x => !!x.error\n  )\n  if (errors.length > 0) {\n    throw new AggregateError(errors.map(error => error.error))\n  }\n  return results.map(r => r.result)\n}\n\ntype PromiseValues<T extends Promise<any>[]> = {\n  [K in keyof T]: T[K] extends Promise<infer U> ? U : never\n}\n\n/**\n * Functionally similar to Promise.all or Promise.allSettled. If any\n * errors are thrown, all errors are gathered and thrown in an\n * AggregateError.\n *\n * @example\n * const [user] = await all([\n *   api.users.create(...),\n *   s3.buckets.create(...),\n *   slack.customerSuccessChannel.sendMessage(...)\n * ])\n */\nexport async function all<T extends [Promise<any>, ...Promise<any>[]]>(\n  promises: T\n): Promise<PromiseValues<T>>\nexport async function all<T extends Promise<any>[]>(\n  promises: T\n): Promise<PromiseValues<T>>\n/**\n * Functionally similar to Promise.all or Promise.allSettled. If any\n * errors are thrown, all errors are gathered and thrown in an\n * AggregateError.\n *\n * @example\n * const { user } = await all({\n *   user: api.users.create(...),\n *   bucket: s3.buckets.create(...),\n *   message: slack.customerSuccessChannel.sendMessage(...)\n * })\n */\nexport async function all<T extends Record<string, Promise<any>>>(\n  promises: T\n): Promise<{ [K in keyof T]: Awaited<T[K]> }>\nexport async function all<\n  T extends Record<string, Promise<any>> | Promise<any>[]\n>(promises: T) {\n  const entries = isArray(promises)\n    ? promises.map(p => [null, p] as [null, Promise<any>])\n    : Object.entries(promises)\n\n  const results = await Promise.all(\n    entries.map(([key, value]) =>\n      value\n        .then(result => ({ result, exc: null, key }))\n        .catch(exc => ({ result: null, exc, key }))\n    )\n  )\n\n  const exceptions = results.filter(r => r.exc)\n  if (exceptions.length > 0) {\n    throw new AggregateError(exceptions.map(e => e.exc))\n  }\n\n  if (isArray(promises)) {\n    return results.map(r => r.result) as T extends Promise<any>[]\n      ? PromiseValues<T>\n      : unknown\n  }\n\n  return results.reduce(\n    (acc, item) => ({\n      ...acc,\n      [item.key!]: item.result\n    }),\n    {} as { [K in keyof T]: Awaited<T[K]> }\n  )\n}\n\n/**\n * Retries the given function the specified number\n * of times.\n */\nexport const retry = async <TResponse>(\n  options: {\n    times?: number\n    delay?: number | null\n    backoff?: (count: number) => number\n  },\n  func: (exit: (err: any) => void) => Promise<TResponse>\n): Promise<TResponse> => {\n  const times = options?.times ?? 3\n  const delay = options?.delay\n  const backoff = options?.backoff ?? null\n  for (const i of range(1, times)) {\n    const [err, result] = (await tryit(func)((err: any) => {\n      throw { _exited: err }\n    })) as [any, TResponse]\n    if (!err) return result\n    if (err._exited) throw err._exited\n    if (i === times) throw err\n    if (delay) await sleep(delay)\n    if (backoff) await sleep(backoff(i))\n  }\n  // Logically, we should never reach this\n  // code path. It makes the function meet\n  // strict mode requirements.\n  /* istanbul ignore next */\n  return undefined as unknown as TResponse\n}\n\n/**\n * Async wait\n */\nexport const sleep = (milliseconds: number) => {\n  return new Promise(res => setTimeout(res, milliseconds))\n}\n\n/**\n * A helper to try an async function without forking\n * the control flow. Returns an error first callback _like_\n * array response as [Error, result]\n */\nexport const tryit = <Args extends any[], Return>(\n  func: (...args: Args) => Return\n) => {\n  return (\n    ...args: Args\n  ): Return extends Promise<any>\n    ? Promise<[Error, undefined] | [undefined, Awaited<Return>]>\n    : [Error, undefined] | [undefined, Return] => {\n    try {\n      const result = func(...args)\n      if (isPromise(result)) {\n        return result\n          .then(value => [undefined, value])\n          .catch(err => [err, undefined]) as Return extends Promise<any>\n          ? Promise<[Error, undefined] | [undefined, Awaited<Return>]>\n          : [Error, undefined] | [undefined, Return]\n      }\n      return [undefined, result] as Return extends Promise<any>\n        ? Promise<[Error, undefined] | [undefined, Awaited<Return>]>\n        : [Error, undefined] | [undefined, Return]\n    } catch (err) {\n      return [err as any, undefined] as Return extends Promise<any>\n        ? Promise<[Error, undefined] | [undefined, Awaited<Return>]>\n        : [Error, undefined] | [undefined, Return]\n    }\n  }\n}\n\n/**\n * A helper to try an async function that returns undefined\n * if it fails.\n *\n * e.g. const result = await guard(fetchUsers)() ?? [];\n */\nexport const guard = <TFunction extends () => any>(\n  func: TFunction,\n  shouldGuard?: (err: any) => boolean\n): ReturnType<TFunction> extends Promise<any>\n  ? Promise<Awaited<ReturnType<TFunction>> | undefined>\n  : ReturnType<TFunction> | undefined => {\n  const _guard = (err: any) => {\n    if (shouldGuard && !shouldGuard(err)) throw err\n    return undefined as any\n  }\n  const isPromise = (result: any): result is Promise<any> =>\n    result instanceof Promise\n  try {\n    const result = func()\n    return isPromise(result) ? result.catch(_guard) : result\n  } catch (err) {\n    return _guard(err)\n  }\n}\n"],"names":["results","err","isPromise"],"mappings":"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","debugId":null}},
    {"offset": {"line": 16816, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bjson-schema%401.11.1/node_modules/%40orpc/json-schema/dist/index.mjs"],"sourcesContent":["import { isObject, toArray, guard } from '@orpc/shared';\nimport { CompositeSchemaConverter } from '@orpc/openapi';\n\nvar JsonSchemaXNativeType = /* @__PURE__ */ ((JsonSchemaXNativeType2) => {\n  JsonSchemaXNativeType2[\"BigInt\"] = \"bigint\";\n  JsonSchemaXNativeType2[\"RegExp\"] = \"regexp\";\n  JsonSchemaXNativeType2[\"Date\"] = \"date\";\n  JsonSchemaXNativeType2[\"Url\"] = \"url\";\n  JsonSchemaXNativeType2[\"Set\"] = \"set\";\n  JsonSchemaXNativeType2[\"Map\"] = \"map\";\n  return JsonSchemaXNativeType2;\n})(JsonSchemaXNativeType || {});\n\nconst FLEXIBLE_DATE_FORMAT_REGEX = /^[^-]+-[^-]+-[^-]+$/;\nclass experimental_JsonSchemaCoercer {\n  coerce(schema, value, options = {}) {\n    const [, coerced] = this.#coerce(schema, value, options);\n    return coerced;\n  }\n  #coerce(schema, originalValue, options) {\n    if (typeof schema === \"boolean\") {\n      return [schema, originalValue];\n    }\n    if (Array.isArray(schema.type)) {\n      return this.#coerce({\n        anyOf: schema.type.map((type) => ({ ...schema, type }))\n      }, originalValue, options);\n    }\n    let coerced = originalValue;\n    let satisfied = true;\n    if (typeof schema.$ref === \"string\") {\n      const refSchema = options?.components?.[schema.$ref];\n      if (refSchema !== void 0) {\n        const [subSatisfied, subCoerced] = this.#coerce(refSchema, coerced, options);\n        coerced = subCoerced;\n        satisfied = subSatisfied;\n      }\n    }\n    const enumValues = schema.const !== void 0 ? [schema.const] : schema.enum;\n    if (enumValues !== void 0 && !enumValues.includes(coerced)) {\n      if (typeof coerced === \"string\") {\n        const numberValue = this.#stringToNumber(coerced);\n        if (enumValues.includes(numberValue)) {\n          coerced = numberValue;\n        } else {\n          const booleanValue = this.#stringToBoolean(coerced);\n          if (enumValues.includes(booleanValue)) {\n            coerced = booleanValue;\n          } else {\n            satisfied = false;\n          }\n        }\n      } else {\n        satisfied = false;\n      }\n    }\n    if (typeof schema.type === \"string\") {\n      switch (schema.type) {\n        case \"null\": {\n          if (coerced !== null) {\n            satisfied = false;\n          }\n          break;\n        }\n        case \"string\": {\n          if (typeof coerced !== \"string\") {\n            satisfied = false;\n          }\n          break;\n        }\n        case \"number\": {\n          if (typeof coerced === \"string\") {\n            coerced = this.#stringToNumber(coerced);\n          }\n          if (typeof coerced !== \"number\") {\n            satisfied = false;\n          }\n          break;\n        }\n        case \"integer\": {\n          if (typeof coerced === \"string\") {\n            coerced = this.#stringToInteger(coerced);\n          }\n          if (typeof coerced !== \"number\" || !Number.isInteger(coerced)) {\n            satisfied = false;\n          }\n          break;\n        }\n        case \"boolean\": {\n          if (typeof coerced === \"string\") {\n            coerced = this.#stringToBoolean(coerced);\n          }\n          if (typeof coerced !== \"boolean\") {\n            satisfied = false;\n          }\n          break;\n        }\n        case \"array\": {\n          if (Array.isArray(coerced)) {\n            const prefixItemSchemas = \"prefixItems\" in schema ? toArray(schema.prefixItems) : Array.isArray(schema.items) ? schema.items : [];\n            const itemSchema = Array.isArray(schema.items) ? schema.additionalItems : schema.items;\n            let shouldUseCoercedItems = false;\n            const coercedItems = coerced.map((item, i) => {\n              const subSchema = prefixItemSchemas[i] ?? itemSchema;\n              if (subSchema === void 0) {\n                satisfied = false;\n                return item;\n              }\n              const [subSatisfied, subCoerced] = this.#coerce(subSchema, item, options);\n              if (!subSatisfied) {\n                satisfied = false;\n              }\n              if (subCoerced !== item) {\n                shouldUseCoercedItems = true;\n              }\n              return subCoerced;\n            });\n            if (coercedItems.length < prefixItemSchemas.length) {\n              satisfied = false;\n            }\n            if (shouldUseCoercedItems) {\n              coerced = coercedItems;\n            }\n          } else {\n            satisfied = false;\n          }\n          break;\n        }\n        case \"object\": {\n          if (Array.isArray(coerced)) {\n            coerced = { ...coerced };\n          }\n          if (isObject(coerced)) {\n            let shouldUseCoercedItems = false;\n            const coercedItems = {};\n            const patternProperties = Object.entries(schema.patternProperties ?? {}).map(([key, value]) => [new RegExp(key), value]);\n            for (const key in coerced) {\n              const value = coerced[key];\n              const subSchema = schema.properties?.[key] ?? patternProperties.find(([pattern]) => pattern.test(key))?.[1] ?? schema.additionalProperties;\n              if (value === void 0 && !schema.required?.includes(key)) {\n                coercedItems[key] = value;\n              } else if (subSchema === void 0) {\n                coercedItems[key] = value;\n                satisfied = false;\n              } else {\n                const [subSatisfied, subCoerced] = this.#coerce(subSchema, value, options);\n                coercedItems[key] = subCoerced;\n                if (!subSatisfied) {\n                  satisfied = false;\n                }\n                if (subCoerced !== value) {\n                  shouldUseCoercedItems = true;\n                }\n              }\n            }\n            if (schema.required?.some((key) => !Object.hasOwn(coercedItems, key))) {\n              satisfied = false;\n            }\n            if (shouldUseCoercedItems) {\n              coerced = coercedItems;\n            }\n          } else {\n            satisfied = false;\n          }\n          break;\n        }\n      }\n    }\n    if (\"x-native-type\" in schema && typeof schema[\"x-native-type\"] === \"string\") {\n      switch (schema[\"x-native-type\"]) {\n        case JsonSchemaXNativeType.Date: {\n          if (typeof coerced === \"string\") {\n            coerced = this.#stringToDate(coerced);\n          }\n          if (!(coerced instanceof Date)) {\n            satisfied = false;\n          }\n          break;\n        }\n        case JsonSchemaXNativeType.BigInt: {\n          switch (typeof coerced) {\n            case \"string\":\n              coerced = this.#stringToBigInt(coerced);\n              break;\n            case \"number\":\n              coerced = this.#numberToBigInt(coerced);\n              break;\n          }\n          if (typeof coerced !== \"bigint\") {\n            satisfied = false;\n          }\n          break;\n        }\n        case JsonSchemaXNativeType.RegExp: {\n          if (typeof coerced === \"string\") {\n            coerced = this.#stringToRegExp(coerced);\n          }\n          if (!(coerced instanceof RegExp)) {\n            satisfied = false;\n          }\n          break;\n        }\n        case JsonSchemaXNativeType.Url: {\n          if (typeof coerced === \"string\") {\n            coerced = this.#stringToURL(coerced);\n          }\n          if (!(coerced instanceof URL)) {\n            satisfied = false;\n          }\n          break;\n        }\n        case JsonSchemaXNativeType.Set: {\n          if (Array.isArray(coerced)) {\n            coerced = this.#arrayToSet(coerced);\n          }\n          if (!(coerced instanceof Set)) {\n            satisfied = false;\n          }\n          break;\n        }\n        case JsonSchemaXNativeType.Map: {\n          if (Array.isArray(coerced)) {\n            coerced = this.#arrayToMap(coerced);\n          }\n          if (!(coerced instanceof Map)) {\n            satisfied = false;\n          }\n          break;\n        }\n      }\n    }\n    if (schema.allOf) {\n      for (const subSchema of schema.allOf) {\n        const [subSatisfied, subCoerced] = this.#coerce(subSchema, coerced, options);\n        coerced = subCoerced;\n        if (!subSatisfied) {\n          satisfied = false;\n        }\n      }\n    }\n    for (const key of [\"anyOf\", \"oneOf\"]) {\n      if (schema[key]) {\n        let bestOptions;\n        for (const subSchema of schema[key]) {\n          const [subSatisfied, subCoerced] = this.#coerce(subSchema, coerced, options);\n          if (subSatisfied) {\n            if (!bestOptions || subCoerced === coerced) {\n              bestOptions = { coerced: subCoerced, satisfied: subSatisfied };\n            }\n            if (subCoerced === coerced) {\n              break;\n            }\n          }\n        }\n        coerced = bestOptions ? bestOptions.coerced : coerced;\n        satisfied = bestOptions ? bestOptions.satisfied : false;\n      }\n    }\n    if (typeof schema.not !== \"undefined\") {\n      const [notSatisfied] = this.#coerce(schema.not, coerced, options);\n      if (notSatisfied) {\n        satisfied = false;\n      }\n    }\n    return [satisfied, coerced];\n  }\n  #stringToNumber(value) {\n    const num = Number.parseFloat(value);\n    if (Number.isNaN(num) || num !== Number(value)) {\n      return value;\n    }\n    return num;\n  }\n  #stringToInteger(value) {\n    const num = Number.parseInt(value);\n    if (Number.isNaN(num) || num !== Number(value)) {\n      return value;\n    }\n    return num;\n  }\n  #stringToBoolean(value) {\n    const lower = value.toLowerCase();\n    if (lower === \"false\" || lower === \"off\") {\n      return false;\n    }\n    if (lower === \"true\" || lower === \"on\") {\n      return true;\n    }\n    return value;\n  }\n  #stringToBigInt(value) {\n    return guard(() => BigInt(value)) ?? value;\n  }\n  #numberToBigInt(value) {\n    return guard(() => BigInt(value)) ?? value;\n  }\n  #stringToDate(value) {\n    const date = new Date(value);\n    if (Number.isNaN(date.getTime()) || !FLEXIBLE_DATE_FORMAT_REGEX.test(value)) {\n      return value;\n    }\n    return date;\n  }\n  #stringToRegExp(value) {\n    const match = value.match(/^\\/(.*)\\/([a-z]*)$/);\n    if (match) {\n      const [, pattern, flags] = match;\n      return guard(() => new RegExp(pattern, flags)) ?? value;\n    }\n    return value;\n  }\n  #stringToURL(value) {\n    return guard(() => new URL(value)) ?? value;\n  }\n  #arrayToSet(value) {\n    const set = new Set(value);\n    if (set.size !== value.length) {\n      return value;\n    }\n    return set;\n  }\n  #arrayToMap(value) {\n    if (value.some((item) => !Array.isArray(item) || item.length !== 2)) {\n      return value;\n    }\n    const result = new Map(value);\n    if (result.size !== value.length) {\n      return value;\n    }\n    return result;\n  }\n}\n\nclass experimental_SmartCoercionPlugin {\n  converter;\n  coercer;\n  cache = /* @__PURE__ */ new WeakMap();\n  constructor(options = {}) {\n    this.converter = new CompositeSchemaConverter(toArray(options.schemaConverters));\n    this.coercer = new experimental_JsonSchemaCoercer();\n  }\n  init(options) {\n    options.clientInterceptors ??= [];\n    options.clientInterceptors.unshift(async (options2) => {\n      const inputSchema = options2.procedure[\"~orpc\"].inputSchema;\n      if (!inputSchema) {\n        return options2.next();\n      }\n      const coercedInput = await this.#coerce(inputSchema, options2.input);\n      return options2.next({ ...options2, input: coercedInput });\n    });\n  }\n  async #coerce(schema, value) {\n    let jsonSchema = this.cache.get(schema);\n    if (!jsonSchema) {\n      jsonSchema = (await this.converter.convert(schema, { strategy: \"input\" }))[1];\n      this.cache.set(schema, jsonSchema);\n    }\n    return this.coercer.coerce(jsonSchema, value);\n  }\n}\n\nexport { JsonSchemaXNativeType, experimental_JsonSchemaCoercer, experimental_SmartCoercionPlugin };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 17231, "column": 0}, "map": {"version":3,"sources":["file:///Users/malek.gara/Projects/dukkani/node_modules/.pnpm/%40orpc%2Bzod%401.11.1_%40orpc%2Bcontract%401.11.1_%40orpc%2Bserver%401.11.1_zod%404.1.12/node_modules/%40orpc/zod/dist/zod4/index.mjs"],"sourcesContent":["import { isObject, guard, intercept, toArray } from '@orpc/shared';\nimport { JsonSchemaXNativeType } from '@orpc/json-schema';\nimport { JSONSchemaFormat, JSONSchemaContentEncoding } from '@orpc/openapi';\nimport { registry, globalRegistry } from 'zod/v4/core';\n\nclass experimental_ZodSmartCoercionPlugin {\n  init(options) {\n    options.clientInterceptors ??= [];\n    options.clientInterceptors.unshift((options2) => {\n      const inputSchema = options2.procedure[\"~orpc\"].inputSchema;\n      if (!inputSchema || inputSchema[\"~standard\"].vendor !== \"zod\" || !(\"_zod\" in inputSchema)) {\n        return options2.next();\n      }\n      const coercedInput = this.#coerce(inputSchema, options2.input);\n      return options2.next({ ...options2, input: coercedInput });\n    });\n  }\n  #coerce(schema, value) {\n    switch (schema._zod.def.type) {\n      case \"number\": {\n        if (typeof value === \"string\") {\n          return this.#stringToNumber(value);\n        }\n        return value;\n      }\n      case \"bigint\": {\n        if (typeof value === \"string\") {\n          return this.#stringToBigInt(value);\n        }\n        return value;\n      }\n      case \"boolean\":\n      case \"success\": {\n        if (typeof value === \"string\") {\n          return this.#stringToBoolean(value);\n        }\n        return value;\n      }\n      case \"date\": {\n        if (typeof value === \"string\") {\n          return this.#stringToDate(value);\n        }\n        return value;\n      }\n      case \"literal\":\n      case \"enum\": {\n        const literal = schema;\n        if (!literal._zod.values.has(value) && typeof value === \"string\") {\n          const num = this.#stringToNumber(value);\n          if (literal._zod.values.has(num)) {\n            return num;\n          }\n          const bool = this.#stringToBoolean(value);\n          if (literal._zod.values.has(bool)) {\n            return bool;\n          }\n          const bigint = this.#stringToBigInt(value);\n          if (literal._zod.values.has(bigint)) {\n            return bigint;\n          }\n        }\n        return value;\n      }\n      case \"array\": {\n        const array = schema;\n        if (value === void 0) {\n          return [];\n        }\n        if (Array.isArray(value)) {\n          return value.map((v) => this.#coerce(array._zod.def.element, v));\n        }\n        return value;\n      }\n      case \"tuple\": {\n        const tuple = schema;\n        if (value === void 0) {\n          return [];\n        }\n        if (Array.isArray(value)) {\n          return value.map((v, i) => {\n            const s = tuple._zod.def.items[i] ?? tuple._zod.def.rest;\n            return s ? this.#coerce(s, v) : v;\n          });\n        }\n        return value;\n      }\n      case \"set\": {\n        const set = schema;\n        if (value === void 0) {\n          return /* @__PURE__ */ new Set();\n        }\n        if (Array.isArray(value)) {\n          return new Set(\n            value.map((v) => this.#coerce(set._zod.def.valueType, v))\n          );\n        }\n        if (value instanceof Set) {\n          return new Set(\n            Array.from(value).map((v) => this.#coerce(set._zod.def.valueType, v))\n          );\n        }\n        return value;\n      }\n      case \"object\": {\n        const object = schema;\n        if (value === void 0) {\n          return {};\n        }\n        if (isObject(value)) {\n          const newObj = {};\n          const keys = /* @__PURE__ */ new Set([\n            ...Object.keys(value),\n            ...Object.keys(object._zod.def.shape)\n          ]);\n          for (const k of keys) {\n            const s = object._zod.def.shape[k] ?? object._zod.def.catchall;\n            newObj[k] = s ? this.#coerce(s, value[k]) : value[k];\n          }\n          return newObj;\n        }\n        return value;\n      }\n      case \"record\": {\n        const record = schema;\n        if (value === void 0) {\n          return {};\n        }\n        if (isObject(value)) {\n          const newObj = {};\n          for (const [k, v] of Object.entries(value)) {\n            const key = this.#coerce(record._zod.def.keyType, k);\n            const val = this.#coerce(record._zod.def.valueType, v);\n            newObj[key] = val;\n          }\n          return newObj;\n        }\n        return value;\n      }\n      case \"map\": {\n        const map = schema;\n        if (value === void 0) {\n          return /* @__PURE__ */ new Map();\n        }\n        if (Array.isArray(value) && value.every((i) => Array.isArray(i) && i.length <= 2)) {\n          return new Map(\n            value.map(([k, v]) => [\n              this.#coerce(map._zod.def.keyType, k),\n              this.#coerce(map._zod.def.valueType, v)\n            ])\n          );\n        }\n        if (value instanceof Map) {\n          return new Map(\n            Array.from(value).map(([k, v]) => [\n              this.#coerce(map._zod.def.keyType, k),\n              this.#coerce(map._zod.def.valueType, v)\n            ])\n          );\n        }\n        return value;\n      }\n      case \"union\": {\n        const union = schema;\n        if (union._zod.def.options.length === 1) {\n          return this.#coerce(union._zod.def.options[0], value);\n        }\n        if (isObject(value)) {\n          const discriminator = \"discriminator\" in union._zod.def && typeof union._zod.def.discriminator === \"string\" ? union._zod.def.discriminator : void 0;\n          for (const option of union._zod.def.options) {\n            if (!option._zod.propValues) {\n              continue;\n            }\n            if (discriminator !== void 0) {\n              if (option._zod.propValues[discriminator]?.has(value[discriminator])) {\n                return this.#coerce(option, value);\n              }\n            } else {\n              for (const key in option._zod.propValues) {\n                if (option._zod.propValues[key]?.has(value[key])) {\n                  return this.#coerce(option, value);\n                }\n              }\n            }\n          }\n        }\n        return value;\n      }\n      case \"intersection\": {\n        const intersection = schema;\n        return this.#coerce(\n          intersection._zod.def.right,\n          this.#coerce(intersection._zod.def.left, value)\n        );\n      }\n      case \"optional\": {\n        const optional = schema;\n        if (value === void 0) {\n          return void 0;\n        }\n        return this.#coerce(optional._zod.def.innerType, value);\n      }\n      case \"nonoptional\": {\n        const nonoptional = schema;\n        return this.#coerce(nonoptional._zod.def.innerType, value);\n      }\n      case \"nullable\": {\n        const nullable = schema;\n        if (value === null) {\n          return null;\n        }\n        return this.#coerce(nullable._zod.def.innerType, value);\n      }\n      case \"readonly\": {\n        const readonly_ = schema;\n        return this.#coerce(readonly_._zod.def.innerType, value);\n      }\n      case \"pipe\": {\n        const pipe = schema;\n        return this.#coerce(pipe._zod.def.in, value);\n      }\n      case \"default\":\n      case \"prefault\": {\n        const default_ = schema;\n        if (value === void 0) {\n          return value;\n        }\n        return this.#coerce(default_._zod.def.innerType, value);\n      }\n      case \"catch\": {\n        const catch_ = schema;\n        return this.#coerce(catch_._zod.def.innerType, value);\n      }\n      case \"lazy\": {\n        const lazy = schema;\n        if (value !== void 0) {\n          return this.#coerce(lazy._zod.def.getter(), value);\n        }\n        return value;\n      }\n      default: {\n        schema._zod.def.type;\n        return value;\n      }\n    }\n  }\n  #stringToNumber(value) {\n    const num = Number(value);\n    return Number.isNaN(num) || num.toString() !== value ? value : num;\n  }\n  #stringToBigInt(value) {\n    return guard(() => BigInt(value)) ?? value;\n  }\n  #stringToBoolean(value) {\n    const lower = value.toLowerCase();\n    if (lower === \"false\" || lower === \"off\" || lower === \"f\") {\n      return false;\n    }\n    if (lower === \"true\" || lower === \"on\" || lower === \"t\") {\n      return true;\n    }\n    return value;\n  }\n  #stringToDate(value) {\n    const date = new Date(value);\n    if (!Number.isNaN(date.getTime()) && date.toISOString().startsWith(value)) {\n      return date;\n    }\n    return value;\n  }\n}\n\nconst JSON_SCHEMA_REGISTRY = registry();\nconst JSON_SCHEMA_INPUT_REGISTRY = registry();\nconst JSON_SCHEMA_OUTPUT_REGISTRY = registry();\n\nclass ZodToJsonSchemaConverter {\n  maxLazyDepth;\n  maxStructureDepth;\n  anyJsonSchema;\n  unsupportedJsonSchema;\n  undefinedJsonSchema;\n  interceptors;\n  constructor(options = {}) {\n    this.maxLazyDepth = options.maxLazyDepth ?? 2;\n    this.maxStructureDepth = options.maxStructureDepth ?? 10;\n    this.anyJsonSchema = options.anyJsonSchema ?? {};\n    this.unsupportedJsonSchema = options.unsupportedJsonSchema ?? { not: {} };\n    this.undefinedJsonSchema = options.undefinedJsonSchema ?? { not: {} };\n    this.interceptors = options.interceptors ?? [];\n  }\n  condition(schema) {\n    return schema !== void 0 && schema[\"~standard\"].vendor === \"zod\" && \"_zod\" in schema;\n  }\n  convert(schema, options) {\n    return this.#convert(schema, options, 0, 0);\n  }\n  #convert(schema, options, lazyDepth, structureDepth, isHandledCustomJSONSchema = false) {\n    return intercept(\n      this.interceptors,\n      { schema, options, lazyDepth, isHandledCustomJSONSchema },\n      ({ schema: schema2, options: options2, lazyDepth: lazyDepth2, isHandledCustomJSONSchema: isHandledCustomJSONSchema2 }) => {\n        if (structureDepth > this.maxStructureDepth) {\n          return [false, this.anyJsonSchema];\n        }\n        if (!options2.minStructureDepthForRef || options2.minStructureDepthForRef <= structureDepth) {\n          const components = toArray(options2.components);\n          for (const component of components) {\n            if (component.schema === schema2 && component.allowedStrategies.includes(options2.strategy)) {\n              return [component.required, { $ref: component.ref }];\n            }\n          }\n        }\n        if (!isHandledCustomJSONSchema2) {\n          const customJSONSchema = this.#getCustomJsonSchema(schema2, options2);\n          if (customJSONSchema) {\n            const [required, json] = this.#convert(schema2, options2, lazyDepth2, structureDepth, true);\n            return [required, { ...json, ...customJSONSchema }];\n          }\n        }\n        switch (schema2._zod.def.type) {\n          case \"string\": {\n            const string = schema2;\n            const json = { type: \"string\" };\n            const { minimum, maximum, format, patterns, contentEncoding } = string._zod.bag;\n            if (typeof minimum === \"number\") {\n              json.minLength = minimum;\n            }\n            if (typeof maximum === \"number\") {\n              json.maxLength = maximum;\n            }\n            if (typeof contentEncoding === \"string\") {\n              json.contentEncoding = this.#handleContentEncoding(contentEncoding);\n            }\n            if (typeof format === \"string\" && format !== \"regex\" && json.contentEncoding === void 0) {\n              json.format = this.#handleStringFormat(format);\n            }\n            if (patterns instanceof Set && json.contentEncoding === void 0 && json.format === void 0) {\n              for (const pattern of patterns) {\n                if (json.pattern === void 0) {\n                  json.pattern = pattern.source;\n                } else {\n                  json.allOf ??= [];\n                  json.allOf.push({ pattern: pattern.source });\n                }\n              }\n            }\n            if (format === \"jwt\" && json.contentEncoding === void 0 && json.format === void 0 && json.pattern === void 0) {\n              json.pattern = /^[\\w-]+\\.[\\w-]+\\.[\\w-]+$/.source;\n            }\n            return [true, json];\n          }\n          case \"number\": {\n            const number = schema2;\n            const json = { type: \"number\" };\n            const { minimum, maximum, format, multipleOf, exclusiveMaximum, exclusiveMinimum } = number._zod.bag;\n            if (typeof format === \"string\" && format?.includes(\"int\")) {\n              json.type = \"integer\";\n            }\n            if (typeof minimum === \"number\") {\n              json.minimum = minimum;\n            }\n            if (typeof maximum === \"number\") {\n              json.maximum = maximum;\n            }\n            if (typeof exclusiveMinimum === \"number\") {\n              json.exclusiveMinimum = exclusiveMinimum;\n            }\n            if (typeof exclusiveMaximum === \"number\") {\n              json.exclusiveMaximum = exclusiveMaximum;\n            }\n            if (typeof multipleOf === \"number\") {\n              json.multipleOf = multipleOf;\n            }\n            return [true, json];\n          }\n          case \"boolean\": {\n            return [true, { type: \"boolean\" }];\n          }\n          case \"bigint\": {\n            return [true, {\n              \"type\": \"string\",\n              \"pattern\": \"^-?[0-9]+$\",\n              \"x-native-type\": JsonSchemaXNativeType.BigInt\n            }];\n          }\n          case \"date\": {\n            return [true, {\n              \"type\": \"string\",\n              \"format\": JSONSchemaFormat.DateTime,\n              \"x-native-type\": JsonSchemaXNativeType.Date\n            }];\n          }\n          case \"null\": {\n            return [true, { type: \"null\" }];\n          }\n          case \"undefined\":\n          case \"void\": {\n            return [false, this.undefinedJsonSchema];\n          }\n          case \"any\": {\n            return [false, this.anyJsonSchema];\n          }\n          case \"unknown\": {\n            return [false, this.anyJsonSchema];\n          }\n          case \"never\": {\n            return [true, this.unsupportedJsonSchema];\n          }\n          case \"array\": {\n            const array = schema2;\n            const json = { type: \"array\" };\n            const { minimum, maximum } = array._zod.bag;\n            if (typeof minimum === \"number\") {\n              json.minItems = minimum;\n            }\n            if (typeof maximum === \"number\") {\n              json.maxItems = maximum;\n            }\n            json.items = this.#handleArrayItemJsonSchema(this.#convert(array._zod.def.element, options2, lazyDepth2, structureDepth + 1), options2);\n            return [true, json];\n          }\n          case \"object\": {\n            const object = schema2;\n            const json = { type: \"object\" };\n            for (const [key, value] of Object.entries(object._zod.def.shape)) {\n              const [itemRequired, itemJson] = this.#convert(value, options2, lazyDepth2, structureDepth + 1);\n              json.properties ??= {};\n              json.properties[key] = itemJson;\n              if (itemRequired) {\n                json.required ??= [];\n                json.required.push(key);\n              }\n            }\n            if (object._zod.def.catchall) {\n              if (object._zod.def.catchall._zod.def.type === \"never\") {\n                json.additionalProperties = false;\n              } else {\n                const [_, addJson] = this.#convert(object._zod.def.catchall, options2, lazyDepth2, structureDepth + 1);\n                json.additionalProperties = addJson;\n              }\n            }\n            return [true, json];\n          }\n          case \"union\": {\n            const union = schema2;\n            const anyOf = [];\n            let required = true;\n            for (const item of union._zod.def.options) {\n              const [itemRequired, itemJson] = this.#convert(item, options2, lazyDepth2, structureDepth + 1);\n              if (!itemRequired) {\n                required = false;\n              }\n              if (options2.strategy === \"input\") {\n                if (itemJson !== this.undefinedJsonSchema && itemJson !== this.unsupportedJsonSchema) {\n                  anyOf.push(itemJson);\n                }\n              } else {\n                if (itemJson !== this.undefinedJsonSchema) {\n                  anyOf.push(itemJson);\n                }\n              }\n            }\n            return [required, { anyOf }];\n          }\n          case \"intersection\": {\n            const intersection = schema2;\n            const json = { allOf: [] };\n            let required = false;\n            for (const item of [intersection._zod.def.left, intersection._zod.def.right]) {\n              const [itemRequired, itemJson] = this.#convert(item, options2, lazyDepth2, structureDepth + 1);\n              json.allOf.push(itemJson);\n              if (itemRequired) {\n                required = true;\n              }\n            }\n            return [required, json];\n          }\n          case \"tuple\": {\n            const tuple = schema2;\n            const json = { type: \"array\", prefixItems: [] };\n            for (const item of tuple._zod.def.items) {\n              json.prefixItems.push(this.#handleArrayItemJsonSchema(this.#convert(item, options2, lazyDepth2, structureDepth + 1), options2));\n            }\n            if (tuple._zod.def.rest) {\n              json.items = this.#handleArrayItemJsonSchema(this.#convert(tuple._zod.def.rest, options2, lazyDepth2, structureDepth + 1), options2);\n            }\n            const { minimum, maximum } = tuple._zod.bag;\n            if (typeof minimum === \"number\") {\n              json.minItems = minimum;\n            }\n            if (typeof maximum === \"number\") {\n              json.maxItems = maximum;\n            }\n            return [true, json];\n          }\n          case \"record\": {\n            const record = schema2;\n            const json = { type: \"object\" };\n            json.propertyNames = this.#convert(record._zod.def.keyType, options2, lazyDepth2, structureDepth + 1)[1];\n            json.additionalProperties = this.#convert(record._zod.def.valueType, options2, lazyDepth2, structureDepth + 1)[1];\n            return [true, json];\n          }\n          case \"map\": {\n            const map = schema2;\n            return [true, {\n              \"type\": \"array\",\n              \"items\": {\n                type: \"array\",\n                prefixItems: [\n                  this.#handleArrayItemJsonSchema(this.#convert(map._zod.def.keyType, options2, lazyDepth2, structureDepth + 1), options2),\n                  this.#handleArrayItemJsonSchema(this.#convert(map._zod.def.valueType, options2, lazyDepth2, structureDepth + 1), options2)\n                ],\n                maxItems: 2,\n                minItems: 2\n              },\n              \"x-native-type\": JsonSchemaXNativeType.Map\n            }];\n          }\n          case \"set\": {\n            const set = schema2;\n            return [true, {\n              \"type\": \"array\",\n              \"uniqueItems\": true,\n              \"items\": this.#handleArrayItemJsonSchema(this.#convert(set._zod.def.valueType, options2, lazyDepth2, structureDepth + 1), options2),\n              \"x-native-type\": JsonSchemaXNativeType.Set\n            }];\n          }\n          case \"enum\": {\n            const enum_ = schema2;\n            return [true, { enum: Object.values(enum_._zod.def.entries) }];\n          }\n          case \"literal\": {\n            const literal = schema2;\n            let required = true;\n            const values = /* @__PURE__ */ new Set();\n            for (const value of literal._zod.def.values) {\n              if (value === void 0) {\n                required = false;\n              } else {\n                values.add(typeof value === \"bigint\" ? value.toString() : value);\n              }\n            }\n            const json = values.size === 0 ? this.undefinedJsonSchema : values.size === 1 ? { const: values.values().next().value } : { enum: Array.from(values) };\n            return [required, json];\n          }\n          case \"file\": {\n            const file = schema2;\n            const oneOf = [];\n            const { mime } = file._zod.bag;\n            if (mime === void 0 || Array.isArray(mime) && mime.every((m) => typeof m === \"string\")) {\n              for (const type of mime ?? [\"*/*\"]) {\n                oneOf.push({\n                  type: \"string\",\n                  contentMediaType: type\n                });\n              }\n            }\n            return [true, oneOf.length === 1 ? oneOf[0] : { anyOf: oneOf }];\n          }\n          case \"transform\": {\n            return [false, this.anyJsonSchema];\n          }\n          case \"nullable\": {\n            const nullable = schema2;\n            const [required, json] = this.#convert(nullable._zod.def.innerType, options2, lazyDepth2, structureDepth);\n            return [required, { anyOf: [json, { type: \"null\" }] }];\n          }\n          case \"nonoptional\": {\n            const nonoptional = schema2;\n            const [, json] = this.#convert(nonoptional._zod.def.innerType, options2, lazyDepth2, structureDepth);\n            return [true, json];\n          }\n          case \"success\": {\n            return [true, { type: \"boolean\" }];\n          }\n          case \"default\":\n          case \"prefault\": {\n            const default_ = schema2;\n            const [, json] = this.#convert(default_._zod.def.innerType, options2, lazyDepth2, structureDepth);\n            return [false, {\n              ...json,\n              default: default_._zod.def.defaultValue\n            }];\n          }\n          case \"catch\": {\n            const catch_ = schema2;\n            return this.#convert(catch_._zod.def.innerType, options2, lazyDepth2, structureDepth);\n          }\n          case \"nan\": {\n            return [true, options2.strategy === \"input\" ? this.unsupportedJsonSchema : { type: \"null\" }];\n          }\n          case \"pipe\": {\n            const pipe = schema2;\n            return this.#convert(options2.strategy === \"input\" ? pipe._zod.def.in : pipe._zod.def.out, options2, lazyDepth2, structureDepth);\n          }\n          case \"readonly\": {\n            const readonly_ = schema2;\n            const [required, json] = this.#convert(readonly_._zod.def.innerType, options2, lazyDepth2, structureDepth);\n            return [required, { ...json, readOnly: true }];\n          }\n          case \"template_literal\": {\n            const templateLiteral = schema2;\n            return [true, {\n              type: \"string\",\n              pattern: templateLiteral._zod.pattern.source\n            }];\n          }\n          case \"optional\": {\n            const optional = schema2;\n            const [, json] = this.#convert(optional._zod.def.innerType, options2, lazyDepth2, structureDepth);\n            return [false, json];\n          }\n          case \"lazy\": {\n            const lazy = schema2;\n            const currentLazyDepth = lazyDepth2 + 1;\n            if (currentLazyDepth > this.maxLazyDepth) {\n              return [false, this.anyJsonSchema];\n            }\n            return this.#convert(lazy._zod.def.getter(), options2, currentLazyDepth, structureDepth);\n          }\n          default: {\n            schema2._zod.def.type;\n            return [true, this.unsupportedJsonSchema];\n          }\n        }\n      }\n    );\n  }\n  #getCustomJsonSchema(schema, options) {\n    if (options.strategy === \"input\" && JSON_SCHEMA_INPUT_REGISTRY.has(schema)) {\n      return JSON_SCHEMA_INPUT_REGISTRY.get(schema);\n    }\n    if (options.strategy === \"output\" && JSON_SCHEMA_OUTPUT_REGISTRY.has(schema)) {\n      return JSON_SCHEMA_OUTPUT_REGISTRY.get(schema);\n    }\n    if (JSON_SCHEMA_REGISTRY.has(schema)) {\n      return JSON_SCHEMA_REGISTRY.get(schema);\n    }\n    const global = globalRegistry.get(schema);\n    if (global) {\n      return {\n        title: global.title,\n        description: global.description,\n        examples: Array.isArray(global.examples) ? global.examples : void 0\n      };\n    }\n  }\n  #handleArrayItemJsonSchema([required, schema], options) {\n    if (required || options.strategy === \"input\" || schema.default !== void 0) {\n      return schema;\n    }\n    if (schema === this.undefinedJsonSchema) {\n      return { type: \"null\" };\n    }\n    return {\n      anyOf: [\n        // schema can contain { type: 'null' } so we should use anyOf instead of oneOf\n        schema,\n        { type: \"null\" }\n      ]\n    };\n  }\n  #handleStringFormat(format) {\n    if (format === \"guid\") {\n      return JSONSchemaFormat.UUID;\n    }\n    if (format === \"url\") {\n      return JSONSchemaFormat.URI;\n    }\n    if (format === \"datetime\") {\n      return JSONSchemaFormat.DateTime;\n    }\n    return Object.values(JSONSchemaFormat).includes(format) ? format : void 0;\n  }\n  #handleContentEncoding(contentEncoding) {\n    return Object.values(JSONSchemaContentEncoding).includes(contentEncoding) ? contentEncoding : void 0;\n  }\n}\n\nexport { JSON_SCHEMA_INPUT_REGISTRY, JSON_SCHEMA_OUTPUT_REGISTRY, JSON_SCHEMA_REGISTRY, ZodToJsonSchemaConverter, experimental_ZodSmartCoercionPlugin };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}}]
}